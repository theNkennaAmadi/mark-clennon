var Mi=Object.defineProperty;var wi=(ie,ee,te)=>ee in ie?Mi(ie,ee,{enumerable:!0,configurable:!0,writable:!0,value:te}):ie[ee]=te;var li=(ie,ee,te)=>wi(ie,typeof ee!="symbol"?ee+"":ee,te);(function(ie){typeof define=="function"&&define.amd?define(ie):ie()})(function(){"use strict";function t$1(ie,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,typeof(re=function(se,ae){if(typeof se!="object"||se===null)return se;var oe=se[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(se,"string");if(typeof le!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(se)}(ne.key))=="symbol"?re:String(re),ne)}var re}function n(ie,ee,te){return ee&&t$1(ie.prototype,ee),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function r(){return r=Object.assign?Object.assign.bind():function(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var ne in te)Object.prototype.hasOwnProperty.call(te,ne)&&(ie[ne]=te[ne])}return ie},r.apply(this,arguments)}function i(ie,ee){ie.prototype=Object.create(ee.prototype),ie.prototype.constructor=ie,o(ie,ee)}function e$1(ie){return e$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},e$1(ie)}function o(ie,ee){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,ne){return te.__proto__=ne,te},o(ie,ee)}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(ie,ee,te){return s=u()?Reflect.construct.bind():function(ne,re,se){var ae=[null];ae.push.apply(ae,re);var oe=new(Function.bind.apply(ne,ae));return se&&o(oe,se.prototype),oe},s.apply(null,arguments)}function f(ie){var ee=typeof Map=="function"?new Map:void 0;return f=function(te){if(te===null||Function.toString.call(te).indexOf("[native code]")===-1)return te;if(typeof te!="function")throw new TypeError("Super expression must either be null or a function");if(ee!==void 0){if(ee.has(te))return ee.get(te);ee.set(te,ne)}function ne(){return s(te,arguments,e$1(this).constructor)}return ne.prototype=Object.create(te.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),o(ne,te)},f(ie)}function c(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}var a,h=function(){this.before=void 0,this.beforeLeave=void 0,this.leave=void 0,this.afterLeave=void 0,this.beforeEnter=void 0,this.enter=void 0,this.afterEnter=void 0,this.after=void 0};(function(ie){ie[ie.off=0]="off",ie[ie.error=1]="error",ie[ie.warning=2]="warning",ie[ie.info=3]="info",ie[ie.debug=4]="debug"})(a||(a={}));var v=a.off,d=function(){function ie(te){this.t=void 0,this.t=te}ie.getLevel=function(){return v},ie.setLevel=function(te){return v=a[te]};var ee=ie.prototype;return ee.error=function(){this.i(console.error,a.error,[].slice.call(arguments))},ee.warn=function(){this.i(console.warn,a.warning,[].slice.call(arguments))},ee.info=function(){this.i(console.info,a.info,[].slice.call(arguments))},ee.debug=function(){this.i(console.log,a.debug,[].slice.call(arguments))},ee.i=function(te,ne,re){ne<=ie.getLevel()&&te.apply(console,["["+this.t+"] "].concat(re))},ie}();function l(ie){return ie.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(ie){return ie&&ie.sensitive?"":"i"}var m={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},w=new(function(){function ie(){this.o=m,this.u=void 0,this.h={after:null,before:null,parent:null}}var ee=ie.prototype;return ee.toString=function(te){return te.outerHTML},ee.toDocument=function(te){return this.u||(this.u=new DOMParser),this.u.parseFromString(te,"text/html")},ee.toElement=function(te){var ne=document.createElement("div");return ne.innerHTML=te,ne},ee.getHtml=function(te){return te===void 0&&(te=document),this.toString(te.documentElement)},ee.getWrapper=function(te){return te===void 0&&(te=document),te.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},ee.getContainer=function(te){return te===void 0&&(te=document),te.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},ee.removeContainer=function(te){document.body.contains(te)&&(this.v(te),te.parentNode.removeChild(te))},ee.addContainer=function(te,ne){var re=this.getContainer()||this.h.before;re?this.l(te,re):this.h.after?this.h.after.parentNode.insertBefore(te,this.h.after):this.h.parent?this.h.parent.appendChild(te):ne.appendChild(te)},ee.getSibling=function(){return this.h},ee.getNamespace=function(te){te===void 0&&(te=document);var ne=te.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return ne?ne.getAttribute(this.o.prefix+"-"+this.o.namespace):null},ee.getHref=function(te){if(te.tagName&&te.tagName.toLowerCase()==="a"){if(typeof te.href=="string")return te.href;var ne=te.getAttribute("href")||te.getAttribute("xlink:href");if(ne)return this.resolveUrl(ne.baseVal||ne)}return null},ee.resolveUrl=function(){var te=[].slice.call(arguments).length;if(te===0)throw new Error("resolveUrl requires at least one argument; got none.");var ne=document.createElement("base");if(ne.href=arguments[0],te===1)return ne.href;var re=document.getElementsByTagName("head")[0];re.insertBefore(ne,re.firstChild);for(var se,ae=document.createElement("a"),oe=1;oe<te;oe++)ae.href=arguments[oe],ne.href=se=ae.href;return re.removeChild(ne),se},ee.l=function(te,ne){ne.parentNode.insertBefore(te,ne.nextSibling)},ee.v=function(te){return this.h={after:te.nextElementSibling,before:te.previousElementSibling,parent:te.parentElement},this.h},ie}()),b=function(){function ie(){this.p=void 0,this.m=[],this.P=-1}var ee=ie.prototype;return ee.init=function(te,ne){this.p="barba";var re={data:{},ns:ne,scroll:{x:window.scrollX,y:window.scrollY},url:te};this.P=0,this.m.push(re);var se={from:this.p,index:this.P,states:[].concat(this.m)};window.history&&window.history.replaceState(se,"",te)},ee.change=function(te,ne,re){if(re&&re.state){var se=re.state,ae=se.index;ne=this.g(this.P-ae),this.replace(se.states),this.P=ae}else this.add(te,ne);return ne},ee.add=function(te,ne,re,se){var ae=re??this.R(ne),oe={data:se??{},ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:te};switch(ae){case"push":this.P=this.size,this.m.push(oe);break;case"replace":this.set(this.P,oe)}var le={from:this.p,index:this.P,states:[].concat(this.m)};switch(ae){case"push":window.history&&window.history.pushState(le,"",te);break;case"replace":window.history&&window.history.replaceState(le,"",te)}},ee.store=function(te,ne){var re=ne||this.P,se=this.get(re);se.data=r({},se.data,te),this.set(re,se);var ae={from:this.p,index:this.P,states:[].concat(this.m)};window.history.replaceState(ae,"")},ee.update=function(te,ne){var re=ne||this.P,se=r({},this.get(re),te);this.set(re,se)},ee.remove=function(te){te?this.m.splice(te,1):this.m.pop(),this.P--},ee.clear=function(){this.m=[],this.P=-1},ee.replace=function(te){this.m=te},ee.get=function(te){return this.m[te]},ee.set=function(te,ne){return this.m[te]=ne},ee.R=function(te){var ne="push",re=te,se=m.prefix+"-"+m.history;return re.hasAttribute&&re.hasAttribute(se)&&(ne=re.getAttribute(se)),ne},ee.g=function(te){return Math.abs(te)>1?te>0?"forward":"back":te===0?"popstate":te>0?"back":"forward"},n(ie,[{key:"current",get:function(){return this.m[this.P]}},{key:"previous",get:function(){return this.P<1?null:this.m[this.P-1]}},{key:"size",get:function(){return this.m.length}}]),ie}(),y=new b,P=function(ie,ee){try{var te=function(){if(!ee.next.html)return Promise.resolve(ie).then(function(ne){var re=ee.next;if(ne){var se=w.toElement(ne.html);re.namespace=w.getNamespace(se),re.container=w.getContainer(se),re.url=ne.url,re.html=ne.html,y.update({ns:re.namespace});var ae=w.toDocument(ne.html);document.title=ae.title}})}();return Promise.resolve(te&&te.then?te.then(function(){}):void 0)}catch(ne){return Promise.reject(ne)}},E=function ie(ee,te,ne){return ee instanceof RegExp?function(re,se){if(!se)return re;for(var ae=/\((?:\?<(.*?)>)?(?!\?)/g,oe=0,le=ae.exec(re.source);le;)se.push({name:le[1]||oe++,prefix:"",suffix:"",modifier:"",pattern:""}),le=ae.exec(re.source);return re}(ee,te):Array.isArray(ee)?function(re,se,ae){var oe=re.map(function(le){return ie(le,se,ae).source});return new RegExp("(?:".concat(oe.join("|"),")"),p(ae))}(ee,te,ne):function(re,se,ae){return function(oe,le,ce){ce===void 0&&(ce={});for(var he=ce.strict,fe=he!==void 0&&he,ue=ce.start,de=ue===void 0||ue,ge=ce.end,me=ge===void 0||ge,ve=ce.encode,pe=ve===void 0?function(Ae){return Ae}:ve,ye=ce.delimiter,_e=ye===void 0?"/#?":ye,xe=ce.endsWith,Se="[".concat(l(xe===void 0?"":xe),"]|$"),be="[".concat(l(_e),"]"),Ee=de?"^":"",Pe=0,we=oe;Pe<we.length;Pe++){var Me=we[Pe];if(typeof Me=="string")Ee+=l(pe(Me));else{var De=l(pe(Me.prefix)),ke=l(pe(Me.suffix));if(Me.pattern)if(le&&le.push(Me),De||ke)if(Me.modifier==="+"||Me.modifier==="*"){var ze=Me.modifier==="*"?"?":"";Ee+="(?:".concat(De,"((?:").concat(Me.pattern,")(?:").concat(ke).concat(De,"(?:").concat(Me.pattern,"))*)").concat(ke,")").concat(ze)}else Ee+="(?:".concat(De,"(").concat(Me.pattern,")").concat(ke,")").concat(Me.modifier);else Ee+=Me.modifier==="+"||Me.modifier==="*"?"((?:".concat(Me.pattern,")").concat(Me.modifier,")"):"(".concat(Me.pattern,")").concat(Me.modifier);else Ee+="(?:".concat(De).concat(ke,")").concat(Me.modifier)}}if(me)fe||(Ee+="".concat(be,"?")),Ee+=ce.endsWith?"(?=".concat(Se,")"):"$";else{var Ve=oe[oe.length-1],Ue=typeof Ve=="string"?be.indexOf(Ve[Ve.length-1])>-1:Ve===void 0;fe||(Ee+="(?:".concat(be,"(?=").concat(Se,"))?")),Ue||(Ee+="(?=".concat(be,"|").concat(Se,")"))}return new RegExp(Ee,p(ce))}(function(oe,le){le===void 0&&(le={});for(var ce=function(ke){for(var ze=[],Ve=0;Ve<ke.length;){var Ue=ke[Ve];if(Ue!=="*"&&Ue!=="+"&&Ue!=="?")if(Ue!=="\\")if(Ue!=="{")if(Ue!=="}")if(Ue!==":")if(Ue!=="(")ze.push({type:"CHAR",index:Ve,value:ke[Ve++]});else{var Ae=1,Fe="";if(ke[Ce=Ve+1]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(Ce));for(;Ce<ke.length;)if(ke[Ce]!=="\\"){if(ke[Ce]===")"){if(--Ae==0){Ce++;break}}else if(ke[Ce]==="("&&(Ae++,ke[Ce+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(Ce));Fe+=ke[Ce++]}else Fe+=ke[Ce++]+ke[Ce++];if(Ae)throw new TypeError("Unbalanced pattern at ".concat(Ve));if(!Fe)throw new TypeError("Missing pattern at ".concat(Ve));ze.push({type:"PATTERN",index:Ve,value:Fe}),Ve=Ce}else{for(var Te="",Ce=Ve+1;Ce<ke.length;){var Le=ke.charCodeAt(Ce);if(!(Le>=48&&Le<=57||Le>=65&&Le<=90||Le>=97&&Le<=122||Le===95))break;Te+=ke[Ce++]}if(!Te)throw new TypeError("Missing parameter name at ".concat(Ve));ze.push({type:"NAME",index:Ve,value:Te}),Ve=Ce}else ze.push({type:"CLOSE",index:Ve,value:ke[Ve++]});else ze.push({type:"OPEN",index:Ve,value:ke[Ve++]});else ze.push({type:"ESCAPED_CHAR",index:Ve++,value:ke[Ve++]});else ze.push({type:"MODIFIER",index:Ve,value:ke[Ve++]})}return ze.push({type:"END",index:Ve,value:""}),ze}(oe),he=le.prefixes,fe=he===void 0?"./":he,ue="[^".concat(l(le.delimiter||"/#?"),"]+?"),de=[],ge=0,me=0,ve="",pe=function(ke){if(me<ce.length&&ce[me].type===ke)return ce[me++].value},ye=function(ke){var ze=pe(ke);if(ze!==void 0)return ze;var Ve=ce[me],Ue=Ve.index;throw new TypeError("Unexpected ".concat(Ve.type," at ").concat(Ue,", expected ").concat(ke))},_e=function(){for(var ke,ze="";ke=pe("CHAR")||pe("ESCAPED_CHAR");)ze+=ke;return ze};me<ce.length;){var xe=pe("CHAR"),Se=pe("NAME"),be=pe("PATTERN");if(Se||be)fe.indexOf(Pe=xe||"")===-1&&(ve+=Pe,Pe=""),ve&&(de.push(ve),ve=""),de.push({name:Se||ge++,prefix:Pe,suffix:"",pattern:be||ue,modifier:pe("MODIFIER")||""});else{var Ee=xe||pe("ESCAPED_CHAR");if(Ee)ve+=Ee;else if(ve&&(de.push(ve),ve=""),pe("OPEN")){var Pe=_e(),we=pe("NAME")||"",Me=pe("PATTERN")||"",De=_e();ye("CLOSE"),de.push({name:we||(Me?ge++:""),pattern:we&&!Me?ue:Me,prefix:Pe,suffix:De,modifier:pe("MODIFIER")||""})}else ye("END")}}return de}(re,ae),se,ae)}(ee,te,ne)},g={__proto__:null,update:P,nextTick:function(){return new Promise(function(ie){window.requestAnimationFrame(ie)})},pathToRegexp:E},x=function(){return window.location.origin},R=function(ie){return ie===void 0&&(ie=window.location.href),k(ie).port},k=function(ie){var ee,te=ie.match(/:\d+/);if(te===null)/^http/.test(ie)&&(ee=80),/^https/.test(ie)&&(ee=443);else{var ne=te[0].substring(1);ee=parseInt(ne,10)}var re,se=ie.replace(x(),""),ae={},oe=se.indexOf("#");oe>=0&&(re=se.slice(oe+1),se=se.slice(0,oe));var le=se.indexOf("?");return le>=0&&(ae=O(se.slice(le+1)),se=se.slice(0,le)),{hash:re,path:se,port:ee,query:ae}},O=function(ie){return ie.split("&").reduce(function(ee,te){var ne=te.split("=");return ee[ne[0]]=ne[1],ee},{})},T=function(ie){return ie===void 0&&(ie=window.location.href),ie.replace(/(\/#.*|\/|#.*)$/,"")},A={__proto__:null,getHref:function(){return window.location.href},getAbsoluteHref:function(ie,ee){return ee===void 0&&(ee=document.baseURI),new URL(ie,ee).href},getOrigin:x,getPort:R,getPath:function(ie){return ie===void 0&&(ie=window.location.href),k(ie).path},getQuery:function(ie,ee){return ee===void 0&&(ee=!1),ee?JSON.stringify(k(ie).query):k(ie).query},getHash:function(ie){return k(ie).hash},parse:k,parseQuery:O,clean:T};function j(ie,ee,te,ne,re){return ee===void 0&&(ee=2e3),new Promise(function(se,ae){var oe=new XMLHttpRequest;oe.onreadystatechange=function(){if(oe.readyState===XMLHttpRequest.DONE){if(oe.status===200){var le=oe.responseURL!==""&&oe.responseURL!==ie?oe.responseURL:ie;se({html:oe.responseText,url:r({href:le},k(le))}),ne.update(ie,{status:"fulfilled",target:le})}else if(oe.status){var ce={status:oe.status,statusText:oe.statusText};te(ie,ce),ae(ce),ne.update(ie,{status:"rejected"})}}},oe.ontimeout=function(){var le=new Error("Timeout error ["+ee+"]");te(ie,le),ae(le),ne.update(ie,{status:"rejected"})},oe.onerror=function(){var le=new Error("Fetch error");te(ie,le),ae(le),ne.update(ie,{status:"rejected"})},oe.open("GET",ie),oe.timeout=ee,oe.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),oe.setRequestHeader("x-barba","yes"),re.all().forEach(function(le,ce){oe.setRequestHeader(ce,le)}),oe.send()})}function M(ie){return!!ie&&(typeof ie=="object"||typeof ie=="function")&&typeof ie.then=="function"}function N(ie,ee){return ee===void 0&&(ee={}),function(){var te=arguments,ne=!1,re=new Promise(function(se,ae){ee.async=function(){return ne=!0,function(le,ce){le?ae(le):se(ce)}};var oe=ie.apply(ee,[].slice.call(te));ne||(M(oe)?oe.then(se,ae):se(oe))});return re}}var S=new(function(ie){function ee(){var ne;return(ne=ie.call(this)||this).logger=new d("@barba/core"),ne.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],ne.registered=new Map,ne.init(),ne}i(ee,ie);var te=ee.prototype;return te.init=function(){var ne=this;this.registered.clear(),this.all.forEach(function(re){ne[re]||(ne[re]=function(se,ae){ne.registered.has(re)||ne.registered.set(re,new Set),ne.registered.get(re).add({ctx:ae||{},fn:se})})})},te.do=function(ne){var re=arguments,se=this;if(this.registered.has(ne)){var ae=Promise.resolve();return this.registered.get(ne).forEach(function(oe){ae=ae.then(function(){return N(oe.fn,oe.ctx).apply(void 0,[].slice.call(re,1))})}),ae.catch(function(oe){se.logger.debug("Hook error ["+ne+"]"),se.logger.error(oe)})}return Promise.resolve()},te.clear=function(){var ne=this;this.all.forEach(function(re){delete ne[re]}),this.init()},te.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var ne=[];this.registered.forEach(function(re,se){return ne.push(se)}),this.logger.info("Registered hooks: "+ne.join(","))},ee}(h)),C=function(){function ie(ee){if(this.k=void 0,this.O=[],typeof ee=="boolean")this.k=ee;else{var te=Array.isArray(ee)?ee:[ee];this.O=te.map(function(ne){return E(ne)})}}return ie.prototype.checkHref=function(ee){if(typeof this.k=="boolean")return this.k;var te=k(ee).path;return this.O.some(function(ne){return ne.exec(te)!==null})},ie}(),L=function(ie){function ee(ne){var re;return(re=ie.call(this,ne)||this).T=new Map,re}i(ee,ie);var te=ee.prototype;return te.set=function(ne,re,se,ae,oe){return this.T.set(ne,{action:se,request:re,status:ae,target:oe??ne}),{action:se,request:re,status:ae,target:oe}},te.get=function(ne){return this.T.get(ne)},te.getRequest=function(ne){return this.T.get(ne).request},te.getAction=function(ne){return this.T.get(ne).action},te.getStatus=function(ne){return this.T.get(ne).status},te.getTarget=function(ne){return this.T.get(ne).target},te.has=function(ne){return!this.checkHref(ne)&&this.T.has(ne)},te.delete=function(ne){return this.T.delete(ne)},te.update=function(ne,re){var se=r({},this.T.get(ne),re);return this.T.set(ne,se),se},ee}(C),H=function(){function ie(){this.A=new Map}var ee=ie.prototype;return ee.set=function(te,ne){return this.A.set(te,ne),{name:ne}},ee.get=function(te){return this.A.get(te)},ee.all=function(){return this.A},ee.has=function(te){return this.A.has(te)},ee.delete=function(te){return this.A.delete(te)},ee.clear=function(){return this.A.clear()},ie}(),_=function(){return!window.history.pushState},D=function(ie){return!ie.el||!ie.href},B=function(ie){var ee=ie.event;return ee.which>1||ee.metaKey||ee.ctrlKey||ee.shiftKey||ee.altKey},q=function(ie){var ee=ie.el;return ee.hasAttribute("target")&&ee.target==="_blank"},F=function(ie){var ee=ie.el;return ee.protocol!==void 0&&window.location.protocol!==ee.protocol||ee.hostname!==void 0&&window.location.hostname!==ee.hostname},I=function(ie){var ee=ie.el;return ee.port!==void 0&&R()!==R(ee.href)},U=function(ie){var ee=ie.el;return ee.getAttribute&&typeof ee.getAttribute("download")=="string"},$=function(ie){return ie.el.hasAttribute(m.prefix+"-"+m.prevent)},Q=function(ie){return!!ie.el.closest("["+m.prefix+"-"+m.prevent+'="all"]')},X=function(ie){var ee=ie.href;return T(ee)===T()&&R(ee)===R()},z=function(ie){function ee(ne){var re;return(re=ie.call(this,ne)||this).suite=[],re.tests=new Map,re.init(),re}i(ee,ie);var te=ee.prototype;return te.init=function(){this.add("pushState",_),this.add("exists",D),this.add("newTab",B),this.add("blank",q),this.add("corsDomain",F),this.add("corsPort",I),this.add("download",U),this.add("preventSelf",$),this.add("preventAll",Q),this.add("sameUrl",X,!1)},te.add=function(ne,re,se){se===void 0&&(se=!0),this.tests.set(ne,re),se&&this.suite.push(ne)},te.run=function(ne,re,se,ae){return this.tests.get(ne)({el:re,event:se,href:ae})},te.checkLink=function(ne,re,se){var ae=this;return this.suite.some(function(oe){return ae.run(oe,ne,re,se)})},ee}(C),G=function(ie){function ee(te,ne){var re;return ne===void 0&&(ne="Barba error"),(re=ie.call.apply(ie,[this].concat([].slice.call(arguments,2)))||this).error=void 0,re.label=void 0,re.error=te,re.label=ne,Error.captureStackTrace&&Error.captureStackTrace(c(re),ee),re.name="BarbaError",re}return i(ee,ie),ee}(f(Error)),J=function(){function ie(te){te===void 0&&(te=[]),this.logger=new d("@barba/core"),this.all=[],this.page=[],this.once=[],this.j=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],te&&(this.all=this.all.concat(te)),this.update()}var ee=ie.prototype;return ee.add=function(te,ne){te==="rule"?this.j.splice(ne.position||0,0,ne.value):this.all.push(ne),this.update()},ee.resolve=function(te,ne){var re=this;ne===void 0&&(ne={});var se=ne.once?this.once:this.page;se=se.filter(ne.self?function(ue){return ue.name&&ue.name==="self"}:function(ue){return!ue.name||ue.name!=="self"});var ae=new Map,oe=se.find(function(ue){var de=!0,ge={};return ne.self&&ue.name==="self"?(ae.set(ue,ge),!0):(re.j.reverse().forEach(function(me){de&&(de=re.M(ue,me,te,ge),ue.from&&ue.to&&(de=re.M(ue,me,te,ge,"from")&&re.M(ue,me,te,ge,"to")),ue.from&&!ue.to&&(de=re.M(ue,me,te,ge,"from")),!ue.from&&ue.to&&(de=re.M(ue,me,te,ge,"to")))}),ae.set(ue,ge),de)}),le=ae.get(oe),ce=[];if(ce.push(ne.once?"once":"page"),ne.self&&ce.push("self"),le){var he,fe=[oe];Object.keys(le).length>0&&fe.push(le),(he=this.logger).info.apply(he,["Transition found ["+ce.join(",")+"]"].concat(fe))}else this.logger.info("No transition found ["+ce.join(",")+"]");return oe},ee.update=function(){var te=this;this.all=this.all.map(function(ne){return te.N(ne)}).sort(function(ne,re){return ne.priority-re.priority}).reverse().map(function(ne){return delete ne.priority,ne}),this.page=this.all.filter(function(ne){return ne.leave!==void 0||ne.enter!==void 0}),this.once=this.all.filter(function(ne){return ne.once!==void 0})},ee.M=function(te,ne,re,se,ae){var oe=!0,le=!1,ce=te,he=ne.name,fe=he,ue=he,de=he,ge=ae?ce[ae]:ce,me=ae==="to"?re.next:re.current;if(ae?ge&&ge[he]:ge[he]){switch(ne.type){case"strings":default:var ve=Array.isArray(ge[fe])?ge[fe]:[ge[fe]];me[fe]&&ve.indexOf(me[fe])!==-1&&(le=!0),ve.indexOf(me[fe])===-1&&(oe=!1);break;case"object":var pe=Array.isArray(ge[ue])?ge[ue]:[ge[ue]];me[ue]?(me[ue].name&&pe.indexOf(me[ue].name)!==-1&&(le=!0),pe.indexOf(me[ue].name)===-1&&(oe=!1)):oe=!1;break;case"function":ge[de](re)?le=!0:oe=!1}le&&(ae?(se[ae]=se[ae]||{},se[ae][he]=ce[ae][he]):se[he]=ce[he])}return oe},ee.S=function(te,ne,re){var se=0;return(te[ne]||te.from&&te.from[ne]||te.to&&te.to[ne])&&(se+=Math.pow(10,re),te.from&&te.from[ne]&&(se+=1),te.to&&te.to[ne]&&(se+=2)),se},ee.N=function(te){var ne=this;te.priority=0;var re=0;return this.j.forEach(function(se,ae){re+=ne.S(te,se.name,ae+1)}),te.priority=re,te},ie}();function W(ie,ee){try{var te=ie()}catch(ne){return ee(ne)}return te&&te.then?te.then(void 0,ee):te}var K=function(){function ie(te){te===void 0&&(te=[]),this.logger=new d("@barba/core"),this.store=void 0,this.C=!1,this.store=new J(te)}var ee=ie.prototype;return ee.get=function(te,ne){return this.store.resolve(te,ne)},ee.doOnce=function(te){var ne=te.data,re=te.transition;try{var se=function(){ae.C=!1},ae=this,oe=re||{};ae.C=!0;var le=W(function(){return Promise.resolve(ae.L("beforeOnce",ne,oe)).then(function(){return Promise.resolve(ae.once(ne,oe)).then(function(){return Promise.resolve(ae.L("afterOnce",ne,oe)).then(function(){})})})},function(ce){ae.C=!1,ae.logger.debug("Transition error [before/after/once]"),ae.logger.error(ce)});return Promise.resolve(le&&le.then?le.then(se):se())}catch(ce){return Promise.reject(ce)}},ee.doPage=function(te){var ne=te.data,re=te.transition,se=te.page,ae=te.wrapper;try{var oe=function(ue){le.C=!1},le=this,ce=re||{},he=ce.sync===!0||!1;le.C=!0;var fe=W(function(){function ue(){return Promise.resolve(le.L("before",ne,ce)).then(function(){function ge(ve){return Promise.resolve(le.remove(ne)).then(function(){return Promise.resolve(le.L("after",ne,ce)).then(function(){})})}var me=function(){if(he)return W(function(){return Promise.resolve(le.add(ne,ae)).then(function(){return Promise.resolve(le.L("beforeLeave",ne,ce)).then(function(){return Promise.resolve(le.L("beforeEnter",ne,ce)).then(function(){return Promise.resolve(Promise.all([le.leave(ne,ce),le.enter(ne,ce)])).then(function(){return Promise.resolve(le.L("afterLeave",ne,ce)).then(function(){return Promise.resolve(le.L("afterEnter",ne,ce)).then(function(){})})})})})})},function(_e){if(le.H(_e))throw new G(_e,"Transition error [sync]")});var ve=function(_e){return W(function(){var xe=function(){if(pe!==!1)return Promise.resolve(le.add(ne,ae)).then(function(){return Promise.resolve(le.L("beforeEnter",ne,ce)).then(function(){return Promise.resolve(le.enter(ne,ce,pe)).then(function(){return Promise.resolve(le.L("afterEnter",ne,ce)).then(function(){})})})})}();if(xe&&xe.then)return xe.then(function(){})},function(xe){if(le.H(xe))throw new G(xe,"Transition error [before/after/enter]")})},pe=!1,ye=W(function(){return Promise.resolve(le.L("beforeLeave",ne,ce)).then(function(){return Promise.resolve(Promise.all([le.leave(ne,ce),P(se,ne)]).then(function(_e){return _e[0]})).then(function(_e){return pe=_e,Promise.resolve(le.L("afterLeave",ne,ce)).then(function(){})})})},function(_e){if(le.H(_e))throw new G(_e,"Transition error [before/after/leave]")});return ye&&ye.then?ye.then(ve):ve()}();return me&&me.then?me.then(ge):ge()})}var de=function(){if(he)return Promise.resolve(P(se,ne)).then(function(){})}();return de&&de.then?de.then(ue):ue()},function(ue){throw le.C=!1,ue.name&&ue.name==="BarbaError"?(le.logger.debug(ue.label),le.logger.error(ue.error),ue):(le.logger.debug("Transition error [page]"),le.logger.error(ue),ue)});return Promise.resolve(fe&&fe.then?fe.then(oe):oe())}catch(ue){return Promise.reject(ue)}},ee.once=function(te,ne){try{return Promise.resolve(S.do("once",te,ne)).then(function(){return ne.once?N(ne.once,ne)(te):Promise.resolve()})}catch(re){return Promise.reject(re)}},ee.leave=function(te,ne){try{return Promise.resolve(S.do("leave",te,ne)).then(function(){return ne.leave?N(ne.leave,ne)(te):Promise.resolve()})}catch(re){return Promise.reject(re)}},ee.enter=function(te,ne,re){try{return Promise.resolve(S.do("enter",te,ne)).then(function(){return ne.enter?N(ne.enter,ne)(te,re):Promise.resolve()})}catch(se){return Promise.reject(se)}},ee.add=function(te,ne){try{return w.addContainer(te.next.container,ne),S.do("nextAdded",te),Promise.resolve()}catch(re){return Promise.reject(re)}},ee.remove=function(te){try{return w.removeContainer(te.current.container),S.do("currentRemoved",te),Promise.resolve()}catch(ne){return Promise.reject(ne)}},ee.H=function(te){return te.message?!/Timeout error|Fetch error/.test(te.message):!te.status},ee.L=function(te,ne,re){try{return Promise.resolve(S.do(te,ne,re)).then(function(){return re[te]?N(re[te],re)(ne):Promise.resolve()})}catch(se){return Promise.reject(se)}},n(ie,[{key:"isRunning",get:function(){return this.C},set:function(te){this.C=te}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(te){return te.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(te){return te.to&&!te.to.route||te.sync})}}]),ie}(),V=function(){function ie(ee){var te=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,ee.length!==0&&(ee.forEach(function(ne){te.byNamespace.set(ne.namespace,ne)}),this.names.forEach(function(ne){S[ne](te._(ne))}))}return ie.prototype._=function(ee){var te=this;return function(ne){var re=ee.match(/enter/i)?ne.next:ne.current,se=te.byNamespace.get(re.namespace);return se&&se[ee]?N(se[ee],se)(ne):Promise.resolve()}},ie}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(ie){var ee=this;do{if(ee.matches(ie))return ee;ee=ee.parentElement||ee.parentNode}while(ee!==null&&ee.nodeType===1);return null});var Y={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Z=new(function(){function ie(){this.version="2.10.0",this.schemaPage=Y,this.Logger=d,this.logger=new d("@barba/core"),this.plugins=[],this.timeout=void 0,this.cacheIgnore=void 0,this.cacheFirstPage=void 0,this.prefetchIgnore=void 0,this.preventRunning=void 0,this.hooks=S,this.cache=void 0,this.headers=void 0,this.prevent=void 0,this.transitions=void 0,this.views=void 0,this.dom=w,this.helpers=g,this.history=y,this.request=j,this.url=A,this.D=void 0,this.B=void 0,this.q=void 0,this.F=void 0}var ee=ie.prototype;return ee.use=function(te,ne){var re=this.plugins;re.indexOf(te)>-1?this.logger.warn("Plugin ["+te.name+"] already installed."):typeof te.install=="function"?(te.install(this,ne),re.push(te)):this.logger.warn("Plugin ["+te.name+'] has no "install" method.')},ee.init=function(te){var ne=te===void 0?{}:te,re=ne.transitions,se=re===void 0?[]:re,ae=ne.views,oe=ae===void 0?[]:ae,le=ne.schema,ce=le===void 0?m:le,he=ne.requestError,fe=ne.timeout,ue=fe===void 0?2e3:fe,de=ne.cacheIgnore,ge=de!==void 0&&de,me=ne.cacheFirstPage,ve=me!==void 0&&me,pe=ne.prefetchIgnore,ye=pe!==void 0&&pe,_e=ne.preventRunning,xe=_e!==void 0&&_e,Se=ne.prevent,be=Se===void 0?null:Se,Ee=ne.debug,Pe=ne.logLevel;if(d.setLevel((Ee!==void 0&&Ee)===!0?"debug":Pe===void 0?"off":Pe),this.logger.info(this.version),Object.keys(ce).forEach(function(De){m[De]&&(m[De]=ce[De])}),this.B=he,this.timeout=ue,this.cacheIgnore=ge,this.cacheFirstPage=ve,this.prefetchIgnore=ye,this.preventRunning=xe,this.q=this.dom.getWrapper(),!this.q)throw new Error("[@barba/core] No Barba wrapper found");this.I();var we=this.data.current;if(!we.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new L(ge),this.headers=new H,this.prevent=new z(ye),this.transitions=new K(se),this.views=new V(oe),be!==null){if(typeof be!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",be)}this.history.init(we.url.href,we.namespace),ve&&this.cache.set(we.url.href,Promise.resolve({html:we.html,url:we.url}),"init","fulfilled"),this.U=this.U.bind(this),this.$=this.$.bind(this),this.X=this.X.bind(this),this.G(),this.plugins.forEach(function(De){return De.init()});var Me=this.data;Me.trigger="barba",Me.next=Me.current,Me.current=r({},this.schemaPage),this.hooks.do("ready",Me),this.once(Me),this.I()},ee.destroy=function(){this.I(),this.J(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ee.force=function(te){window.location.assign(te)},ee.go=function(te,ne,re){var se;if(ne===void 0&&(ne="barba"),this.F=null,this.transitions.isRunning)this.force(te);else if(!(se=ne==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(te)&&this.url.getQuery(this.history.current.url,!0)===this.url.getQuery(te,!0):this.prevent.run("sameUrl",null,null,te))||this.transitions.hasSelf)return ne=this.history.change(this.cache.has(te)?this.cache.get(te).target:te,ne,re),re&&(re.stopPropagation(),re.preventDefault()),this.page(te,ne,re??void 0,se)},ee.once=function(te){try{var ne=this;return Promise.resolve(ne.hooks.do("beforeEnter",te)).then(function(){function re(){return Promise.resolve(ne.hooks.do("afterEnter",te)).then(function(){})}var se=function(){if(ne.transitions.hasOnce){var ae=ne.transitions.get(te,{once:!0});return Promise.resolve(ne.transitions.doOnce({transition:ae,data:te})).then(function(){})}}();return se&&se.then?se.then(re):re()})}catch(re){return Promise.reject(re)}},ee.page=function(te,ne,re,se){try{var ae,oe=function(){var fe=le.data;return Promise.resolve(le.hooks.do("page",fe)).then(function(){var ue=function(de,ge){try{var me=(ve=le.transitions.get(fe,{once:!1,self:se}),Promise.resolve(le.transitions.doPage({data:fe,page:ae,transition:ve,wrapper:le.q})).then(function(){le.I()}))}catch{return ge()}var ve;return me&&me.then?me.then(void 0,ge):me}(0,function(){d.getLevel()===0&&le.force(fe.next.url.href)});if(ue&&ue.then)return ue.then(function(){})})},le=this;if(le.data.next.url=r({href:te},le.url.parse(te)),le.data.trigger=ne,le.data.event=re,le.cache.has(te))ae=le.cache.update(te,{action:"click"}).request;else{var ce=le.request(te,le.timeout,le.onRequestError.bind(le,ne),le.cache,le.headers);ce.then(function(fe){fe.url.href!==te&&le.history.add(fe.url.href,ne,"replace")}),ae=le.cache.set(te,ce,"click","pending").request}var he=function(){if(le.transitions.shouldWait)return Promise.resolve(P(ae,le.data)).then(function(){})}();return Promise.resolve(he&&he.then?he.then(oe):oe())}catch(fe){return Promise.reject(fe)}},ee.onRequestError=function(te){this.transitions.isRunning=!1;var ne=[].slice.call(arguments,1),re=ne[0],se=ne[1],ae=this.cache.getAction(re);return this.cache.delete(re),this.B&&this.B(te,ae,re,se)===!1||ae==="click"&&this.force(re),!1},ee.prefetch=function(te){var ne=this;te=this.url.getAbsoluteHref(te),this.cache.has(te)||this.cache.set(te,this.request(te,this.timeout,this.onRequestError.bind(this,"barba"),this.cache,this.headers).catch(function(re){ne.logger.error(re)}),"prefetch","pending")},ee.G=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this.$),window.addEventListener("popstate",this.X)},ee.J=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this.$),window.removeEventListener("popstate",this.X)},ee.U=function(te){var ne=this,re=this.W(te);if(re){var se=this.url.getAbsoluteHref(this.dom.getHref(re));this.prevent.checkHref(se)||this.cache.has(se)||this.cache.set(se,this.request(se,this.timeout,this.onRequestError.bind(this,re),this.cache,this.headers).catch(function(ae){ne.logger.error(ae)}),"enter","pending")}},ee.$=function(te){this.F=te;var ne=this.W(te);if(ne)return this.transitions.isRunning&&this.preventRunning?(te.preventDefault(),void te.stopPropagation()):void this.go(this.dom.getHref(ne),ne,te)},ee.X=function(te){this.F&&!this.W(this.F)||this.go(this.url.getHref(),"popstate",te)},ee.W=function(te){for(var ne=te.target;ne&&!this.dom.getHref(ne);)ne=ne.parentNode;if(ne&&!this.prevent.checkLink(ne,te,this.dom.getHref(ne)))return ne},ee.I=function(){var te=this.url.getHref(),ne={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:r({href:te},this.url.parse(te))};this.D={current:ne,event:void 0,next:r({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},n(ie,[{key:"data",get:function(){return this.D}},{key:"wrapper",get:function(){return this.q}}]),ie}());function _assertThisInitialized(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function _inheritsLoose(ie,ee){ie.prototype=Object.create(ee.prototype),ie.prototype.constructor=ie,ie.__proto__=ee}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config$1={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults$1={duration:.5,overwrite:!1,delay:0},_suppressOverwrites$1,_reverting$1,_context$2,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString$2=function(ee){return typeof ee=="string"},_isFunction$2=function(ee){return typeof ee=="function"},_isNumber$1=function(ee){return typeof ee=="number"},_isUndefined=function(ee){return typeof ee>"u"},_isObject$1=function(ee){return typeof ee=="object"},_isNotFalse=function(ee){return ee!==!1},_windowExists$3=function(){return typeof window<"u"},_isFuncOrString=function(ee){return _isFunction$2(ee)||_isString$2(ee)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$4,_coreInitted$3,_doc$4,_globals={},_installScope={},_coreReady,_install=function(ee){return(_installScope=_merge(ee,_globals))&&gsap$4},_missingPlugin=function(ee,te){return console.warn("Invalid property",ee,"set to",te,"Missing plugin? gsap.registerPlugin()")},_warn=function(ee,te){return!te&&console.warn(ee)},_addGlobal=function(ee,te){return ee&&(_globals[ee]=te)&&_installScope&&(_installScope[ee]=te)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(ee){var te=ee[0],ne,re;if(_isObject$1(te)||_isFunction$2(te)||(ee=[ee]),!(ne=(te._gsap||{}).harness)){for(re=_harnessPlugins.length;re--&&!_harnessPlugins[re].targetTest(te););ne=_harnessPlugins[re]}for(re=ee.length;re--;)ee[re]&&(ee[re]._gsap||(ee[re]._gsap=new GSCache(ee[re],ne)))||ee.splice(re,1);return ee},_getCache=function(ee){return ee._gsap||_harness(toArray(ee))[0]._gsap},_getProperty=function(ee,te,ne){return(ne=ee[te])&&_isFunction$2(ne)?ee[te]():_isUndefined(ne)&&ee.getAttribute&&ee.getAttribute(te)||ne},_forEachName=function(ee,te){return(ee=ee.split(",")).forEach(te)||ee},_round$2=function(ee){return Math.round(ee*1e5)/1e5||0},_roundPrecise=function(ee){return Math.round(ee*1e7)/1e7||0},_parseRelative=function(ee,te){var ne=te.charAt(0),re=parseFloat(te.substr(2));return ee=parseFloat(ee),ne==="+"?ee+re:ne==="-"?ee-re:ne==="*"?ee*re:ee/re},_arrayContainsAny=function(ee,te){for(var ne=te.length,re=0;ee.indexOf(te[re])<0&&++re<ne;);return re<ne},_lazyRender=function(){var ee=_lazyTweens.length,te=_lazyTweens.slice(0),ne,re;for(_lazyLookup={},_lazyTweens.length=0,ne=0;ne<ee;ne++)re=te[ne],re&&re._lazy&&(re.render(re._lazy[0],re._lazy[1],!0)._lazy=0)},_lazySafeRender=function(ee,te,ne,re){_lazyTweens.length&&!_reverting$1&&_lazyRender(),ee.render(te,ne,_reverting$1&&te<0&&(ee._initted||ee._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(ee){var te=parseFloat(ee);return(te||te===0)&&(ee+"").match(_delimitedValueExp).length<2?te:_isString$2(ee)?ee.trim():ee},_passThrough$1=function(ee){return ee},_setDefaults$1=function(ee,te){for(var ne in te)ne in ee||(ee[ne]=te[ne]);return ee},_setKeyframeDefaults=function(ee){return function(te,ne){for(var re in ne)re in te||re==="duration"&&ee||re==="ease"||(te[re]=ne[re])}},_merge=function(ee,te){for(var ne in te)ee[ne]=te[ne];return ee},_mergeDeep=function ie(ee,te){for(var ne in te)ne!=="__proto__"&&ne!=="constructor"&&ne!=="prototype"&&(ee[ne]=_isObject$1(te[ne])?ie(ee[ne]||(ee[ne]={}),te[ne]):te[ne]);return ee},_copyExcluding=function(ee,te){var ne={},re;for(re in ee)re in te||(ne[re]=ee[re]);return ne},_inheritDefaults=function(ee){var te=ee.parent||_globalTimeline,ne=ee.keyframes?_setKeyframeDefaults(_isArray(ee.keyframes)):_setDefaults$1;if(_isNotFalse(ee.inherit))for(;te;)ne(ee,te.vars.defaults),te=te.parent||te._dp;return ee},_arraysMatch=function(ee,te){for(var ne=ee.length,re=ne===te.length;re&&ne--&&ee[ne]===te[ne];);return ne<0},_addLinkedListItem=function(ee,te,ne,re,se){var ae=ee[re],oe;if(se)for(oe=te[se];ae&&ae[se]>oe;)ae=ae._prev;return ae?(te._next=ae._next,ae._next=te):(te._next=ee[ne],ee[ne]=te),te._next?te._next._prev=te:ee[re]=te,te._prev=ae,te.parent=te._dp=ee,te},_removeLinkedListItem=function(ee,te,ne,re){ne===void 0&&(ne="_first"),re===void 0&&(re="_last");var se=te._prev,ae=te._next;se?se._next=ae:ee[ne]===te&&(ee[ne]=ae),ae?ae._prev=se:ee[re]===te&&(ee[re]=se),te._next=te._prev=te.parent=null},_removeFromParent=function(ee,te){ee.parent&&(!te||ee.parent.autoRemoveChildren)&&ee.parent.remove&&ee.parent.remove(ee),ee._act=0},_uncache=function(ee,te){if(ee&&(!te||te._end>ee._dur||te._start<0))for(var ne=ee;ne;)ne._dirty=1,ne=ne.parent;return ee},_recacheAncestors=function(ee){for(var te=ee.parent;te&&te.parent;)te._dirty=1,te.totalDuration(),te=te.parent;return ee},_rewindStartAt=function(ee,te,ne,re){return ee._startAt&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee.vars.immediateRender&&!ee.vars.autoRevert||ee._startAt.render(te,!0,re))},_hasNoPausedAncestors=function ie(ee){return!ee||ee._ts&&ie(ee.parent)},_elapsedCycleDuration=function(ee){return ee._repeat?_animationCycle(ee._tTime,ee=ee.duration()+ee._rDelay)*ee:0},_animationCycle=function(ee,te){var ne=Math.floor(ee/=te);return ee&&ne===ee?ne-1:ne},_parentToChildTotalTime=function(ee,te){return(ee-te._start)*te._ts+(te._ts>=0?0:te._dirty?te.totalDuration():te._tDur)},_setEnd=function(ee){return ee._end=_roundPrecise(ee._start+(ee._tDur/Math.abs(ee._ts||ee._rts||_tinyNum)||0))},_alignPlayhead=function(ee,te){var ne=ee._dp;return ne&&ne.smoothChildTiming&&ee._ts&&(ee._start=_roundPrecise(ne._time-(ee._ts>0?te/ee._ts:((ee._dirty?ee.totalDuration():ee._tDur)-te)/-ee._ts)),_setEnd(ee),ne._dirty||_uncache(ne,ee)),ee},_postAddChecks=function(ee,te){var ne;if((te._time||!te._dur&&te._initted||te._start<ee._time&&(te._dur||!te.add))&&(ne=_parentToChildTotalTime(ee.rawTime(),te),(!te._dur||_clamp$1(0,te.totalDuration(),ne)-te._tTime>_tinyNum)&&te.render(ne,!0)),_uncache(ee,te)._dp&&ee._initted&&ee._time>=ee._dur&&ee._ts){if(ee._dur<ee.duration())for(ne=ee;ne._dp;)ne.rawTime()>=0&&ne.totalTime(ne._tTime),ne=ne._dp;ee._zTime=-_tinyNum}},_addToTimeline=function(ee,te,ne,re){return te.parent&&_removeFromParent(te),te._start=_roundPrecise((_isNumber$1(ne)?ne:ne||ee!==_globalTimeline?_parsePosition$1(ee,ne,te):ee._time)+te._delay),te._end=_roundPrecise(te._start+(te.totalDuration()/Math.abs(te.timeScale())||0)),_addLinkedListItem(ee,te,"_first","_last",ee._sort?"_start":0),_isFromOrFromStart(te)||(ee._recent=te),re||_postAddChecks(ee,te),ee._ts<0&&_alignPlayhead(ee,ee._tTime),ee},_scrollTrigger=function(ee,te){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",te))&&_globals.ScrollTrigger.create(te,ee)},_attemptInitTween=function(ee,te,ne,re,se){if(_initTween(ee,te,se),!ee._initted)return 1;if(!ne&&ee._pt&&!_reverting$1&&(ee._dur&&ee.vars.lazy!==!1||!ee._dur&&ee.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(ee),ee._lazy=[se,re],1},_parentPlayheadIsBeforeStart=function ie(ee){var te=ee.parent;return te&&te._ts&&te._initted&&!te._lock&&(te.rawTime()<0||ie(te))},_isFromOrFromStart=function(ee){var te=ee.data;return te==="isFromStart"||te==="isStart"},_renderZeroDurationTween=function(ee,te,ne,re){var se=ee.ratio,ae=te<0||!te&&(!ee._start&&_parentPlayheadIsBeforeStart(ee)&&!(!ee._initted&&_isFromOrFromStart(ee))||(ee._ts<0||ee._dp._ts<0)&&!_isFromOrFromStart(ee))?0:1,oe=ee._rDelay,le=0,ce,he,fe;if(oe&&ee._repeat&&(le=_clamp$1(0,ee._tDur,te),he=_animationCycle(le,oe),ee._yoyo&&he&1&&(ae=1-ae),he!==_animationCycle(ee._tTime,oe)&&(se=1-ae,ee.vars.repeatRefresh&&ee._initted&&ee.invalidate())),ae!==se||_reverting$1||re||ee._zTime===_tinyNum||!te&&ee._zTime){if(!ee._initted&&_attemptInitTween(ee,te,re,ne,le))return;for(fe=ee._zTime,ee._zTime=te||(ne?_tinyNum:0),ne||(ne=te&&!fe),ee.ratio=ae,ee._from&&(ae=1-ae),ee._time=0,ee._tTime=le,ce=ee._pt;ce;)ce.r(ae,ce.d),ce=ce._next;te<0&&_rewindStartAt(ee,te,ne,!0),ee._onUpdate&&!ne&&_callback$1(ee,"onUpdate"),le&&ee._repeat&&!ne&&ee.parent&&_callback$1(ee,"onRepeat"),(te>=ee._tDur||te<0)&&ee.ratio===ae&&(ae&&_removeFromParent(ee,1),!ne&&!_reverting$1&&(_callback$1(ee,ae?"onComplete":"onReverseComplete",!0),ee._prom&&ee._prom()))}else ee._zTime||(ee._zTime=te)},_findNextPauseTween=function(ee,te,ne){var re;if(ne>te)for(re=ee._first;re&&re._start<=ne;){if(re.data==="isPause"&&re._start>te)return re;re=re._next}else for(re=ee._last;re&&re._start>=ne;){if(re.data==="isPause"&&re._start<te)return re;re=re._prev}},_setDuration=function(ee,te,ne,re){var se=ee._repeat,ae=_roundPrecise(te)||0,oe=ee._tTime/ee._tDur;return oe&&!re&&(ee._time*=ae/ee._dur),ee._dur=ae,ee._tDur=se?se<0?1e10:_roundPrecise(ae*(se+1)+ee._rDelay*se):ae,oe>0&&!re&&_alignPlayhead(ee,ee._tTime=ee._tDur*oe),ee.parent&&_setEnd(ee),ne||_uncache(ee.parent,ee),ee},_onUpdateTotalDuration=function(ee){return ee instanceof Timeline?_uncache(ee):_setDuration(ee,ee._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition$1=function ie(ee,te,ne){var re=ee.labels,se=ee._recent||_zeroPosition,ae=ee.duration()>=_bigNum$1?se.endTime(!1):ee._dur,oe,le,ce;return _isString$2(te)&&(isNaN(te)||te in re)?(le=te.charAt(0),ce=te.substr(-1)==="%",oe=te.indexOf("="),le==="<"||le===">"?(oe>=0&&(te=te.replace(/=/,"")),(le==="<"?se._start:se.endTime(se._repeat>=0))+(parseFloat(te.substr(1))||0)*(ce?(oe<0?se:ne).totalDuration()/100:1)):oe<0?(te in re||(re[te]=ae),re[te]):(le=parseFloat(te.charAt(oe-1)+te.substr(oe+1)),ce&&ne&&(le=le/100*(_isArray(ne)?ne[0]:ne).totalDuration()),oe>1?ie(ee,te.substr(0,oe-1),ne)+le:ae+le)):te==null?ae:+te},_createTweenType=function(ee,te,ne){var re=_isNumber$1(te[1]),se=(re?2:1)+(ee<2?0:1),ae=te[se],oe,le;if(re&&(ae.duration=te[1]),ae.parent=ne,ee){for(oe=ae,le=ne;le&&!("immediateRender"in oe);)oe=le.vars.defaults||{},le=_isNotFalse(le.vars.inherit)&&le.parent;ae.immediateRender=_isNotFalse(oe.immediateRender),ee<2?ae.runBackwards=1:ae.startAt=te[se-1]}return new Tween(te[0],ae,te[se+1])},_conditionalReturn=function(ee,te){return ee||ee===0?te(ee):te},_clamp$1=function(ee,te,ne){return ne<ee?ee:ne>te?te:ne},getUnit=function(ee,te){return!_isString$2(ee)||!(te=_unitExp.exec(ee))?"":te[1]},clamp$2=function(ee,te,ne){return _conditionalReturn(ne,function(re){return _clamp$1(ee,te,re)})},_slice=[].slice,_isArrayLike=function(ee,te){return ee&&_isObject$1(ee)&&"length"in ee&&(!te&&!ee.length||ee.length-1 in ee&&_isObject$1(ee[0]))&&!ee.nodeType&&ee!==_win$4},_flatten=function(ee,te,ne){return ne===void 0&&(ne=[]),ee.forEach(function(re){var se;return _isString$2(re)&&!te||_isArrayLike(re,1)?(se=ne).push.apply(se,toArray(re)):ne.push(re)})||ne},toArray=function(ee,te,ne){return _context$2&&!te&&_context$2.selector?_context$2.selector(ee):_isString$2(ee)&&!ne&&(_coreInitted$3||!_wake())?_slice.call((te||_doc$4).querySelectorAll(ee),0):_isArray(ee)?_flatten(ee,ne):_isArrayLike(ee)?_slice.call(ee,0):ee?[ee]:[]},selector=function(ee){return ee=toArray(ee)[0]||_warn("Invalid scope")||{},function(te){var ne=ee.current||ee.nativeElement||ee;return toArray(te,ne.querySelectorAll?ne:ne===ee?_warn("Invalid scope")||_doc$4.createElement("div"):ee)}},shuffle=function(ee){return ee.sort(function(){return .5-Math.random()})},distribute=function(ee){if(_isFunction$2(ee))return ee;var te=_isObject$1(ee)?ee:{each:ee},ne=_parseEase(te.ease),re=te.from||0,se=parseFloat(te.base)||0,ae={},oe=re>0&&re<1,le=isNaN(re)||oe,ce=te.axis,he=re,fe=re;return _isString$2(re)?he=fe={center:.5,edges:.5,end:1}[re]||0:!oe&&le&&(he=re[0],fe=re[1]),function(ue,de,ge){var me=(ge||te).length,ve=ae[me],pe,ye,_e,xe,Se,be,Ee,Pe,we;if(!ve){if(we=te.grid==="auto"?0:(te.grid||[1,_bigNum$1])[1],!we){for(Ee=-_bigNum$1;Ee<(Ee=ge[we++].getBoundingClientRect().left)&&we<me;);we<me&&we--}for(ve=ae[me]=[],pe=le?Math.min(we,me)*he-.5:re%we,ye=we===_bigNum$1?0:le?me*fe/we-.5:re/we|0,Ee=0,Pe=_bigNum$1,be=0;be<me;be++)_e=be%we-pe,xe=ye-(be/we|0),ve[be]=Se=ce?Math.abs(ce==="y"?xe:_e):_sqrt(_e*_e+xe*xe),Se>Ee&&(Ee=Se),Se<Pe&&(Pe=Se);re==="random"&&shuffle(ve),ve.max=Ee-Pe,ve.min=Pe,ve.v=me=(parseFloat(te.amount)||parseFloat(te.each)*(we>me?me-1:ce?ce==="y"?me/we:we:Math.max(we,me/we))||0)*(re==="edges"?-1:1),ve.b=me<0?se-me:se,ve.u=getUnit(te.amount||te.each)||0,ne=ne&&me<0?_invertEase(ne):ne}return me=(ve[ue]-ve.min)/ve.max||0,_roundPrecise(ve.b+(ne?ne(me):me)*ve.v)+ve.u}},_roundModifier=function(ee){var te=Math.pow(10,((ee+"").split(".")[1]||"").length);return function(ne){var re=_roundPrecise(Math.round(parseFloat(ne)/ee)*ee*te);return(re-re%1)/te+(_isNumber$1(ne)?0:getUnit(ne))}},snap=function(ee,te){var ne=_isArray(ee),re,se;return!ne&&_isObject$1(ee)&&(re=ne=ee.radius||_bigNum$1,ee.values?(ee=toArray(ee.values),(se=!_isNumber$1(ee[0]))&&(re*=re)):ee=_roundModifier(ee.increment)),_conditionalReturn(te,ne?_isFunction$2(ee)?function(ae){return se=ee(ae),Math.abs(se-ae)<=re?se:ae}:function(ae){for(var oe=parseFloat(se?ae.x:ae),le=parseFloat(se?ae.y:0),ce=_bigNum$1,he=0,fe=ee.length,ue,de;fe--;)se?(ue=ee[fe].x-oe,de=ee[fe].y-le,ue=ue*ue+de*de):ue=Math.abs(ee[fe]-oe),ue<ce&&(ce=ue,he=fe);return he=!re||ce<=re?ee[he]:ae,se||he===ae||_isNumber$1(ae)?he:he+getUnit(ae)}:_roundModifier(ee))},random=function(ee,te,ne,re){return _conditionalReturn(_isArray(ee)?!te:ne===!0?!!(ne=0):!re,function(){return _isArray(ee)?ee[~~(Math.random()*ee.length)]:(ne=ne||1e-5)&&(re=ne<1?Math.pow(10,(ne+"").length-2):1)&&Math.floor(Math.round((ee-ne/2+Math.random()*(te-ee+ne*.99))/ne)*ne*re)/re})},pipe=function(){for(var ee=arguments.length,te=new Array(ee),ne=0;ne<ee;ne++)te[ne]=arguments[ne];return function(re){return te.reduce(function(se,ae){return ae(se)},re)}},unitize=function(ee,te){return function(ne){return ee(parseFloat(ne))+(te||getUnit(ne))}},normalize$1=function(ee,te,ne){return mapRange(ee,te,0,1,ne)},_wrapArray=function(ee,te,ne){return _conditionalReturn(ne,function(re){return ee[~~te(re)]})},wrap$1=function ie(ee,te,ne){var re=te-ee;return _isArray(ee)?_wrapArray(ee,ie(0,ee.length),te):_conditionalReturn(ne,function(se){return(re+(se-ee)%re)%re+ee})},wrapYoyo=function ie(ee,te,ne){var re=te-ee,se=re*2;return _isArray(ee)?_wrapArray(ee,ie(0,ee.length-1),te):_conditionalReturn(ne,function(ae){return ae=(se+(ae-ee)%se)%se||0,ee+(ae>re?se-ae:ae)})},_replaceRandom=function(ee){for(var te=0,ne="",re,se,ae,oe;~(re=ee.indexOf("random(",te));)ae=ee.indexOf(")",re),oe=ee.charAt(re+7)==="[",se=ee.substr(re+7,ae-re-7).match(oe?_delimitedValueExp:_strictNumExp),ne+=ee.substr(te,re-te)+random(oe?se:+se[0],oe?0:+se[1],+se[2]||1e-5),te=ae+1;return ne+ee.substr(te,ee.length-te)},mapRange=function(ee,te,ne,re,se){var ae=te-ee,oe=re-ne;return _conditionalReturn(se,function(le){return ne+((le-ee)/ae*oe||0)})},interpolate=function ie(ee,te,ne,re){var se=isNaN(ee+te)?0:function(de){return(1-de)*ee+de*te};if(!se){var ae=_isString$2(ee),oe={},le,ce,he,fe,ue;if(ne===!0&&(re=1)&&(ne=null),ae)ee={p:ee},te={p:te};else if(_isArray(ee)&&!_isArray(te)){for(he=[],fe=ee.length,ue=fe-2,ce=1;ce<fe;ce++)he.push(ie(ee[ce-1],ee[ce]));fe--,se=function(ge){ge*=fe;var me=Math.min(ue,~~ge);return he[me](ge-me)},ne=te}else re||(ee=_merge(_isArray(ee)?[]:{},ee));if(!he){for(le in te)_addPropTween.call(oe,ee,le,"get",te[le]);se=function(ge){return _renderPropTweens(ge,oe)||(ae?ee.p:ee)}}}return _conditionalReturn(ne,se)},_getLabelInDirection=function(ee,te,ne){var re=ee.labels,se=_bigNum$1,ae,oe,le;for(ae in re)oe=re[ae]-te,oe<0==!!ne&&oe&&se>(oe=Math.abs(oe))&&(le=ae,se=oe);return le},_callback$1=function(ee,te,ne){var re=ee.vars,se=re[te],ae=_context$2,oe=ee._ctx,le,ce,he;if(se)return le=re[te+"Params"],ce=re.callbackScope||ee,ne&&_lazyTweens.length&&_lazyRender(),oe&&(_context$2=oe),he=le?se.apply(ce,le):se.call(ce),_context$2=ae,he},_interrupt$1=function(ee){return _removeFromParent(ee),ee.scrollTrigger&&ee.scrollTrigger.kill(!!_reverting$1),ee.progress()<1&&_callback$1(ee,"onInterrupt"),ee},_quickTween,_registerPluginQueue=[],_createPlugin=function(ee){if(ee)if(ee=!ee.name&&ee.default||ee,_windowExists$3()||ee.headless){var te=ee.name,ne=_isFunction$2(ee),re=te&&!ne&&ee.init?function(){this._props=[]}:ee,se={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},ae={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),ee!==re){if(_plugins[te])return;_setDefaults$1(re,_setDefaults$1(_copyExcluding(ee,se),ae)),_merge(re.prototype,_merge(se,_copyExcluding(ee,ae))),_plugins[re.prop=te]=re,ee.targetTest&&(_harnessPlugins.push(re),_reservedProps[te]=1),te=(te==="css"?"CSS":te.charAt(0).toUpperCase()+te.substr(1))+"Plugin"}_addGlobal(te,re),ee.register&&ee.register(gsap$4,re,PropTween)}else _registerPluginQueue.push(ee)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(ee,te,ne){return ee+=ee<0?1:ee>1?-1:0,(ee*6<1?te+(ne-te)*ee*6:ee<.5?ne:ee*3<2?te+(ne-te)*(2/3-ee)*6:te)*_255+.5|0},splitColor=function(ee,te,ne){var re=ee?_isNumber$1(ee)?[ee>>16,ee>>8&_255,ee&_255]:0:_colorLookup.black,se,ae,oe,le,ce,he,fe,ue,de,ge;if(!re){if(ee.substr(-1)===","&&(ee=ee.substr(0,ee.length-1)),_colorLookup[ee])re=_colorLookup[ee];else if(ee.charAt(0)==="#"){if(ee.length<6&&(se=ee.charAt(1),ae=ee.charAt(2),oe=ee.charAt(3),ee="#"+se+se+ae+ae+oe+oe+(ee.length===5?ee.charAt(4)+ee.charAt(4):"")),ee.length===9)return re=parseInt(ee.substr(1,6),16),[re>>16,re>>8&_255,re&_255,parseInt(ee.substr(7),16)/255];ee=parseInt(ee.substr(1),16),re=[ee>>16,ee>>8&_255,ee&_255]}else if(ee.substr(0,3)==="hsl"){if(re=ge=ee.match(_strictNumExp),!te)le=+re[0]%360/360,ce=+re[1]/100,he=+re[2]/100,ae=he<=.5?he*(ce+1):he+ce-he*ce,se=he*2-ae,re.length>3&&(re[3]*=1),re[0]=_hue(le+1/3,se,ae),re[1]=_hue(le,se,ae),re[2]=_hue(le-1/3,se,ae);else if(~ee.indexOf("="))return re=ee.match(_numExp),ne&&re.length<4&&(re[3]=1),re}else re=ee.match(_strictNumExp)||_colorLookup.transparent;re=re.map(Number)}return te&&!ge&&(se=re[0]/_255,ae=re[1]/_255,oe=re[2]/_255,fe=Math.max(se,ae,oe),ue=Math.min(se,ae,oe),he=(fe+ue)/2,fe===ue?le=ce=0:(de=fe-ue,ce=he>.5?de/(2-fe-ue):de/(fe+ue),le=fe===se?(ae-oe)/de+(ae<oe?6:0):fe===ae?(oe-se)/de+2:(se-ae)/de+4,le*=60),re[0]=~~(le+.5),re[1]=~~(ce*100+.5),re[2]=~~(he*100+.5)),ne&&re.length<4&&(re[3]=1),re},_colorOrderData=function(ee){var te=[],ne=[],re=-1;return ee.split(_colorExp).forEach(function(se){var ae=se.match(_numWithUnitExp)||[];te.push.apply(te,ae),ne.push(re+=ae.length+1)}),te.c=ne,te},_formatColors=function(ee,te,ne){var re="",se=(ee+re).match(_colorExp),ae=te?"hsla(":"rgba(",oe=0,le,ce,he,fe;if(!se)return ee;if(se=se.map(function(ue){return(ue=splitColor(ue,te,1))&&ae+(te?ue[0]+","+ue[1]+"%,"+ue[2]+"%,"+ue[3]:ue.join(","))+")"}),ne&&(he=_colorOrderData(ee),le=ne.c,le.join(re)!==he.c.join(re)))for(ce=ee.replace(_colorExp,"1").split(_numWithUnitExp),fe=ce.length-1;oe<fe;oe++)re+=ce[oe]+(~le.indexOf(oe)?se.shift()||ae+"0,0,0,0)":(he.length?he:se.length?se:ne).shift());if(!ce)for(ce=ee.split(_colorExp),fe=ce.length-1;oe<fe;oe++)re+=ce[oe]+se[oe];return re+ce[fe]},_colorExp=function(){var ie="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",ee;for(ee in _colorLookup)ie+="|"+ee+"\\b";return new RegExp(ie+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(ee){var te=ee.join(" "),ne;if(_colorExp.lastIndex=0,_colorExp.test(te))return ne=_hslExp.test(te),ee[1]=_formatColors(ee[1],ne),ee[0]=_formatColors(ee[0],ne,_colorOrderData(ee[1])),!0},_tickerActive,_ticker=function(){var ie=Date.now,ee=500,te=33,ne=ie(),re=ne,se=1e3/240,ae=se,oe=[],le,ce,he,fe,ue,de,ge=function me(ve){var pe=ie()-re,ye=ve===!0,_e,xe,Se,be;if((pe>ee||pe<0)&&(ne+=pe-te),re+=pe,Se=re-ne,_e=Se-ae,(_e>0||ye)&&(be=++fe.frame,ue=Se-fe.time*1e3,fe.time=Se=Se/1e3,ae+=_e+(_e>=se?4:se-_e),xe=1),ye||(le=ce(me)),xe)for(de=0;de<oe.length;de++)oe[de](Se,ue,be,ve)};return fe={time:0,frame:0,tick:function(){ge(!0)},deltaRatio:function(ve){return ue/(1e3/(ve||60))},wake:function(){_coreReady&&(!_coreInitted$3&&_windowExists$3()&&(_win$4=_coreInitted$3=window,_doc$4=_win$4.document||{},_globals.gsap=gsap$4,(_win$4.gsapVersions||(_win$4.gsapVersions=[])).push(gsap$4.version),_install(_installScope||_win$4.GreenSockGlobals||!_win$4.gsap&&_win$4||{}),_registerPluginQueue.forEach(_createPlugin)),he=typeof requestAnimationFrame<"u"&&requestAnimationFrame,le&&fe.sleep(),ce=he||function(ve){return setTimeout(ve,ae-fe.time*1e3+1|0)},_tickerActive=1,ge(2))},sleep:function(){(he?cancelAnimationFrame:clearTimeout)(le),_tickerActive=0,ce=_emptyFunc},lagSmoothing:function(ve,pe){ee=ve||1/0,te=Math.min(pe||33,ee)},fps:function(ve){se=1e3/(ve||240),ae=fe.time*1e3+se},add:function(ve,pe,ye){var _e=pe?function(xe,Se,be,Ee){ve(xe,Se,be,Ee),fe.remove(_e)}:ve;return fe.remove(ve),oe[ye?"unshift":"push"](_e),_wake(),_e},remove:function(ve,pe){~(pe=oe.indexOf(ve))&&oe.splice(pe,1)&&de>=pe&&de--},_listeners:oe},fe}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(ee){for(var te={},ne=ee.substr(1,ee.length-3).split(":"),re=ne[0],se=1,ae=ne.length,oe,le,ce;se<ae;se++)le=ne[se],oe=se!==ae-1?le.lastIndexOf(","):le.length,ce=le.substr(0,oe),te[re]=isNaN(ce)?ce.replace(_quotesExp,"").trim():+ce,re=le.substr(oe+1).trim();return te},_valueInParentheses=function(ee){var te=ee.indexOf("(")+1,ne=ee.indexOf(")"),re=ee.indexOf("(",te);return ee.substring(te,~re&&re<ne?ee.indexOf(")",ne+1):ne)},_configEaseFromString=function(ee){var te=(ee+"").split("("),ne=_easeMap[te[0]];return ne&&te.length>1&&ne.config?ne.config.apply(null,~ee.indexOf("{")?[_parseObjectInString(te[1])]:_valueInParentheses(ee).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(ee)?_easeMap._CE("",ee):ne},_invertEase=function(ee){return function(te){return 1-ee(1-te)}},_propagateYoyoEase=function ie(ee,te){for(var ne=ee._first,re;ne;)ne instanceof Timeline?ie(ne,te):ne.vars.yoyoEase&&(!ne._yoyo||!ne._repeat)&&ne._yoyo!==te&&(ne.timeline?ie(ne.timeline,te):(re=ne._ease,ne._ease=ne._yEase,ne._yEase=re,ne._yoyo=te)),ne=ne._next},_parseEase=function(ee,te){return ee&&(_isFunction$2(ee)?ee:_easeMap[ee]||_configEaseFromString(ee))||te},_insertEase=function(ee,te,ne,re){ne===void 0&&(ne=function(le){return 1-te(1-le)}),re===void 0&&(re=function(le){return le<.5?te(le*2)/2:1-te((1-le)*2)/2});var se={easeIn:te,easeOut:ne,easeInOut:re},ae;return _forEachName(ee,function(oe){_easeMap[oe]=_globals[oe]=se,_easeMap[ae=oe.toLowerCase()]=ne;for(var le in se)_easeMap[ae+(le==="easeIn"?".in":le==="easeOut"?".out":".inOut")]=_easeMap[oe+"."+le]=se[le]}),se},_easeInOutFromOut=function(ee){return function(te){return te<.5?(1-ee(1-te*2))/2:.5+ee((te-.5)*2)/2}},_configElastic=function ie(ee,te,ne){var re=te>=1?te:1,se=(ne||(ee?.3:.45))/(te<1?te:1),ae=se/_2PI*(Math.asin(1/re)||0),oe=function(he){return he===1?1:re*Math.pow(2,-10*he)*_sin((he-ae)*se)+1},le=ee==="out"?oe:ee==="in"?function(ce){return 1-oe(1-ce)}:_easeInOutFromOut(oe);return se=_2PI/se,le.config=function(ce,he){return ie(ee,ce,he)},le},_configBack=function ie(ee,te){te===void 0&&(te=1.70158);var ne=function(ae){return ae?--ae*ae*((te+1)*ae+te)+1:0},re=ee==="out"?ne:ee==="in"?function(se){return 1-ne(1-se)}:_easeInOutFromOut(ne);return re.config=function(se){return ie(ee,se)},re};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(ie,ee){var te=ee<5?ee+1:ee;_insertEase(ie+",Power"+(te-1),ee?function(ne){return Math.pow(ne,te)}:function(ne){return ne},function(ne){return 1-Math.pow(1-ne,te)},function(ne){return ne<.5?Math.pow(ne*2,te)/2:1-Math.pow((1-ne)*2,te)/2})}),_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn,_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic()),function(ie,ee){var te=1/ee,ne=2*te,re=2.5*te,se=function(oe){return oe<te?ie*oe*oe:oe<ne?ie*Math.pow(oe-1.5/ee,2)+.75:oe<re?ie*(oe-=2.25/ee)*oe+.9375:ie*Math.pow(oe-2.625/ee,2)+.984375};_insertEase("Bounce",function(ae){return 1-se(1-ae)},se)}(7.5625,2.75),_insertEase("Expo",function(ie){return ie?Math.pow(2,10*(ie-1)):0}),_insertEase("Circ",function(ie){return-(_sqrt(1-ie*ie)-1)}),_insertEase("Sine",function(ie){return ie===1?1:-_cos(ie*_HALF_PI)+1}),_insertEase("Back",_configBack("in"),_configBack("out"),_configBack()),_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(ee,te){ee===void 0&&(ee=1);var ne=1/ee,re=ee+(te?0:1),se=te?1:0,ae=1-_tinyNum;return function(oe){return((re*_clamp$1(0,ae,oe)|0)+se)*ne}}},_defaults$1.ease=_easeMap["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(ie){return _callbackNames+=ie+","+ie+"Params,"});var GSCache=function(ee,te){this.id=_gsID++,ee._gsap=this,this.target=ee,this.harness=te,this.get=te?te.get:_getProperty,this.set=te?te.getSetter:_getSetter},Animation=function(){function ie(te){this.vars=te,this._delay=+te.delay||0,(this._repeat=te.repeat===1/0?-2:te.repeat||0)&&(this._rDelay=te.repeatDelay||0,this._yoyo=!!te.yoyo||!!te.yoyoEase),this._ts=1,_setDuration(this,+te.duration,1,1),this.data=te.data,_context$2&&(this._ctx=_context$2,_context$2.data.push(this)),_tickerActive||_ticker.wake()}var ee=ie.prototype;return ee.delay=function(ne){return ne||ne===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+ne-this._delay),this._delay=ne,this):this._delay},ee.duration=function(ne){return arguments.length?this.totalDuration(this._repeat>0?ne+(ne+this._rDelay)*this._repeat:ne):this.totalDuration()&&this._dur},ee.totalDuration=function(ne){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?ne:(ne-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},ee.totalTime=function(ne,re){if(_wake(),!arguments.length)return this._tTime;var se=this._dp;if(se&&se.smoothChildTiming&&this._ts){for(_alignPlayhead(this,ne),!se._dp||se.parent||_postAddChecks(se,this);se&&se.parent;)se.parent._time!==se._start+(se._ts>=0?se._tTime/se._ts:(se.totalDuration()-se._tTime)/-se._ts)&&se.totalTime(se._tTime,!0),se=se.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&ne<this._tDur||this._ts<0&&ne>0||!this._tDur&&!ne)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==ne||!this._dur&&!re||this._initted&&Math.abs(this._zTime)===_tinyNum||!ne&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=ne),_lazySafeRender(this,ne,re)),this},ee.time=function(ne,re){return arguments.length?this.totalTime(Math.min(this.totalDuration(),ne+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(ne?this._dur:0),re):this._time},ee.totalProgress=function(ne,re){return arguments.length?this.totalTime(this.totalDuration()*ne,re):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},ee.progress=function(ne,re){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-ne:ne)+_elapsedCycleDuration(this),re):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},ee.iteration=function(ne,re){var se=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(ne-1)*se,re):this._repeat?_animationCycle(this._tTime,se)+1:1},ee.timeScale=function(ne,re){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===ne)return this;var se=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+ne||0,this._ts=this._ps||ne===-_tinyNum?0:this._rts,this.totalTime(_clamp$1(-Math.abs(this._delay),this._tDur,se),re!==!1),_setEnd(this),_recacheAncestors(this)},ee.paused=function(ne){return arguments.length?(this._ps!==ne&&(this._ps=ne,ne?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},ee.startTime=function(ne){if(arguments.length){this._start=ne;var re=this.parent||this._dp;return re&&(re._sort||!this.parent)&&_addToTimeline(re,this,ne-this._delay),this}return this._start},ee.endTime=function(ne){return this._start+(_isNotFalse(ne)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},ee.rawTime=function(ne){var re=this.parent||this._dp;return re?ne&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(re.rawTime(ne),this):this._tTime:this._tTime},ee.revert=function(ne){ne===void 0&&(ne=_revertConfig);var re=_reverting$1;return _reverting$1=ne,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(ne),this.totalTime(-.01,ne.suppressEvents)),this.data!=="nested"&&ne.kill!==!1&&this.kill(),_reverting$1=re,this},ee.globalTime=function(ne){for(var re=this,se=arguments.length?ne:re.rawTime();re;)se=re._start+se/(Math.abs(re._ts)||1),re=re._dp;return!this.parent&&this._sat?this._sat.globalTime(ne):se},ee.repeat=function(ne){return arguments.length?(this._repeat=ne===1/0?-2:ne,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},ee.repeatDelay=function(ne){if(arguments.length){var re=this._time;return this._rDelay=ne,_onUpdateTotalDuration(this),re?this.time(re):this}return this._rDelay},ee.yoyo=function(ne){return arguments.length?(this._yoyo=ne,this):this._yoyo},ee.seek=function(ne,re){return this.totalTime(_parsePosition$1(this,ne),_isNotFalse(re))},ee.restart=function(ne,re){return this.play().totalTime(ne?-this._delay:0,_isNotFalse(re))},ee.play=function(ne,re){return ne!=null&&this.seek(ne,re),this.reversed(!1).paused(!1)},ee.reverse=function(ne,re){return ne!=null&&this.seek(ne||this.totalDuration(),re),this.reversed(!0).paused(!1)},ee.pause=function(ne,re){return ne!=null&&this.seek(ne,re),this.paused(!0)},ee.resume=function(){return this.paused(!1)},ee.reversed=function(ne){return arguments.length?(!!ne!==this.reversed()&&this.timeScale(-this._rts||(ne?-_tinyNum:0)),this):this._rts<0},ee.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},ee.isActive=function(){var ne=this.parent||this._dp,re=this._start,se;return!!(!ne||this._ts&&this._initted&&ne.isActive()&&(se=ne.rawTime(!0))>=re&&se<this.endTime(!0)-_tinyNum)},ee.eventCallback=function(ne,re,se){var ae=this.vars;return arguments.length>1?(re?(ae[ne]=re,se&&(ae[ne+"Params"]=se),ne==="onUpdate"&&(this._onUpdate=re)):delete ae[ne],this):ae[ne]},ee.then=function(ne){var re=this;return new Promise(function(se){var ae=_isFunction$2(ne)?ne:_passThrough$1,oe=function(){var ce=re.then;re.then=null,_isFunction$2(ae)&&(ae=ae(re))&&(ae.then||ae===re)&&(re.then=ce),se(ae),re.then=ce};re._initted&&re.totalProgress()===1&&re._ts>=0||!re._tTime&&re._ts<0?oe():re._prom=oe})},ee.kill=function(){_interrupt$1(this)},ie}();_setDefaults$1(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(ie){_inheritsLoose(ee,ie);function ee(ne,re){var se;return ne===void 0&&(ne={}),se=ie.call(this,ne)||this,se.labels={},se.smoothChildTiming=!!ne.smoothChildTiming,se.autoRemoveChildren=!!ne.autoRemoveChildren,se._sort=_isNotFalse(ne.sortChildren),_globalTimeline&&_addToTimeline(ne.parent||_globalTimeline,_assertThisInitialized(se),re),ne.reversed&&se.reverse(),ne.paused&&se.paused(!0),ne.scrollTrigger&&_scrollTrigger(_assertThisInitialized(se),ne.scrollTrigger),se}var te=ee.prototype;return te.to=function(re,se,ae){return _createTweenType(0,arguments,this),this},te.from=function(re,se,ae){return _createTweenType(1,arguments,this),this},te.fromTo=function(re,se,ae,oe){return _createTweenType(2,arguments,this),this},te.set=function(re,se,ae){return se.duration=0,se.parent=this,_inheritDefaults(se).repeatDelay||(se.repeat=0),se.immediateRender=!!se.immediateRender,new Tween(re,se,_parsePosition$1(this,ae),1),this},te.call=function(re,se,ae){return _addToTimeline(this,Tween.delayedCall(0,re,se),ae)},te.staggerTo=function(re,se,ae,oe,le,ce,he){return ae.duration=se,ae.stagger=ae.stagger||oe,ae.onComplete=ce,ae.onCompleteParams=he,ae.parent=this,new Tween(re,ae,_parsePosition$1(this,le)),this},te.staggerFrom=function(re,se,ae,oe,le,ce,he){return ae.runBackwards=1,_inheritDefaults(ae).immediateRender=_isNotFalse(ae.immediateRender),this.staggerTo(re,se,ae,oe,le,ce,he)},te.staggerFromTo=function(re,se,ae,oe,le,ce,he,fe){return oe.startAt=ae,_inheritDefaults(oe).immediateRender=_isNotFalse(oe.immediateRender),this.staggerTo(re,se,oe,le,ce,he,fe)},te.render=function(re,se,ae){var oe=this._time,le=this._dirty?this.totalDuration():this._tDur,ce=this._dur,he=re<=0?0:_roundPrecise(re),fe=this._zTime<0!=re<0&&(this._initted||!ce),ue,de,ge,me,ve,pe,ye,_e,xe,Se,be,Ee;if(this!==_globalTimeline&&he>le&&re>=0&&(he=le),he!==this._tTime||ae||fe){if(oe!==this._time&&ce&&(he+=this._time-oe,re+=this._time-oe),ue=he,xe=this._start,_e=this._ts,pe=!_e,fe&&(ce||(oe=this._zTime),(re||!se)&&(this._zTime=re)),this._repeat){if(be=this._yoyo,ve=ce+this._rDelay,this._repeat<-1&&re<0)return this.totalTime(ve*100+re,se,ae);if(ue=_roundPrecise(he%ve),he===le?(me=this._repeat,ue=ce):(me=~~(he/ve),me&&me===he/ve&&(ue=ce,me--),ue>ce&&(ue=ce)),Se=_animationCycle(this._tTime,ve),!oe&&this._tTime&&Se!==me&&this._tTime-Se*ve-this._dur<=0&&(Se=me),be&&me&1&&(ue=ce-ue,Ee=1),me!==Se&&!this._lock){var Pe=be&&Se&1,we=Pe===(be&&me&1);if(me<Se&&(Pe=!Pe),oe=Pe?0:he%ce?ce:he,this._lock=1,this.render(oe||(Ee?0:_roundPrecise(me*ve)),se,!ce)._lock=0,this._tTime=he,!se&&this.parent&&_callback$1(this,"onRepeat"),this.vars.repeatRefresh&&!Ee&&(this.invalidate()._lock=1),oe&&oe!==this._time||pe!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(ce=this._dur,le=this._tDur,we&&(this._lock=2,oe=Pe?ce:-1e-4,this.render(oe,!0),this.vars.repeatRefresh&&!Ee&&this.invalidate()),this._lock=0,!this._ts&&!pe)return this;_propagateYoyoEase(this,Ee)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(ye=_findNextPauseTween(this,_roundPrecise(oe),_roundPrecise(ue)),ye&&(he-=ue-(ue=ye._start))),this._tTime=he,this._time=ue,this._act=!_e,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=re,oe=0),!oe&&ue&&!se&&!me&&(_callback$1(this,"onStart"),this._tTime!==he))return this;if(ue>=oe&&re>=0)for(de=this._first;de;){if(ge=de._next,(de._act||ue>=de._start)&&de._ts&&ye!==de){if(de.parent!==this)return this.render(re,se,ae);if(de.render(de._ts>0?(ue-de._start)*de._ts:(de._dirty?de.totalDuration():de._tDur)+(ue-de._start)*de._ts,se,ae),ue!==this._time||!this._ts&&!pe){ye=0,ge&&(he+=this._zTime=-_tinyNum);break}}de=ge}else{de=this._last;for(var Me=re<0?re:ue;de;){if(ge=de._prev,(de._act||Me<=de._end)&&de._ts&&ye!==de){if(de.parent!==this)return this.render(re,se,ae);if(de.render(de._ts>0?(Me-de._start)*de._ts:(de._dirty?de.totalDuration():de._tDur)+(Me-de._start)*de._ts,se,ae||_reverting$1&&(de._initted||de._startAt)),ue!==this._time||!this._ts&&!pe){ye=0,ge&&(he+=this._zTime=Me?-_tinyNum:_tinyNum);break}}de=ge}}if(ye&&!se&&(this.pause(),ye.render(ue>=oe?0:-_tinyNum)._zTime=ue>=oe?1:-1,this._ts))return this._start=xe,_setEnd(this),this.render(re,se,ae);this._onUpdate&&!se&&_callback$1(this,"onUpdate",!0),(he===le&&this._tTime>=this.totalDuration()||!he&&oe)&&(xe===this._start||Math.abs(_e)!==Math.abs(this._ts))&&(this._lock||((re||!ce)&&(he===le&&this._ts>0||!he&&this._ts<0)&&_removeFromParent(this,1),!se&&!(re<0&&!oe)&&(he||oe||!le)&&(_callback$1(this,he===le&&re>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(he<le&&this.timeScale()>0)&&this._prom())))}return this},te.add=function(re,se){var ae=this;if(_isNumber$1(se)||(se=_parsePosition$1(this,se,re)),!(re instanceof Animation)){if(_isArray(re))return re.forEach(function(oe){return ae.add(oe,se)}),this;if(_isString$2(re))return this.addLabel(re,se);if(_isFunction$2(re))re=Tween.delayedCall(0,re);else return this}return this!==re?_addToTimeline(this,re,se):this},te.getChildren=function(re,se,ae,oe){re===void 0&&(re=!0),se===void 0&&(se=!0),ae===void 0&&(ae=!0),oe===void 0&&(oe=-_bigNum$1);for(var le=[],ce=this._first;ce;)ce._start>=oe&&(ce instanceof Tween?se&&le.push(ce):(ae&&le.push(ce),re&&le.push.apply(le,ce.getChildren(!0,se,ae)))),ce=ce._next;return le},te.getById=function(re){for(var se=this.getChildren(1,1,1),ae=se.length;ae--;)if(se[ae].vars.id===re)return se[ae]},te.remove=function(re){return _isString$2(re)?this.removeLabel(re):_isFunction$2(re)?this.killTweensOf(re):(_removeLinkedListItem(this,re),re===this._recent&&(this._recent=this._last),_uncache(this))},te.totalTime=function(re,se){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?re/this._ts:(this.totalDuration()-re)/-this._ts))),ie.prototype.totalTime.call(this,re,se),this._forcing=0,this):this._tTime},te.addLabel=function(re,se){return this.labels[re]=_parsePosition$1(this,se),this},te.removeLabel=function(re){return delete this.labels[re],this},te.addPause=function(re,se,ae){var oe=Tween.delayedCall(0,se||_emptyFunc,ae);return oe.data="isPause",this._hasPause=1,_addToTimeline(this,oe,_parsePosition$1(this,re))},te.removePause=function(re){var se=this._first;for(re=_parsePosition$1(this,re);se;)se._start===re&&se.data==="isPause"&&_removeFromParent(se),se=se._next},te.killTweensOf=function(re,se,ae){for(var oe=this.getTweensOf(re,ae),le=oe.length;le--;)_overwritingTween!==oe[le]&&oe[le].kill(re,se);return this},te.getTweensOf=function(re,se){for(var ae=[],oe=toArray(re),le=this._first,ce=_isNumber$1(se),he;le;)le instanceof Tween?_arrayContainsAny(le._targets,oe)&&(ce?(!_overwritingTween||le._initted&&le._ts)&&le.globalTime(0)<=se&&le.globalTime(le.totalDuration())>se:!se||le.isActive())&&ae.push(le):(he=le.getTweensOf(oe,se)).length&&ae.push.apply(ae,he),le=le._next;return ae},te.tweenTo=function(re,se){se=se||{};var ae=this,oe=_parsePosition$1(ae,re),le=se,ce=le.startAt,he=le.onStart,fe=le.onStartParams,ue=le.immediateRender,de,ge=Tween.to(ae,_setDefaults$1({ease:se.ease||"none",lazy:!1,immediateRender:!1,time:oe,overwrite:"auto",duration:se.duration||Math.abs((oe-(ce&&"time"in ce?ce.time:ae._time))/ae.timeScale())||_tinyNum,onStart:function(){if(ae.pause(),!de){var ve=se.duration||Math.abs((oe-(ce&&"time"in ce?ce.time:ae._time))/ae.timeScale());ge._dur!==ve&&_setDuration(ge,ve,0,1).render(ge._time,!0,!0),de=1}he&&he.apply(ge,fe||[])}},se));return ue?ge.render(0):ge},te.tweenFromTo=function(re,se,ae){return this.tweenTo(se,_setDefaults$1({startAt:{time:_parsePosition$1(this,re)}},ae))},te.recent=function(){return this._recent},te.nextLabel=function(re){return re===void 0&&(re=this._time),_getLabelInDirection(this,_parsePosition$1(this,re))},te.previousLabel=function(re){return re===void 0&&(re=this._time),_getLabelInDirection(this,_parsePosition$1(this,re),1)},te.currentLabel=function(re){return arguments.length?this.seek(re,!0):this.previousLabel(this._time+_tinyNum)},te.shiftChildren=function(re,se,ae){ae===void 0&&(ae=0);for(var oe=this._first,le=this.labels,ce;oe;)oe._start>=ae&&(oe._start+=re,oe._end+=re),oe=oe._next;if(se)for(ce in le)le[ce]>=ae&&(le[ce]+=re);return _uncache(this)},te.invalidate=function(re){var se=this._first;for(this._lock=0;se;)se.invalidate(re),se=se._next;return ie.prototype.invalidate.call(this,re)},te.clear=function(re){re===void 0&&(re=!0);for(var se=this._first,ae;se;)ae=se._next,this.remove(se),se=ae;return this._dp&&(this._time=this._tTime=this._pTime=0),re&&(this.labels={}),_uncache(this)},te.totalDuration=function(re){var se=0,ae=this,oe=ae._last,le=_bigNum$1,ce,he,fe;if(arguments.length)return ae.timeScale((ae._repeat<0?ae.duration():ae.totalDuration())/(ae.reversed()?-re:re));if(ae._dirty){for(fe=ae.parent;oe;)ce=oe._prev,oe._dirty&&oe.totalDuration(),he=oe._start,he>le&&ae._sort&&oe._ts&&!ae._lock?(ae._lock=1,_addToTimeline(ae,oe,he-oe._delay,1)._lock=0):le=he,he<0&&oe._ts&&(se-=he,(!fe&&!ae._dp||fe&&fe.smoothChildTiming)&&(ae._start+=he/ae._ts,ae._time-=he,ae._tTime-=he),ae.shiftChildren(-he,!1,-1/0),le=0),oe._end>se&&oe._ts&&(se=oe._end),oe=ce;_setDuration(ae,ae===_globalTimeline&&ae._time>se?ae._time:se,1,1),ae._dirty=0}return ae._tDur},ee.updateRoot=function(re){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(re,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config$1.autoSleep||120;var se=_globalTimeline._first;if((!se||!se._ts)&&_config$1.autoSleep&&_ticker._listeners.length<2){for(;se&&!se._ts;)se=se._next;se||_ticker.sleep()}}},ee}(Animation);_setDefaults$1(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(ee,te,ne,re,se,ae,oe){var le=new PropTween(this._pt,ee,te,0,1,_renderComplexString,null,se),ce=0,he=0,fe,ue,de,ge,me,ve,pe,ye;for(le.b=ne,le.e=re,ne+="",re+="",(pe=~re.indexOf("random("))&&(re=_replaceRandom(re)),ae&&(ye=[ne,re],ae(ye,ee,te),ne=ye[0],re=ye[1]),ue=ne.match(_complexStringNumExp)||[];fe=_complexStringNumExp.exec(re);)ge=fe[0],me=re.substring(ce,fe.index),de?de=(de+1)%5:me.substr(-5)==="rgba("&&(de=1),ge!==ue[he++]&&(ve=parseFloat(ue[he-1])||0,le._pt={_next:le._pt,p:me||he===1?me:",",s:ve,c:ge.charAt(1)==="="?_parseRelative(ve,ge)-ve:parseFloat(ge)-ve,m:de&&de<4?Math.round:0},ce=_complexStringNumExp.lastIndex);return le.c=ce<re.length?re.substring(ce,re.length):"",le.fp=oe,(_relExp.test(re)||pe)&&(le.e=0),this._pt=le,le},_addPropTween=function(ee,te,ne,re,se,ae,oe,le,ce,he){_isFunction$2(re)&&(re=re(se||0,ee,ae));var fe=ee[te],ue=ne!=="get"?ne:_isFunction$2(fe)?ce?ee[te.indexOf("set")||!_isFunction$2(ee["get"+te.substr(3)])?te:"get"+te.substr(3)](ce):ee[te]():fe,de=_isFunction$2(fe)?ce?_setterFuncWithParam:_setterFunc:_setterPlain,ge;if(_isString$2(re)&&(~re.indexOf("random(")&&(re=_replaceRandom(re)),re.charAt(1)==="="&&(ge=_parseRelative(ue,re)+(getUnit(ue)||0),(ge||ge===0)&&(re=ge))),!he||ue!==re||_forceAllPropTweens)return!isNaN(ue*re)&&re!==""?(ge=new PropTween(this._pt,ee,te,+ue||0,re-(ue||0),typeof fe=="boolean"?_renderBoolean:_renderPlain,0,de),ce&&(ge.fp=ce),oe&&ge.modifier(oe,this,ee),this._pt=ge):(!fe&&!(te in ee)&&_missingPlugin(te,re),_addComplexStringPropTween.call(this,ee,te,ue,re,de,le||_config$1.stringFilter,ce))},_processVars=function(ee,te,ne,re,se){if(_isFunction$2(ee)&&(ee=_parseFuncOrString(ee,se,te,ne,re)),!_isObject$1(ee)||ee.style&&ee.nodeType||_isArray(ee)||_isTypedArray(ee))return _isString$2(ee)?_parseFuncOrString(ee,se,te,ne,re):ee;var ae={},oe;for(oe in ee)ae[oe]=_parseFuncOrString(ee[oe],se,te,ne,re);return ae},_checkPlugin=function(ee,te,ne,re,se,ae){var oe,le,ce,he;if(_plugins[ee]&&(oe=new _plugins[ee]).init(se,oe.rawVars?te[ee]:_processVars(te[ee],re,se,ae,ne),ne,re,ae)!==!1&&(ne._pt=le=new PropTween(ne._pt,se,ee,0,1,oe.render,oe,0,oe.priority),ne!==_quickTween))for(ce=ne._ptLookup[ne._targets.indexOf(se)],he=oe._props.length;he--;)ce[oe._props[he]]=le;return oe},_overwritingTween,_forceAllPropTweens,_initTween=function ie(ee,te,ne){var re=ee.vars,se=re.ease,ae=re.startAt,oe=re.immediateRender,le=re.lazy,ce=re.onUpdate,he=re.runBackwards,fe=re.yoyoEase,ue=re.keyframes,de=re.autoRevert,ge=ee._dur,me=ee._startAt,ve=ee._targets,pe=ee.parent,ye=pe&&pe.data==="nested"?pe.vars.targets:ve,_e=ee._overwrite==="auto"&&!_suppressOverwrites$1,xe=ee.timeline,Se,be,Ee,Pe,we,Me,De,ke,ze,Ve,Ue,Ae,Fe;if(xe&&(!ue||!se)&&(se="none"),ee._ease=_parseEase(se,_defaults$1.ease),ee._yEase=fe?_invertEase(_parseEase(fe===!0?se:fe,_defaults$1.ease)):0,fe&&ee._yoyo&&!ee._repeat&&(fe=ee._yEase,ee._yEase=ee._ease,ee._ease=fe),ee._from=!xe&&!!re.runBackwards,!xe||ue&&!re.stagger){if(ke=ve[0]?_getCache(ve[0]).harness:0,Ae=ke&&re[ke.prop],Se=_copyExcluding(re,_reservedProps),me&&(me._zTime<0&&me.progress(1),te<0&&he&&oe&&!de?me.render(-1,!0):me.revert(he&&ge?_revertConfigNoKill:_startAtRevertConfig),me._lazy=0),ae){if(_removeFromParent(ee._startAt=Tween.set(ve,_setDefaults$1({data:"isStart",overwrite:!1,parent:pe,immediateRender:!0,lazy:!me&&_isNotFalse(le),startAt:null,delay:0,onUpdate:ce&&function(){return _callback$1(ee,"onUpdate")},stagger:0},ae))),ee._startAt._dp=0,ee._startAt._sat=ee,te<0&&(_reverting$1||!oe&&!de)&&ee._startAt.revert(_revertConfigNoKill),oe&&ge&&te<=0&&ne<=0){te&&(ee._zTime=te);return}}else if(he&&ge&&!me){if(te&&(oe=!1),Ee=_setDefaults$1({overwrite:!1,data:"isFromStart",lazy:oe&&!me&&_isNotFalse(le),immediateRender:oe,stagger:0,parent:pe},Se),Ae&&(Ee[ke.prop]=Ae),_removeFromParent(ee._startAt=Tween.set(ve,Ee)),ee._startAt._dp=0,ee._startAt._sat=ee,te<0&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee._startAt.render(-1,!0)),ee._zTime=te,!oe)ie(ee._startAt,_tinyNum,_tinyNum);else if(!te)return}for(ee._pt=ee._ptCache=0,le=ge&&_isNotFalse(le)||le&&!ge,be=0;be<ve.length;be++){if(we=ve[be],De=we._gsap||_harness(ve)[be]._gsap,ee._ptLookup[be]=Ve={},_lazyLookup[De.id]&&_lazyTweens.length&&_lazyRender(),Ue=ye===ve?be:ye.indexOf(we),ke&&(ze=new ke).init(we,Ae||Se,ee,Ue,ye)!==!1&&(ee._pt=Pe=new PropTween(ee._pt,we,ze.name,0,1,ze.render,ze,0,ze.priority),ze._props.forEach(function(Te){Ve[Te]=Pe}),ze.priority&&(Me=1)),!ke||Ae)for(Ee in Se)_plugins[Ee]&&(ze=_checkPlugin(Ee,Se,ee,Ue,we,ye))?ze.priority&&(Me=1):Ve[Ee]=Pe=_addPropTween.call(ee,we,Ee,"get",Se[Ee],Ue,ye,0,re.stringFilter);ee._op&&ee._op[be]&&ee.kill(we,ee._op[be]),_e&&ee._pt&&(_overwritingTween=ee,_globalTimeline.killTweensOf(we,Ve,ee.globalTime(te)),Fe=!ee.parent,_overwritingTween=0),ee._pt&&le&&(_lazyLookup[De.id]=1)}Me&&_sortPropTweensByPriority(ee),ee._onInit&&ee._onInit(ee)}ee._onUpdate=ce,ee._initted=(!ee._op||ee._pt)&&!Fe,ue&&te<=0&&xe.render(_bigNum$1,!0,!0)},_updatePropTweens=function(ee,te,ne,re,se,ae,oe,le){var ce=(ee._pt&&ee._ptCache||(ee._ptCache={}))[te],he,fe,ue,de;if(!ce)for(ce=ee._ptCache[te]=[],ue=ee._ptLookup,de=ee._targets.length;de--;){if(he=ue[de][te],he&&he.d&&he.d._pt)for(he=he.d._pt;he&&he.p!==te&&he.fp!==te;)he=he._next;if(!he)return _forceAllPropTweens=1,ee.vars[te]="+=0",_initTween(ee,oe),_forceAllPropTweens=0,le?_warn(te+" not eligible for reset"):1;ce.push(he)}for(de=ce.length;de--;)fe=ce[de],he=fe._pt||fe,he.s=(re||re===0)&&!se?re:he.s+(re||0)+ae*he.c,he.c=ne-he.s,fe.e&&(fe.e=_round$2(ne)+getUnit(fe.e)),fe.b&&(fe.b=he.s+getUnit(fe.b))},_addAliasesToVars=function(ee,te){var ne=ee[0]?_getCache(ee[0]).harness:0,re=ne&&ne.aliases,se,ae,oe,le;if(!re)return te;se=_merge({},te);for(ae in re)if(ae in se)for(le=re[ae].split(","),oe=le.length;oe--;)se[le[oe]]=se[ae];return se},_parseKeyframe=function(ee,te,ne,re){var se=te.ease||re||"power1.inOut",ae,oe;if(_isArray(te))oe=ne[ee]||(ne[ee]=[]),te.forEach(function(le,ce){return oe.push({t:ce/(te.length-1)*100,v:le,e:se})});else for(ae in te)oe=ne[ae]||(ne[ae]=[]),ae==="ease"||oe.push({t:parseFloat(ee),v:te[ae],e:se})},_parseFuncOrString=function(ee,te,ne,re,se){return _isFunction$2(ee)?ee.call(te,ne,re,se):_isString$2(ee)&&~ee.indexOf("random(")?_replaceRandom(ee):ee},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(ie){return _staggerPropsToSkip[ie]=1});var Tween=function(ie){_inheritsLoose(ee,ie);function ee(ne,re,se,ae){var oe;typeof re=="number"&&(se.duration=re,re=se,se=null),oe=ie.call(this,ae?re:_inheritDefaults(re))||this;var le=oe.vars,ce=le.duration,he=le.delay,fe=le.immediateRender,ue=le.stagger,de=le.overwrite,ge=le.keyframes,me=le.defaults,ve=le.scrollTrigger,pe=le.yoyoEase,ye=re.parent||_globalTimeline,_e=(_isArray(ne)||_isTypedArray(ne)?_isNumber$1(ne[0]):"length"in re)?[ne]:toArray(ne),xe,Se,be,Ee,Pe,we,Me,De;if(oe._targets=_e.length?_harness(_e):_warn("GSAP target "+ne+" not found. https://gsap.com",!_config$1.nullTargetWarn)||[],oe._ptLookup=[],oe._overwrite=de,ge||ue||_isFuncOrString(ce)||_isFuncOrString(he)){if(re=oe.vars,xe=oe.timeline=new Timeline({data:"nested",defaults:me||{},targets:ye&&ye.data==="nested"?ye.vars.targets:_e}),xe.kill(),xe.parent=xe._dp=_assertThisInitialized(oe),xe._start=0,ue||_isFuncOrString(ce)||_isFuncOrString(he)){if(Ee=_e.length,Me=ue&&distribute(ue),_isObject$1(ue))for(Pe in ue)~_staggerTweenProps.indexOf(Pe)&&(De||(De={}),De[Pe]=ue[Pe]);for(Se=0;Se<Ee;Se++)be=_copyExcluding(re,_staggerPropsToSkip),be.stagger=0,pe&&(be.yoyoEase=pe),De&&_merge(be,De),we=_e[Se],be.duration=+_parseFuncOrString(ce,_assertThisInitialized(oe),Se,we,_e),be.delay=(+_parseFuncOrString(he,_assertThisInitialized(oe),Se,we,_e)||0)-oe._delay,!ue&&Ee===1&&be.delay&&(oe._delay=he=be.delay,oe._start+=he,be.delay=0),xe.to(we,be,Me?Me(Se,we,_e):0),xe._ease=_easeMap.none;xe.duration()?ce=he=0:oe.timeline=0}else if(ge){_inheritDefaults(_setDefaults$1(xe.vars.defaults,{ease:"none"})),xe._ease=_parseEase(ge.ease||re.ease||"none");var ke=0,ze,Ve,Ue;if(_isArray(ge))ge.forEach(function(Ae){return xe.to(_e,Ae,">")}),xe.duration();else{be={};for(Pe in ge)Pe==="ease"||Pe==="easeEach"||_parseKeyframe(Pe,ge[Pe],be,ge.easeEach);for(Pe in be)for(ze=be[Pe].sort(function(Ae,Fe){return Ae.t-Fe.t}),ke=0,Se=0;Se<ze.length;Se++)Ve=ze[Se],Ue={ease:Ve.e,duration:(Ve.t-(Se?ze[Se-1].t:0))/100*ce},Ue[Pe]=Ve.v,xe.to(_e,Ue,ke),ke+=Ue.duration;xe.duration()<ce&&xe.to({},{duration:ce-xe.duration()})}}ce||oe.duration(ce=xe.duration())}else oe.timeline=0;return de===!0&&!_suppressOverwrites$1&&(_overwritingTween=_assertThisInitialized(oe),_globalTimeline.killTweensOf(_e),_overwritingTween=0),_addToTimeline(ye,_assertThisInitialized(oe),se),re.reversed&&oe.reverse(),re.paused&&oe.paused(!0),(fe||!ce&&!ge&&oe._start===_roundPrecise(ye._time)&&_isNotFalse(fe)&&_hasNoPausedAncestors(_assertThisInitialized(oe))&&ye.data!=="nested")&&(oe._tTime=-_tinyNum,oe.render(Math.max(0,-he)||0)),ve&&_scrollTrigger(_assertThisInitialized(oe),ve),oe}var te=ee.prototype;return te.render=function(re,se,ae){var oe=this._time,le=this._tDur,ce=this._dur,he=re<0,fe=re>le-_tinyNum&&!he?le:re<_tinyNum?0:re,ue,de,ge,me,ve,pe,ye,_e,xe;if(!ce)_renderZeroDurationTween(this,re,se,ae);else if(fe!==this._tTime||!re||ae||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==he){if(ue=fe,_e=this.timeline,this._repeat){if(me=ce+this._rDelay,this._repeat<-1&&he)return this.totalTime(me*100+re,se,ae);if(ue=_roundPrecise(fe%me),fe===le?(ge=this._repeat,ue=ce):(ge=~~(fe/me),ge&&ge===_roundPrecise(fe/me)&&(ue=ce,ge--),ue>ce&&(ue=ce)),pe=this._yoyo&&ge&1,pe&&(xe=this._yEase,ue=ce-ue),ve=_animationCycle(this._tTime,me),ue===oe&&!ae&&this._initted&&ge===ve)return this._tTime=fe,this;ge!==ve&&(_e&&this._yEase&&_propagateYoyoEase(_e,pe),this.vars.repeatRefresh&&!pe&&!this._lock&&this._time!==me&&this._initted&&(this._lock=ae=1,this.render(_roundPrecise(me*ge),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,he?re:ue,ae,se,fe))return this._tTime=0,this;if(oe!==this._time&&!(ae&&this.vars.repeatRefresh&&ge!==ve))return this;if(ce!==this._dur)return this.render(re,se,ae)}if(this._tTime=fe,this._time=ue,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ye=(xe||this._ease)(ue/ce),this._from&&(this.ratio=ye=1-ye),ue&&!oe&&!se&&!ge&&(_callback$1(this,"onStart"),this._tTime!==fe))return this;for(de=this._pt;de;)de.r(ye,de.d),de=de._next;_e&&_e.render(re<0?re:_e._dur*_e._ease(ue/this._dur),se,ae)||this._startAt&&(this._zTime=re),this._onUpdate&&!se&&(he&&_rewindStartAt(this,re,se,ae),_callback$1(this,"onUpdate")),this._repeat&&ge!==ve&&this.vars.onRepeat&&!se&&this.parent&&_callback$1(this,"onRepeat"),(fe===this._tDur||!fe)&&this._tTime===fe&&(he&&!this._onUpdate&&_rewindStartAt(this,re,!0,!0),(re||!ce)&&(fe===this._tDur&&this._ts>0||!fe&&this._ts<0)&&_removeFromParent(this,1),!se&&!(he&&!oe)&&(fe||oe||pe)&&(_callback$1(this,fe===le?"onComplete":"onReverseComplete",!0),this._prom&&!(fe<le&&this.timeScale()>0)&&this._prom()))}return this},te.targets=function(){return this._targets},te.invalidate=function(re){return(!re||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(re),ie.prototype.invalidate.call(this,re)},te.resetTo=function(re,se,ae,oe,le){_tickerActive||_ticker.wake(),this._ts||this.play();var ce=Math.min(this._dur,(this._dp._time-this._start)*this._ts),he;return this._initted||_initTween(this,ce),he=this._ease(ce/this._dur),_updatePropTweens(this,re,se,ae,oe,he,ce,le)?this.resetTo(re,se,ae,oe,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},te.kill=function(re,se){if(se===void 0&&(se="all"),!re&&(!se||se==="all"))return this._lazy=this._pt=0,this.parent?_interrupt$1(this):this;if(this.timeline){var ae=this.timeline.totalDuration();return this.timeline.killTweensOf(re,se,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt$1(this),this.parent&&ae!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/ae,0,1),this}var oe=this._targets,le=re?toArray(re):oe,ce=this._ptLookup,he=this._pt,fe,ue,de,ge,me,ve,pe;if((!se||se==="all")&&_arraysMatch(oe,le))return se==="all"&&(this._pt=0),_interrupt$1(this);for(fe=this._op=this._op||[],se!=="all"&&(_isString$2(se)&&(me={},_forEachName(se,function(ye){return me[ye]=1}),se=me),se=_addAliasesToVars(oe,se)),pe=oe.length;pe--;)if(~le.indexOf(oe[pe])){ue=ce[pe],se==="all"?(fe[pe]=se,ge=ue,de={}):(de=fe[pe]=fe[pe]||{},ge=se);for(me in ge)ve=ue&&ue[me],ve&&((!("kill"in ve.d)||ve.d.kill(me)===!0)&&_removeLinkedListItem(this,ve,"_pt"),delete ue[me]),de!=="all"&&(de[me]=1)}return this._initted&&!this._pt&&he&&_interrupt$1(this),this},ee.to=function(re,se){return new ee(re,se,arguments[2])},ee.from=function(re,se){return _createTweenType(1,arguments)},ee.delayedCall=function(re,se,ae,oe){return new ee(se,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:re,onComplete:se,onReverseComplete:se,onCompleteParams:ae,onReverseCompleteParams:ae,callbackScope:oe})},ee.fromTo=function(re,se,ae){return _createTweenType(2,arguments)},ee.set=function(re,se){return se.duration=0,se.repeatDelay||(se.repeat=0),new ee(re,se)},ee.killTweensOf=function(re,se,ae){return _globalTimeline.killTweensOf(re,se,ae)},ee}(Animation);_setDefaults$1(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(ie){Tween[ie]=function(){var ee=new Timeline,te=_slice.call(arguments,0);return te.splice(ie==="staggerFromTo"?5:4,0,0),ee[ie].apply(ee,te)}});var _setterPlain=function(ee,te,ne){return ee[te]=ne},_setterFunc=function(ee,te,ne){return ee[te](ne)},_setterFuncWithParam=function(ee,te,ne,re){return ee[te](re.fp,ne)},_setterAttribute=function(ee,te,ne){return ee.setAttribute(te,ne)},_getSetter=function(ee,te){return _isFunction$2(ee[te])?_setterFunc:_isUndefined(ee[te])&&ee.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(ee,te){return te.set(te.t,te.p,Math.round((te.s+te.c*ee)*1e6)/1e6,te)},_renderBoolean=function(ee,te){return te.set(te.t,te.p,!!(te.s+te.c*ee),te)},_renderComplexString=function(ee,te){var ne=te._pt,re="";if(!ee&&te.b)re=te.b;else if(ee===1&&te.e)re=te.e;else{for(;ne;)re=ne.p+(ne.m?ne.m(ne.s+ne.c*ee):Math.round((ne.s+ne.c*ee)*1e4)/1e4)+re,ne=ne._next;re+=te.c}te.set(te.t,te.p,re,te)},_renderPropTweens=function(ee,te){for(var ne=te._pt;ne;)ne.r(ee,ne.d),ne=ne._next},_addPluginModifier=function(ee,te,ne,re){for(var se=this._pt,ae;se;)ae=se._next,se.p===re&&se.modifier(ee,te,ne),se=ae},_killPropTweensOf=function(ee){for(var te=this._pt,ne,re;te;)re=te._next,te.p===ee&&!te.op||te.op===ee?_removeLinkedListItem(this,te,"_pt"):te.dep||(ne=1),te=re;return!ne},_setterWithModifier=function(ee,te,ne,re){re.mSet(ee,te,re.m.call(re.tween,ne,re.mt),re)},_sortPropTweensByPriority=function(ee){for(var te=ee._pt,ne,re,se,ae;te;){for(ne=te._next,re=se;re&&re.pr>te.pr;)re=re._next;(te._prev=re?re._prev:ae)?te._prev._next=te:se=te,(te._next=re)?re._prev=te:ae=te,te=ne}ee._pt=se},PropTween=function(){function ie(te,ne,re,se,ae,oe,le,ce,he){this.t=ne,this.s=se,this.c=ae,this.p=re,this.r=oe||_renderPlain,this.d=le||this,this.set=ce||_setterPlain,this.pr=he||0,this._next=te,te&&(te._prev=this)}var ee=ie.prototype;return ee.modifier=function(ne,re,se){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=ne,this.mt=se,this.tween=re},ie}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(ie){return _reservedProps[ie]=1}),_globals.TweenMax=_globals.TweenLite=Tween,_globals.TimelineLite=_globals.TimelineMax=Timeline,_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults$1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_config$1.stringFilter=_colorStringFilter;var _media=[],_listeners$1={},_emptyArray$1=[],_lastMediaTime=0,_contextID=0,_dispatch$1=function(ee){return(_listeners$1[ee]||_emptyArray$1).map(function(te){return te()})},_onMediaChange=function(){var ee=Date.now(),te=[];ee-_lastMediaTime>2&&(_dispatch$1("matchMediaInit"),_media.forEach(function(ne){var re=ne.queries,se=ne.conditions,ae,oe,le,ce;for(oe in re)ae=_win$4.matchMedia(re[oe]).matches,ae&&(le=1),ae!==se[oe]&&(se[oe]=ae,ce=1);ce&&(ne.revert(),le&&te.push(ne))}),_dispatch$1("matchMediaRevert"),te.forEach(function(ne){return ne.onMatch(ne,function(re){return ne.add(null,re)})}),_lastMediaTime=ee,_dispatch$1("matchMedia"))},Context=function(){function ie(te,ne){this.selector=ne&&selector(ne),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,te&&this.add(te)}var ee=ie.prototype;return ee.add=function(ne,re,se){_isFunction$2(ne)&&(se=re,re=ne,ne=_isFunction$2);var ae=this,oe=function(){var ce=_context$2,he=ae.selector,fe;return ce&&ce!==ae&&ce.data.push(ae),se&&(ae.selector=selector(se)),_context$2=ae,fe=re.apply(ae,arguments),_isFunction$2(fe)&&ae._r.push(fe),_context$2=ce,ae.selector=he,ae.isReverted=!1,fe};return ae.last=oe,ne===_isFunction$2?oe(ae,function(le){return ae.add(null,le)}):ne?ae[ne]=oe:oe},ee.ignore=function(ne){var re=_context$2;_context$2=null,ne(this),_context$2=re},ee.getTweens=function(){var ne=[];return this.data.forEach(function(re){return re instanceof ie?ne.push.apply(ne,re.getTweens()):re instanceof Tween&&!(re.parent&&re.parent.data==="nested")&&ne.push(re)}),ne},ee.clear=function(){this._r.length=this.data.length=0},ee.kill=function(ne,re){var se=this;if(ne?function(){for(var oe=se.getTweens(),le=se.data.length,ce;le--;)ce=se.data[le],ce.data==="isFlip"&&(ce.revert(),ce.getChildren(!0,!0,!1).forEach(function(he){return oe.splice(oe.indexOf(he),1)}));for(oe.map(function(he){return{g:he._dur||he._delay||he._sat&&!he._sat.vars.immediateRender?he.globalTime(0):-1/0,t:he}}).sort(function(he,fe){return fe.g-he.g||-1/0}).forEach(function(he){return he.t.revert(ne)}),le=se.data.length;le--;)ce=se.data[le],ce instanceof Timeline?ce.data!=="nested"&&(ce.scrollTrigger&&ce.scrollTrigger.revert(),ce.kill()):!(ce instanceof Tween)&&ce.revert&&ce.revert(ne);se._r.forEach(function(he){return he(ne,se)}),se.isReverted=!0}():this.data.forEach(function(oe){return oe.kill&&oe.kill()}),this.clear(),re)for(var ae=_media.length;ae--;)_media[ae].id===this.id&&_media.splice(ae,1)},ee.revert=function(ne){this.kill(ne||{})},ie}(),MatchMedia=function(){function ie(te){this.contexts=[],this.scope=te,_context$2&&_context$2.data.push(this)}var ee=ie.prototype;return ee.add=function(ne,re,se){_isObject$1(ne)||(ne={matches:ne});var ae=new Context(0,se||this.scope),oe=ae.conditions={},le,ce,he;_context$2&&!ae.selector&&(ae.selector=_context$2.selector),this.contexts.push(ae),re=ae.add("onMatch",re),ae.queries=ne;for(ce in ne)ce==="all"?he=1:(le=_win$4.matchMedia(ne[ce]),le&&(_media.indexOf(ae)<0&&_media.push(ae),(oe[ce]=le.matches)&&(he=1),le.addListener?le.addListener(_onMediaChange):le.addEventListener("change",_onMediaChange)));return he&&re(ae,function(fe){return ae.add(null,fe)}),this},ee.revert=function(ne){this.kill(ne||{})},ee.kill=function(ne){this.contexts.forEach(function(re){return re.kill(ne,!0)})},ie}(),_gsap={registerPlugin:function(){for(var ee=arguments.length,te=new Array(ee),ne=0;ne<ee;ne++)te[ne]=arguments[ne];te.forEach(function(re){return _createPlugin(re)})},timeline:function(ee){return new Timeline(ee)},getTweensOf:function(ee,te){return _globalTimeline.getTweensOf(ee,te)},getProperty:function(ee,te,ne,re){_isString$2(ee)&&(ee=toArray(ee)[0]);var se=_getCache(ee||{}).get,ae=ne?_passThrough$1:_numericIfPossible;return ne==="native"&&(ne=""),ee&&(te?ae((_plugins[te]&&_plugins[te].get||se)(ee,te,ne,re)):function(oe,le,ce){return ae((_plugins[oe]&&_plugins[oe].get||se)(ee,oe,le,ce))})},quickSetter:function(ee,te,ne){if(ee=toArray(ee),ee.length>1){var re=ee.map(function(he){return gsap$4.quickSetter(he,te,ne)}),se=re.length;return function(he){for(var fe=se;fe--;)re[fe](he)}}ee=ee[0]||{};var ae=_plugins[te],oe=_getCache(ee),le=oe.harness&&(oe.harness.aliases||{})[te]||te,ce=ae?function(he){var fe=new ae;_quickTween._pt=0,fe.init(ee,ne?he+ne:he,_quickTween,0,[ee]),fe.render(1,fe),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:oe.set(ee,le);return ae?ce:function(he){return ce(ee,le,ne?he+ne:he,oe,1)}},quickTo:function(ee,te,ne){var re,se=gsap$4.to(ee,_merge((re={},re[te]="+=0.1",re.paused=!0,re),ne||{})),ae=function(le,ce,he){return se.resetTo(te,le,ce,he)};return ae.tween=se,ae},isTweening:function(ee){return _globalTimeline.getTweensOf(ee,!0).length>0},defaults:function(ee){return ee&&ee.ease&&(ee.ease=_parseEase(ee.ease,_defaults$1.ease)),_mergeDeep(_defaults$1,ee||{})},config:function(ee){return _mergeDeep(_config$1,ee||{})},registerEffect:function(ee){var te=ee.name,ne=ee.effect,re=ee.plugins,se=ee.defaults,ae=ee.extendTimeline;(re||"").split(",").forEach(function(oe){return oe&&!_plugins[oe]&&!_globals[oe]&&_warn(te+" effect requires "+oe+" plugin.")}),_effects[te]=function(oe,le,ce){return ne(toArray(oe),_setDefaults$1(le||{},se),ce)},ae&&(Timeline.prototype[te]=function(oe,le,ce){return this.add(_effects[te](oe,_isObject$1(le)?le:(ce=le)&&{},this),ce)})},registerEase:function(ee,te){_easeMap[ee]=_parseEase(te)},parseEase:function(ee,te){return arguments.length?_parseEase(ee,te):_easeMap},getById:function(ee){return _globalTimeline.getById(ee)},exportRoot:function(ee,te){ee===void 0&&(ee={});var ne=new Timeline(ee),re,se;for(ne.smoothChildTiming=_isNotFalse(ee.smoothChildTiming),_globalTimeline.remove(ne),ne._dp=0,ne._time=ne._tTime=_globalTimeline._time,re=_globalTimeline._first;re;)se=re._next,(te||!(!re._dur&&re instanceof Tween&&re.vars.onComplete===re._targets[0]))&&_addToTimeline(ne,re,re._start-re._delay),re=se;return _addToTimeline(_globalTimeline,ne,0),ne},context:function(ee,te){return ee?new Context(ee,te):_context$2},matchMedia:function(ee){return new MatchMedia(ee)},matchMediaRefresh:function(){return _media.forEach(function(ee){var te=ee.conditions,ne,re;for(re in te)te[re]&&(te[re]=!1,ne=1);ne&&ee.revert()})||_onMediaChange()},addEventListener:function(ee,te){var ne=_listeners$1[ee]||(_listeners$1[ee]=[]);~ne.indexOf(te)||ne.push(te)},removeEventListener:function(ee,te){var ne=_listeners$1[ee],re=ne&&ne.indexOf(te);re>=0&&ne.splice(re,1)},utils:{wrap:wrap$1,wrapYoyo,distribute,random,snap,normalize:normalize$1,getUnit,clamp:clamp$2,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(ee){return ee&&_context$2&&(_context$2.data.push(ee),ee._ctx=_context$2),_context$2},suppressOverwrites:function(ee){return _suppressOverwrites$1=ee}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(ie){return _gsap[ie]=Tween[ie]}),_ticker.add(Timeline.updateRoot),_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(ee,te){for(var ne=ee._pt;ne&&ne.p!==te&&ne.op!==te&&ne.fp!==te;)ne=ne._next;return ne},_addModifiers=function(ee,te){var ne=ee._targets,re,se,ae;for(re in te)for(se=ne.length;se--;)ae=ee._ptLookup[se][re],ae&&(ae=ae.d)&&(ae._pt&&(ae=_getPluginPropTween(ae,re)),ae&&ae.modifier&&ae.modifier(te[re],ee,ne[se],re))},_buildModifierPlugin=function(ee,te){return{name:ee,rawVars:1,init:function(re,se,ae){ae._onInit=function(oe){var le,ce;if(_isString$2(se)&&(le={},_forEachName(se,function(he){return le[he]=1}),se=le),te){le={};for(ce in se)le[ce]=te(se[ce]);se=le}_addModifiers(oe,se)}}}},gsap$4=_gsap.registerPlugin({name:"attr",init:function(ee,te,ne,re,se){var ae,oe,le;this.tween=ne;for(ae in te)le=ee.getAttribute(ae)||"",oe=this.add(ee,"setAttribute",(le||0)+"",te[ae],re,se,0,0,ae),oe.op=ae,oe.b=le,this._props.push(ae)},render:function(ee,te){for(var ne=te._pt;ne;)_reverting$1?ne.set(ne.t,ne.p,ne.b,ne):ne.r(ee,ne.d),ne=ne._next}},{name:"endArray",init:function(ee,te){for(var ne=te.length;ne--;)this.add(ee,ne,ee[ne]||0,te[ne],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap$4.version="3.12.5",_coreReady=1,_windowExists$3()&&_wake(),_easeMap.Power0,_easeMap.Power1,_easeMap.Power2,_easeMap.Power3,_easeMap.Power4,_easeMap.Linear,_easeMap.Quad,_easeMap.Cubic,_easeMap.Quart,_easeMap.Quint,_easeMap.Strong,_easeMap.Elastic,_easeMap.Back,_easeMap.SteppedEase,_easeMap.Bounce,_easeMap.Sine,_easeMap.Expo,_easeMap.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win$3,_doc$3,_docElement$1,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists$2=function(){return typeof window<"u"},_transformProps={},_RAD2DEG$1=180/Math.PI,_DEG2RAD$1=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp$1=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(ee,te){return te.set(te.t,te.p,Math.round((te.s+te.c*ee)*1e4)/1e4+te.u,te)},_renderPropWithEnd=function(ee,te){return te.set(te.t,te.p,ee===1?te.e:Math.round((te.s+te.c*ee)*1e4)/1e4+te.u,te)},_renderCSSPropWithBeginning=function(ee,te){return te.set(te.t,te.p,ee?Math.round((te.s+te.c*ee)*1e4)/1e4+te.u:te.b,te)},_renderRoundedCSSProp=function(ee,te){var ne=te.s+te.c*ee;te.set(te.t,te.p,~~(ne+(ne<0?-.5:.5))+te.u,te)},_renderNonTweeningValue=function(ee,te){return te.set(te.t,te.p,ee?te.e:te.b,te)},_renderNonTweeningValueOnlyAtEnd=function(ee,te){return te.set(te.t,te.p,ee!==1?te.b:te.e,te)},_setterCSSStyle=function(ee,te,ne){return ee.style[te]=ne},_setterCSSProp=function(ee,te,ne){return ee.style.setProperty(te,ne)},_setterTransform=function(ee,te,ne){return ee._gsap[te]=ne},_setterScale=function(ee,te,ne){return ee._gsap.scaleX=ee._gsap.scaleY=ne},_setterScaleWithRender=function(ee,te,ne,re,se){var ae=ee._gsap;ae.scaleX=ae.scaleY=ne,ae.renderTransform(se,ae)},_setterTransformWithRender=function(ee,te,ne,re,se){var ae=ee._gsap;ae[te]=ne,ae.renderTransform(se,ae)},_transformProp$2="transform",_transformOriginProp$1=_transformProp$2+"Origin",_saveStyle=function ie(ee,te){var ne=this,re=this.target,se=re.style,ae=re._gsap;if(ee in _transformProps&&se){if(this.tfm=this.tfm||{},ee!=="transform")ee=_propertyAliases[ee]||ee,~ee.indexOf(",")?ee.split(",").forEach(function(oe){return ne.tfm[oe]=_get(re,oe)}):this.tfm[ee]=ae.x?ae[ee]:_get(re,ee),ee===_transformOriginProp$1&&(this.tfm.zOrigin=ae.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(oe){return ie.call(ne,oe,te)});if(this.props.indexOf(_transformProp$2)>=0)return;ae.svg&&(this.svgo=re.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp$1,te,"")),ee=_transformProp$2}(se||te)&&this.props.push(ee,te,se[ee])},_removeIndependentTransforms=function(ee){ee.translate&&(ee.removeProperty("translate"),ee.removeProperty("scale"),ee.removeProperty("rotate"))},_revertStyle=function(){var ee=this.props,te=this.target,ne=te.style,re=te._gsap,se,ae;for(se=0;se<ee.length;se+=3)ee[se+1]?te[ee[se]]=ee[se+2]:ee[se+2]?ne[ee[se]]=ee[se+2]:ne.removeProperty(ee[se].substr(0,2)==="--"?ee[se]:ee[se].replace(_capsExp$1,"-$1").toLowerCase());if(this.tfm){for(ae in this.tfm)re[ae]=this.tfm[ae];re.svg&&(re.renderTransform(),te.setAttribute("data-svg-origin",this.svgo||"")),se=_reverting(),(!se||!se.isStart)&&!ne[_transformProp$2]&&(_removeIndependentTransforms(ne),re.zOrigin&&ne[_transformOriginProp$1]&&(ne[_transformOriginProp$1]+=" "+re.zOrigin+"px",re.zOrigin=0,re.renderTransform()),re.uncache=1)}},_getStyleSaver$1=function(ee,te){var ne={target:ee,props:[],revert:_revertStyle,save:_saveStyle};return ee._gsap||gsap$4.core.getCache(ee),te&&te.split(",").forEach(function(re){return ne.save(re)}),ne},_supports3D,_createElement=function(ee,te){var ne=_doc$3.createElementNS?_doc$3.createElementNS((te||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),ee):_doc$3.createElement(ee);return ne&&ne.style?ne:_doc$3.createElement(ee)},_getComputedProperty=function ie(ee,te,ne){var re=getComputedStyle(ee);return re[te]||re.getPropertyValue(te.replace(_capsExp$1,"-$1").toLowerCase())||re.getPropertyValue(te)||!ne&&ie(ee,_checkPropPrefix(te)||te,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(ee,te,ne){var re=te||_tempDiv,se=re.style,ae=5;if(ee in se&&!ne)return ee;for(ee=ee.charAt(0).toUpperCase()+ee.substr(1);ae--&&!(_prefixes[ae]+ee in se););return ae<0?null:(ae===3?"ms":ae>=0?_prefixes[ae]:"")+ee},_initCore$2=function(){_windowExists$2()&&window.document&&(_win$3=window,_doc$3=_win$3.document,_docElement$1=_doc$3.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp$2=_checkPropPrefix(_transformProp$2),_transformOriginProp$1=_transformProp$2+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap$4.core.reverting,_pluginInitted=1)},_getBBoxHack=function ie(ee){var te=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),ne=this.parentNode,re=this.nextSibling,se=this.style.cssText,ae;if(_docElement$1.appendChild(te),te.appendChild(this),this.style.display="block",ee)try{ae=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=ie}catch{}else this._gsapBBox&&(ae=this._gsapBBox());return ne&&(re?ne.insertBefore(this,re):ne.appendChild(this)),_docElement$1.removeChild(te),this.style.cssText=se,ae},_getAttributeFallbacks=function(ee,te){for(var ne=te.length;ne--;)if(ee.hasAttribute(te[ne]))return ee.getAttribute(te[ne])},_getBBox=function(ee){var te;try{te=ee.getBBox()}catch{te=_getBBoxHack.call(ee,!0)}return te&&(te.width||te.height)||ee.getBBox===_getBBoxHack||(te=_getBBoxHack.call(ee,!0)),te&&!te.width&&!te.x&&!te.y?{x:+_getAttributeFallbacks(ee,["x","cx","x1"])||0,y:+_getAttributeFallbacks(ee,["y","cy","y1"])||0,width:0,height:0}:te},_isSVG=function(ee){return!!(ee.getCTM&&(!ee.parentNode||ee.ownerSVGElement)&&_getBBox(ee))},_removeProperty=function(ee,te){if(te){var ne=ee.style,re;te in _transformProps&&te!==_transformOriginProp$1&&(te=_transformProp$2),ne.removeProperty?(re=te.substr(0,2),(re==="ms"||te.substr(0,6)==="webkit")&&(te="-"+te),ne.removeProperty(re==="--"?te:te.replace(_capsExp$1,"-$1").toLowerCase())):ne.removeAttribute(te)}},_addNonTweeningPT=function(ee,te,ne,re,se,ae){var oe=new PropTween(ee._pt,te,ne,0,1,ae?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return ee._pt=oe,oe.b=re,oe.e=se,ee._props.push(ne),oe},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function ie(ee,te,ne,re){var se=parseFloat(ne)||0,ae=(ne+"").trim().substr((se+"").length)||"px",oe=_tempDiv.style,le=_horizontalExp.test(te),ce=ee.tagName.toLowerCase()==="svg",he=(ce?"client":"offset")+(le?"Width":"Height"),fe=100,ue=re==="px",de=re==="%",ge,me,ve,pe;if(re===ae||!se||_nonConvertibleUnits[re]||_nonConvertibleUnits[ae])return se;if(ae!=="px"&&!ue&&(se=ie(ee,te,ne,"px")),pe=ee.getCTM&&_isSVG(ee),(de||ae==="%")&&(_transformProps[te]||~te.indexOf("adius")))return ge=pe?ee.getBBox()[le?"width":"height"]:ee[he],_round$2(de?se/ge*fe:se/100*ge);if(oe[le?"width":"height"]=fe+(ue?ae:re),me=~te.indexOf("adius")||re==="em"&&ee.appendChild&&!ce?ee:ee.parentNode,pe&&(me=(ee.ownerSVGElement||{}).parentNode),(!me||me===_doc$3||!me.appendChild)&&(me=_doc$3.body),ve=me._gsap,ve&&de&&ve.width&&le&&ve.time===_ticker.time&&!ve.uncache)return _round$2(se/ve.width*fe);if(de&&(te==="height"||te==="width")){var ye=ee.style[te];ee.style[te]=fe+re,ge=ee[he],ye?ee.style[te]=ye:_removeProperty(ee,te)}else(de||ae==="%")&&!_nonStandardLayouts[_getComputedProperty(me,"display")]&&(oe.position=_getComputedProperty(ee,"position")),me===ee&&(oe.position="static"),me.appendChild(_tempDiv),ge=_tempDiv[he],me.removeChild(_tempDiv),oe.position="absolute";return le&&de&&(ve=_getCache(me),ve.time=_ticker.time,ve.width=me[he]),_round$2(ue?ge*se/fe:ge&&se?fe/ge*se:0)},_get=function(ee,te,ne,re){var se;return _pluginInitted||_initCore$2(),te in _propertyAliases&&te!=="transform"&&(te=_propertyAliases[te],~te.indexOf(",")&&(te=te.split(",")[0])),_transformProps[te]&&te!=="transform"?(se=_parseTransform(ee,re),se=te!=="transformOrigin"?se[te]:se.svg?se.origin:_firstTwoOnly(_getComputedProperty(ee,_transformOriginProp$1))+" "+se.zOrigin+"px"):(se=ee.style[te],(!se||se==="auto"||re||~(se+"").indexOf("calc("))&&(se=_specialProps[te]&&_specialProps[te](ee,te,ne)||_getComputedProperty(ee,te)||_getProperty(ee,te)||(te==="opacity"?1:0))),ne&&!~(se+"").trim().indexOf(" ")?_convertToUnit(ee,te,se,ne)+ne:se},_tweenComplexCSSString=function(ee,te,ne,re){if(!ne||ne==="none"){var se=_checkPropPrefix(te,ee,1),ae=se&&_getComputedProperty(ee,se,1);ae&&ae!==ne?(te=se,ne=ae):te==="borderColor"&&(ne=_getComputedProperty(ee,"borderTopColor"))}var oe=new PropTween(this._pt,ee.style,te,0,1,_renderComplexString),le=0,ce=0,he,fe,ue,de,ge,me,ve,pe,ye,_e,xe,Se;if(oe.b=ne,oe.e=re,ne+="",re+="",re==="auto"&&(me=ee.style[te],ee.style[te]=re,re=_getComputedProperty(ee,te)||re,me?ee.style[te]=me:_removeProperty(ee,te)),he=[ne,re],_colorStringFilter(he),ne=he[0],re=he[1],ue=ne.match(_numWithUnitExp)||[],Se=re.match(_numWithUnitExp)||[],Se.length){for(;fe=_numWithUnitExp.exec(re);)ve=fe[0],ye=re.substring(le,fe.index),ge?ge=(ge+1)%5:(ye.substr(-5)==="rgba("||ye.substr(-5)==="hsla(")&&(ge=1),ve!==(me=ue[ce++]||"")&&(de=parseFloat(me)||0,xe=me.substr((de+"").length),ve.charAt(1)==="="&&(ve=_parseRelative(de,ve)+xe),pe=parseFloat(ve),_e=ve.substr((pe+"").length),le=_numWithUnitExp.lastIndex-_e.length,_e||(_e=_e||_config$1.units[te]||xe,le===re.length&&(re+=_e,oe.e+=_e)),xe!==_e&&(de=_convertToUnit(ee,te,me,_e)||0),oe._pt={_next:oe._pt,p:ye||ce===1?ye:",",s:de,c:pe-de,m:ge&&ge<4||te==="zIndex"?Math.round:0});oe.c=le<re.length?re.substring(le,re.length):""}else oe.r=te==="display"&&re==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(re)&&(oe.e=0),this._pt=oe,oe},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(ee){var te=ee.split(" "),ne=te[0],re=te[1]||"50%";return(ne==="top"||ne==="bottom"||re==="left"||re==="right")&&(ee=ne,ne=re,re=ee),te[0]=_keywordToPercent[ne]||ne,te[1]=_keywordToPercent[re]||re,te.join(" ")},_renderClearProps=function(ee,te){if(te.tween&&te.tween._time===te.tween._dur){var ne=te.t,re=ne.style,se=te.u,ae=ne._gsap,oe,le,ce;if(se==="all"||se===!0)re.cssText="",le=1;else for(se=se.split(","),ce=se.length;--ce>-1;)oe=se[ce],_transformProps[oe]&&(le=1,oe=oe==="transformOrigin"?_transformOriginProp$1:_transformProp$2),_removeProperty(ne,oe);le&&(_removeProperty(ne,_transformProp$2),ae&&(ae.svg&&ne.removeAttribute("transform"),_parseTransform(ne,1),ae.uncache=1,_removeIndependentTransforms(re)))}},_specialProps={clearProps:function(ee,te,ne,re,se){if(se.data!=="isFromStart"){var ae=ee._pt=new PropTween(ee._pt,te,ne,0,0,_renderClearProps);return ae.u=re,ae.pr=-10,ae.tween=se,ee._props.push(ne),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(ee){return ee==="matrix(1, 0, 0, 1, 0, 0)"||ee==="none"||!ee},_getComputedTransformMatrixAsArray=function(ee){var te=_getComputedProperty(ee,_transformProp$2);return _isNullTransform(te)?_identity2DMatrix:te.substr(7).match(_numExp).map(_round$2)},_getMatrix=function(ee,te){var ne=ee._gsap||_getCache(ee),re=ee.style,se=_getComputedTransformMatrixAsArray(ee),ae,oe,le,ce;return ne.svg&&ee.getAttribute("transform")?(le=ee.transform.baseVal.consolidate().matrix,se=[le.a,le.b,le.c,le.d,le.e,le.f],se.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:se):(se===_identity2DMatrix&&!ee.offsetParent&&ee!==_docElement$1&&!ne.svg&&(le=re.display,re.display="block",ae=ee.parentNode,(!ae||!ee.offsetParent)&&(ce=1,oe=ee.nextElementSibling,_docElement$1.appendChild(ee)),se=_getComputedTransformMatrixAsArray(ee),le?re.display=le:_removeProperty(ee,"display"),ce&&(oe?ae.insertBefore(ee,oe):ae?ae.appendChild(ee):_docElement$1.removeChild(ee))),te&&se.length>6?[se[0],se[1],se[4],se[5],se[12],se[13]]:se)},_applySVGOrigin=function(ee,te,ne,re,se,ae){var oe=ee._gsap,le=se||_getMatrix(ee,!0),ce=oe.xOrigin||0,he=oe.yOrigin||0,fe=oe.xOffset||0,ue=oe.yOffset||0,de=le[0],ge=le[1],me=le[2],ve=le[3],pe=le[4],ye=le[5],_e=te.split(" "),xe=parseFloat(_e[0])||0,Se=parseFloat(_e[1])||0,be,Ee,Pe,we;ne?le!==_identity2DMatrix&&(Ee=de*ve-ge*me)&&(Pe=xe*(ve/Ee)+Se*(-me/Ee)+(me*ye-ve*pe)/Ee,we=xe*(-ge/Ee)+Se*(de/Ee)-(de*ye-ge*pe)/Ee,xe=Pe,Se=we):(be=_getBBox(ee),xe=be.x+(~_e[0].indexOf("%")?xe/100*be.width:xe),Se=be.y+(~(_e[1]||_e[0]).indexOf("%")?Se/100*be.height:Se)),re||re!==!1&&oe.smooth?(pe=xe-ce,ye=Se-he,oe.xOffset=fe+(pe*de+ye*me)-pe,oe.yOffset=ue+(pe*ge+ye*ve)-ye):oe.xOffset=oe.yOffset=0,oe.xOrigin=xe,oe.yOrigin=Se,oe.smooth=!!re,oe.origin=te,oe.originIsAbsolute=!!ne,ee.style[_transformOriginProp$1]="0px 0px",ae&&(_addNonTweeningPT(ae,oe,"xOrigin",ce,xe),_addNonTweeningPT(ae,oe,"yOrigin",he,Se),_addNonTweeningPT(ae,oe,"xOffset",fe,oe.xOffset),_addNonTweeningPT(ae,oe,"yOffset",ue,oe.yOffset)),ee.setAttribute("data-svg-origin",xe+" "+Se)},_parseTransform=function(ee,te){var ne=ee._gsap||new GSCache(ee);if("x"in ne&&!te&&!ne.uncache)return ne;var re=ee.style,se=ne.scaleX<0,ae="px",oe="deg",le=getComputedStyle(ee),ce=_getComputedProperty(ee,_transformOriginProp$1)||"0",he,fe,ue,de,ge,me,ve,pe,ye,_e,xe,Se,be,Ee,Pe,we,Me,De,ke,ze,Ve,Ue,Ae,Fe,Te,Ce,Le,Be,st,Xe,Ge,He;return he=fe=ue=me=ve=pe=ye=_e=xe=0,de=ge=1,ne.svg=!!(ee.getCTM&&_isSVG(ee)),le.translate&&((le.translate!=="none"||le.scale!=="none"||le.rotate!=="none")&&(re[_transformProp$2]=(le.translate!=="none"?"translate3d("+(le.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(le.rotate!=="none"?"rotate("+le.rotate+") ":"")+(le.scale!=="none"?"scale("+le.scale.split(" ").join(",")+") ":"")+(le[_transformProp$2]!=="none"?le[_transformProp$2]:"")),re.scale=re.rotate=re.translate="none"),Ee=_getMatrix(ee,ne.svg),ne.svg&&(ne.uncache?(Te=ee.getBBox(),ce=ne.xOrigin-Te.x+"px "+(ne.yOrigin-Te.y)+"px",Fe=""):Fe=!te&&ee.getAttribute("data-svg-origin"),_applySVGOrigin(ee,Fe||ce,!!Fe||ne.originIsAbsolute,ne.smooth!==!1,Ee)),Se=ne.xOrigin||0,be=ne.yOrigin||0,Ee!==_identity2DMatrix&&(De=Ee[0],ke=Ee[1],ze=Ee[2],Ve=Ee[3],he=Ue=Ee[4],fe=Ae=Ee[5],Ee.length===6?(de=Math.sqrt(De*De+ke*ke),ge=Math.sqrt(Ve*Ve+ze*ze),me=De||ke?_atan2(ke,De)*_RAD2DEG$1:0,ye=ze||Ve?_atan2(ze,Ve)*_RAD2DEG$1+me:0,ye&&(ge*=Math.abs(Math.cos(ye*_DEG2RAD$1))),ne.svg&&(he-=Se-(Se*De+be*ze),fe-=be-(Se*ke+be*Ve))):(He=Ee[6],Xe=Ee[7],Le=Ee[8],Be=Ee[9],st=Ee[10],Ge=Ee[11],he=Ee[12],fe=Ee[13],ue=Ee[14],Pe=_atan2(He,st),ve=Pe*_RAD2DEG$1,Pe&&(we=Math.cos(-Pe),Me=Math.sin(-Pe),Fe=Ue*we+Le*Me,Te=Ae*we+Be*Me,Ce=He*we+st*Me,Le=Ue*-Me+Le*we,Be=Ae*-Me+Be*we,st=He*-Me+st*we,Ge=Xe*-Me+Ge*we,Ue=Fe,Ae=Te,He=Ce),Pe=_atan2(-ze,st),pe=Pe*_RAD2DEG$1,Pe&&(we=Math.cos(-Pe),Me=Math.sin(-Pe),Fe=De*we-Le*Me,Te=ke*we-Be*Me,Ce=ze*we-st*Me,Ge=Ve*Me+Ge*we,De=Fe,ke=Te,ze=Ce),Pe=_atan2(ke,De),me=Pe*_RAD2DEG$1,Pe&&(we=Math.cos(Pe),Me=Math.sin(Pe),Fe=De*we+ke*Me,Te=Ue*we+Ae*Me,ke=ke*we-De*Me,Ae=Ae*we-Ue*Me,De=Fe,Ue=Te),ve&&Math.abs(ve)+Math.abs(me)>359.9&&(ve=me=0,pe=180-pe),de=_round$2(Math.sqrt(De*De+ke*ke+ze*ze)),ge=_round$2(Math.sqrt(Ae*Ae+He*He)),Pe=_atan2(Ue,Ae),ye=Math.abs(Pe)>2e-4?Pe*_RAD2DEG$1:0,xe=Ge?1/(Ge<0?-Ge:Ge):0),ne.svg&&(Fe=ee.getAttribute("transform"),ne.forceCSS=ee.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(ee,_transformProp$2)),Fe&&ee.setAttribute("transform",Fe))),Math.abs(ye)>90&&Math.abs(ye)<270&&(se?(de*=-1,ye+=me<=0?180:-180,me+=me<=0?180:-180):(ge*=-1,ye+=ye<=0?180:-180)),te=te||ne.uncache,ne.x=he-((ne.xPercent=he&&(!te&&ne.xPercent||(Math.round(ee.offsetWidth/2)===Math.round(-he)?-50:0)))?ee.offsetWidth*ne.xPercent/100:0)+ae,ne.y=fe-((ne.yPercent=fe&&(!te&&ne.yPercent||(Math.round(ee.offsetHeight/2)===Math.round(-fe)?-50:0)))?ee.offsetHeight*ne.yPercent/100:0)+ae,ne.z=ue+ae,ne.scaleX=_round$2(de),ne.scaleY=_round$2(ge),ne.rotation=_round$2(me)+oe,ne.rotationX=_round$2(ve)+oe,ne.rotationY=_round$2(pe)+oe,ne.skewX=ye+oe,ne.skewY=_e+oe,ne.transformPerspective=xe+ae,(ne.zOrigin=parseFloat(ce.split(" ")[2])||!te&&ne.zOrigin||0)&&(re[_transformOriginProp$1]=_firstTwoOnly(ce)),ne.xOffset=ne.yOffset=0,ne.force3D=_config$1.force3D,ne.renderTransform=ne.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,ne.uncache=0,ne},_firstTwoOnly=function(ee){return(ee=ee.split(" "))[0]+" "+ee[1]},_addPxTranslate=function(ee,te,ne){var re=getUnit(te);return _round$2(parseFloat(te)+parseFloat(_convertToUnit(ee,"x",ne+"px",re)))+re},_renderNon3DTransforms=function(ee,te){te.z="0px",te.rotationY=te.rotationX="0deg",te.force3D=0,_renderCSSTransforms(ee,te)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(ee,te){var ne=te||this,re=ne.xPercent,se=ne.yPercent,ae=ne.x,oe=ne.y,le=ne.z,ce=ne.rotation,he=ne.rotationY,fe=ne.rotationX,ue=ne.skewX,de=ne.skewY,ge=ne.scaleX,me=ne.scaleY,ve=ne.transformPerspective,pe=ne.force3D,ye=ne.target,_e=ne.zOrigin,xe="",Se=pe==="auto"&&ee&&ee!==1||pe===!0;if(_e&&(fe!==_zeroDeg||he!==_zeroDeg)){var be=parseFloat(he)*_DEG2RAD$1,Ee=Math.sin(be),Pe=Math.cos(be),we;be=parseFloat(fe)*_DEG2RAD$1,we=Math.cos(be),ae=_addPxTranslate(ye,ae,Ee*we*-_e),oe=_addPxTranslate(ye,oe,-Math.sin(be)*-_e),le=_addPxTranslate(ye,le,Pe*we*-_e+_e)}ve!==_zeroPx&&(xe+="perspective("+ve+_endParenthesis),(re||se)&&(xe+="translate("+re+"%, "+se+"%) "),(Se||ae!==_zeroPx||oe!==_zeroPx||le!==_zeroPx)&&(xe+=le!==_zeroPx||Se?"translate3d("+ae+", "+oe+", "+le+") ":"translate("+ae+", "+oe+_endParenthesis),ce!==_zeroDeg&&(xe+="rotate("+ce+_endParenthesis),he!==_zeroDeg&&(xe+="rotateY("+he+_endParenthesis),fe!==_zeroDeg&&(xe+="rotateX("+fe+_endParenthesis),(ue!==_zeroDeg||de!==_zeroDeg)&&(xe+="skew("+ue+", "+de+_endParenthesis),(ge!==1||me!==1)&&(xe+="scale("+ge+", "+me+_endParenthesis),ye.style[_transformProp$2]=xe||"translate(0, 0)"},_renderSVGTransforms=function(ee,te){var ne=te||this,re=ne.xPercent,se=ne.yPercent,ae=ne.x,oe=ne.y,le=ne.rotation,ce=ne.skewX,he=ne.skewY,fe=ne.scaleX,ue=ne.scaleY,de=ne.target,ge=ne.xOrigin,me=ne.yOrigin,ve=ne.xOffset,pe=ne.yOffset,ye=ne.forceCSS,_e=parseFloat(ae),xe=parseFloat(oe),Se,be,Ee,Pe,we;le=parseFloat(le),ce=parseFloat(ce),he=parseFloat(he),he&&(he=parseFloat(he),ce+=he,le+=he),le||ce?(le*=_DEG2RAD$1,ce*=_DEG2RAD$1,Se=Math.cos(le)*fe,be=Math.sin(le)*fe,Ee=Math.sin(le-ce)*-ue,Pe=Math.cos(le-ce)*ue,ce&&(he*=_DEG2RAD$1,we=Math.tan(ce-he),we=Math.sqrt(1+we*we),Ee*=we,Pe*=we,he&&(we=Math.tan(he),we=Math.sqrt(1+we*we),Se*=we,be*=we)),Se=_round$2(Se),be=_round$2(be),Ee=_round$2(Ee),Pe=_round$2(Pe)):(Se=fe,Pe=ue,be=Ee=0),(_e&&!~(ae+"").indexOf("px")||xe&&!~(oe+"").indexOf("px"))&&(_e=_convertToUnit(de,"x",ae,"px"),xe=_convertToUnit(de,"y",oe,"px")),(ge||me||ve||pe)&&(_e=_round$2(_e+ge-(ge*Se+me*Ee)+ve),xe=_round$2(xe+me-(ge*be+me*Pe)+pe)),(re||se)&&(we=de.getBBox(),_e=_round$2(_e+re/100*we.width),xe=_round$2(xe+se/100*we.height)),we="matrix("+Se+","+be+","+Ee+","+Pe+","+_e+","+xe+")",de.setAttribute("transform",we),ye&&(de.style[_transformProp$2]=we)},_addRotationalPropTween=function(ee,te,ne,re,se){var ae=360,oe=_isString$2(se),le=parseFloat(se)*(oe&&~se.indexOf("rad")?_RAD2DEG$1:1),ce=le-re,he=re+ce+"deg",fe,ue;return oe&&(fe=se.split("_")[1],fe==="short"&&(ce%=ae,ce!==ce%(ae/2)&&(ce+=ce<0?ae:-ae)),fe==="cw"&&ce<0?ce=(ce+ae*_bigNum)%ae-~~(ce/ae)*ae:fe==="ccw"&&ce>0&&(ce=(ce-ae*_bigNum)%ae-~~(ce/ae)*ae)),ee._pt=ue=new PropTween(ee._pt,te,ne,re,ce,_renderPropWithEnd),ue.e=he,ue.u="deg",ee._props.push(ne),ue},_assign=function(ee,te){for(var ne in te)ee[ne]=te[ne];return ee},_addRawTransformPTs=function(ee,te,ne){var re=_assign({},ne._gsap),se="perspective,force3D,transformOrigin,svgOrigin",ae=ne.style,oe,le,ce,he,fe,ue,de,ge;re.svg?(ce=ne.getAttribute("transform"),ne.setAttribute("transform",""),ae[_transformProp$2]=te,oe=_parseTransform(ne,1),_removeProperty(ne,_transformProp$2),ne.setAttribute("transform",ce)):(ce=getComputedStyle(ne)[_transformProp$2],ae[_transformProp$2]=te,oe=_parseTransform(ne,1),ae[_transformProp$2]=ce);for(le in _transformProps)ce=re[le],he=oe[le],ce!==he&&se.indexOf(le)<0&&(de=getUnit(ce),ge=getUnit(he),fe=de!==ge?_convertToUnit(ne,le,ce,ge):parseFloat(ce),ue=parseFloat(he),ee._pt=new PropTween(ee._pt,oe,le,fe,ue-fe,_renderCSSProp),ee._pt.u=ge||0,ee._props.push(le));_assign(oe,re)};_forEachName("padding,margin,Width,Radius",function(ie,ee){var te="Top",ne="Right",re="Bottom",se="Left",ae=(ee<3?[te,ne,re,se]:[te+se,te+ne,re+ne,re+se]).map(function(oe){return ee<2?ie+oe:"border"+oe+ie});_specialProps[ee>1?"border"+ie:ie]=function(oe,le,ce,he,fe){var ue,de;if(arguments.length<4)return ue=ae.map(function(ge){return _get(oe,ge,ce)}),de=ue.join(" "),de.split(ue[0]).length===5?ue[0]:de;ue=(he+"").split(" "),de={},ae.forEach(function(ge,me){return de[ge]=ue[me]=ue[me]||ue[(me-1)/2|0]}),oe.init(le,de,fe)}});var CSSPlugin={name:"css",register:_initCore$2,targetTest:function(ee){return ee.style&&ee.nodeType},init:function(ee,te,ne,re,se){var ae=this._props,oe=ee.style,le=ne.vars.startAt,ce,he,fe,ue,de,ge,me,ve,pe,ye,_e,xe,Se,be,Ee,Pe;_pluginInitted||_initCore$2(),this.styles=this.styles||_getStyleSaver$1(ee),Pe=this.styles.props,this.tween=ne;for(me in te)if(me!=="autoRound"&&(he=te[me],!(_plugins[me]&&_checkPlugin(me,te,ne,re,ee,se)))){if(de=typeof he,ge=_specialProps[me],de==="function"&&(he=he.call(ne,re,ee,se),de=typeof he),de==="string"&&~he.indexOf("random(")&&(he=_replaceRandom(he)),ge)ge(this,ee,me,he,ne)&&(Ee=1);else if(me.substr(0,2)==="--")ce=(getComputedStyle(ee).getPropertyValue(me)+"").trim(),he+="",_colorExp.lastIndex=0,_colorExp.test(ce)||(ve=getUnit(ce),pe=getUnit(he)),pe?ve!==pe&&(ce=_convertToUnit(ee,me,ce,pe)+pe):ve&&(he+=ve),this.add(oe,"setProperty",ce,he,re,se,0,0,me),ae.push(me),Pe.push(me,0,oe[me]);else if(de!=="undefined"){if(le&&me in le?(ce=typeof le[me]=="function"?le[me].call(ne,re,ee,se):le[me],_isString$2(ce)&&~ce.indexOf("random(")&&(ce=_replaceRandom(ce)),getUnit(ce+"")||ce==="auto"||(ce+=_config$1.units[me]||getUnit(_get(ee,me))||""),(ce+"").charAt(1)==="="&&(ce=_get(ee,me))):ce=_get(ee,me),ue=parseFloat(ce),ye=de==="string"&&he.charAt(1)==="="&&he.substr(0,2),ye&&(he=he.substr(2)),fe=parseFloat(he),me in _propertyAliases&&(me==="autoAlpha"&&(ue===1&&_get(ee,"visibility")==="hidden"&&fe&&(ue=0),Pe.push("visibility",0,oe.visibility),_addNonTweeningPT(this,oe,"visibility",ue?"inherit":"hidden",fe?"inherit":"hidden",!fe)),me!=="scale"&&me!=="transform"&&(me=_propertyAliases[me],~me.indexOf(",")&&(me=me.split(",")[0]))),_e=me in _transformProps,_e){if(this.styles.save(me),xe||(Se=ee._gsap,Se.renderTransform&&!te.parseTransform||_parseTransform(ee,te.parseTransform),be=te.smoothOrigin!==!1&&Se.smooth,xe=this._pt=new PropTween(this._pt,oe,_transformProp$2,0,1,Se.renderTransform,Se,0,-1),xe.dep=1),me==="scale")this._pt=new PropTween(this._pt,Se,"scaleY",Se.scaleY,(ye?_parseRelative(Se.scaleY,ye+fe):fe)-Se.scaleY||0,_renderCSSProp),this._pt.u=0,ae.push("scaleY",me),me+="X";else if(me==="transformOrigin"){Pe.push(_transformOriginProp$1,0,oe[_transformOriginProp$1]),he=_convertKeywordsToPercentages(he),Se.svg?_applySVGOrigin(ee,he,0,be,0,this):(pe=parseFloat(he.split(" ")[2])||0,pe!==Se.zOrigin&&_addNonTweeningPT(this,Se,"zOrigin",Se.zOrigin,pe),_addNonTweeningPT(this,oe,me,_firstTwoOnly(ce),_firstTwoOnly(he)));continue}else if(me==="svgOrigin"){_applySVGOrigin(ee,he,1,be,0,this);continue}else if(me in _rotationalProperties){_addRotationalPropTween(this,Se,me,ue,ye?_parseRelative(ue,ye+he):he);continue}else if(me==="smoothOrigin"){_addNonTweeningPT(this,Se,"smooth",Se.smooth,he);continue}else if(me==="force3D"){Se[me]=he;continue}else if(me==="transform"){_addRawTransformPTs(this,he,ee);continue}}else me in oe||(me=_checkPropPrefix(me)||me);if(_e||(fe||fe===0)&&(ue||ue===0)&&!_complexExp.test(he)&&me in oe)ve=(ce+"").substr((ue+"").length),fe||(fe=0),pe=getUnit(he)||(me in _config$1.units?_config$1.units[me]:ve),ve!==pe&&(ue=_convertToUnit(ee,me,ce,pe)),this._pt=new PropTween(this._pt,_e?Se:oe,me,ue,(ye?_parseRelative(ue,ye+fe):fe)-ue,!_e&&(pe==="px"||me==="zIndex")&&te.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=pe||0,ve!==pe&&pe!=="%"&&(this._pt.b=ce,this._pt.r=_renderCSSPropWithBeginning);else if(me in oe)_tweenComplexCSSString.call(this,ee,me,ce,ye?ye+he:he);else if(me in ee)this.add(ee,me,ce||ee[me],ye?ye+he:he,re,se);else if(me!=="parseTransform"){_missingPlugin(me,he);continue}_e||(me in oe?Pe.push(me,0,oe[me]):Pe.push(me,1,ce||ee[me])),ae.push(me)}}Ee&&_sortPropTweensByPriority(this)},render:function(ee,te){if(te.tween._time||!_reverting())for(var ne=te._pt;ne;)ne.r(ee,ne.d),ne=ne._next;else te.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(ee,te,ne){var re=_propertyAliases[te];return re&&re.indexOf(",")<0&&(te=re),te in _transformProps&&te!==_transformOriginProp$1&&(ee._gsap.x||_get(ee,"x"))?ne&&_recentSetterPlugin===ne?te==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=ne||{})&&(te==="scale"?_setterScaleWithRender:_setterTransformWithRender):ee.style&&!_isUndefined(ee.style[te])?_setterCSSStyle:~te.indexOf("-")?_setterCSSProp:_getSetter(ee,te)},core:{_removeProperty,_getMatrix}};gsap$4.utils.checkPrefix=_checkPropPrefix,gsap$4.core.getStyleSaver=_getStyleSaver$1,function(ie,ee,te,ne){var re=_forEachName(ie+","+ee+","+te,function(se){_transformProps[se]=1});_forEachName(ee,function(se){_config$1.units[se]="deg",_rotationalProperties[se]=1}),_propertyAliases[re[13]]=ie+","+ee,_forEachName(ne,function(se){var ae=se.split(":");_propertyAliases[ae[1]]=re[ae[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(ie){_config$1.units[ie]="px"}),gsap$4.registerPlugin(CSSPlugin);var gsapWithCSS=gsap$4.registerPlugin(CSSPlugin)||gsap$4;gsapWithCSS.core.Tween;function _defineProperties$1(ie,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,ne.key,ne)}}function _createClass$1(ie,ee,te){return ee&&_defineProperties$1(ie.prototype,ee),ie}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$3,_coreInitted$2,_win$2,_doc$2,_docEl$2,_body$4,_isTouch,_pointerType,ScrollTrigger$2,_root$1,_normalizer$1,_eventTypes,_context$1,_getGSAP$2=function(){return gsap$3||typeof window<"u"&&(gsap$3=window.gsap)&&gsap$3.registerPlugin&&gsap$3},_startup$1=1,_observers=[],_scrollers=[],_proxies=[],_getTime$1=Date.now,_bridge=function(ee,te){return te},_integrate=function(){var ee=ScrollTrigger$2.core,te=ee.bridge||{},ne=ee._scrollers,re=ee._proxies;ne.push.apply(ne,_scrollers),re.push.apply(re,_proxies),_scrollers=ne,_proxies=re,_bridge=function(ae,oe){return te[ae](oe)}},_getProxyProp=function(ee,te){return~_proxies.indexOf(ee)&&_proxies[_proxies.indexOf(ee)+1][te]},_isViewport$1=function(ee){return!!~_root$1.indexOf(ee)},_addListener$1=function(ee,te,ne,re,se){return ee.addEventListener(te,ne,{passive:re!==!1,capture:!!se})},_removeListener$1=function(ee,te,ne,re){return ee.removeEventListener(te,ne,!!re)},_scrollLeft="scrollLeft",_scrollTop="scrollTop",_onScroll$1=function(){return _normalizer$1&&_normalizer$1.isPressed||_scrollers.cache++},_scrollCacheFunc=function(ee,te){var ne=function re(se){if(se||se===0){_startup$1&&(_win$2.history.scrollRestoration="manual");var ae=_normalizer$1&&_normalizer$1.isPressed;se=re.v=Math.round(se)||(_normalizer$1&&_normalizer$1.iOS?1:0),ee(se),re.cacheID=_scrollers.cache,ae&&_bridge("ss",se)}else(te||_scrollers.cache!==re.cacheID||_bridge("ref"))&&(re.cacheID=_scrollers.cache,re.v=ee());return re.v+re.offset};return ne.offset=0,ee&&ne},_horizontal={s:_scrollLeft,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_scrollCacheFunc(function(ie){return arguments.length?_win$2.scrollTo(ie,_vertical.sc()):_win$2.pageXOffset||_doc$2[_scrollLeft]||_docEl$2[_scrollLeft]||_body$4[_scrollLeft]||0})},_vertical={s:_scrollTop,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:_horizontal,sc:_scrollCacheFunc(function(ie){return arguments.length?_win$2.scrollTo(_horizontal.sc(),ie):_win$2.pageYOffset||_doc$2[_scrollTop]||_docEl$2[_scrollTop]||_body$4[_scrollTop]||0})},_getTarget=function(ee,te){return(te&&te._ctx&&te._ctx.selector||gsap$3.utils.toArray)(ee)[0]||(typeof ee=="string"&&gsap$3.config().nullTargetWarn!==!1?console.warn("Element not found:",ee):null)},_getScrollFunc=function(ee,te){var ne=te.s,re=te.sc;_isViewport$1(ee)&&(ee=_doc$2.scrollingElement||_docEl$2);var se=_scrollers.indexOf(ee),ae=re===_vertical.sc?1:2;!~se&&(se=_scrollers.push(ee)-1),_scrollers[se+ae]||_addListener$1(ee,"scroll",_onScroll$1);var oe=_scrollers[se+ae],le=oe||(_scrollers[se+ae]=_scrollCacheFunc(_getProxyProp(ee,ne),!0)||(_isViewport$1(ee)?re:_scrollCacheFunc(function(ce){return arguments.length?ee[ne]=ce:ee[ne]})));return le.target=ee,oe||(le.smooth=gsap$3.getProperty(ee,"scrollBehavior")==="smooth"),le},_getVelocityProp=function(ee,te,ne){var re=ee,se=ee,ae=_getTime$1(),oe=ae,le=te||50,ce=Math.max(500,le*3),he=function(ge,me){var ve=_getTime$1();me||ve-ae>le?(se=re,re=ge,oe=ae,ae=ve):ne?re+=ge:re=se+(ge-se)/(ve-oe)*(ae-oe)},fe=function(){se=re=ne?0:re,oe=ae=0},ue=function(ge){var me=oe,ve=se,pe=_getTime$1();return(ge||ge===0)&&ge!==re&&he(ge),ae===oe||pe-oe>ce?0:(re+(ne?ve:-ve))/((ne?pe:ae)-me)*1e3};return{update:he,reset:fe,getVelocity:ue}},_getEvent=function(ee,te){return te&&!ee._gsapAllow&&ee.preventDefault(),ee.changedTouches?ee.changedTouches[0]:ee},_getAbsoluteMax=function(ee){var te=Math.max.apply(Math,ee),ne=Math.min.apply(Math,ee);return Math.abs(te)>=Math.abs(ne)?te:ne},_setScrollTrigger=function(){ScrollTrigger$2=gsap$3.core.globals().ScrollTrigger,ScrollTrigger$2&&ScrollTrigger$2.core&&_integrate()},_initCore$1=function(ee){return gsap$3=ee||_getGSAP$2(),!_coreInitted$2&&gsap$3&&typeof document<"u"&&document.body&&(_win$2=window,_doc$2=document,_docEl$2=_doc$2.documentElement,_body$4=_doc$2.body,_root$1=[_win$2,_doc$2,_docEl$2,_body$4],gsap$3.utils.clamp,_context$1=gsap$3.core.context||function(){},_pointerType="onpointerenter"in _body$4?"pointer":"mouse",_isTouch=Observer.isTouch=_win$2.matchMedia&&_win$2.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in _win$2||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_eventTypes=Observer.eventTypes=("ontouchstart"in _docEl$2?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _docEl$2?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return _startup$1=0},500),_setScrollTrigger(),_coreInitted$2=1),_coreInitted$2};_horizontal.op=_vertical,_scrollers.cache=0;var Observer=function(){function ie(te){this.init(te)}var ee=ie.prototype;return ee.init=function(ne){_coreInitted$2||_initCore$1(gsap$3)||console.warn("Please gsap.registerPlugin(Observer)"),ScrollTrigger$2||_setScrollTrigger();var re=ne.tolerance,se=ne.dragMinimum,ae=ne.type,oe=ne.target,le=ne.lineHeight,ce=ne.debounce,he=ne.preventDefault,fe=ne.onStop,ue=ne.onStopDelay,de=ne.ignore,ge=ne.wheelSpeed,me=ne.event,ve=ne.onDragStart,pe=ne.onDragEnd,ye=ne.onDrag,_e=ne.onPress,xe=ne.onRelease,Se=ne.onRight,be=ne.onLeft,Ee=ne.onUp,Pe=ne.onDown,we=ne.onChangeX,Me=ne.onChangeY,De=ne.onChange,ke=ne.onToggleX,ze=ne.onToggleY,Ve=ne.onHover,Ue=ne.onHoverEnd,Ae=ne.onMove,Fe=ne.ignoreCheck,Te=ne.isNormalizer,Ce=ne.onGestureStart,Le=ne.onGestureEnd,Be=ne.onWheel,st=ne.onEnable,Xe=ne.onDisable,Ge=ne.onClick,He=ne.scrollSpeed,Je=ne.capture,et=ne.allowClicks,ht=ne.lockAxis,vt=ne.onLockAxis;this.target=oe=_getTarget(oe)||_docEl$2,this.vars=ne,de&&(de=gsap$3.utils.toArray(de)),re=re||1e-9,se=se||0,ge=ge||1,He=He||1,ae=ae||"wheel,touch,pointer",ce=ce!==!1,le||(le=parseFloat(_win$2.getComputedStyle(_body$4).lineHeight)||22);var gt,yt,Oe,Ze,qe,ut,at,We=this,ft=0,St=0,$e=ne.passive||!he,Re=_getScrollFunc(oe,_horizontal),Qe=_getScrollFunc(oe,_vertical),ct=Re(),lt=Qe(),ot=~ae.indexOf("touch")&&!~ae.indexOf("pointer")&&_eventTypes[0]==="pointerdown",Et=_isViewport$1(oe),dt=oe.ownerDocument||_doc$2,bt=[0,0,0],It=[0,0,0],mt=0,Tt=function(){return mt=_getTime$1()},Nt=function(Pt,Wt){return(We.event=Pt)&&de&&~de.indexOf(Pt.target)||Wt&&ot&&Pt.pointerType!=="touch"||Fe&&Fe(Pt,Wt)},zt=function(){We._vx.reset(),We._vy.reset(),yt.pause(),fe&&fe(We)},Ct=function(){var Pt=We.deltaX=_getAbsoluteMax(bt),Wt=We.deltaY=_getAbsoluteMax(It),xt=Math.abs(Pt)>=re,Gt=Math.abs(Wt)>=re;De&&(xt||Gt)&&De(We,Pt,Wt,bt,It),xt&&(Se&&We.deltaX>0&&Se(We),be&&We.deltaX<0&&be(We),we&&we(We),ke&&We.deltaX<0!=ft<0&&ke(We),ft=We.deltaX,bt[0]=bt[1]=bt[2]=0),Gt&&(Pe&&We.deltaY>0&&Pe(We),Ee&&We.deltaY<0&&Ee(We),Me&&Me(We),ze&&We.deltaY<0!=St<0&&ze(We),St=We.deltaY,It[0]=It[1]=It[2]=0),(Ze||Oe)&&(Ae&&Ae(We),Oe&&(ye(We),Oe=!1),Ze=!1),ut&&!(ut=!1)&&vt&&vt(We),qe&&(Be(We),qe=!1),gt=0},Vt=function(Pt,Wt,xt){bt[xt]+=Pt,It[xt]+=Wt,We._vx.update(Pt),We._vy.update(Wt),ce?gt||(gt=requestAnimationFrame(Ct)):Ct()},$t=function(Pt,Wt){ht&&!at&&(We.axis=at=Math.abs(Pt)>Math.abs(Wt)?"x":"y",ut=!0),at!=="y"&&(bt[2]+=Pt,We._vx.update(Pt,!0)),at!=="x"&&(It[2]+=Wt,We._vy.update(Wt,!0)),ce?gt||(gt=requestAnimationFrame(Ct)):Ct()},jt=function(Pt){if(!Nt(Pt,1)){Pt=_getEvent(Pt,he);var Wt=Pt.clientX,xt=Pt.clientY,Gt=Wt-We.x,kt=xt-We.y,Ht=We.isDragging;We.x=Wt,We.y=xt,(Ht||Math.abs(We.startX-Wt)>=se||Math.abs(We.startY-xt)>=se)&&(ye&&(Oe=!0),Ht||(We.isDragging=!0),$t(Gt,kt),Ht||ve&&ve(We))}},Ie=We.onPress=function(Ft){Nt(Ft,1)||Ft&&Ft.button||(We.axis=at=null,yt.pause(),We.isPressed=!0,Ft=_getEvent(Ft),ft=St=0,We.startX=We.x=Ft.clientX,We.startY=We.y=Ft.clientY,We._vx.reset(),We._vy.reset(),_addListener$1(Te?oe:dt,_eventTypes[1],jt,$e,!0),We.deltaX=We.deltaY=0,_e&&_e(We))},Ye=We.onRelease=function(Ft){if(!Nt(Ft,1)){_removeListener$1(Te?oe:dt,_eventTypes[1],jt,!0);var Pt=!isNaN(We.y-We.startY),Wt=We.isDragging,xt=Wt&&(Math.abs(We.x-We.startX)>3||Math.abs(We.y-We.startY)>3),Gt=_getEvent(Ft);!xt&&Pt&&(We._vx.reset(),We._vy.reset(),he&&et&&gsap$3.delayedCall(.08,function(){if(_getTime$1()-mt>300&&!Ft.defaultPrevented){if(Ft.target.click)Ft.target.click();else if(dt.createEvent){var kt=dt.createEvent("MouseEvents");kt.initMouseEvent("click",!0,!0,_win$2,1,Gt.screenX,Gt.screenY,Gt.clientX,Gt.clientY,!1,!1,!1,!1,0,null),Ft.target.dispatchEvent(kt)}}})),We.isDragging=We.isGesturing=We.isPressed=!1,fe&&Wt&&!Te&&yt.restart(!0),pe&&Wt&&pe(We),xe&&xe(We,xt)}},nt=function(Pt){return Pt.touches&&Pt.touches.length>1&&(We.isGesturing=!0)&&Ce(Pt,We.isDragging)},rt=function(){return(We.isGesturing=!1)||Le(We)},pt=function(Pt){if(!Nt(Pt)){var Wt=Re(),xt=Qe();Vt((Wt-ct)*He,(xt-lt)*He,1),ct=Wt,lt=xt,fe&&yt.restart(!0)}},At=function(Pt){if(!Nt(Pt)){Pt=_getEvent(Pt,he),Be&&(qe=!0);var Wt=(Pt.deltaMode===1?le:Pt.deltaMode===2?_win$2.innerHeight:1)*ge;Vt(Pt.deltaX*Wt,Pt.deltaY*Wt,0),fe&&!Te&&yt.restart(!0)}},Ut=function(Pt){if(!Nt(Pt)){var Wt=Pt.clientX,xt=Pt.clientY,Gt=Wt-We.x,kt=xt-We.y;We.x=Wt,We.y=xt,Ze=!0,fe&&yt.restart(!0),(Gt||kt)&&$t(Gt,kt)}},ti=function(Pt){We.event=Pt,Ve(We)},Qt=function(Pt){We.event=Pt,Ue(We)},qt=function(Pt){return Nt(Pt)||_getEvent(Pt,he)&&Ge(We)};yt=We._dc=gsap$3.delayedCall(ue||.25,zt).pause(),We.deltaX=We.deltaY=0,We._vx=_getVelocityProp(0,50,!0),We._vy=_getVelocityProp(0,50,!0),We.scrollX=Re,We.scrollY=Qe,We.isDragging=We.isGesturing=We.isPressed=!1,_context$1(this),We.enable=function(Ft){return We.isEnabled||(_addListener$1(Et?dt:oe,"scroll",_onScroll$1),ae.indexOf("scroll")>=0&&_addListener$1(Et?dt:oe,"scroll",pt,$e,Je),ae.indexOf("wheel")>=0&&_addListener$1(oe,"wheel",At,$e,Je),(ae.indexOf("touch")>=0&&_isTouch||ae.indexOf("pointer")>=0)&&(_addListener$1(oe,_eventTypes[0],Ie,$e,Je),_addListener$1(dt,_eventTypes[2],Ye),_addListener$1(dt,_eventTypes[3],Ye),et&&_addListener$1(oe,"click",Tt,!0,!0),Ge&&_addListener$1(oe,"click",qt),Ce&&_addListener$1(dt,"gesturestart",nt),Le&&_addListener$1(dt,"gestureend",rt),Ve&&_addListener$1(oe,_pointerType+"enter",ti),Ue&&_addListener$1(oe,_pointerType+"leave",Qt),Ae&&_addListener$1(oe,_pointerType+"move",Ut)),We.isEnabled=!0,Ft&&Ft.type&&Ie(Ft),st&&st(We)),We},We.disable=function(){We.isEnabled&&(_observers.filter(function(Ft){return Ft!==We&&_isViewport$1(Ft.target)}).length||_removeListener$1(Et?dt:oe,"scroll",_onScroll$1),We.isPressed&&(We._vx.reset(),We._vy.reset(),_removeListener$1(Te?oe:dt,_eventTypes[1],jt,!0)),_removeListener$1(Et?dt:oe,"scroll",pt,Je),_removeListener$1(oe,"wheel",At,Je),_removeListener$1(oe,_eventTypes[0],Ie,Je),_removeListener$1(dt,_eventTypes[2],Ye),_removeListener$1(dt,_eventTypes[3],Ye),_removeListener$1(oe,"click",Tt,!0),_removeListener$1(oe,"click",qt),_removeListener$1(dt,"gesturestart",nt),_removeListener$1(dt,"gestureend",rt),_removeListener$1(oe,_pointerType+"enter",ti),_removeListener$1(oe,_pointerType+"leave",Qt),_removeListener$1(oe,_pointerType+"move",Ut),We.isEnabled=We.isPressed=We.isDragging=!1,Xe&&Xe(We))},We.kill=We.revert=function(){We.disable();var Ft=_observers.indexOf(We);Ft>=0&&_observers.splice(Ft,1),_normalizer$1===We&&(_normalizer$1=0)},_observers.push(We),Te&&_isViewport$1(oe)&&(_normalizer$1=We),We.enable(me)},_createClass$1(ie,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),ie}();Observer.version="3.12.5",Observer.create=function(ie){return new Observer(ie)},Observer.register=_initCore$1,Observer.getAll=function(){return _observers.slice()},Observer.getById=function(ie){return _observers.filter(function(ee){return ee.vars.id===ie})[0]},_getGSAP$2()&&gsap$3.registerPlugin(Observer);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$2,_coreInitted$1,_win$1,_doc$1,_docEl$1,_body$3,_root,_resizeDelay,_toArray$2,_clamp,_time2,_syncInterval,_refreshing,_pointerIsDown,_transformProp$1,_i,_prevWidth,_prevHeight,_autoRefresh,_sort,_suppressOverwrites,_ignoreResize,_normalizer,_ignoreMobileResize,_baseScreenHeight,_baseScreenWidth,_fixIOSBug,_context,_scrollRestoration,_div100vh,_100vh,_isReverted,_clampingMax,_limitCallbacks,_startup=1,_getTime=Date.now,_time1=_getTime(),_lastScrollTime=0,_enabled=0,_parseClamp=function(ee,te,ne){var re=_isString$1(ee)&&(ee.substr(0,6)==="clamp("||ee.indexOf("max")>-1);return ne["_"+te+"Clamp"]=re,re?ee.substr(6,ee.length-7):ee},_keepClamp=function(ee,te){return te&&(!_isString$1(ee)||ee.substr(0,6)!=="clamp(")?"clamp("+ee+")":ee},_rafBugFix=function ie(){return _enabled&&requestAnimationFrame(ie)},_pointerDownHandler=function(){return _pointerIsDown=1},_pointerUpHandler=function(){return _pointerIsDown=0},_passThrough=function(ee){return ee},_round$1=function(ee){return Math.round(ee*1e5)/1e5||0},_windowExists$1=function(){return typeof window<"u"},_getGSAP$1=function(){return gsap$2||_windowExists$1()&&(gsap$2=window.gsap)&&gsap$2.registerPlugin&&gsap$2},_isViewport=function(ee){return!!~_root.indexOf(ee)},_getViewportDimension=function(ee){return(ee==="Height"?_100vh:_win$1["inner"+ee])||_docEl$1["client"+ee]||_body$3["client"+ee]},_getBoundsFunc=function(ee){return _getProxyProp(ee,"getBoundingClientRect")||(_isViewport(ee)?function(){return _winOffsets.width=_win$1.innerWidth,_winOffsets.height=_100vh,_winOffsets}:function(){return _getBounds(ee)})},_getSizeFunc=function(ee,te,ne){var re=ne.d,se=ne.d2,ae=ne.a;return(ae=_getProxyProp(ee,"getBoundingClientRect"))?function(){return ae()[re]}:function(){return(te?_getViewportDimension(se):ee["client"+se])||0}},_getOffsetsFunc=function(ee,te){return!te||~_proxies.indexOf(ee)?_getBoundsFunc(ee):function(){return _winOffsets}},_maxScroll=function(ee,te){var ne=te.s,re=te.d2,se=te.d,ae=te.a;return Math.max(0,(ne="scroll"+re)&&(ae=_getProxyProp(ee,ne))?ae()-_getBoundsFunc(ee)()[se]:_isViewport(ee)?(_docEl$1[ne]||_body$3[ne])-_getViewportDimension(re):ee[ne]-ee["offset"+re])},_iterateAutoRefresh=function(ee,te){for(var ne=0;ne<_autoRefresh.length;ne+=3)(!te||~te.indexOf(_autoRefresh[ne+1]))&&ee(_autoRefresh[ne],_autoRefresh[ne+1],_autoRefresh[ne+2])},_isString$1=function(ee){return typeof ee=="string"},_isFunction$1=function(ee){return typeof ee=="function"},_isNumber=function(ee){return typeof ee=="number"},_isObject=function(ee){return typeof ee=="object"},_endAnimation=function(ee,te,ne){return ee&&ee.progress(te?0:1)&&ne&&ee.pause()},_callback=function(ee,te){if(ee.enabled){var ne=ee._ctx?ee._ctx.add(function(){return te(ee)}):te(ee);ne&&ne.totalTime&&(ee.callbackAnimation=ne)}},_abs=Math.abs,_left="left",_top="top",_right="right",_bottom="bottom",_width="width",_height="height",_Right="Right",_Left="Left",_Top="Top",_Bottom="Bottom",_padding="padding",_margin="margin",_Width="Width",_Height="Height",_px="px",_getComputedStyle=function(ee){return _win$1.getComputedStyle(ee)},_makePositionable=function(ee){var te=_getComputedStyle(ee).position;ee.style.position=te==="absolute"||te==="fixed"?te:"relative"},_setDefaults=function(ee,te){for(var ne in te)ne in ee||(ee[ne]=te[ne]);return ee},_getBounds=function(ee,te){var ne=te&&_getComputedStyle(ee)[_transformProp$1]!=="matrix(1, 0, 0, 1, 0, 0)"&&gsap$2.to(ee,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),re=ee.getBoundingClientRect();return ne&&ne.progress(0).kill(),re},_getSize=function(ee,te){var ne=te.d2;return ee["offset"+ne]||ee["client"+ne]||0},_getLabelRatioArray=function(ee){var te=[],ne=ee.labels,re=ee.duration(),se;for(se in ne)te.push(ne[se]/re);return te},_getClosestLabel=function(ee){return function(te){return gsap$2.utils.snap(_getLabelRatioArray(ee),te)}},_snapDirectional=function(ee){var te=gsap$2.utils.snap(ee),ne=Array.isArray(ee)&&ee.slice(0).sort(function(re,se){return re-se});return ne?function(re,se,ae){ae===void 0&&(ae=.001);var oe;if(!se)return te(re);if(se>0){for(re-=ae,oe=0;oe<ne.length;oe++)if(ne[oe]>=re)return ne[oe];return ne[oe-1]}else for(oe=ne.length,re+=ae;oe--;)if(ne[oe]<=re)return ne[oe];return ne[0]}:function(re,se,ae){ae===void 0&&(ae=.001);var oe=te(re);return!se||Math.abs(oe-re)<ae||oe-re<0==se<0?oe:te(se<0?re-ee:re+ee)}},_getLabelAtDirection=function(ee){return function(te,ne){return _snapDirectional(_getLabelRatioArray(ee))(te,ne.direction)}},_multiListener=function(ee,te,ne,re){return ne.split(",").forEach(function(se){return ee(te,se,re)})},_addListener=function(ee,te,ne,re,se){return ee.addEventListener(te,ne,{passive:!re,capture:!!se})},_removeListener=function(ee,te,ne,re){return ee.removeEventListener(te,ne,!!re)},_wheelListener=function(ee,te,ne){ne=ne&&ne.wheelHandler,ne&&(ee(te,"wheel",ne),ee(te,"touchmove",ne))},_markerDefaults={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_defaults={toggleActions:"play",anticipatePin:0},_keywords={top:0,left:0,center:.5,bottom:1,right:1},_offsetToPx=function(ee,te){if(_isString$1(ee)){var ne=ee.indexOf("="),re=~ne?+(ee.charAt(ne-1)+1)*parseFloat(ee.substr(ne+1)):0;~ne&&(ee.indexOf("%")>ne&&(re*=te/100),ee=ee.substr(0,ne-1)),ee=re+(ee in _keywords?_keywords[ee]*te:~ee.indexOf("%")?parseFloat(ee)*te/100:parseFloat(ee)||0)}return ee},_createMarker=function(ee,te,ne,re,se,ae,oe,le){var ce=se.startColor,he=se.endColor,fe=se.fontSize,ue=se.indent,de=se.fontWeight,ge=_doc$1.createElement("div"),me=_isViewport(ne)||_getProxyProp(ne,"pinType")==="fixed",ve=ee.indexOf("scroller")!==-1,pe=me?_body$3:ne,ye=ee.indexOf("start")!==-1,_e=ye?ce:he,xe="border-color:"+_e+";font-size:"+fe+";color:"+_e+";font-weight:"+de+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return xe+="position:"+((ve||le)&&me?"fixed;":"absolute;"),(ve||le||!me)&&(xe+=(re===_vertical?_right:_bottom)+":"+(ae+parseFloat(ue))+"px;"),oe&&(xe+="box-sizing:border-box;text-align:left;width:"+oe.offsetWidth+"px;"),ge._isStart=ye,ge.setAttribute("class","gsap-marker-"+ee+(te?" marker-"+te:"")),ge.style.cssText=xe,ge.innerText=te||te===0?ee+"-"+te:ee,pe.children[0]?pe.insertBefore(ge,pe.children[0]):pe.appendChild(ge),ge._offset=ge["offset"+re.op.d2],_positionMarker(ge,0,re,ye),ge},_positionMarker=function(ee,te,ne,re){var se={display:"block"},ae=ne[re?"os2":"p2"],oe=ne[re?"p2":"os2"];ee._isFlipped=re,se[ne.a+"Percent"]=re?-100:0,se[ne.a]=re?"1px":0,se["border"+ae+_Width]=1,se["border"+oe+_Width]=0,se[ne.p]=te+"px",gsap$2.set(ee,se)},_triggers=[],_ids={},_rafID,_sync=function(){return _getTime()-_lastScrollTime>34&&(_rafID||(_rafID=requestAnimationFrame(_updateAll)))},_onScroll=function(){(!_normalizer||!_normalizer.isPressed||_normalizer.startX>_body$3.clientWidth)&&(_scrollers.cache++,_normalizer?_rafID||(_rafID=requestAnimationFrame(_updateAll)):_updateAll(),_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime())},_setBaseDimensions=function(){_baseScreenWidth=_win$1.innerWidth,_baseScreenHeight=_win$1.innerHeight},_onResize=function(){_scrollers.cache++,!_refreshing&&!_ignoreResize&&!_doc$1.fullscreenElement&&!_doc$1.webkitFullscreenElement&&(!_ignoreMobileResize||_baseScreenWidth!==_win$1.innerWidth||Math.abs(_win$1.innerHeight-_baseScreenHeight)>_win$1.innerHeight*.25)&&_resizeDelay.restart(!0)},_listeners={},_emptyArray=[],_softRefresh=function ie(){return _removeListener(ScrollTrigger$1,"scrollEnd",ie)||_refreshAll(!0)},_dispatch=function(ee){return _listeners[ee]&&_listeners[ee].map(function(te){return te()})||_emptyArray},_savedStyles=[],_revertRecorded=function(ee){for(var te=0;te<_savedStyles.length;te+=5)(!ee||_savedStyles[te+4]&&_savedStyles[te+4].query===ee)&&(_savedStyles[te].style.cssText=_savedStyles[te+1],_savedStyles[te].getBBox&&_savedStyles[te].setAttribute("transform",_savedStyles[te+2]||""),_savedStyles[te+3].uncache=1)},_revertAll=function(ee,te){var ne;for(_i=0;_i<_triggers.length;_i++)ne=_triggers[_i],ne&&(!te||ne._ctx===te)&&(ee?ne.kill(1):ne.revert(!0,!0));_isReverted=!0,te&&_revertRecorded(te),te||_dispatch("revert")},_clearScrollMemory=function(ee,te){_scrollers.cache++,(te||!_refreshingAll)&&_scrollers.forEach(function(ne){return _isFunction$1(ne)&&ne.cacheID++&&(ne.rec=0)}),_isString$1(ee)&&(_win$1.history.scrollRestoration=_scrollRestoration=ee)},_refreshingAll,_refreshID=0,_queueRefreshID,_queueRefreshAll=function(){if(_queueRefreshID!==_refreshID){var ee=_queueRefreshID=_refreshID;requestAnimationFrame(function(){return ee===_refreshID&&_refreshAll(!0)})}},_refresh100vh=function(){_body$3.appendChild(_div100vh),_100vh=!_normalizer&&_div100vh.offsetHeight||_win$1.innerHeight,_body$3.removeChild(_div100vh)},_hideAllMarkers=function(ee){return _toArray$2(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(te){return te.style.display=ee?"none":"block"})},_refreshAll=function(ee,te){if(_lastScrollTime&&!ee&&!_isReverted){_addListener(ScrollTrigger$1,"scrollEnd",_softRefresh);return}_refresh100vh(),_refreshingAll=ScrollTrigger$1.isRefreshing=!0,_scrollers.forEach(function(re){return _isFunction$1(re)&&++re.cacheID&&(re.rec=re())});var ne=_dispatch("refreshInit");_sort&&ScrollTrigger$1.sort(),te||_revertAll(),_scrollers.forEach(function(re){_isFunction$1(re)&&(re.smooth&&(re.target.style.scrollBehavior="auto"),re(0))}),_triggers.slice(0).forEach(function(re){return re.refresh()}),_isReverted=!1,_triggers.forEach(function(re){if(re._subPinOffset&&re.pin){var se=re.vars.horizontal?"offsetWidth":"offsetHeight",ae=re.pin[se];re.revert(!0,1),re.adjustPinSpacing(re.pin[se]-ae),re.refresh()}}),_clampingMax=1,_hideAllMarkers(!0),_triggers.forEach(function(re){var se=_maxScroll(re.scroller,re._dir),ae=re.vars.end==="max"||re._endClamp&&re.end>se,oe=re._startClamp&&re.start>=se;(ae||oe)&&re.setPositions(oe?se-1:re.start,ae?Math.max(oe?se:re.start+1,se):re.end,!0)}),_hideAllMarkers(!1),_clampingMax=0,ne.forEach(function(re){return re&&re.render&&re.render(-1)}),_scrollers.forEach(function(re){_isFunction$1(re)&&(re.smooth&&requestAnimationFrame(function(){return re.target.style.scrollBehavior="smooth"}),re.rec&&re(re.rec))}),_clearScrollMemory(_scrollRestoration,1),_resizeDelay.pause(),_refreshID++,_refreshingAll=2,_updateAll(2),_triggers.forEach(function(re){return _isFunction$1(re.vars.onRefresh)&&re.vars.onRefresh(re)}),_refreshingAll=ScrollTrigger$1.isRefreshing=!1,_dispatch("refresh")},_lastScroll=0,_direction=1,_primary,_updateAll=function(ee){if(ee===2||!_refreshingAll&&!_isReverted){ScrollTrigger$1.isUpdating=!0,_primary&&_primary.update(0);var te=_triggers.length,ne=_getTime(),re=ne-_time1>=50,se=te&&_triggers[0].scroll();if(_direction=_lastScroll>se?-1:1,_refreshingAll||(_lastScroll=se),re&&(_lastScrollTime&&!_pointerIsDown&&ne-_lastScrollTime>200&&(_lastScrollTime=0,_dispatch("scrollEnd")),_time2=_time1,_time1=ne),_direction<0){for(_i=te;_i-- >0;)_triggers[_i]&&_triggers[_i].update(0,re);_direction=1}else for(_i=0;_i<te;_i++)_triggers[_i]&&_triggers[_i].update(0,re);ScrollTrigger$1.isUpdating=!1}_rafID=0},_propNamesToCopy=[_left,_top,_bottom,_right,_margin+_Bottom,_margin+_Right,_margin+_Top,_margin+_Left,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],_stateProps=_propNamesToCopy.concat([_width,_height,"boxSizing","max"+_Width,"max"+_Height,"position",_margin,_padding,_padding+_Top,_padding+_Right,_padding+_Bottom,_padding+_Left]),_swapPinOut=function(ee,te,ne){_setState(ne);var re=ee._gsap;if(re.spacerIsNative)_setState(re.spacerState);else if(ee._gsap.swappedIn){var se=te.parentNode;se&&(se.insertBefore(ee,te),se.removeChild(te))}ee._gsap.swappedIn=!1},_swapPinIn=function(ee,te,ne,re){if(!ee._gsap.swappedIn){for(var se=_propNamesToCopy.length,ae=te.style,oe=ee.style,le;se--;)le=_propNamesToCopy[se],ae[le]=ne[le];ae.position=ne.position==="absolute"?"absolute":"relative",ne.display==="inline"&&(ae.display="inline-block"),oe[_bottom]=oe[_right]="auto",ae.flexBasis=ne.flexBasis||"auto",ae.overflow="visible",ae.boxSizing="border-box",ae[_width]=_getSize(ee,_horizontal)+_px,ae[_height]=_getSize(ee,_vertical)+_px,ae[_padding]=oe[_margin]=oe[_top]=oe[_left]="0",_setState(re),oe[_width]=oe["max"+_Width]=ne[_width],oe[_height]=oe["max"+_Height]=ne[_height],oe[_padding]=ne[_padding],ee.parentNode!==te&&(ee.parentNode.insertBefore(te,ee),te.appendChild(ee)),ee._gsap.swappedIn=!0}},_capsExp=/([A-Z])/g,_setState=function(ee){if(ee){var te=ee.t.style,ne=ee.length,re=0,se,ae;for((ee.t._gsap||gsap$2.core.getCache(ee.t)).uncache=1;re<ne;re+=2)ae=ee[re+1],se=ee[re],ae?te[se]=ae:te[se]&&te.removeProperty(se.replace(_capsExp,"-$1").toLowerCase())}},_getState=function(ee){for(var te=_stateProps.length,ne=ee.style,re=[],se=0;se<te;se++)re.push(_stateProps[se],ne[_stateProps[se]]);return re.t=ee,re},_copyState=function(ee,te,ne){for(var re=[],se=ee.length,ae=ne?8:0,oe;ae<se;ae+=2)oe=ee[ae],re.push(oe,oe in te?te[oe]:ee[ae+1]);return re.t=ee.t,re},_winOffsets={left:0,top:0},_parsePosition=function(ee,te,ne,re,se,ae,oe,le,ce,he,fe,ue,de,ge){_isFunction$1(ee)&&(ee=ee(le)),_isString$1(ee)&&ee.substr(0,3)==="max"&&(ee=ue+(ee.charAt(4)==="="?_offsetToPx("0"+ee.substr(3),ne):0));var me=de?de.time():0,ve,pe,ye;if(de&&de.seek(0),isNaN(ee)||(ee=+ee),_isNumber(ee))de&&(ee=gsap$2.utils.mapRange(de.scrollTrigger.start,de.scrollTrigger.end,0,ue,ee)),oe&&_positionMarker(oe,ne,re,!0);else{_isFunction$1(te)&&(te=te(le));var _e=(ee||"0").split(" "),xe,Se,be,Ee;ye=_getTarget(te,le)||_body$3,xe=_getBounds(ye)||{},(!xe||!xe.left&&!xe.top)&&_getComputedStyle(ye).display==="none"&&(Ee=ye.style.display,ye.style.display="block",xe=_getBounds(ye),Ee?ye.style.display=Ee:ye.style.removeProperty("display")),Se=_offsetToPx(_e[0],xe[re.d]),be=_offsetToPx(_e[1]||"0",ne),ee=xe[re.p]-ce[re.p]-he+Se+se-be,oe&&_positionMarker(oe,be,re,ne-be<20||oe._isStart&&be>20),ne-=ne-be}if(ge&&(le[ge]=ee||-.001,ee<0&&(ee=0)),ae){var Pe=ee+ne,we=ae._isStart;ve="scroll"+re.d2,_positionMarker(ae,Pe,re,we&&Pe>20||!we&&(fe?Math.max(_body$3[ve],_docEl$1[ve]):ae.parentNode[ve])<=Pe+1),fe&&(ce=_getBounds(oe),fe&&(ae.style[re.op.p]=ce[re.op.p]-re.op.m-ae._offset+_px))}return de&&ye&&(ve=_getBounds(ye),de.seek(ue),pe=_getBounds(ye),de._caScrollDist=ve[re.p]-pe[re.p],ee=ee/de._caScrollDist*ue),de&&de.seek(me),de?ee:Math.round(ee)},_prefixExp=/(webkit|moz|length|cssText|inset)/i,_reparent=function(ee,te,ne,re){if(ee.parentNode!==te){var se=ee.style,ae,oe;if(te===_body$3){ee._stOrig=se.cssText,oe=_getComputedStyle(ee);for(ae in oe)!+ae&&!_prefixExp.test(ae)&&oe[ae]&&typeof se[ae]=="string"&&ae!=="0"&&(se[ae]=oe[ae]);se.top=ne,se.left=re}else se.cssText=ee._stOrig;gsap$2.core.getCache(ee).uncache=1,te.appendChild(ee)}},_interruptionTracker=function(ee,te,ne){var re=te,se=re;return function(ae){var oe=Math.round(ee());return oe!==re&&oe!==se&&Math.abs(oe-re)>3&&Math.abs(oe-se)>3&&(ae=oe,ne&&ne()),se=re,re=ae,ae}},_shiftMarker=function(ee,te,ne){var re={};re[te.p]="+="+ne,gsap$2.set(ee,re)},_getTweenCreator=function(ee,te){var ne=_getScrollFunc(ee,te),re="_scroll"+te.p2,se=function ae(oe,le,ce,he,fe){var ue=ae.tween,de=le.onComplete,ge={};ce=ce||ne();var me=_interruptionTracker(ne,ce,function(){ue.kill(),ae.tween=0});return fe=he&&fe||0,he=he||oe-ce,ue&&ue.kill(),le[re]=oe,le.inherit=!1,le.modifiers=ge,ge[re]=function(){return me(ce+he*ue.ratio+fe*ue.ratio*ue.ratio)},le.onUpdate=function(){_scrollers.cache++,ae.tween&&_updateAll()},le.onComplete=function(){ae.tween=0,de&&de.call(ue)},ue=ae.tween=gsap$2.to(ee,le),ue};return ee[re]=ne,ne.wheelHandler=function(){return se.tween&&se.tween.kill()&&(se.tween=0)},_addListener(ee,"wheel",ne.wheelHandler),ScrollTrigger$1.isTouch&&_addListener(ee,"touchmove",ne.wheelHandler),se},ScrollTrigger$1=function(){function ie(te,ne){_coreInitted$1||ie.register(gsap$2)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_context(this),this.init(te,ne)}var ee=ie.prototype;return ee.init=function(ne,re){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!_enabled){this.update=this.refresh=this.kill=_passThrough;return}ne=_setDefaults(_isString$1(ne)||_isNumber(ne)||ne.nodeType?{trigger:ne}:ne,_defaults);var se=ne,ae=se.onUpdate,oe=se.toggleClass,le=se.id,ce=se.onToggle,he=se.onRefresh,fe=se.scrub,ue=se.trigger,de=se.pin,ge=se.pinSpacing,me=se.invalidateOnRefresh,ve=se.anticipatePin,pe=se.onScrubComplete,ye=se.onSnapComplete,_e=se.once,xe=se.snap,Se=se.pinReparent,be=se.pinSpacer,Ee=se.containerAnimation,Pe=se.fastScrollEnd,we=se.preventOverlaps,Me=ne.horizontal||ne.containerAnimation&&ne.horizontal!==!1?_horizontal:_vertical,De=!fe&&fe!==0,ke=_getTarget(ne.scroller||_win$1),ze=gsap$2.core.getCache(ke),Ve=_isViewport(ke),Ue=("pinType"in ne?ne.pinType:_getProxyProp(ke,"pinType")||Ve&&"fixed")==="fixed",Ae=[ne.onEnter,ne.onLeave,ne.onEnterBack,ne.onLeaveBack],Fe=De&&ne.toggleActions.split(" "),Te="markers"in ne?ne.markers:_defaults.markers,Ce=Ve?0:parseFloat(_getComputedStyle(ke)["border"+Me.p2+_Width])||0,Le=this,Be=ne.onRefreshInit&&function(){return ne.onRefreshInit(Le)},st=_getSizeFunc(ke,Ve,Me),Xe=_getOffsetsFunc(ke,Ve),Ge=0,He=0,Je=0,et=_getScrollFunc(ke,Me),ht,vt,gt,yt,Oe,Ze,qe,ut,at,We,ft,St,$e,Re,Qe,ct,lt,ot,Et,dt,bt,It,mt,Tt,Nt,zt,Ct,Vt,$t,jt,Ie,Ye,nt,rt,pt,At,Ut,ti,Qt;if(Le._startClamp=Le._endClamp=!1,Le._dir=Me,ve*=45,Le.scroller=ke,Le.scroll=Ee?Ee.time.bind(Ee):et,yt=et(),Le.vars=ne,re=re||ne.animation,"refreshPriority"in ne&&(_sort=1,ne.refreshPriority===-9999&&(_primary=Le)),ze.tweenScroll=ze.tweenScroll||{top:_getTweenCreator(ke,_vertical),left:_getTweenCreator(ke,_horizontal)},Le.tweenTo=ht=ze.tweenScroll[Me.p],Le.scrubDuration=function(xt){nt=_isNumber(xt)&&xt,nt?Ye?Ye.duration(xt):Ye=gsap$2.to(re,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:nt,paused:!0,onComplete:function(){return pe&&pe(Le)}}):(Ye&&Ye.progress(1).kill(),Ye=0)},re&&(re.vars.lazy=!1,re._initted&&!Le.isReverted||re.vars.immediateRender!==!1&&ne.immediateRender!==!1&&re.duration()&&re.render(0,!0,!0),Le.animation=re.pause(),re.scrollTrigger=Le,Le.scrubDuration(fe),jt=0,le||(le=re.vars.id)),xe&&((!_isObject(xe)||xe.push)&&(xe={snapTo:xe}),"scrollBehavior"in _body$3.style&&gsap$2.set(Ve?[_body$3,_docEl$1]:ke,{scrollBehavior:"auto"}),_scrollers.forEach(function(xt){return _isFunction$1(xt)&&xt.target===(Ve?_doc$1.scrollingElement||_docEl$1:ke)&&(xt.smooth=!1)}),gt=_isFunction$1(xe.snapTo)?xe.snapTo:xe.snapTo==="labels"?_getClosestLabel(re):xe.snapTo==="labelsDirectional"?_getLabelAtDirection(re):xe.directional!==!1?function(xt,Gt){return _snapDirectional(xe.snapTo)(xt,_getTime()-He<500?0:Gt.direction)}:gsap$2.utils.snap(xe.snapTo),rt=xe.duration||{min:.1,max:2},rt=_isObject(rt)?_clamp(rt.min,rt.max):_clamp(rt,rt),pt=gsap$2.delayedCall(xe.delay||nt/2||.1,function(){var xt=et(),Gt=_getTime()-He<500,kt=ht.tween;if((Gt||Math.abs(Le.getVelocity())<10)&&!kt&&!_pointerIsDown&&Ge!==xt){var Ht=(xt-Ze)/Re,ai=re&&!De?re.totalProgress():Ht,Xt=Gt?0:(ai-Ie)/(_getTime()-_time2)*1e3||0,ni=gsap$2.utils.clamp(-Ht,1-Ht,_abs(Xt/2)*Xt/.185),ci=Ht+(xe.inertia===!1?0:ni),si,ri,ei=xe,di=ei.onStart,Ne=ei.onInterrupt,je=ei.onComplete;if(si=gt(ci,Le),_isNumber(si)||(si=ci),ri=Math.round(Ze+si*Re),xt<=qe&&xt>=Ze&&ri!==xt){if(kt&&!kt._initted&&kt.data<=_abs(ri-xt))return;xe.inertia===!1&&(ni=si-Ht),ht(ri,{duration:rt(_abs(Math.max(_abs(ci-ai),_abs(si-ai))*.185/Xt/.05||0)),ease:xe.ease||"power3",data:_abs(ri-xt),onInterrupt:function(){return pt.restart(!0)&&Ne&&Ne(Le)},onComplete:function(){Le.update(),Ge=et(),re&&(Ye?Ye.resetTo("totalProgress",si,re._tTime/re._tDur):re.progress(si)),jt=Ie=re&&!De?re.totalProgress():Le.progress,ye&&ye(Le),je&&je(Le)}},xt,ni*Re,ri-xt-ni*Re),di&&di(Le,ht.tween)}}else Le.isActive&&Ge!==xt&&pt.restart(!0)}).pause()),le&&(_ids[le]=Le),ue=Le.trigger=_getTarget(ue||de!==!0&&de),Qt=ue&&ue._gsap&&ue._gsap.stRevert,Qt&&(Qt=Qt(Le)),de=de===!0?ue:_getTarget(de),_isString$1(oe)&&(oe={targets:ue,className:oe}),de&&(ge===!1||ge===_margin||(ge=!ge&&de.parentNode&&de.parentNode.style&&_getComputedStyle(de.parentNode).display==="flex"?!1:_padding),Le.pin=de,vt=gsap$2.core.getCache(de),vt.spacer?Qe=vt.pinState:(be&&(be=_getTarget(be),be&&!be.nodeType&&(be=be.current||be.nativeElement),vt.spacerIsNative=!!be,be&&(vt.spacerState=_getState(be))),vt.spacer=ot=be||_doc$1.createElement("div"),ot.classList.add("pin-spacer"),le&&ot.classList.add("pin-spacer-"+le),vt.pinState=Qe=_getState(de)),ne.force3D!==!1&&gsap$2.set(de,{force3D:!0}),Le.spacer=ot=vt.spacer,$t=_getComputedStyle(de),Tt=$t[ge+Me.os2],dt=gsap$2.getProperty(de),bt=gsap$2.quickSetter(de,Me.a,_px),_swapPinIn(de,ot,$t),lt=_getState(de)),Te){St=_isObject(Te)?_setDefaults(Te,_markerDefaults):_markerDefaults,We=_createMarker("scroller-start",le,ke,Me,St,0),ft=_createMarker("scroller-end",le,ke,Me,St,0,We),Et=We["offset"+Me.op.d2];var qt=_getTarget(_getProxyProp(ke,"content")||ke);ut=this.markerStart=_createMarker("start",le,qt,Me,St,Et,0,Ee),at=this.markerEnd=_createMarker("end",le,qt,Me,St,Et,0,Ee),Ee&&(ti=gsap$2.quickSetter([ut,at],Me.a,_px)),!Ue&&!(_proxies.length&&_getProxyProp(ke,"fixedMarkers")===!0)&&(_makePositionable(Ve?_body$3:ke),gsap$2.set([We,ft],{force3D:!0}),zt=gsap$2.quickSetter(We,Me.a,_px),Vt=gsap$2.quickSetter(ft,Me.a,_px))}if(Ee){var Ft=Ee.vars.onUpdate,Pt=Ee.vars.onUpdateParams;Ee.eventCallback("onUpdate",function(){Le.update(0,0,1),Ft&&Ft.apply(Ee,Pt||[])})}if(Le.previous=function(){return _triggers[_triggers.indexOf(Le)-1]},Le.next=function(){return _triggers[_triggers.indexOf(Le)+1]},Le.revert=function(xt,Gt){if(!Gt)return Le.kill(!0);var kt=xt!==!1||!Le.enabled,Ht=_refreshing;kt!==Le.isReverted&&(kt&&(At=Math.max(et(),Le.scroll.rec||0),Je=Le.progress,Ut=re&&re.progress()),ut&&[ut,at,We,ft].forEach(function(ai){return ai.style.display=kt?"none":"block"}),kt&&(_refreshing=Le,Le.update(kt)),de&&(!Se||!Le.isActive)&&(kt?_swapPinOut(de,ot,Qe):_swapPinIn(de,ot,_getComputedStyle(de),Nt)),kt||Le.update(kt),_refreshing=Ht,Le.isReverted=kt)},Le.refresh=function(xt,Gt,kt,Ht){if(!((_refreshing||!Le.enabled)&&!Gt)){if(de&&xt&&_lastScrollTime){_addListener(ie,"scrollEnd",_softRefresh);return}!_refreshingAll&&Be&&Be(Le),_refreshing=Le,ht.tween&&!kt&&(ht.tween.kill(),ht.tween=0),Ye&&Ye.pause(),me&&re&&re.revert({kill:!1}).invalidate(),Le.isReverted||Le.revert(!0,!0),Le._subPinOffset=!1;var ai=st(),Xt=Xe(),ni=Ee?Ee.duration():_maxScroll(ke,Me),ci=Re<=.01,si=0,ri=Ht||0,ei=_isObject(kt)?kt.end:ne.end,di=ne.endTrigger||ue,Ne=_isObject(kt)?kt.start:ne.start||(ne.start===0||!ue?0:de?"0 0":"0 100%"),je=Le.pinnedContainer=ne.pinnedContainer&&_getTarget(ne.pinnedContainer,Le),it=ue&&Math.max(0,_triggers.indexOf(Le))||0,tt=it,Ke,_t,Mt,Lt,wt,Rt,Ot,Bt,Kt,ii,Zt,hi,Yt;for(Te&&_isObject(kt)&&(hi=gsap$2.getProperty(We,Me.p),Yt=gsap$2.getProperty(ft,Me.p));tt--;)Rt=_triggers[tt],Rt.end||Rt.refresh(0,1)||(_refreshing=Le),Ot=Rt.pin,Ot&&(Ot===ue||Ot===de||Ot===je)&&!Rt.isReverted&&(ii||(ii=[]),ii.unshift(Rt),Rt.revert(!0,!0)),Rt!==_triggers[tt]&&(it--,tt--);for(_isFunction$1(Ne)&&(Ne=Ne(Le)),Ne=_parseClamp(Ne,"start",Le),Ze=_parsePosition(Ne,ue,ai,Me,et(),ut,We,Le,Xt,Ce,Ue,ni,Ee,Le._startClamp&&"_startClamp")||(de?-.001:0),_isFunction$1(ei)&&(ei=ei(Le)),_isString$1(ei)&&!ei.indexOf("+=")&&(~ei.indexOf(" ")?ei=(_isString$1(Ne)?Ne.split(" ")[0]:"")+ei:(si=_offsetToPx(ei.substr(2),ai),ei=_isString$1(Ne)?Ne:(Ee?gsap$2.utils.mapRange(0,Ee.duration(),Ee.scrollTrigger.start,Ee.scrollTrigger.end,Ze):Ze)+si,di=ue)),ei=_parseClamp(ei,"end",Le),qe=Math.max(Ze,_parsePosition(ei||(di?"100% 0":ni),di,ai,Me,et()+si,at,ft,Le,Xt,Ce,Ue,ni,Ee,Le._endClamp&&"_endClamp"))||-.001,si=0,tt=it;tt--;)Rt=_triggers[tt],Ot=Rt.pin,Ot&&Rt.start-Rt._pinPush<=Ze&&!Ee&&Rt.end>0&&(Ke=Rt.end-(Le._startClamp?Math.max(0,Rt.start):Rt.start),(Ot===ue&&Rt.start-Rt._pinPush<Ze||Ot===je)&&isNaN(Ne)&&(si+=Ke*(1-Rt.progress)),Ot===de&&(ri+=Ke));if(Ze+=si,qe+=si,Le._startClamp&&(Le._startClamp+=si),Le._endClamp&&!_refreshingAll&&(Le._endClamp=qe||-.001,qe=Math.min(qe,_maxScroll(ke,Me))),Re=qe-Ze||(Ze-=.01)&&.001,ci&&(Je=gsap$2.utils.clamp(0,1,gsap$2.utils.normalize(Ze,qe,At))),Le._pinPush=ri,ut&&si&&(Ke={},Ke[Me.a]="+="+si,je&&(Ke[Me.p]="-="+et()),gsap$2.set([ut,at],Ke)),de&&!(_clampingMax&&Le.end>=_maxScroll(ke,Me)))Ke=_getComputedStyle(de),Lt=Me===_vertical,Mt=et(),It=parseFloat(dt(Me.a))+ri,!ni&&qe>1&&(Zt=(Ve?_doc$1.scrollingElement||_docEl$1:ke).style,Zt={style:Zt,value:Zt["overflow"+Me.a.toUpperCase()]},Ve&&_getComputedStyle(_body$3)["overflow"+Me.a.toUpperCase()]!=="scroll"&&(Zt.style["overflow"+Me.a.toUpperCase()]="scroll")),_swapPinIn(de,ot,Ke),lt=_getState(de),_t=_getBounds(de,!0),Bt=Ue&&_getScrollFunc(ke,Lt?_horizontal:_vertical)(),ge?(Nt=[ge+Me.os2,Re+ri+_px],Nt.t=ot,tt=ge===_padding?_getSize(de,Me)+Re+ri:0,tt&&(Nt.push(Me.d,tt+_px),ot.style.flexBasis!=="auto"&&(ot.style.flexBasis=tt+_px)),_setState(Nt),je&&_triggers.forEach(function(Dt){Dt.pin===je&&Dt.vars.pinSpacing!==!1&&(Dt._subPinOffset=!0)}),Ue&&et(At)):(tt=_getSize(de,Me),tt&&ot.style.flexBasis!=="auto"&&(ot.style.flexBasis=tt+_px)),Ue&&(wt={top:_t.top+(Lt?Mt-Ze:Bt)+_px,left:_t.left+(Lt?Bt:Mt-Ze)+_px,boxSizing:"border-box",position:"fixed"},wt[_width]=wt["max"+_Width]=Math.ceil(_t.width)+_px,wt[_height]=wt["max"+_Height]=Math.ceil(_t.height)+_px,wt[_margin]=wt[_margin+_Top]=wt[_margin+_Right]=wt[_margin+_Bottom]=wt[_margin+_Left]="0",wt[_padding]=Ke[_padding],wt[_padding+_Top]=Ke[_padding+_Top],wt[_padding+_Right]=Ke[_padding+_Right],wt[_padding+_Bottom]=Ke[_padding+_Bottom],wt[_padding+_Left]=Ke[_padding+_Left],ct=_copyState(Qe,wt,Se),_refreshingAll&&et(0)),re?(Kt=re._initted,_suppressOverwrites(1),re.render(re.duration(),!0,!0),mt=dt(Me.a)-It+Re+ri,Ct=Math.abs(Re-mt)>1,Ue&&Ct&&ct.splice(ct.length-2,2),re.render(0,!0,!0),Kt||re.invalidate(!0),re.parent||re.totalTime(re.totalTime()),_suppressOverwrites(0)):mt=Re,Zt&&(Zt.value?Zt.style["overflow"+Me.a.toUpperCase()]=Zt.value:Zt.style.removeProperty("overflow-"+Me.a));else if(ue&&et()&&!Ee)for(_t=ue.parentNode;_t&&_t!==_body$3;)_t._pinOffset&&(Ze-=_t._pinOffset,qe-=_t._pinOffset),_t=_t.parentNode;ii&&ii.forEach(function(Dt){return Dt.revert(!1,!0)}),Le.start=Ze,Le.end=qe,yt=Oe=_refreshingAll?At:et(),!Ee&&!_refreshingAll&&(yt<At&&et(At),Le.scroll.rec=0),Le.revert(!1,!0),He=_getTime(),pt&&(Ge=-1,pt.restart(!0)),_refreshing=0,re&&De&&(re._initted||Ut)&&re.progress()!==Ut&&re.progress(Ut||0,!0).render(re.time(),!0,!0),(ci||Je!==Le.progress||Ee||me)&&(re&&!De&&re.totalProgress(Ee&&Ze<-.001&&!Je?gsap$2.utils.normalize(Ze,qe,0):Je,!0),Le.progress=ci||(yt-Ze)/Re===Je?0:Je),de&&ge&&(ot._pinOffset=Math.round(Le.progress*mt)),Ye&&Ye.invalidate(),isNaN(hi)||(hi-=gsap$2.getProperty(We,Me.p),Yt-=gsap$2.getProperty(ft,Me.p),_shiftMarker(We,Me,hi),_shiftMarker(ut,Me,hi-(Ht||0)),_shiftMarker(ft,Me,Yt),_shiftMarker(at,Me,Yt-(Ht||0))),ci&&!_refreshingAll&&Le.update(),he&&!_refreshingAll&&!$e&&($e=!0,he(Le),$e=!1)}},Le.getVelocity=function(){return(et()-Oe)/(_getTime()-_time2)*1e3||0},Le.endAnimation=function(){_endAnimation(Le.callbackAnimation),re&&(Ye?Ye.progress(1):re.paused()?De||_endAnimation(re,Le.direction<0,1):_endAnimation(re,re.reversed()))},Le.labelToScroll=function(xt){return re&&re.labels&&(Ze||Le.refresh()||Ze)+re.labels[xt]/re.duration()*Re||0},Le.getTrailing=function(xt){var Gt=_triggers.indexOf(Le),kt=Le.direction>0?_triggers.slice(0,Gt).reverse():_triggers.slice(Gt+1);return(_isString$1(xt)?kt.filter(function(Ht){return Ht.vars.preventOverlaps===xt}):kt).filter(function(Ht){return Le.direction>0?Ht.end<=Ze:Ht.start>=qe})},Le.update=function(xt,Gt,kt){if(!(Ee&&!kt&&!xt)){var Ht=_refreshingAll===!0?At:Le.scroll(),ai=xt?0:(Ht-Ze)/Re,Xt=ai<0?0:ai>1?1:ai||0,ni=Le.progress,ci,si,ri,ei,di,Ne,je,it;if(Gt&&(Oe=yt,yt=Ee?et():Ht,xe&&(Ie=jt,jt=re&&!De?re.totalProgress():Xt)),ve&&de&&!_refreshing&&!_startup&&_lastScrollTime&&(!Xt&&Ze<Ht+(Ht-Oe)/(_getTime()-_time2)*ve?Xt=1e-4:Xt===1&&qe>Ht+(Ht-Oe)/(_getTime()-_time2)*ve&&(Xt=.9999)),Xt!==ni&&Le.enabled){if(ci=Le.isActive=!!Xt&&Xt<1,si=!!ni&&ni<1,Ne=ci!==si,di=Ne||!!Xt!=!!ni,Le.direction=Xt>ni?1:-1,Le.progress=Xt,di&&!_refreshing&&(ri=Xt&&!ni?0:Xt===1?1:ni===1?2:3,De&&(ei=!Ne&&Fe[ri+1]!=="none"&&Fe[ri+1]||Fe[ri],it=re&&(ei==="complete"||ei==="reset"||ei in re))),we&&(Ne||it)&&(it||fe||!re)&&(_isFunction$1(we)?we(Le):Le.getTrailing(we).forEach(function(Mt){return Mt.endAnimation()})),De||(Ye&&!_refreshing&&!_startup?(Ye._dp._time-Ye._start!==Ye._time&&Ye.render(Ye._dp._time-Ye._start),Ye.resetTo?Ye.resetTo("totalProgress",Xt,re._tTime/re._tDur):(Ye.vars.totalProgress=Xt,Ye.invalidate().restart())):re&&re.totalProgress(Xt,!!(_refreshing&&(He||xt)))),de){if(xt&&ge&&(ot.style[ge+Me.os2]=Tt),!Ue)bt(_round$1(It+mt*Xt));else if(di){if(je=!xt&&Xt>ni&&qe+1>Ht&&Ht+1>=_maxScroll(ke,Me),Se)if(!xt&&(ci||je)){var tt=_getBounds(de,!0),Ke=Ht-Ze;_reparent(de,_body$3,tt.top+(Me===_vertical?Ke:0)+_px,tt.left+(Me===_vertical?0:Ke)+_px)}else _reparent(de,ot);_setState(ci||je?ct:lt),Ct&&Xt<1&&ci||bt(It+(Xt===1&&!je?mt:0))}}xe&&!ht.tween&&!_refreshing&&!_startup&&pt.restart(!0),oe&&(Ne||_e&&Xt&&(Xt<1||!_limitCallbacks))&&_toArray$2(oe.targets).forEach(function(Mt){return Mt.classList[ci||_e?"add":"remove"](oe.className)}),ae&&!De&&!xt&&ae(Le),di&&!_refreshing?(De&&(it&&(ei==="complete"?re.pause().totalProgress(1):ei==="reset"?re.restart(!0).pause():ei==="restart"?re.restart(!0):re[ei]()),ae&&ae(Le)),(Ne||!_limitCallbacks)&&(ce&&Ne&&_callback(Le,ce),Ae[ri]&&_callback(Le,Ae[ri]),_e&&(Xt===1?Le.kill(!1,1):Ae[ri]=0),Ne||(ri=Xt===1?1:3,Ae[ri]&&_callback(Le,Ae[ri]))),Pe&&!ci&&Math.abs(Le.getVelocity())>(_isNumber(Pe)?Pe:2500)&&(_endAnimation(Le.callbackAnimation),Ye?Ye.progress(1):_endAnimation(re,ei==="reverse"?1:!Xt,1))):De&&ae&&!_refreshing&&ae(Le)}if(Vt){var _t=Ee?Ht/Ee.duration()*(Ee._caScrollDist||0):Ht;zt(_t+(We._isFlipped?1:0)),Vt(_t)}ti&&ti(-Ht/Ee.duration()*(Ee._caScrollDist||0))}},Le.enable=function(xt,Gt){Le.enabled||(Le.enabled=!0,_addListener(ke,"resize",_onResize),Ve||_addListener(ke,"scroll",_onScroll),Be&&_addListener(ie,"refreshInit",Be),xt!==!1&&(Le.progress=Je=0,yt=Oe=Ge=et()),Gt!==!1&&Le.refresh())},Le.getTween=function(xt){return xt&&ht?ht.tween:Ye},Le.setPositions=function(xt,Gt,kt,Ht){if(Ee){var ai=Ee.scrollTrigger,Xt=Ee.duration(),ni=ai.end-ai.start;xt=ai.start+ni*xt/Xt,Gt=ai.start+ni*Gt/Xt}Le.refresh(!1,!1,{start:_keepClamp(xt,kt&&!!Le._startClamp),end:_keepClamp(Gt,kt&&!!Le._endClamp)},Ht),Le.update()},Le.adjustPinSpacing=function(xt){if(Nt&&xt){var Gt=Nt.indexOf(Me.d)+1;Nt[Gt]=parseFloat(Nt[Gt])+xt+_px,Nt[1]=parseFloat(Nt[1])+xt+_px,_setState(Nt)}},Le.disable=function(xt,Gt){if(Le.enabled&&(xt!==!1&&Le.revert(!0,!0),Le.enabled=Le.isActive=!1,Gt||Ye&&Ye.pause(),At=0,vt&&(vt.uncache=1),Be&&_removeListener(ie,"refreshInit",Be),pt&&(pt.pause(),ht.tween&&ht.tween.kill()&&(ht.tween=0)),!Ve)){for(var kt=_triggers.length;kt--;)if(_triggers[kt].scroller===ke&&_triggers[kt]!==Le)return;_removeListener(ke,"resize",_onResize),Ve||_removeListener(ke,"scroll",_onScroll)}},Le.kill=function(xt,Gt){Le.disable(xt,Gt),Ye&&!Gt&&Ye.kill(),le&&delete _ids[le];var kt=_triggers.indexOf(Le);kt>=0&&_triggers.splice(kt,1),kt===_i&&_direction>0&&_i--,kt=0,_triggers.forEach(function(Ht){return Ht.scroller===Le.scroller&&(kt=1)}),kt||_refreshingAll||(Le.scroll.rec=0),re&&(re.scrollTrigger=null,xt&&re.revert({kill:!1}),Gt||re.kill()),ut&&[ut,at,We,ft].forEach(function(Ht){return Ht.parentNode&&Ht.parentNode.removeChild(Ht)}),_primary===Le&&(_primary=0),de&&(vt&&(vt.uncache=1),kt=0,_triggers.forEach(function(Ht){return Ht.pin===de&&kt++}),kt||(vt.spacer=0)),ne.onKill&&ne.onKill(Le)},_triggers.push(Le),Le.enable(!1,!1),Qt&&Qt(Le),re&&re.add&&!Re){var Wt=Le.update;Le.update=function(){Le.update=Wt,Ze||qe||Le.refresh()},gsap$2.delayedCall(.01,Le.update),Re=.01,Ze=qe=0}else Le.refresh();de&&_queueRefreshAll()},ie.register=function(ne){return _coreInitted$1||(gsap$2=ne||_getGSAP$1(),_windowExists$1()&&window.document&&ie.enable(),_coreInitted$1=_enabled),_coreInitted$1},ie.defaults=function(ne){if(ne)for(var re in ne)_defaults[re]=ne[re];return _defaults},ie.disable=function(ne,re){_enabled=0,_triggers.forEach(function(ae){return ae[re?"kill":"disable"](ne)}),_removeListener(_win$1,"wheel",_onScroll),_removeListener(_doc$1,"scroll",_onScroll),clearInterval(_syncInterval),_removeListener(_doc$1,"touchcancel",_passThrough),_removeListener(_body$3,"touchstart",_passThrough),_multiListener(_removeListener,_doc$1,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_removeListener,_doc$1,"pointerup,touchend,mouseup",_pointerUpHandler),_resizeDelay.kill(),_iterateAutoRefresh(_removeListener);for(var se=0;se<_scrollers.length;se+=3)_wheelListener(_removeListener,_scrollers[se],_scrollers[se+1]),_wheelListener(_removeListener,_scrollers[se],_scrollers[se+2])},ie.enable=function(){if(_win$1=window,_doc$1=document,_docEl$1=_doc$1.documentElement,_body$3=_doc$1.body,gsap$2&&(_toArray$2=gsap$2.utils.toArray,_clamp=gsap$2.utils.clamp,_context=gsap$2.core.context||_passThrough,_suppressOverwrites=gsap$2.core.suppressOverwrites||_passThrough,_scrollRestoration=_win$1.history.scrollRestoration||"auto",_lastScroll=_win$1.pageYOffset,gsap$2.core.globals("ScrollTrigger",ie),_body$3)){_enabled=1,_div100vh=document.createElement("div"),_div100vh.style.height="100vh",_div100vh.style.position="absolute",_refresh100vh(),_rafBugFix(),Observer.register(gsap$2),ie.isTouch=Observer.isTouch,_fixIOSBug=Observer.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),_ignoreMobileResize=Observer.isTouch===1,_addListener(_win$1,"wheel",_onScroll),_root=[_win$1,_doc$1,_docEl$1,_body$3],gsap$2.matchMedia?(ie.matchMedia=function(le){var ce=gsap$2.matchMedia(),he;for(he in le)ce.add(he,le[he]);return ce},gsap$2.addEventListener("matchMediaInit",function(){return _revertAll()}),gsap$2.addEventListener("matchMediaRevert",function(){return _revertRecorded()}),gsap$2.addEventListener("matchMedia",function(){_refreshAll(0,1),_dispatch("matchMedia")}),gsap$2.matchMedia("(orientation: portrait)",function(){return _setBaseDimensions(),_setBaseDimensions})):console.warn("Requires GSAP 3.11.0 or later"),_setBaseDimensions(),_addListener(_doc$1,"scroll",_onScroll);var ne=_body$3.style,re=ne.borderTopStyle,se=gsap$2.core.Animation.prototype,ae,oe;for(se.revert||Object.defineProperty(se,"revert",{value:function(){return this.time(-.01,!0)}}),ne.borderTopStyle="solid",ae=_getBounds(_body$3),_vertical.m=Math.round(ae.top+_vertical.sc())||0,_horizontal.m=Math.round(ae.left+_horizontal.sc())||0,re?ne.borderTopStyle=re:ne.removeProperty("border-top-style"),_syncInterval=setInterval(_sync,250),gsap$2.delayedCall(.5,function(){return _startup=0}),_addListener(_doc$1,"touchcancel",_passThrough),_addListener(_body$3,"touchstart",_passThrough),_multiListener(_addListener,_doc$1,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_addListener,_doc$1,"pointerup,touchend,mouseup",_pointerUpHandler),_transformProp$1=gsap$2.utils.checkPrefix("transform"),_stateProps.push(_transformProp$1),_coreInitted$1=_getTime(),_resizeDelay=gsap$2.delayedCall(.2,_refreshAll).pause(),_autoRefresh=[_doc$1,"visibilitychange",function(){var le=_win$1.innerWidth,ce=_win$1.innerHeight;_doc$1.hidden?(_prevWidth=le,_prevHeight=ce):(_prevWidth!==le||_prevHeight!==ce)&&_onResize()},_doc$1,"DOMContentLoaded",_refreshAll,_win$1,"load",_refreshAll,_win$1,"resize",_onResize],_iterateAutoRefresh(_addListener),_triggers.forEach(function(le){return le.enable(0,1)}),oe=0;oe<_scrollers.length;oe+=3)_wheelListener(_removeListener,_scrollers[oe],_scrollers[oe+1]),_wheelListener(_removeListener,_scrollers[oe],_scrollers[oe+2])}},ie.config=function(ne){"limitCallbacks"in ne&&(_limitCallbacks=!!ne.limitCallbacks);var re=ne.syncInterval;re&&clearInterval(_syncInterval)||(_syncInterval=re)&&setInterval(_sync,re),"ignoreMobileResize"in ne&&(_ignoreMobileResize=ie.isTouch===1&&ne.ignoreMobileResize),"autoRefreshEvents"in ne&&(_iterateAutoRefresh(_removeListener)||_iterateAutoRefresh(_addListener,ne.autoRefreshEvents||"none"),_ignoreResize=(ne.autoRefreshEvents+"").indexOf("resize")===-1)},ie.scrollerProxy=function(ne,re){var se=_getTarget(ne),ae=_scrollers.indexOf(se),oe=_isViewport(se);~ae&&_scrollers.splice(ae,oe?6:2),re&&(oe?_proxies.unshift(_win$1,re,_body$3,re,_docEl$1,re):_proxies.unshift(se,re))},ie.clearMatchMedia=function(ne){_triggers.forEach(function(re){return re._ctx&&re._ctx.query===ne&&re._ctx.kill(!0,!0)})},ie.isInViewport=function(ne,re,se){var ae=(_isString$1(ne)?_getTarget(ne):ne).getBoundingClientRect(),oe=ae[se?_width:_height]*re||0;return se?ae.right-oe>0&&ae.left+oe<_win$1.innerWidth:ae.bottom-oe>0&&ae.top+oe<_win$1.innerHeight},ie.positionInViewport=function(ne,re,se){_isString$1(ne)&&(ne=_getTarget(ne));var ae=ne.getBoundingClientRect(),oe=ae[se?_width:_height],le=re==null?oe/2:re in _keywords?_keywords[re]*oe:~re.indexOf("%")?parseFloat(re)*oe/100:parseFloat(re)||0;return se?(ae.left+le)/_win$1.innerWidth:(ae.top+le)/_win$1.innerHeight},ie.killAll=function(ne){if(_triggers.slice(0).forEach(function(se){return se.vars.id!=="ScrollSmoother"&&se.kill()}),ne!==!0){var re=_listeners.killAll||[];_listeners={},re.forEach(function(se){return se()})}},ie}();ScrollTrigger$1.version="3.12.5",ScrollTrigger$1.saveStyles=function(ie){return ie?_toArray$2(ie).forEach(function(ee){if(ee&&ee.style){var te=_savedStyles.indexOf(ee);te>=0&&_savedStyles.splice(te,5),_savedStyles.push(ee,ee.style.cssText,ee.getBBox&&ee.getAttribute("transform"),gsap$2.core.getCache(ee),_context())}}):_savedStyles},ScrollTrigger$1.revert=function(ie,ee){return _revertAll(!ie,ee)},ScrollTrigger$1.create=function(ie,ee){return new ScrollTrigger$1(ie,ee)},ScrollTrigger$1.refresh=function(ie){return ie?_onResize():(_coreInitted$1||ScrollTrigger$1.register())&&_refreshAll(!0)},ScrollTrigger$1.update=function(ie){return++_scrollers.cache&&_updateAll(ie===!0?2:0)},ScrollTrigger$1.clearScrollMemory=_clearScrollMemory,ScrollTrigger$1.maxScroll=function(ie,ee){return _maxScroll(ie,ee?_horizontal:_vertical)},ScrollTrigger$1.getScrollFunc=function(ie,ee){return _getScrollFunc(_getTarget(ie),ee?_horizontal:_vertical)},ScrollTrigger$1.getById=function(ie){return _ids[ie]},ScrollTrigger$1.getAll=function(){return _triggers.filter(function(ie){return ie.vars.id!=="ScrollSmoother"})},ScrollTrigger$1.isScrolling=function(){return!!_lastScrollTime},ScrollTrigger$1.snapDirectional=_snapDirectional,ScrollTrigger$1.addEventListener=function(ie,ee){var te=_listeners[ie]||(_listeners[ie]=[]);~te.indexOf(ee)||te.push(ee)},ScrollTrigger$1.removeEventListener=function(ie,ee){var te=_listeners[ie],ne=te&&te.indexOf(ee);ne>=0&&te.splice(ne,1)},ScrollTrigger$1.batch=function(ie,ee){var te=[],ne={},re=ee.interval||.016,se=ee.batchMax||1e9,ae=function(ce,he){var fe=[],ue=[],de=gsap$2.delayedCall(re,function(){he(fe,ue),fe=[],ue=[]}).pause();return function(ge){fe.length||de.restart(!0),fe.push(ge.trigger),ue.push(ge),se<=fe.length&&de.progress(1)}},oe;for(oe in ee)ne[oe]=oe.substr(0,2)==="on"&&_isFunction$1(ee[oe])&&oe!=="onRefreshInit"?ae(oe,ee[oe]):ee[oe];return _isFunction$1(se)&&(se=se(),_addListener(ScrollTrigger$1,"refresh",function(){return se=ee.batchMax()})),_toArray$2(ie).forEach(function(le){var ce={};for(oe in ne)ce[oe]=ne[oe];ce.trigger=le,te.push(ScrollTrigger$1.create(ce))}),te};var _clampScrollAndGetDurationMultiplier=function(ee,te,ne,re){return te>re?ee(re):te<0&&ee(0),ne>re?(re-te)/(ne-te):ne<0?te/(te-ne):1},_allowNativePanning=function ie(ee,te){te===!0?ee.style.removeProperty("touch-action"):ee.style.touchAction=te===!0?"auto":te?"pan-"+te+(Observer.isTouch?" pinch-zoom":""):"none",ee===_docEl$1&&ie(_body$3,te)},_overflow={auto:1,scroll:1},_nestedScroll=function(ee){var te=ee.event,ne=ee.target,re=ee.axis,se=(te.changedTouches?te.changedTouches[0]:te).target,ae=se._gsap||gsap$2.core.getCache(se),oe=_getTime(),le;if(!ae._isScrollT||oe-ae._isScrollT>2e3){for(;se&&se!==_body$3&&(se.scrollHeight<=se.clientHeight&&se.scrollWidth<=se.clientWidth||!(_overflow[(le=_getComputedStyle(se)).overflowY]||_overflow[le.overflowX]));)se=se.parentNode;ae._isScroll=se&&se!==ne&&!_isViewport(se)&&(_overflow[(le=_getComputedStyle(se)).overflowY]||_overflow[le.overflowX]),ae._isScrollT=oe}(ae._isScroll||re==="x")&&(te.stopPropagation(),te._gsapAllow=!0)},_inputObserver=function(ee,te,ne,re){return Observer.create({target:ee,capture:!0,debounce:!1,lockAxis:!0,type:te,onWheel:re=re&&_nestedScroll,onPress:re,onDrag:re,onScroll:re,onEnable:function(){return ne&&_addListener(_doc$1,Observer.eventTypes[0],_captureInputs,!1,!0)},onDisable:function(){return _removeListener(_doc$1,Observer.eventTypes[0],_captureInputs,!0)}})},_inputExp=/(input|label|select|textarea)/i,_inputIsFocused,_captureInputs=function(ee){var te=_inputExp.test(ee.target.tagName);(te||_inputIsFocused)&&(ee._gsapAllow=!0,_inputIsFocused=te)},_getScrollNormalizer=function(ee){_isObject(ee)||(ee={}),ee.preventDefault=ee.isNormalizer=ee.allowClicks=!0,ee.type||(ee.type="wheel,touch"),ee.debounce=!!ee.debounce,ee.id=ee.id||"normalizer";var te=ee,ne=te.normalizeScrollX,re=te.momentum,se=te.allowNestedScroll,ae=te.onRelease,oe,le,ce=_getTarget(ee.target)||_docEl$1,he=gsap$2.core.globals().ScrollSmoother,fe=he&&he.get(),ue=_fixIOSBug&&(ee.content&&_getTarget(ee.content)||fe&&ee.content!==!1&&!fe.smooth()&&fe.content()),de=_getScrollFunc(ce,_vertical),ge=_getScrollFunc(ce,_horizontal),me=1,ve=(Observer.isTouch&&_win$1.visualViewport?_win$1.visualViewport.scale*_win$1.visualViewport.width:_win$1.outerWidth)/_win$1.innerWidth,pe=0,ye=_isFunction$1(re)?function(){return re(oe)}:function(){return re||2.8},_e,xe,Se=_inputObserver(ce,ee.type,!0,se),be=function(){return xe=!1},Ee=_passThrough,Pe=_passThrough,we=function(){le=_maxScroll(ce,_vertical),Pe=_clamp(_fixIOSBug?1:0,le),ne&&(Ee=_clamp(0,_maxScroll(ce,_horizontal))),_e=_refreshID},Me=function(){ue._gsap.y=_round$1(parseFloat(ue._gsap.y)+de.offset)+"px",ue.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(ue._gsap.y)+", 0, 1)",de.offset=de.cacheID=0},De=function(){if(xe){requestAnimationFrame(be);var Te=_round$1(oe.deltaY/2),Ce=Pe(de.v-Te);if(ue&&Ce!==de.v+de.offset){de.offset=Ce-de.v;var Le=_round$1((parseFloat(ue&&ue._gsap.y)||0)-de.offset);ue.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Le+", 0, 1)",ue._gsap.y=Le+"px",de.cacheID=_scrollers.cache,_updateAll()}return!0}de.offset&&Me(),xe=!0},ke,ze,Ve,Ue,Ae=function(){we(),ke.isActive()&&ke.vars.scrollY>le&&(de()>le?ke.progress(1)&&de(le):ke.resetTo("scrollY",le))};return ue&&gsap$2.set(ue,{y:"+=0"}),ee.ignoreCheck=function(Fe){return _fixIOSBug&&Fe.type==="touchmove"&&De()||me>1.05&&Fe.type!=="touchstart"||oe.isGesturing||Fe.touches&&Fe.touches.length>1},ee.onPress=function(){xe=!1;var Fe=me;me=_round$1((_win$1.visualViewport&&_win$1.visualViewport.scale||1)/ve),ke.pause(),Fe!==me&&_allowNativePanning(ce,me>1.01?!0:ne?!1:"x"),ze=ge(),Ve=de(),we(),_e=_refreshID},ee.onRelease=ee.onGestureStart=function(Fe,Te){if(de.offset&&Me(),!Te)Ue.restart(!0);else{_scrollers.cache++;var Ce=ye(),Le,Be;ne&&(Le=ge(),Be=Le+Ce*.05*-Fe.velocityX/.227,Ce*=_clampScrollAndGetDurationMultiplier(ge,Le,Be,_maxScroll(ce,_horizontal)),ke.vars.scrollX=Ee(Be)),Le=de(),Be=Le+Ce*.05*-Fe.velocityY/.227,Ce*=_clampScrollAndGetDurationMultiplier(de,Le,Be,_maxScroll(ce,_vertical)),ke.vars.scrollY=Pe(Be),ke.invalidate().duration(Ce).play(.01),(_fixIOSBug&&ke.vars.scrollY>=le||Le>=le-1)&&gsap$2.to({},{onUpdate:Ae,duration:Ce})}ae&&ae(Fe)},ee.onWheel=function(){ke._ts&&ke.pause(),_getTime()-pe>1e3&&(_e=0,pe=_getTime())},ee.onChange=function(Fe,Te,Ce,Le,Be){if(_refreshID!==_e&&we(),Te&&ne&&ge(Ee(Le[2]===Te?ze+(Fe.startX-Fe.x):ge()+Te-Le[1])),Ce){de.offset&&Me();var st=Be[2]===Ce,Xe=st?Ve+Fe.startY-Fe.y:de()+Ce-Be[1],Ge=Pe(Xe);st&&Xe!==Ge&&(Ve+=Ge-Xe),de(Ge)}(Ce||Te)&&_updateAll()},ee.onEnable=function(){_allowNativePanning(ce,ne?!1:"x"),ScrollTrigger$1.addEventListener("refresh",Ae),_addListener(_win$1,"resize",Ae),de.smooth&&(de.target.style.scrollBehavior="auto",de.smooth=ge.smooth=!1),Se.enable()},ee.onDisable=function(){_allowNativePanning(ce,!0),_removeListener(_win$1,"resize",Ae),ScrollTrigger$1.removeEventListener("refresh",Ae),Se.kill()},ee.lockAxis=ee.lockAxis!==!1,oe=new Observer(ee),oe.iOS=_fixIOSBug,_fixIOSBug&&!de()&&de(1),_fixIOSBug&&gsap$2.ticker.add(_passThrough),Ue=oe._dc,ke=gsap$2.to(oe,{ease:"power4",paused:!0,inherit:!1,scrollX:ne?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:_interruptionTracker(de,de(),function(){return ke.pause()})},onUpdate:_updateAll,onComplete:Ue.vars.onComplete}),oe};ScrollTrigger$1.sort=function(ie){return _triggers.sort(ie||function(ee,te){return(ee.vars.refreshPriority||0)*-1e6+ee.start-(te.start+(te.vars.refreshPriority||0)*-1e6)})},ScrollTrigger$1.observe=function(ie){return new Observer(ie)},ScrollTrigger$1.normalizeScroll=function(ie){if(typeof ie>"u")return _normalizer;if(ie===!0&&_normalizer)return _normalizer.enable();if(ie===!1){_normalizer&&_normalizer.kill(),_normalizer=ie;return}var ee=ie instanceof Observer?ie:_getScrollNormalizer(ie);return _normalizer&&_normalizer.target===ee.target&&_normalizer.kill(),_isViewport(ee.target)&&(_normalizer=ee),ee},ScrollTrigger$1.core={_getVelocityProp,_inputObserver,_scrollers,_proxies,bridge:{ss:function(){_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime()},ref:function(){return _refreshing}}},_getGSAP$1()&&gsap$2.registerPlugin(ScrollTrigger$1);function t(ie,ee,te){return Math.max(ie,Math.min(ee,te))}class Animate{advance(ee){var oe;if(!this.isRunning)return;let te=!1;if(this.lerp)this.value=(ne=this.value,re=this.to,se=60*this.lerp,ae=ee,function(le,ce,he){return(1-he)*le+he*ce}(ne,re,1-Math.exp(-se*ae))),Math.round(this.value)===this.to&&(this.value=this.to,te=!0);else{this.currentTime+=ee;const le=t(0,this.currentTime/this.duration,1);te=le>=1;const ce=te?1:this.easing(le);this.value=this.from+(this.to-this.from)*ce}var ne,re,se,ae;(oe=this.onUpdate)==null||oe.call(this,this.value,te),te&&this.stop()}stop(){this.isRunning=!1}fromTo(ee,te,{lerp:ne=.1,duration:re=1,easing:se=le=>le,onStart:ae,onUpdate:oe}){this.from=this.value=ee,this.to=te,this.lerp=ne,this.duration=re,this.easing=se,this.currentTime=0,this.isRunning=!0,ae==null||ae(),this.onUpdate=oe}}class Dimensions{constructor({wrapper:ee,content:te,autoResize:ne=!0,debounce:re=250}={}){li(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});li(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});li(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=ee,this.content=te,ne&&(this.debouncedResize=function(se,ae){let oe;return function(){let le=arguments,ce=this;clearTimeout(oe),oe=setTimeout(function(){se.apply(ce,le)},ae)}}(this.resize,re),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var ee,te;(ee=this.wrapperResizeObserver)==null||ee.disconnect(),(te=this.contentResizeObserver)==null||te.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(ee,...te){let ne=this.events[ee]||[];for(let re=0,se=ne.length;re<se;re++)ne[re](...te)}on(ee,te){var ne;return(ne=this.events[ee])!=null&&ne.push(te)||(this.events[ee]=[te]),()=>{var re;this.events[ee]=(re=this.events[ee])==null?void 0:re.filter(se=>te!==se)}}off(ee,te){var ne;this.events[ee]=(ne=this.events[ee])==null?void 0:ne.filter(re=>te!==re)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(ee,{wheelMultiplier:te=1,touchMultiplier:ne=1}){li(this,"onTouchStart",ee=>{const{clientX:te,clientY:ne}=ee.targetTouches?ee.targetTouches[0]:ee;this.touchStart.x=te,this.touchStart.y=ne,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:ee})});li(this,"onTouchMove",ee=>{const{clientX:te,clientY:ne}=ee.targetTouches?ee.targetTouches[0]:ee,re=-(te-this.touchStart.x)*this.touchMultiplier,se=-(ne-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=te,this.touchStart.y=ne,this.lastDelta={x:re,y:se},this.emitter.emit("scroll",{deltaX:re,deltaY:se,event:ee})});li(this,"onTouchEnd",ee=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:ee})});li(this,"onWheel",ee=>{let{deltaX:te,deltaY:ne,deltaMode:re}=ee;te*=re===1?e:re===2?this.windowWidth:1,ne*=re===1?e:re===2?this.windowHeight:1,te*=this.wheelMultiplier,ne*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:te,deltaY:ne,event:ee})});li(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=ee,this.wheelMultiplier=te,this.touchMultiplier=ne,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(ee,te){return this.emitter.on(ee,te)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:ee=window,content:te=document.documentElement,wheelEventsTarget:ne=ee,eventsTarget:re=ne,smoothWheel:se=!0,syncTouch:ae=!1,syncTouchLerp:oe=.075,touchInertiaMultiplier:le=35,duration:ce,easing:he=_e=>Math.min(1,1.001-Math.pow(2,-10*_e)),lerp:fe=!ce&&.1,infinite:ue=!1,orientation:de="vertical",gestureOrientation:ge="vertical",touchMultiplier:me=1,wheelMultiplier:ve=1,autoResize:pe=!0,__experimental__naiveDimensions:ye=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:_e,deltaY:xe,event:Se})=>{if(Se.ctrlKey)return;const be=Se.type.includes("touch"),Ee=Se.type.includes("wheel");if(this.options.syncTouch&&be&&Se.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const Pe=_e===0&&xe===0,we=this.options.gestureOrientation==="vertical"&&xe===0||this.options.gestureOrientation==="horizontal"&&_e===0;if(Pe||we)return;let Me=Se.composedPath();if(Me=Me.slice(0,Me.indexOf(this.rootElement)),Me.find(Ve=>{var Ue,Ae,Fe,Te,Ce;return((Ue=Ve.hasAttribute)===null||Ue===void 0?void 0:Ue.call(Ve,"data-lenis-prevent"))||be&&((Ae=Ve.hasAttribute)===null||Ae===void 0?void 0:Ae.call(Ve,"data-lenis-prevent-touch"))||Ee&&((Fe=Ve.hasAttribute)===null||Fe===void 0?void 0:Fe.call(Ve,"data-lenis-prevent-wheel"))||((Te=Ve.classList)===null||Te===void 0?void 0:Te.contains("lenis"))&&!(!((Ce=Ve.classList)===null||Ce===void 0)&&Ce.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void Se.preventDefault();if(this.isSmooth=this.options.syncTouch&&be||this.options.smoothWheel&&Ee,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();Se.preventDefault();let De=xe;this.options.gestureOrientation==="both"?De=Math.abs(xe)>Math.abs(_e)?xe:_e:this.options.gestureOrientation==="horizontal"&&(De=_e);const ke=be&&this.options.syncTouch,ze=be&&Se.type==="touchend"&&Math.abs(De)>5;ze&&(De=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+De,Object.assign({programmatic:!1},ke?{lerp:ze?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const _e=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-_e),this.emit()}},window.lenisVersion="1.0.42",ee!==document.documentElement&&ee!==document.body||(ee=window),this.options={wrapper:ee,content:te,wheelEventsTarget:ne,eventsTarget:re,smoothWheel:se,syncTouch:ae,syncTouchLerp:oe,touchInertiaMultiplier:le,duration:ce,easing:he,lerp:fe,infinite:ue,gestureOrientation:ge,orientation:de,touchMultiplier:me,wheelMultiplier:ve,autoResize:pe,__experimental__naiveDimensions:ye},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:ee,content:te,autoResize:pe}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=ae||se,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(re,{touchMultiplier:me,wheelMultiplier:ve}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(ee,te){return this.emitter.on(ee,te)}off(ee,te){return this.emitter.off(ee,te)}setScroll(ee){this.isHorizontal?this.rootElement.scrollLeft=ee:this.rootElement.scrollTop=ee}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(ee){const te=ee-(this.time||ee);this.time=ee,this.animate.advance(.001*te)}scrollTo(ee,{offset:te=0,immediate:ne=!1,lock:re=!1,duration:se=this.options.duration,easing:ae=this.options.easing,lerp:oe=!se&&this.options.lerp,onComplete:le,force:ce=!1,programmatic:he=!0}={}){if(!this.isStopped&&!this.isLocked||ce){if(["top","left","start"].includes(ee))ee=0;else if(["bottom","right","end"].includes(ee))ee=this.limit;else{let fe;if(typeof ee=="string"?fe=document.querySelector(ee):ee!=null&&ee.nodeType&&(fe=ee),fe){if(this.options.wrapper!==window){const de=this.options.wrapper.getBoundingClientRect();te-=this.isHorizontal?de.left:de.top}const ue=fe.getBoundingClientRect();ee=(this.isHorizontal?ue.left:ue.top)+this.animatedScroll}}if(typeof ee=="number"){if(ee+=te,ee=Math.round(ee),this.options.infinite?he&&(this.targetScroll=this.animatedScroll=this.scroll):ee=t(0,ee,this.limit),ne)return this.animatedScroll=this.targetScroll=ee,this.setScroll(this.scroll),this.reset(),void(le==null||le(this));if(!he){if(ee===this.targetScroll)return;this.targetScroll=ee}this.animate.fromTo(this.animatedScroll,ee,{duration:se,easing:ae,lerp:oe,onStart:()=>{re&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(fe,ue)=>{this.isScrolling=!0,this.velocity=fe-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=fe,this.setScroll(this.scroll),he&&(this.targetScroll=fe),ue||this.emit(),ue&&(this.reset(),this.emit(),le==null||le(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(ee=this.animatedScroll,te=this.limit,(ee%te+te)%te):this.animatedScroll;var ee,te}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(ee){this.__isSmooth!==ee&&(this.__isSmooth=ee,this.toggleClassName("lenis-smooth",ee))}get isScrolling(){return this.__isScrolling}set isScrolling(ee){this.__isScrolling!==ee&&(this.__isScrolling=ee,this.toggleClassName("lenis-scrolling",ee))}get isStopped(){return this.__isStopped}set isStopped(ee){this.__isStopped!==ee&&(this.__isStopped=ee,this.toggleClassName("lenis-stopped",ee))}get isLocked(){return this.__isLocked}set isLocked(ee){this.__isLocked!==ee&&(this.__isLocked=ee,this.toggleClassName("lenis-locked",ee))}get className(){let ee="lenis";return this.isStopped&&(ee+=" lenis-stopped"),this.isLocked&&(ee+=" lenis-locked"),this.isScrolling&&(ee+=" lenis-scrolling"),this.isSmooth&&(ee+=" lenis-smooth"),ee}toggleClassName(ee,te){this.rootElement.classList.toggle(ee,te),this.emitter.emit("className change",this)}}class Motion{constructor(ee){this.container=ee,this.showCreditsBtn=this.container.querySelector("#showCreditsBtn"),this.creditsWrapper=this.container.querySelector(".motion-credits-wrapper"),this.hideCreditsBtn=this.container.querySelector("#hideCreditsBtn"),this.video=this.container.querySelector("#mainVideo"),this.playBtn=this.container.querySelector("#playBtn"),this.soundBtn=this.container.querySelector("#soundBtn"),this.soundLines=[...this.container.querySelectorAll(".sound-line")],this.nextLinksContainer=document.querySelectorAll(".next-link"),this.links=Array.from(this.nextLinksContainer).map(te=>te.getAttribute("href")),this.nextLink=this.container.querySelector(".motion-next-wrapper"),this.nextVideo=this.container.querySelector("#nextVideo"),this.prevLink=this.container.querySelector(".motion-prev-wrapper"),this.prevVideo=this.container.querySelector("#prevVideo"),this.iconNext=this.container.querySelector(".controls-icon.next"),this.iconPrev=this.container.querySelector(".controls-icon.prev"),this.fullscreenBtn=this.container.querySelector(".fullscreen"),this.workDurationWrapper=this.container.querySelector(".work-duration-wrapper"),this.lottieWrapper=this.container.querySelector(".lottie-wrapper"),this.videoThumbnails=[],this.progressMarker=null,this.progressTrail=null,this.init()}loadVideo(){return new Promise(ee=>{this.video.readyState>=2?ee():(this.video.addEventListener("loadeddata",(function te(){this.video.removeEventListener("loadeddata",te),ee()}).bind(this)),this.video.src=this.video.src)})}async init(){await this.loadVideo(),this.toggleCredits(),this.animateSoundIcons(),this.toggleControls(),this.setUpNextPrev(),this.nextUpTimelines(),this.updatePaths(),this.generateTimeline(),this.setupTimelineNavigation(),await this.generateThumbnails(),this.addTimelineHoverEffects(),this.showVideo(),this.createProgressMarker(),this.setupProgressUpdate(),this.addListener()}toggleCredits(){this.creditsTl=gsapWithCSS.timeline({paused:!0}),this.creditsTl.to(this.creditsWrapper,{clipPath:"inset(0% 0% 0% 0%)",ease:"expo.out",duration:1}),this.showCreditsBtn.addEventListener("click",()=>{this.creditsTl.play()}),this.hideCreditsBtn.addEventListener("click",()=>{this.creditsTl.reverse()})}muteVideo(){this.video.muted=!0,gsapWithCSS.to(".mute",{clipPath:"inset(0% 0% 0% 0%)",duration:.75})}unmuteVideo(){this.video.muted=!1,gsapWithCSS.to(".mute",{clipPath:"inset(100% 0% 0% 0%)",duration:.75})}playVideo(){this.video.play(),gsapWithCSS.to(".pause",{fillOpacity:1,duration:.75}),gsapWithCSS.to(".play",{fillOpacity:0,duration:.75})}pauseVideo(){this.video.pause(),gsapWithCSS.to(".pause",{fillOpacity:0,duration:.75}),gsapWithCSS.to(".play",{fillOpacity:1,duration:.75})}animateSoundIcons(){gsapWithCSS.set(this.soundLines,{transformOrigin:"bottom center"}),this.tlSoundLines=gsapWithCSS.timeline({repeat:-1,yoyo:!0,paused:!0}),this.soundLines.forEach((ee,te)=>{this.tlSoundLines.to(ee,{scaleY:gsapWithCSS.utils.random(.3,.7),duration:.4,ease:"power1.inOut"},te*.2)})}checkSoundLinesAnimation(){!this.video.muted&&!this.video.paused?this.tlSoundLines.play():(this.tlSoundLines.pause(),gsapWithCSS.to(this.soundLines,{scaleY:1,duration:.1}))}nextUpTimelines(){this.tlNext=gsapWithCSS.timeline({paused:!0}),this.tlNext.to(this.nextLink,{clipPath:"inset(0% 0% 0% 0%)",duration:.5}).fromTo(".mask",{opacity:0},{opacity:1,duration:.5},"<"),this.tlPrev=gsapWithCSS.timeline({paused:!0}),this.tlPrev.to(this.prevLink,{clipPath:"inset(0% 0% 0% 0%)",duration:.5}).fromTo(".mask",{opacity:0},{opacity:1,duration:.5},"<")}toggleControls(){this.soundBtn.addEventListener("click",()=>{this.video.muted?this.unmuteVideo():this.muteVideo(),this.checkSoundLinesAnimation()}),this.playBtn.addEventListener("click",()=>{this.video.paused?this.playVideo():this.pauseVideo(),this.checkSoundLinesAnimation()}),this.video.addEventListener("play",()=>{this.checkSoundLinesAnimation()}),this.video.addEventListener("pause",()=>{this.checkSoundLinesAnimation()}),this.fullscreenBtn.addEventListener("click",()=>{this.video.requestFullscreen?this.video.requestFullscreen():this.video.mozRequestFullScreen?this.video.mozRequestFullScreen():this.video.webkitRequestFullscreen?this.video.webkitRequestFullscreen():this.video.msRequestFullscreen&&this.video.msRequestFullscreen()})}findAdjacentLinks(ee,te){const ne=te.indexOf(ee);if(ne===-1)return{previous:null,next:null};const re=ne===0?te[te.length-1]:te[ne-1],se=ne===te.length-1?te[0]:te[ne+1];return{previous:re,next:se}}setUpNextPrev(){const ee=this.findAdjacentLinks(window.location.pathname,this.links);if(ee.next){this.nextLink.href=ee.next,this.iconNext.href=ee.next;const ne=this.nextLinksContainer[this.links.indexOf(ee.next)].querySelector(".video-link");ne&&this.nextVideo&&(this.nextVideo.src=ne.textContent.trim())}if(ee.previous){this.prevLink.href=ee.previous,this.iconPrev.href=ee.previous;const ne=this.nextLinksContainer[this.links.indexOf(ee.previous)].querySelector(".video-link");ne&&this.prevVideo&&(this.prevVideo.src=ne.textContent.trim())}this.iconNext.addEventListener("mouseenter",()=>{this.tlNext.play()}),this.iconNext.addEventListener("mouseleave",()=>{this.tlNext.reverse()}),this.iconPrev.addEventListener("mouseenter",()=>{this.tlPrev.play()}),this.iconPrev.addEventListener("mouseleave",()=>{this.tlPrev.reverse()})}generateTimeline(){const ee=this.video.duration;let te;ee<=30?te=2:ee<=60?te=5:ee<=300?te=20:te=60;const ne=Math.min(5,te),re=te/ne;this.workDurationWrapper.innerHTML="";const se=document.createElement("div");se.className="timeline-lines",this.workDurationWrapper.appendChild(se);const ae=document.createElement("div");ae.className="timeline-thumbnails",this.workDurationWrapper.appendChild(ae);for(let oe=0;oe<=ee;oe+=re){const le=document.createElement("div");le.className="timeline-minor-line",le.style.left=`${oe/ee*100}%`,se.appendChild(le);const ce=document.createElement("div");if(ce.className="video-thumbnail",ce.style.left=`${oe/ee*100}%`,ae.appendChild(ce),this.videoThumbnails.push(ce),oe%te<.001||oe===ee){const he=document.createElement("div");he.className="timeline-major-line",he.style.left=`${oe/ee*100}%`,se.appendChild(he);const fe=document.createElement("span");fe.className="time-label",fe.textContent=this.formatTime(oe),fe.style.left=`${oe/ee*100}%`,se.appendChild(fe)}}}setupTimelineNavigation(){this.workDurationWrapper.addEventListener("click",ee=>{const te=this.workDurationWrapper.getBoundingClientRect(),re=(ee.clientX-te.left)/te.width,se=this.video.duration*re;this.video.currentTime=se,this.video.paused&&this.playVideo()})}formatTime(ee){const te=Math.floor(ee/60),ne=Math.floor(ee%60);return`${te.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`}showVideo(){this.video.currentTime=0,this.mask=this.container.querySelector(".mask-alt"),gsapWithCSS.to(this.video,{opacity:1,duration:.65}),gsapWithCSS.to([this.lottieWrapper,this.mask],{opacity:0,display:"none",duration:.6}),this.video.paused||(gsapWithCSS.to(".pause",{fillOpacity:1,duration:.75}),gsapWithCSS.to(".play",{fillOpacity:0,duration:.75}))}async generateThumbnails(){const ee=this.video.duration,te=this.videoThumbnails.length,ne=ee/te,re=this.getThumbnailsFromSessionStorage();if(re){this.applyThumbnails(re);return}const se=document.createElement("canvas"),ae=se.getContext("2d");se.width=160,se.height=90;const oe=[];for(let le=0;le<te;le++){const ce=le*ne,he=await this.captureVideoFrame(ce,se,ae);oe.push({dataUrl:he,startTime:ce,endTime:Math.min(ce+ne,ee)})}this.storeThumbnailsInSessionStorage(oe),this.applyThumbnails(oe)}getThumbnailsFromSessionStorage(){const ee=this.video.src,te=sessionStorage.getItem(`thumbnails_${ee}`);return te?JSON.parse(te):null}storeThumbnailsInSessionStorage(ee){const te=this.video.src;sessionStorage.setItem(`thumbnails_${te}`,JSON.stringify(ee))}applyThumbnails(ee){ee.forEach((te,ne)=>{const re=this.videoThumbnails[ne];re.style.backgroundImage=`url(${te.dataUrl})`,re.dataset.startTime=te.startTime,re.dataset.endTime=te.endTime})}captureVideoFrame(ee,te,ne){return new Promise(re=>{this.video.currentTime=ee,this.video.onseeked=()=>{ne.drawImage(this.video,0,0,te.width,te.height),re(te.toDataURL("image/jpeg"))}})}addTimelineHoverEffects(){this.workDurationWrapper.addEventListener("mouseenter",()=>{gsapWithCSS.to(".timeline-major-line",{height:"20px",duration:.3}),gsapWithCSS.to(".timeline-minor-line",{height:"15px",duration:.3}),gsapWithCSS.to(".video-thumbnail",{opacity:1,duration:.3,delay:.1}),gsapWithCSS.from(".video-thumbnail",{clipPath:"inset(100% 0% 0% 0%)",duration:.75,delay:.1})}),this.workDurationWrapper.addEventListener("mouseleave",()=>{gsapWithCSS.to(".timeline-major-line",{height:"15px",duration:.3,delay:.35}),gsapWithCSS.to(".timeline-minor-line",{height:"10px",duration:.3,delay:.35}),gsapWithCSS.to(".video-thumbnail",{opacity:0,duration:.3}),gsapWithCSS.to(".video-thumbnail",{clipPath:"inset(0% 0% 0% 0%)",duration:.75})})}createProgressMarker(){this.progressTrail=document.createElement("div"),this.progressTrail.className="progress-trail",this.workDurationWrapper.appendChild(this.progressTrail),this.progressMarker=document.createElement("div"),this.progressMarker.className="progress-marker",this.workDurationWrapper.appendChild(this.progressMarker);const ee=document.createElement("style");ee.textContent=`
            .progress-trail {
                position: absolute;
                height: 4px;
                background: linear-gradient(to right, #3498db, #D9D9D9);
                bottom: 0;
                left: 0;
                transform-origin: left;
                transform: scaleX(0);
            }
            .progress-marker {
                position: absolute;
                width: 0.5rem;
                height: 0.5rem;
                border-radius: 50%;
                background-color: #D9D9D9;
                box-shadow: 0 0 10px #D9D9D9, 0 0 20px #D9D9D9;
                bottom: -4px;
                transform: translateX(-50%);
                z-index: 10;
            }
        `,document.head.appendChild(ee)}setupProgressUpdate(){this.video.addEventListener("timeupdate",()=>{const ee=this.video.currentTime/this.video.duration;this.updateProgressMarker(ee)})}updateProgressMarker(ee){const te=this.workDurationWrapper.offsetWidth*ee;gsapWithCSS.to(this.progressMarker,{left:te,duration:.5,ease:"ease.out"}),gsapWithCSS.to(this.progressTrail,{scaleX:ee,duration:.5,ease:"ease.out"})}addListener(){this.video.addEventListener("click",()=>{this.video.paused||(gsapWithCSS.to(".pause",{fillOpacity:1,duration:.75}),gsapWithCSS.to(".play",{fillOpacity:0,duration:.75}))}),window.addEventListener("resize",()=>{this.updatePaths()}),this.container.querySelectorAll(".link-wrapper").forEach(ee=>{ee.addEventListener("mouseenter",this.applyHoverStyles),ee.addEventListener("mouseleave",this.updatePaths)})}updatePaths(){document.querySelectorAll(".embed.credits rect").forEach(ne=>{ne.style.strokeDasharray=`${remToPx(1.25)}px ${remToPx(.625)}px ${remToPx(1.25)}px ${remToPx(5)}px`,ne.style.strokeDashoffset=`${remToPx(2.5)}px`,ne.style.strokeWidth=`${remToPx(.0625)}px`}),document.querySelectorAll(".embed.hide-c rect").forEach(ne=>{ne.style.strokeDasharray=`${remToPx(1)}px ${remToPx(.5)}px ${remToPx(1)}px ${remToPx(4)}px`,ne.style.strokeDashoffset=`${remToPx(2)}px`,ne.style.strokeWidth=`${remToPx(.0625)}px`})}applyHoverStyles(){document.querySelectorAll(".embed.credits rect").forEach(ne=>{ne.style.strokeDashoffset=`${remToPx(10.625)}px`,ne.style.strokeDasharray=`${remToPx(1.25)}px ${remToPx(.625)}px ${remToPx(1.25)}px ${remToPx(5)}px`}),document.querySelectorAll(".embed.hide-c rect").forEach(ne=>{ne.style.strokeDashoffset=`${remToPx(8.5)}px`,ne.style.strokeDasharray=`${remToPx(1)}px ${remToPx(.5)}px ${remToPx(1)}px ${remToPx(4)}px`})}}function remToPx(ie){return ie*parseFloat(getComputedStyle(document.documentElement).fontSize)}/**
* @license
* Copyright 2010-2024 Three.js Authors
* SPDX-License-Identifier: MIT
*/const REVISION="167",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(ee,te){this._listeners===void 0&&(this._listeners={});const ne=this._listeners;ne[ee]===void 0&&(ne[ee]=[]),ne[ee].indexOf(te)===-1&&ne[ee].push(te)}hasEventListener(ee,te){if(this._listeners===void 0)return!1;const ne=this._listeners;return ne[ee]!==void 0&&ne[ee].indexOf(te)!==-1}removeEventListener(ee,te){if(this._listeners===void 0)return;const re=this._listeners[ee];if(re!==void 0){const se=re.indexOf(te);se!==-1&&re.splice(se,1)}}dispatchEvent(ee){if(this._listeners===void 0)return;const ne=this._listeners[ee.type];if(ne!==void 0){ee.target=this;const re=ne.slice(0);for(let se=0,ae=re.length;se<ae;se++)re[se].call(this,ee);ee.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const ie=Math.random()*4294967295|0,ee=Math.random()*4294967295|0,te=Math.random()*4294967295|0,ne=Math.random()*4294967295|0;return(_lut[ie&255]+_lut[ie>>8&255]+_lut[ie>>16&255]+_lut[ie>>24&255]+"-"+_lut[ee&255]+_lut[ee>>8&255]+"-"+_lut[ee>>16&15|64]+_lut[ee>>24&255]+"-"+_lut[te&63|128]+_lut[te>>8&255]+"-"+_lut[te>>16&255]+_lut[te>>24&255]+_lut[ne&255]+_lut[ne>>8&255]+_lut[ne>>16&255]+_lut[ne>>24&255]).toLowerCase()}function clamp$1(ie,ee,te){return Math.max(ee,Math.min(te,ie))}function euclideanModulo(ie,ee){return(ie%ee+ee)%ee}function mapLinear(ie,ee,te,ne,re){return ne+(ie-ee)*(re-ne)/(te-ee)}function inverseLerp(ie,ee,te){return ie!==ee?(te-ie)/(ee-ie):0}function lerp(ie,ee,te){return(1-te)*ie+te*ee}function damp(ie,ee,te,ne){return lerp(ie,ee,1-Math.exp(-te*ne))}function pingpong(ie,ee=1){return ee-Math.abs(euclideanModulo(ie,ee*2)-ee)}function smoothstep(ie,ee,te){return ie<=ee?0:ie>=te?1:(ie=(ie-ee)/(te-ee),ie*ie*(3-2*ie))}function smootherstep(ie,ee,te){return ie<=ee?0:ie>=te?1:(ie=(ie-ee)/(te-ee),ie*ie*ie*(ie*(ie*6-15)+10))}function randInt(ie,ee){return ie+Math.floor(Math.random()*(ee-ie+1))}function randFloat(ie,ee){return ie+Math.random()*(ee-ie)}function randFloatSpread(ie){return ie*(.5-Math.random())}function seededRandom(ie){ie!==void 0&&(_seed=ie);let ee=_seed+=1831565813;return ee=Math.imul(ee^ee>>>15,ee|1),ee^=ee+Math.imul(ee^ee>>>7,ee|61),((ee^ee>>>14)>>>0)/4294967296}function degToRad(ie){return ie*DEG2RAD}function radToDeg(ie){return ie*RAD2DEG}function isPowerOfTwo(ie){return(ie&ie-1)===0&&ie!==0}function ceilPowerOfTwo(ie){return Math.pow(2,Math.ceil(Math.log(ie)/Math.LN2))}function floorPowerOfTwo(ie){return Math.pow(2,Math.floor(Math.log(ie)/Math.LN2))}function setQuaternionFromProperEuler(ie,ee,te,ne,re){const se=Math.cos,ae=Math.sin,oe=se(te/2),le=ae(te/2),ce=se((ee+ne)/2),he=ae((ee+ne)/2),fe=se((ee-ne)/2),ue=ae((ee-ne)/2),de=se((ne-ee)/2),ge=ae((ne-ee)/2);switch(re){case"XYX":ie.set(oe*he,le*fe,le*ue,oe*ce);break;case"YZY":ie.set(le*ue,oe*he,le*fe,oe*ce);break;case"ZXZ":ie.set(le*fe,le*ue,oe*he,oe*ce);break;case"XZX":ie.set(oe*he,le*ge,le*de,oe*ce);break;case"YXY":ie.set(le*de,oe*he,le*ge,oe*ce);break;case"ZYZ":ie.set(le*ge,le*de,oe*he,oe*ce);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+re)}}function denormalize(ie,ee){switch(ee.constructor){case Float32Array:return ie;case Uint32Array:return ie/4294967295;case Uint16Array:return ie/65535;case Uint8Array:return ie/255;case Int32Array:return Math.max(ie/2147483647,-1);case Int16Array:return Math.max(ie/32767,-1);case Int8Array:return Math.max(ie/127,-1);default:throw new Error("Invalid component type.")}}function normalize(ie,ee){switch(ee.constructor){case Float32Array:return ie;case Uint32Array:return Math.round(ie*4294967295);case Uint16Array:return Math.round(ie*65535);case Uint8Array:return Math.round(ie*255);case Int32Array:return Math.round(ie*2147483647);case Int16Array:return Math.round(ie*32767);case Int8Array:return Math.round(ie*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(ee=0,te=0){Vector2.prototype.isVector2=!0,this.x=ee,this.y=te}get width(){return this.x}set width(ee){this.x=ee}get height(){return this.y}set height(ee){this.y=ee}set(ee,te){return this.x=ee,this.y=te,this}setScalar(ee){return this.x=ee,this.y=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y)}copy(ee){return this.x=ee.x,this.y=ee.y,this}add(ee){return this.x+=ee.x,this.y+=ee.y,this}addScalar(ee){return this.x+=ee,this.y+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this}sub(ee){return this.x-=ee.x,this.y-=ee.y,this}subScalar(ee){return this.x-=ee,this.y-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this}multiply(ee){return this.x*=ee.x,this.y*=ee.y,this}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this}divide(ee){return this.x/=ee.x,this.y/=ee.y,this}divideScalar(ee){return this.multiplyScalar(1/ee)}applyMatrix3(ee){const te=this.x,ne=this.y,re=ee.elements;return this.x=re[0]*te+re[3]*ne+re[6],this.y=re[1]*te+re[4]*ne+re[7],this}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this}clampLength(ee,te){const ne=this.length();return this.divideScalar(ne||1).multiplyScalar(Math.max(ee,Math.min(te,ne)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(ee){return this.x*ee.x+this.y*ee.y}cross(ee){return this.x*ee.y-this.y*ee.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(ee){const te=Math.sqrt(this.lengthSq()*ee.lengthSq());if(te===0)return Math.PI/2;const ne=this.dot(ee)/te;return Math.acos(clamp$1(ne,-1,1))}distanceTo(ee){return Math.sqrt(this.distanceToSquared(ee))}distanceToSquared(ee){const te=this.x-ee.x,ne=this.y-ee.y;return te*te+ne*ne}manhattanDistanceTo(ee){return Math.abs(this.x-ee.x)+Math.abs(this.y-ee.y)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this}lerpVectors(ee,te,ne){return this.x=ee.x+(te.x-ee.x)*ne,this.y=ee.y+(te.y-ee.y)*ne,this}equals(ee){return ee.x===this.x&&ee.y===this.y}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee}fromBufferAttribute(ee,te){return this.x=ee.getX(te),this.y=ee.getY(te),this}rotateAround(ee,te){const ne=Math.cos(te),re=Math.sin(te),se=this.x-ee.x,ae=this.y-ee.y;return this.x=se*ne-ae*re+ee.x,this.y=se*re+ae*ne+ee.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(ee,te,ne,re,se,ae,oe,le,ce){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],ee!==void 0&&this.set(ee,te,ne,re,se,ae,oe,le,ce)}set(ee,te,ne,re,se,ae,oe,le,ce){const he=this.elements;return he[0]=ee,he[1]=re,he[2]=oe,he[3]=te,he[4]=se,he[5]=le,he[6]=ne,he[7]=ae,he[8]=ce,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(ee){const te=this.elements,ne=ee.elements;return te[0]=ne[0],te[1]=ne[1],te[2]=ne[2],te[3]=ne[3],te[4]=ne[4],te[5]=ne[5],te[6]=ne[6],te[7]=ne[7],te[8]=ne[8],this}extractBasis(ee,te,ne){return ee.setFromMatrix3Column(this,0),te.setFromMatrix3Column(this,1),ne.setFromMatrix3Column(this,2),this}setFromMatrix4(ee){const te=ee.elements;return this.set(te[0],te[4],te[8],te[1],te[5],te[9],te[2],te[6],te[10]),this}multiply(ee){return this.multiplyMatrices(this,ee)}premultiply(ee){return this.multiplyMatrices(ee,this)}multiplyMatrices(ee,te){const ne=ee.elements,re=te.elements,se=this.elements,ae=ne[0],oe=ne[3],le=ne[6],ce=ne[1],he=ne[4],fe=ne[7],ue=ne[2],de=ne[5],ge=ne[8],me=re[0],ve=re[3],pe=re[6],ye=re[1],_e=re[4],xe=re[7],Se=re[2],be=re[5],Ee=re[8];return se[0]=ae*me+oe*ye+le*Se,se[3]=ae*ve+oe*_e+le*be,se[6]=ae*pe+oe*xe+le*Ee,se[1]=ce*me+he*ye+fe*Se,se[4]=ce*ve+he*_e+fe*be,se[7]=ce*pe+he*xe+fe*Ee,se[2]=ue*me+de*ye+ge*Se,se[5]=ue*ve+de*_e+ge*be,se[8]=ue*pe+de*xe+ge*Ee,this}multiplyScalar(ee){const te=this.elements;return te[0]*=ee,te[3]*=ee,te[6]*=ee,te[1]*=ee,te[4]*=ee,te[7]*=ee,te[2]*=ee,te[5]*=ee,te[8]*=ee,this}determinant(){const ee=this.elements,te=ee[0],ne=ee[1],re=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],ce=ee[7],he=ee[8];return te*ae*he-te*oe*ce-ne*se*he+ne*oe*le+re*se*ce-re*ae*le}invert(){const ee=this.elements,te=ee[0],ne=ee[1],re=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],ce=ee[7],he=ee[8],fe=he*ae-oe*ce,ue=oe*le-he*se,de=ce*se-ae*le,ge=te*fe+ne*ue+re*de;if(ge===0)return this.set(0,0,0,0,0,0,0,0,0);const me=1/ge;return ee[0]=fe*me,ee[1]=(re*ce-he*ne)*me,ee[2]=(oe*ne-re*ae)*me,ee[3]=ue*me,ee[4]=(he*te-re*le)*me,ee[5]=(re*se-oe*te)*me,ee[6]=de*me,ee[7]=(ne*le-ce*te)*me,ee[8]=(ae*te-ne*se)*me,this}transpose(){let ee;const te=this.elements;return ee=te[1],te[1]=te[3],te[3]=ee,ee=te[2],te[2]=te[6],te[6]=ee,ee=te[5],te[5]=te[7],te[7]=ee,this}getNormalMatrix(ee){return this.setFromMatrix4(ee).invert().transpose()}transposeIntoArray(ee){const te=this.elements;return ee[0]=te[0],ee[1]=te[3],ee[2]=te[6],ee[3]=te[1],ee[4]=te[4],ee[5]=te[7],ee[6]=te[2],ee[7]=te[5],ee[8]=te[8],this}setUvTransform(ee,te,ne,re,se,ae,oe){const le=Math.cos(se),ce=Math.sin(se);return this.set(ne*le,ne*ce,-ne*(le*ae+ce*oe)+ae+ee,-re*ce,re*le,-re*(-ce*ae+le*oe)+oe+te,0,0,1),this}scale(ee,te){return this.premultiply(_m3.makeScale(ee,te)),this}rotate(ee){return this.premultiply(_m3.makeRotation(-ee)),this}translate(ee,te){return this.premultiply(_m3.makeTranslation(ee,te)),this}makeTranslation(ee,te){return ee.isVector2?this.set(1,0,ee.x,0,1,ee.y,0,0,1):this.set(1,0,ee,0,1,te,0,0,1),this}makeRotation(ee){const te=Math.cos(ee),ne=Math.sin(ee);return this.set(te,-ne,0,ne,te,0,0,0,1),this}makeScale(ee,te){return this.set(ee,0,0,0,te,0,0,0,1),this}equals(ee){const te=this.elements,ne=ee.elements;for(let re=0;re<9;re++)if(te[re]!==ne[re])return!1;return!0}fromArray(ee,te=0){for(let ne=0;ne<9;ne++)this.elements[ne]=ee[ne+te];return this}toArray(ee=[],te=0){const ne=this.elements;return ee[te]=ne[0],ee[te+1]=ne[1],ee[te+2]=ne[2],ee[te+3]=ne[3],ee[te+4]=ne[4],ee[te+5]=ne[5],ee[te+6]=ne[6],ee[te+7]=ne[7],ee[te+8]=ne[8],ee}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(ie){for(let ee=ie.length-1;ee>=0;--ee)if(ie[ee]>=65535)return!0;return!1}function createElementNS(ie){return document.createElementNS("http://www.w3.org/1999/xhtml",ie)}function createCanvasElement(){const ie=createElementNS("canvas");return ie.style.display="block",ie}const _cache={};function warnOnce(ie){ie in _cache||(_cache[ie]=!0,console.warn(ie))}function probeAsync(ie,ee,te){return new Promise(function(ne,re){function se(){switch(ie.clientWaitSync(ee,ie.SYNC_FLUSH_COMMANDS_BIT,0)){case ie.WAIT_FAILED:re();break;case ie.TIMEOUT_EXPIRED:setTimeout(se,te);break;default:ne()}}setTimeout(se,te)})}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:ie=>ie,fromReference:ie=>ie},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:ie=>ie.convertSRGBToLinear(),fromReference:ie=>ie.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:ie=>ie.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:ie=>ie.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:ie=>ie.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:ie=>ie.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(ie){if(!SUPPORTED_WORKING_COLOR_SPACES.has(ie))throw new Error(`Unsupported working color space, "${ie}".`);this._workingColorSpace=ie},convert:function(ie,ee,te){if(this.enabled===!1||ee===te||!ee||!te)return ie;const ne=COLOR_SPACES[ee].toReference,re=COLOR_SPACES[te].fromReference;return re(ne(ie))},fromWorkingColorSpace:function(ie,ee){return this.convert(ie,this._workingColorSpace,ee)},toWorkingColorSpace:function(ie,ee){return this.convert(ie,ee,this._workingColorSpace)},getPrimaries:function(ie){return COLOR_SPACES[ie].primaries},getTransfer:function(ie){return ie===NoColorSpace?LinearTransfer:COLOR_SPACES[ie].transfer},getLuminanceCoefficients:function(ie,ee=this._workingColorSpace){return ie.fromArray(COLOR_SPACES[ee].luminanceCoefficients)}};function SRGBToLinear(ie){return ie<.04045?ie*.0773993808:Math.pow(ie*.9478672986+.0521327014,2.4)}function LinearToSRGB(ie){return ie<.0031308?ie*12.92:1.055*Math.pow(ie,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(ee){if(/^data:/i.test(ee.src)||typeof HTMLCanvasElement>"u")return ee.src;let te;if(ee instanceof HTMLCanvasElement)te=ee;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=ee.width,_canvas.height=ee.height;const ne=_canvas.getContext("2d");ee instanceof ImageData?ne.putImageData(ee,0,0):ne.drawImage(ee,0,0,ee.width,ee.height),te=_canvas}return te.width>2048||te.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",ee),te.toDataURL("image/jpeg",.6)):te.toDataURL("image/png")}static sRGBToLinear(ee){if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap){const te=createElementNS("canvas");te.width=ee.width,te.height=ee.height;const ne=te.getContext("2d");ne.drawImage(ee,0,0,ee.width,ee.height);const re=ne.getImageData(0,0,ee.width,ee.height),se=re.data;for(let ae=0;ae<se.length;ae++)se[ae]=SRGBToLinear(se[ae]/255)*255;return ne.putImageData(re,0,0),te}else if(ee.data){const te=ee.data.slice(0);for(let ne=0;ne<te.length;ne++)te instanceof Uint8Array||te instanceof Uint8ClampedArray?te[ne]=Math.floor(SRGBToLinear(te[ne]/255)*255):te[ne]=SRGBToLinear(te[ne]);return{data:te,width:ee.width,height:ee.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),ee}}let _sourceId=0;class Source{constructor(ee=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=ee,this.dataReady=!0,this.version=0}set needsUpdate(ee){ee===!0&&this.version++}toJSON(ee){const te=ee===void 0||typeof ee=="string";if(!te&&ee.images[this.uuid]!==void 0)return ee.images[this.uuid];const ne={uuid:this.uuid,url:""},re=this.data;if(re!==null){let se;if(Array.isArray(re)){se=[];for(let ae=0,oe=re.length;ae<oe;ae++)re[ae].isDataTexture?se.push(serializeImage(re[ae].image)):se.push(serializeImage(re[ae]))}else se=serializeImage(re);ne.url=se}return te||(ee.images[this.uuid]=ne),ne}}function serializeImage(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap?ImageUtils.getDataURL(ie):ie.data?{data:Array.from(ie.data),width:ie.width,height:ie.height,type:ie.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(ee=Texture.DEFAULT_IMAGE,te=Texture.DEFAULT_MAPPING,ne=ClampToEdgeWrapping,re=ClampToEdgeWrapping,se=LinearFilter,ae=LinearMipmapLinearFilter,oe=RGBAFormat,le=UnsignedByteType,ce=Texture.DEFAULT_ANISOTROPY,he=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(ee),this.mipmaps=[],this.mapping=te,this.channel=0,this.wrapS=ne,this.wrapT=re,this.magFilter=se,this.minFilter=ae,this.anisotropy=ce,this.format=oe,this.internalFormat=null,this.type=le,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=he,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(ee=null){this.source.data=ee}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(ee){return this.name=ee.name,this.source=ee.source,this.mipmaps=ee.mipmaps.slice(0),this.mapping=ee.mapping,this.channel=ee.channel,this.wrapS=ee.wrapS,this.wrapT=ee.wrapT,this.magFilter=ee.magFilter,this.minFilter=ee.minFilter,this.anisotropy=ee.anisotropy,this.format=ee.format,this.internalFormat=ee.internalFormat,this.type=ee.type,this.offset.copy(ee.offset),this.repeat.copy(ee.repeat),this.center.copy(ee.center),this.rotation=ee.rotation,this.matrixAutoUpdate=ee.matrixAutoUpdate,this.matrix.copy(ee.matrix),this.generateMipmaps=ee.generateMipmaps,this.premultiplyAlpha=ee.premultiplyAlpha,this.flipY=ee.flipY,this.unpackAlignment=ee.unpackAlignment,this.colorSpace=ee.colorSpace,this.userData=JSON.parse(JSON.stringify(ee.userData)),this.needsUpdate=!0,this}toJSON(ee){const te=ee===void 0||typeof ee=="string";if(!te&&ee.textures[this.uuid]!==void 0)return ee.textures[this.uuid];const ne={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(ee).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ne.userData=this.userData),te||(ee.textures[this.uuid]=ne),ne}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(ee){if(this.mapping!==UVMapping)return ee;if(ee.applyMatrix3(this.matrix),ee.x<0||ee.x>1)switch(this.wrapS){case RepeatWrapping:ee.x=ee.x-Math.floor(ee.x);break;case ClampToEdgeWrapping:ee.x=ee.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ee.x)%2)===1?ee.x=Math.ceil(ee.x)-ee.x:ee.x=ee.x-Math.floor(ee.x);break}if(ee.y<0||ee.y>1)switch(this.wrapT){case RepeatWrapping:ee.y=ee.y-Math.floor(ee.y);break;case ClampToEdgeWrapping:ee.y=ee.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ee.y)%2)===1?ee.y=Math.ceil(ee.y)-ee.y:ee.y=ee.y-Math.floor(ee.y);break}return this.flipY&&(ee.y=1-ee.y),ee}set needsUpdate(ee){ee===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(ee){ee===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=UVMapping,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(ee=0,te=0,ne=0,re=1){Vector4.prototype.isVector4=!0,this.x=ee,this.y=te,this.z=ne,this.w=re}get width(){return this.z}set width(ee){this.z=ee}get height(){return this.w}set height(ee){this.w=ee}set(ee,te,ne,re){return this.x=ee,this.y=te,this.z=ne,this.w=re,this}setScalar(ee){return this.x=ee,this.y=ee,this.z=ee,this.w=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setZ(ee){return this.z=ee,this}setW(ee){return this.w=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;case 2:this.z=te;break;case 3:this.w=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(ee){return this.x=ee.x,this.y=ee.y,this.z=ee.z,this.w=ee.w!==void 0?ee.w:1,this}add(ee){return this.x+=ee.x,this.y+=ee.y,this.z+=ee.z,this.w+=ee.w,this}addScalar(ee){return this.x+=ee,this.y+=ee,this.z+=ee,this.w+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this.z=ee.z+te.z,this.w=ee.w+te.w,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this.z+=ee.z*te,this.w+=ee.w*te,this}sub(ee){return this.x-=ee.x,this.y-=ee.y,this.z-=ee.z,this.w-=ee.w,this}subScalar(ee){return this.x-=ee,this.y-=ee,this.z-=ee,this.w-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this.z=ee.z-te.z,this.w=ee.w-te.w,this}multiply(ee){return this.x*=ee.x,this.y*=ee.y,this.z*=ee.z,this.w*=ee.w,this}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this.z*=ee,this.w*=ee,this}applyMatrix4(ee){const te=this.x,ne=this.y,re=this.z,se=this.w,ae=ee.elements;return this.x=ae[0]*te+ae[4]*ne+ae[8]*re+ae[12]*se,this.y=ae[1]*te+ae[5]*ne+ae[9]*re+ae[13]*se,this.z=ae[2]*te+ae[6]*ne+ae[10]*re+ae[14]*se,this.w=ae[3]*te+ae[7]*ne+ae[11]*re+ae[15]*se,this}divideScalar(ee){return this.multiplyScalar(1/ee)}setAxisAngleFromQuaternion(ee){this.w=2*Math.acos(ee.w);const te=Math.sqrt(1-ee.w*ee.w);return te<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ee.x/te,this.y=ee.y/te,this.z=ee.z/te),this}setAxisAngleFromRotationMatrix(ee){let te,ne,re,se;const le=ee.elements,ce=le[0],he=le[4],fe=le[8],ue=le[1],de=le[5],ge=le[9],me=le[2],ve=le[6],pe=le[10];if(Math.abs(he-ue)<.01&&Math.abs(fe-me)<.01&&Math.abs(ge-ve)<.01){if(Math.abs(he+ue)<.1&&Math.abs(fe+me)<.1&&Math.abs(ge+ve)<.1&&Math.abs(ce+de+pe-3)<.1)return this.set(1,0,0,0),this;te=Math.PI;const _e=(ce+1)/2,xe=(de+1)/2,Se=(pe+1)/2,be=(he+ue)/4,Ee=(fe+me)/4,Pe=(ge+ve)/4;return _e>xe&&_e>Se?_e<.01?(ne=0,re=.707106781,se=.707106781):(ne=Math.sqrt(_e),re=be/ne,se=Ee/ne):xe>Se?xe<.01?(ne=.707106781,re=0,se=.707106781):(re=Math.sqrt(xe),ne=be/re,se=Pe/re):Se<.01?(ne=.707106781,re=.707106781,se=0):(se=Math.sqrt(Se),ne=Ee/se,re=Pe/se),this.set(ne,re,se,te),this}let ye=Math.sqrt((ve-ge)*(ve-ge)+(fe-me)*(fe-me)+(ue-he)*(ue-he));return Math.abs(ye)<.001&&(ye=1),this.x=(ve-ge)/ye,this.y=(fe-me)/ye,this.z=(ue-he)/ye,this.w=Math.acos((ce+de+pe-1)/2),this}setFromMatrixPosition(ee){const te=ee.elements;return this.x=te[12],this.y=te[13],this.z=te[14],this.w=te[15],this}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this.z=Math.min(this.z,ee.z),this.w=Math.min(this.w,ee.w),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this.z=Math.max(this.z,ee.z),this.w=Math.max(this.w,ee.w),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this.z=Math.max(ee.z,Math.min(te.z,this.z)),this.w=Math.max(ee.w,Math.min(te.w,this.w)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this.z=Math.max(ee,Math.min(te,this.z)),this.w=Math.max(ee,Math.min(te,this.w)),this}clampLength(ee,te){const ne=this.length();return this.divideScalar(ne||1).multiplyScalar(Math.max(ee,Math.min(te,ne)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(ee){return this.x*ee.x+this.y*ee.y+this.z*ee.z+this.w*ee.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this.z+=(ee.z-this.z)*te,this.w+=(ee.w-this.w)*te,this}lerpVectors(ee,te,ne){return this.x=ee.x+(te.x-ee.x)*ne,this.y=ee.y+(te.y-ee.y)*ne,this.z=ee.z+(te.z-ee.z)*ne,this.w=ee.w+(te.w-ee.w)*ne,this}equals(ee){return ee.x===this.x&&ee.y===this.y&&ee.z===this.z&&ee.w===this.w}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this.z=ee[te+2],this.w=ee[te+3],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee[te+2]=this.z,ee[te+3]=this.w,ee}fromBufferAttribute(ee,te){return this.x=ee.getX(te),this.y=ee.getY(te),this.z=ee.getZ(te),this.w=ee.getW(te),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(ee=1,te=1,ne={}){super(),this.isRenderTarget=!0,this.width=ee,this.height=te,this.depth=1,this.scissor=new Vector4(0,0,ee,te),this.scissorTest=!1,this.viewport=new Vector4(0,0,ee,te);const re={width:ee,height:te,depth:1};ne=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},ne);const se=new Texture(re,ne.mapping,ne.wrapS,ne.wrapT,ne.magFilter,ne.minFilter,ne.format,ne.type,ne.anisotropy,ne.colorSpace);se.flipY=!1,se.generateMipmaps=ne.generateMipmaps,se.internalFormat=ne.internalFormat,this.textures=[];const ae=ne.count;for(let oe=0;oe<ae;oe++)this.textures[oe]=se.clone(),this.textures[oe].isRenderTargetTexture=!0;this.depthBuffer=ne.depthBuffer,this.stencilBuffer=ne.stencilBuffer,this.resolveDepthBuffer=ne.resolveDepthBuffer,this.resolveStencilBuffer=ne.resolveStencilBuffer,this.depthTexture=ne.depthTexture,this.samples=ne.samples}get texture(){return this.textures[0]}set texture(ee){this.textures[0]=ee}setSize(ee,te,ne=1){if(this.width!==ee||this.height!==te||this.depth!==ne){this.width=ee,this.height=te,this.depth=ne;for(let re=0,se=this.textures.length;re<se;re++)this.textures[re].image.width=ee,this.textures[re].image.height=te,this.textures[re].image.depth=ne;this.dispose()}this.viewport.set(0,0,ee,te),this.scissor.set(0,0,ee,te)}clone(){return new this.constructor().copy(this)}copy(ee){this.width=ee.width,this.height=ee.height,this.depth=ee.depth,this.scissor.copy(ee.scissor),this.scissorTest=ee.scissorTest,this.viewport.copy(ee.viewport),this.textures.length=0;for(let ne=0,re=ee.textures.length;ne<re;ne++)this.textures[ne]=ee.textures[ne].clone(),this.textures[ne].isRenderTargetTexture=!0;const te=Object.assign({},ee.texture.image);return this.texture.source=new Source(te),this.depthBuffer=ee.depthBuffer,this.stencilBuffer=ee.stencilBuffer,this.resolveDepthBuffer=ee.resolveDepthBuffer,this.resolveStencilBuffer=ee.resolveStencilBuffer,ee.depthTexture!==null&&(this.depthTexture=ee.depthTexture.clone()),this.samples=ee.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(ee=1,te=1,ne={}){super(ee,te,ne),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(ee=null,te=1,ne=1,re=1){super(null),this.isDataArrayTexture=!0,this.image={data:ee,width:te,height:ne,depth:re},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(ee){this.layerUpdates.add(ee)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(ee=null,te=1,ne=1,re=1){super(null),this.isData3DTexture=!0,this.image={data:ee,width:te,height:ne,depth:re},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(ee=0,te=0,ne=0,re=1){this.isQuaternion=!0,this._x=ee,this._y=te,this._z=ne,this._w=re}static slerpFlat(ee,te,ne,re,se,ae,oe){let le=ne[re+0],ce=ne[re+1],he=ne[re+2],fe=ne[re+3];const ue=se[ae+0],de=se[ae+1],ge=se[ae+2],me=se[ae+3];if(oe===0){ee[te+0]=le,ee[te+1]=ce,ee[te+2]=he,ee[te+3]=fe;return}if(oe===1){ee[te+0]=ue,ee[te+1]=de,ee[te+2]=ge,ee[te+3]=me;return}if(fe!==me||le!==ue||ce!==de||he!==ge){let ve=1-oe;const pe=le*ue+ce*de+he*ge+fe*me,ye=pe>=0?1:-1,_e=1-pe*pe;if(_e>Number.EPSILON){const Se=Math.sqrt(_e),be=Math.atan2(Se,pe*ye);ve=Math.sin(ve*be)/Se,oe=Math.sin(oe*be)/Se}const xe=oe*ye;if(le=le*ve+ue*xe,ce=ce*ve+de*xe,he=he*ve+ge*xe,fe=fe*ve+me*xe,ve===1-oe){const Se=1/Math.sqrt(le*le+ce*ce+he*he+fe*fe);le*=Se,ce*=Se,he*=Se,fe*=Se}}ee[te]=le,ee[te+1]=ce,ee[te+2]=he,ee[te+3]=fe}static multiplyQuaternionsFlat(ee,te,ne,re,se,ae){const oe=ne[re],le=ne[re+1],ce=ne[re+2],he=ne[re+3],fe=se[ae],ue=se[ae+1],de=se[ae+2],ge=se[ae+3];return ee[te]=oe*ge+he*fe+le*de-ce*ue,ee[te+1]=le*ge+he*ue+ce*fe-oe*de,ee[te+2]=ce*ge+he*de+oe*ue-le*fe,ee[te+3]=he*ge-oe*fe-le*ue-ce*de,ee}get x(){return this._x}set x(ee){this._x=ee,this._onChangeCallback()}get y(){return this._y}set y(ee){this._y=ee,this._onChangeCallback()}get z(){return this._z}set z(ee){this._z=ee,this._onChangeCallback()}get w(){return this._w}set w(ee){this._w=ee,this._onChangeCallback()}set(ee,te,ne,re){return this._x=ee,this._y=te,this._z=ne,this._w=re,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(ee){return this._x=ee.x,this._y=ee.y,this._z=ee.z,this._w=ee.w,this._onChangeCallback(),this}setFromEuler(ee,te=!0){const ne=ee._x,re=ee._y,se=ee._z,ae=ee._order,oe=Math.cos,le=Math.sin,ce=oe(ne/2),he=oe(re/2),fe=oe(se/2),ue=le(ne/2),de=le(re/2),ge=le(se/2);switch(ae){case"XYZ":this._x=ue*he*fe+ce*de*ge,this._y=ce*de*fe-ue*he*ge,this._z=ce*he*ge+ue*de*fe,this._w=ce*he*fe-ue*de*ge;break;case"YXZ":this._x=ue*he*fe+ce*de*ge,this._y=ce*de*fe-ue*he*ge,this._z=ce*he*ge-ue*de*fe,this._w=ce*he*fe+ue*de*ge;break;case"ZXY":this._x=ue*he*fe-ce*de*ge,this._y=ce*de*fe+ue*he*ge,this._z=ce*he*ge+ue*de*fe,this._w=ce*he*fe-ue*de*ge;break;case"ZYX":this._x=ue*he*fe-ce*de*ge,this._y=ce*de*fe+ue*he*ge,this._z=ce*he*ge-ue*de*fe,this._w=ce*he*fe+ue*de*ge;break;case"YZX":this._x=ue*he*fe+ce*de*ge,this._y=ce*de*fe+ue*he*ge,this._z=ce*he*ge-ue*de*fe,this._w=ce*he*fe-ue*de*ge;break;case"XZY":this._x=ue*he*fe-ce*de*ge,this._y=ce*de*fe-ue*he*ge,this._z=ce*he*ge+ue*de*fe,this._w=ce*he*fe+ue*de*ge;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ae)}return te===!0&&this._onChangeCallback(),this}setFromAxisAngle(ee,te){const ne=te/2,re=Math.sin(ne);return this._x=ee.x*re,this._y=ee.y*re,this._z=ee.z*re,this._w=Math.cos(ne),this._onChangeCallback(),this}setFromRotationMatrix(ee){const te=ee.elements,ne=te[0],re=te[4],se=te[8],ae=te[1],oe=te[5],le=te[9],ce=te[2],he=te[6],fe=te[10],ue=ne+oe+fe;if(ue>0){const de=.5/Math.sqrt(ue+1);this._w=.25/de,this._x=(he-le)*de,this._y=(se-ce)*de,this._z=(ae-re)*de}else if(ne>oe&&ne>fe){const de=2*Math.sqrt(1+ne-oe-fe);this._w=(he-le)/de,this._x=.25*de,this._y=(re+ae)/de,this._z=(se+ce)/de}else if(oe>fe){const de=2*Math.sqrt(1+oe-ne-fe);this._w=(se-ce)/de,this._x=(re+ae)/de,this._y=.25*de,this._z=(le+he)/de}else{const de=2*Math.sqrt(1+fe-ne-oe);this._w=(ae-re)/de,this._x=(se+ce)/de,this._y=(le+he)/de,this._z=.25*de}return this._onChangeCallback(),this}setFromUnitVectors(ee,te){let ne=ee.dot(te)+1;return ne<Number.EPSILON?(ne=0,Math.abs(ee.x)>Math.abs(ee.z)?(this._x=-ee.y,this._y=ee.x,this._z=0,this._w=ne):(this._x=0,this._y=-ee.z,this._z=ee.y,this._w=ne)):(this._x=ee.y*te.z-ee.z*te.y,this._y=ee.z*te.x-ee.x*te.z,this._z=ee.x*te.y-ee.y*te.x,this._w=ne),this.normalize()}angleTo(ee){return 2*Math.acos(Math.abs(clamp$1(this.dot(ee),-1,1)))}rotateTowards(ee,te){const ne=this.angleTo(ee);if(ne===0)return this;const re=Math.min(1,te/ne);return this.slerp(ee,re),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(ee){return this._x*ee._x+this._y*ee._y+this._z*ee._z+this._w*ee._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let ee=this.length();return ee===0?(this._x=0,this._y=0,this._z=0,this._w=1):(ee=1/ee,this._x=this._x*ee,this._y=this._y*ee,this._z=this._z*ee,this._w=this._w*ee),this._onChangeCallback(),this}multiply(ee){return this.multiplyQuaternions(this,ee)}premultiply(ee){return this.multiplyQuaternions(ee,this)}multiplyQuaternions(ee,te){const ne=ee._x,re=ee._y,se=ee._z,ae=ee._w,oe=te._x,le=te._y,ce=te._z,he=te._w;return this._x=ne*he+ae*oe+re*ce-se*le,this._y=re*he+ae*le+se*oe-ne*ce,this._z=se*he+ae*ce+ne*le-re*oe,this._w=ae*he-ne*oe-re*le-se*ce,this._onChangeCallback(),this}slerp(ee,te){if(te===0)return this;if(te===1)return this.copy(ee);const ne=this._x,re=this._y,se=this._z,ae=this._w;let oe=ae*ee._w+ne*ee._x+re*ee._y+se*ee._z;if(oe<0?(this._w=-ee._w,this._x=-ee._x,this._y=-ee._y,this._z=-ee._z,oe=-oe):this.copy(ee),oe>=1)return this._w=ae,this._x=ne,this._y=re,this._z=se,this;const le=1-oe*oe;if(le<=Number.EPSILON){const de=1-te;return this._w=de*ae+te*this._w,this._x=de*ne+te*this._x,this._y=de*re+te*this._y,this._z=de*se+te*this._z,this.normalize(),this}const ce=Math.sqrt(le),he=Math.atan2(ce,oe),fe=Math.sin((1-te)*he)/ce,ue=Math.sin(te*he)/ce;return this._w=ae*fe+this._w*ue,this._x=ne*fe+this._x*ue,this._y=re*fe+this._y*ue,this._z=se*fe+this._z*ue,this._onChangeCallback(),this}slerpQuaternions(ee,te,ne){return this.copy(ee).slerp(te,ne)}random(){const ee=2*Math.PI*Math.random(),te=2*Math.PI*Math.random(),ne=Math.random(),re=Math.sqrt(1-ne),se=Math.sqrt(ne);return this.set(re*Math.sin(ee),re*Math.cos(ee),se*Math.sin(te),se*Math.cos(te))}equals(ee){return ee._x===this._x&&ee._y===this._y&&ee._z===this._z&&ee._w===this._w}fromArray(ee,te=0){return this._x=ee[te],this._y=ee[te+1],this._z=ee[te+2],this._w=ee[te+3],this._onChangeCallback(),this}toArray(ee=[],te=0){return ee[te]=this._x,ee[te+1]=this._y,ee[te+2]=this._z,ee[te+3]=this._w,ee}fromBufferAttribute(ee,te){return this._x=ee.getX(te),this._y=ee.getY(te),this._z=ee.getZ(te),this._w=ee.getW(te),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(ee){return this._onChangeCallback=ee,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(ee=0,te=0,ne=0){Vector3.prototype.isVector3=!0,this.x=ee,this.y=te,this.z=ne}set(ee,te,ne){return ne===void 0&&(ne=this.z),this.x=ee,this.y=te,this.z=ne,this}setScalar(ee){return this.x=ee,this.y=ee,this.z=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setZ(ee){return this.z=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;case 2:this.z=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(ee){return this.x=ee.x,this.y=ee.y,this.z=ee.z,this}add(ee){return this.x+=ee.x,this.y+=ee.y,this.z+=ee.z,this}addScalar(ee){return this.x+=ee,this.y+=ee,this.z+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this.z=ee.z+te.z,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this.z+=ee.z*te,this}sub(ee){return this.x-=ee.x,this.y-=ee.y,this.z-=ee.z,this}subScalar(ee){return this.x-=ee,this.y-=ee,this.z-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this.z=ee.z-te.z,this}multiply(ee){return this.x*=ee.x,this.y*=ee.y,this.z*=ee.z,this}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this.z*=ee,this}multiplyVectors(ee,te){return this.x=ee.x*te.x,this.y=ee.y*te.y,this.z=ee.z*te.z,this}applyEuler(ee){return this.applyQuaternion(_quaternion$4.setFromEuler(ee))}applyAxisAngle(ee,te){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(ee,te))}applyMatrix3(ee){const te=this.x,ne=this.y,re=this.z,se=ee.elements;return this.x=se[0]*te+se[3]*ne+se[6]*re,this.y=se[1]*te+se[4]*ne+se[7]*re,this.z=se[2]*te+se[5]*ne+se[8]*re,this}applyNormalMatrix(ee){return this.applyMatrix3(ee).normalize()}applyMatrix4(ee){const te=this.x,ne=this.y,re=this.z,se=ee.elements,ae=1/(se[3]*te+se[7]*ne+se[11]*re+se[15]);return this.x=(se[0]*te+se[4]*ne+se[8]*re+se[12])*ae,this.y=(se[1]*te+se[5]*ne+se[9]*re+se[13])*ae,this.z=(se[2]*te+se[6]*ne+se[10]*re+se[14])*ae,this}applyQuaternion(ee){const te=this.x,ne=this.y,re=this.z,se=ee.x,ae=ee.y,oe=ee.z,le=ee.w,ce=2*(ae*re-oe*ne),he=2*(oe*te-se*re),fe=2*(se*ne-ae*te);return this.x=te+le*ce+ae*fe-oe*he,this.y=ne+le*he+oe*ce-se*fe,this.z=re+le*fe+se*he-ae*ce,this}project(ee){return this.applyMatrix4(ee.matrixWorldInverse).applyMatrix4(ee.projectionMatrix)}unproject(ee){return this.applyMatrix4(ee.projectionMatrixInverse).applyMatrix4(ee.matrixWorld)}transformDirection(ee){const te=this.x,ne=this.y,re=this.z,se=ee.elements;return this.x=se[0]*te+se[4]*ne+se[8]*re,this.y=se[1]*te+se[5]*ne+se[9]*re,this.z=se[2]*te+se[6]*ne+se[10]*re,this.normalize()}divide(ee){return this.x/=ee.x,this.y/=ee.y,this.z/=ee.z,this}divideScalar(ee){return this.multiplyScalar(1/ee)}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this.z=Math.min(this.z,ee.z),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this.z=Math.max(this.z,ee.z),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this.z=Math.max(ee.z,Math.min(te.z,this.z)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this.z=Math.max(ee,Math.min(te,this.z)),this}clampLength(ee,te){const ne=this.length();return this.divideScalar(ne||1).multiplyScalar(Math.max(ee,Math.min(te,ne)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(ee){return this.x*ee.x+this.y*ee.y+this.z*ee.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this.z+=(ee.z-this.z)*te,this}lerpVectors(ee,te,ne){return this.x=ee.x+(te.x-ee.x)*ne,this.y=ee.y+(te.y-ee.y)*ne,this.z=ee.z+(te.z-ee.z)*ne,this}cross(ee){return this.crossVectors(this,ee)}crossVectors(ee,te){const ne=ee.x,re=ee.y,se=ee.z,ae=te.x,oe=te.y,le=te.z;return this.x=re*le-se*oe,this.y=se*ae-ne*le,this.z=ne*oe-re*ae,this}projectOnVector(ee){const te=ee.lengthSq();if(te===0)return this.set(0,0,0);const ne=ee.dot(this)/te;return this.copy(ee).multiplyScalar(ne)}projectOnPlane(ee){return _vector$c.copy(this).projectOnVector(ee),this.sub(_vector$c)}reflect(ee){return this.sub(_vector$c.copy(ee).multiplyScalar(2*this.dot(ee)))}angleTo(ee){const te=Math.sqrt(this.lengthSq()*ee.lengthSq());if(te===0)return Math.PI/2;const ne=this.dot(ee)/te;return Math.acos(clamp$1(ne,-1,1))}distanceTo(ee){return Math.sqrt(this.distanceToSquared(ee))}distanceToSquared(ee){const te=this.x-ee.x,ne=this.y-ee.y,re=this.z-ee.z;return te*te+ne*ne+re*re}manhattanDistanceTo(ee){return Math.abs(this.x-ee.x)+Math.abs(this.y-ee.y)+Math.abs(this.z-ee.z)}setFromSpherical(ee){return this.setFromSphericalCoords(ee.radius,ee.phi,ee.theta)}setFromSphericalCoords(ee,te,ne){const re=Math.sin(te)*ee;return this.x=re*Math.sin(ne),this.y=Math.cos(te)*ee,this.z=re*Math.cos(ne),this}setFromCylindrical(ee){return this.setFromCylindricalCoords(ee.radius,ee.theta,ee.y)}setFromCylindricalCoords(ee,te,ne){return this.x=ee*Math.sin(te),this.y=ne,this.z=ee*Math.cos(te),this}setFromMatrixPosition(ee){const te=ee.elements;return this.x=te[12],this.y=te[13],this.z=te[14],this}setFromMatrixScale(ee){const te=this.setFromMatrixColumn(ee,0).length(),ne=this.setFromMatrixColumn(ee,1).length(),re=this.setFromMatrixColumn(ee,2).length();return this.x=te,this.y=ne,this.z=re,this}setFromMatrixColumn(ee,te){return this.fromArray(ee.elements,te*4)}setFromMatrix3Column(ee,te){return this.fromArray(ee.elements,te*3)}setFromEuler(ee){return this.x=ee._x,this.y=ee._y,this.z=ee._z,this}setFromColor(ee){return this.x=ee.r,this.y=ee.g,this.z=ee.b,this}equals(ee){return ee.x===this.x&&ee.y===this.y&&ee.z===this.z}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this.z=ee[te+2],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee[te+2]=this.z,ee}fromBufferAttribute(ee,te){return this.x=ee.getX(te),this.y=ee.getY(te),this.z=ee.getZ(te),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const ee=Math.random()*Math.PI*2,te=Math.random()*2-1,ne=Math.sqrt(1-te*te);return this.x=ne*Math.cos(ee),this.y=te,this.z=ne*Math.sin(ee),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(ee=new Vector3(1/0,1/0,1/0),te=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=ee,this.max=te}set(ee,te){return this.min.copy(ee),this.max.copy(te),this}setFromArray(ee){this.makeEmpty();for(let te=0,ne=ee.length;te<ne;te+=3)this.expandByPoint(_vector$b.fromArray(ee,te));return this}setFromBufferAttribute(ee){this.makeEmpty();for(let te=0,ne=ee.count;te<ne;te++)this.expandByPoint(_vector$b.fromBufferAttribute(ee,te));return this}setFromPoints(ee){this.makeEmpty();for(let te=0,ne=ee.length;te<ne;te++)this.expandByPoint(ee[te]);return this}setFromCenterAndSize(ee,te){const ne=_vector$b.copy(te).multiplyScalar(.5);return this.min.copy(ee).sub(ne),this.max.copy(ee).add(ne),this}setFromObject(ee,te=!1){return this.makeEmpty(),this.expandByObject(ee,te)}clone(){return new this.constructor().copy(this)}copy(ee){return this.min.copy(ee.min),this.max.copy(ee.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(ee){return this.isEmpty()?ee.set(0,0,0):ee.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(ee){return this.isEmpty()?ee.set(0,0,0):ee.subVectors(this.max,this.min)}expandByPoint(ee){return this.min.min(ee),this.max.max(ee),this}expandByVector(ee){return this.min.sub(ee),this.max.add(ee),this}expandByScalar(ee){return this.min.addScalar(-ee),this.max.addScalar(ee),this}expandByObject(ee,te=!1){ee.updateWorldMatrix(!1,!1);const ne=ee.geometry;if(ne!==void 0){const se=ne.getAttribute("position");if(te===!0&&se!==void 0&&ee.isInstancedMesh!==!0)for(let ae=0,oe=se.count;ae<oe;ae++)ee.isMesh===!0?ee.getVertexPosition(ae,_vector$b):_vector$b.fromBufferAttribute(se,ae),_vector$b.applyMatrix4(ee.matrixWorld),this.expandByPoint(_vector$b);else ee.boundingBox!==void 0?(ee.boundingBox===null&&ee.computeBoundingBox(),_box$4.copy(ee.boundingBox)):(ne.boundingBox===null&&ne.computeBoundingBox(),_box$4.copy(ne.boundingBox)),_box$4.applyMatrix4(ee.matrixWorld),this.union(_box$4)}const re=ee.children;for(let se=0,ae=re.length;se<ae;se++)this.expandByObject(re[se],te);return this}containsPoint(ee){return ee.x>=this.min.x&&ee.x<=this.max.x&&ee.y>=this.min.y&&ee.y<=this.max.y&&ee.z>=this.min.z&&ee.z<=this.max.z}containsBox(ee){return this.min.x<=ee.min.x&&ee.max.x<=this.max.x&&this.min.y<=ee.min.y&&ee.max.y<=this.max.y&&this.min.z<=ee.min.z&&ee.max.z<=this.max.z}getParameter(ee,te){return te.set((ee.x-this.min.x)/(this.max.x-this.min.x),(ee.y-this.min.y)/(this.max.y-this.min.y),(ee.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(ee){return ee.max.x>=this.min.x&&ee.min.x<=this.max.x&&ee.max.y>=this.min.y&&ee.min.y<=this.max.y&&ee.max.z>=this.min.z&&ee.min.z<=this.max.z}intersectsSphere(ee){return this.clampPoint(ee.center,_vector$b),_vector$b.distanceToSquared(ee.center)<=ee.radius*ee.radius}intersectsPlane(ee){let te,ne;return ee.normal.x>0?(te=ee.normal.x*this.min.x,ne=ee.normal.x*this.max.x):(te=ee.normal.x*this.max.x,ne=ee.normal.x*this.min.x),ee.normal.y>0?(te+=ee.normal.y*this.min.y,ne+=ee.normal.y*this.max.y):(te+=ee.normal.y*this.max.y,ne+=ee.normal.y*this.min.y),ee.normal.z>0?(te+=ee.normal.z*this.min.z,ne+=ee.normal.z*this.max.z):(te+=ee.normal.z*this.max.z,ne+=ee.normal.z*this.min.z),te<=-ee.constant&&ne>=-ee.constant}intersectsTriangle(ee){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$3.subVectors(ee.a,_center),_v1$7.subVectors(ee.b,_center),_v2$4.subVectors(ee.c,_center),_f0.subVectors(_v1$7,_v0$3),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$3,_v2$4);let te=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(te,_v0$3,_v1$7,_v2$4,_extents)||(te=[1,0,0,0,1,0,0,0,1],!satForAxes(te,_v0$3,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),te=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(te,_v0$3,_v1$7,_v2$4,_extents))}clampPoint(ee,te){return te.copy(ee).clamp(this.min,this.max)}distanceToPoint(ee){return this.clampPoint(ee,_vector$b).distanceTo(ee)}getBoundingSphere(ee){return this.isEmpty()?ee.makeEmpty():(this.getCenter(ee.center),ee.radius=this.getSize(_vector$b).length()*.5),ee}intersect(ee){return this.min.max(ee.min),this.max.min(ee.max),this.isEmpty()&&this.makeEmpty(),this}union(ee){return this.min.min(ee.min),this.max.max(ee.max),this}applyMatrix4(ee){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(ee),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(ee),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(ee),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(ee),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(ee),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(ee),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(ee),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(ee),this.setFromPoints(_points),this)}translate(ee){return this.min.add(ee),this.max.add(ee),this}equals(ee){return ee.min.equals(this.min)&&ee.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$3=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(ie,ee,te,ne,re){for(let se=0,ae=ie.length-3;se<=ae;se+=3){_testAxis.fromArray(ie,se);const oe=re.x*Math.abs(_testAxis.x)+re.y*Math.abs(_testAxis.y)+re.z*Math.abs(_testAxis.z),le=ee.dot(_testAxis),ce=te.dot(_testAxis),he=ne.dot(_testAxis);if(Math.max(-Math.max(le,ce,he),Math.min(le,ce,he))>oe)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(ee=new Vector3,te=-1){this.isSphere=!0,this.center=ee,this.radius=te}set(ee,te){return this.center.copy(ee),this.radius=te,this}setFromPoints(ee,te){const ne=this.center;te!==void 0?ne.copy(te):_box$3.setFromPoints(ee).getCenter(ne);let re=0;for(let se=0,ae=ee.length;se<ae;se++)re=Math.max(re,ne.distanceToSquared(ee[se]));return this.radius=Math.sqrt(re),this}copy(ee){return this.center.copy(ee.center),this.radius=ee.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(ee){return ee.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(ee){return ee.distanceTo(this.center)-this.radius}intersectsSphere(ee){const te=this.radius+ee.radius;return ee.center.distanceToSquared(this.center)<=te*te}intersectsBox(ee){return ee.intersectsSphere(this)}intersectsPlane(ee){return Math.abs(ee.distanceToPoint(this.center))<=this.radius}clampPoint(ee,te){const ne=this.center.distanceToSquared(ee);return te.copy(ee),ne>this.radius*this.radius&&(te.sub(this.center).normalize(),te.multiplyScalar(this.radius).add(this.center)),te}getBoundingBox(ee){return this.isEmpty()?(ee.makeEmpty(),ee):(ee.set(this.center,this.center),ee.expandByScalar(this.radius),ee)}applyMatrix4(ee){return this.center.applyMatrix4(ee),this.radius=this.radius*ee.getMaxScaleOnAxis(),this}translate(ee){return this.center.add(ee),this}expandByPoint(ee){if(this.isEmpty())return this.center.copy(ee),this.radius=0,this;_v1$6.subVectors(ee,this.center);const te=_v1$6.lengthSq();if(te>this.radius*this.radius){const ne=Math.sqrt(te),re=(ne-this.radius)*.5;this.center.addScaledVector(_v1$6,re/ne),this.radius+=re}return this}union(ee){return ee.isEmpty()?this:this.isEmpty()?(this.copy(ee),this):(this.center.equals(ee.center)===!0?this.radius=Math.max(this.radius,ee.radius):(_v2$3.subVectors(ee.center,this.center).setLength(ee.radius),this.expandByPoint(_v1$6.copy(ee.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(ee.center).sub(_v2$3))),this)}equals(ee){return ee.center.equals(this.center)&&ee.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(ee=new Vector3,te=new Vector3(0,0,-1)){this.origin=ee,this.direction=te}set(ee,te){return this.origin.copy(ee),this.direction.copy(te),this}copy(ee){return this.origin.copy(ee.origin),this.direction.copy(ee.direction),this}at(ee,te){return te.copy(this.origin).addScaledVector(this.direction,ee)}lookAt(ee){return this.direction.copy(ee).sub(this.origin).normalize(),this}recast(ee){return this.origin.copy(this.at(ee,_vector$a)),this}closestPointToPoint(ee,te){te.subVectors(ee,this.origin);const ne=te.dot(this.direction);return ne<0?te.copy(this.origin):te.copy(this.origin).addScaledVector(this.direction,ne)}distanceToPoint(ee){return Math.sqrt(this.distanceSqToPoint(ee))}distanceSqToPoint(ee){const te=_vector$a.subVectors(ee,this.origin).dot(this.direction);return te<0?this.origin.distanceToSquared(ee):(_vector$a.copy(this.origin).addScaledVector(this.direction,te),_vector$a.distanceToSquared(ee))}distanceSqToSegment(ee,te,ne,re){_segCenter.copy(ee).add(te).multiplyScalar(.5),_segDir.copy(te).sub(ee).normalize(),_diff.copy(this.origin).sub(_segCenter);const se=ee.distanceTo(te)*.5,ae=-this.direction.dot(_segDir),oe=_diff.dot(this.direction),le=-_diff.dot(_segDir),ce=_diff.lengthSq(),he=Math.abs(1-ae*ae);let fe,ue,de,ge;if(he>0)if(fe=ae*le-oe,ue=ae*oe-le,ge=se*he,fe>=0)if(ue>=-ge)if(ue<=ge){const me=1/he;fe*=me,ue*=me,de=fe*(fe+ae*ue+2*oe)+ue*(ae*fe+ue+2*le)+ce}else ue=se,fe=Math.max(0,-(ae*ue+oe)),de=-fe*fe+ue*(ue+2*le)+ce;else ue=-se,fe=Math.max(0,-(ae*ue+oe)),de=-fe*fe+ue*(ue+2*le)+ce;else ue<=-ge?(fe=Math.max(0,-(-ae*se+oe)),ue=fe>0?-se:Math.min(Math.max(-se,-le),se),de=-fe*fe+ue*(ue+2*le)+ce):ue<=ge?(fe=0,ue=Math.min(Math.max(-se,-le),se),de=ue*(ue+2*le)+ce):(fe=Math.max(0,-(ae*se+oe)),ue=fe>0?se:Math.min(Math.max(-se,-le),se),de=-fe*fe+ue*(ue+2*le)+ce);else ue=ae>0?-se:se,fe=Math.max(0,-(ae*ue+oe)),de=-fe*fe+ue*(ue+2*le)+ce;return ne&&ne.copy(this.origin).addScaledVector(this.direction,fe),re&&re.copy(_segCenter).addScaledVector(_segDir,ue),de}intersectSphere(ee,te){_vector$a.subVectors(ee.center,this.origin);const ne=_vector$a.dot(this.direction),re=_vector$a.dot(_vector$a)-ne*ne,se=ee.radius*ee.radius;if(re>se)return null;const ae=Math.sqrt(se-re),oe=ne-ae,le=ne+ae;return le<0?null:oe<0?this.at(le,te):this.at(oe,te)}intersectsSphere(ee){return this.distanceSqToPoint(ee.center)<=ee.radius*ee.radius}distanceToPlane(ee){const te=ee.normal.dot(this.direction);if(te===0)return ee.distanceToPoint(this.origin)===0?0:null;const ne=-(this.origin.dot(ee.normal)+ee.constant)/te;return ne>=0?ne:null}intersectPlane(ee,te){const ne=this.distanceToPlane(ee);return ne===null?null:this.at(ne,te)}intersectsPlane(ee){const te=ee.distanceToPoint(this.origin);return te===0||ee.normal.dot(this.direction)*te<0}intersectBox(ee,te){let ne,re,se,ae,oe,le;const ce=1/this.direction.x,he=1/this.direction.y,fe=1/this.direction.z,ue=this.origin;return ce>=0?(ne=(ee.min.x-ue.x)*ce,re=(ee.max.x-ue.x)*ce):(ne=(ee.max.x-ue.x)*ce,re=(ee.min.x-ue.x)*ce),he>=0?(se=(ee.min.y-ue.y)*he,ae=(ee.max.y-ue.y)*he):(se=(ee.max.y-ue.y)*he,ae=(ee.min.y-ue.y)*he),ne>ae||se>re||((se>ne||isNaN(ne))&&(ne=se),(ae<re||isNaN(re))&&(re=ae),fe>=0?(oe=(ee.min.z-ue.z)*fe,le=(ee.max.z-ue.z)*fe):(oe=(ee.max.z-ue.z)*fe,le=(ee.min.z-ue.z)*fe),ne>le||oe>re)||((oe>ne||ne!==ne)&&(ne=oe),(le<re||re!==re)&&(re=le),re<0)?null:this.at(ne>=0?ne:re,te)}intersectsBox(ee){return this.intersectBox(ee,_vector$a)!==null}intersectTriangle(ee,te,ne,re,se){_edge1.subVectors(te,ee),_edge2.subVectors(ne,ee),_normal$1.crossVectors(_edge1,_edge2);let ae=this.direction.dot(_normal$1),oe;if(ae>0){if(re)return null;oe=1}else if(ae<0)oe=-1,ae=-ae;else return null;_diff.subVectors(this.origin,ee);const le=oe*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(le<0)return null;const ce=oe*this.direction.dot(_edge1.cross(_diff));if(ce<0||le+ce>ae)return null;const he=-oe*_diff.dot(_normal$1);return he<0?null:this.at(he/ae,se)}applyMatrix4(ee){return this.origin.applyMatrix4(ee),this.direction.transformDirection(ee),this}equals(ee){return ee.origin.equals(this.origin)&&ee.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(ee,te,ne,re,se,ae,oe,le,ce,he,fe,ue,de,ge,me,ve){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ee!==void 0&&this.set(ee,te,ne,re,se,ae,oe,le,ce,he,fe,ue,de,ge,me,ve)}set(ee,te,ne,re,se,ae,oe,le,ce,he,fe,ue,de,ge,me,ve){const pe=this.elements;return pe[0]=ee,pe[4]=te,pe[8]=ne,pe[12]=re,pe[1]=se,pe[5]=ae,pe[9]=oe,pe[13]=le,pe[2]=ce,pe[6]=he,pe[10]=fe,pe[14]=ue,pe[3]=de,pe[7]=ge,pe[11]=me,pe[15]=ve,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(ee){const te=this.elements,ne=ee.elements;return te[0]=ne[0],te[1]=ne[1],te[2]=ne[2],te[3]=ne[3],te[4]=ne[4],te[5]=ne[5],te[6]=ne[6],te[7]=ne[7],te[8]=ne[8],te[9]=ne[9],te[10]=ne[10],te[11]=ne[11],te[12]=ne[12],te[13]=ne[13],te[14]=ne[14],te[15]=ne[15],this}copyPosition(ee){const te=this.elements,ne=ee.elements;return te[12]=ne[12],te[13]=ne[13],te[14]=ne[14],this}setFromMatrix3(ee){const te=ee.elements;return this.set(te[0],te[3],te[6],0,te[1],te[4],te[7],0,te[2],te[5],te[8],0,0,0,0,1),this}extractBasis(ee,te,ne){return ee.setFromMatrixColumn(this,0),te.setFromMatrixColumn(this,1),ne.setFromMatrixColumn(this,2),this}makeBasis(ee,te,ne){return this.set(ee.x,te.x,ne.x,0,ee.y,te.y,ne.y,0,ee.z,te.z,ne.z,0,0,0,0,1),this}extractRotation(ee){const te=this.elements,ne=ee.elements,re=1/_v1$5.setFromMatrixColumn(ee,0).length(),se=1/_v1$5.setFromMatrixColumn(ee,1).length(),ae=1/_v1$5.setFromMatrixColumn(ee,2).length();return te[0]=ne[0]*re,te[1]=ne[1]*re,te[2]=ne[2]*re,te[3]=0,te[4]=ne[4]*se,te[5]=ne[5]*se,te[6]=ne[6]*se,te[7]=0,te[8]=ne[8]*ae,te[9]=ne[9]*ae,te[10]=ne[10]*ae,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromEuler(ee){const te=this.elements,ne=ee.x,re=ee.y,se=ee.z,ae=Math.cos(ne),oe=Math.sin(ne),le=Math.cos(re),ce=Math.sin(re),he=Math.cos(se),fe=Math.sin(se);if(ee.order==="XYZ"){const ue=ae*he,de=ae*fe,ge=oe*he,me=oe*fe;te[0]=le*he,te[4]=-le*fe,te[8]=ce,te[1]=de+ge*ce,te[5]=ue-me*ce,te[9]=-oe*le,te[2]=me-ue*ce,te[6]=ge+de*ce,te[10]=ae*le}else if(ee.order==="YXZ"){const ue=le*he,de=le*fe,ge=ce*he,me=ce*fe;te[0]=ue+me*oe,te[4]=ge*oe-de,te[8]=ae*ce,te[1]=ae*fe,te[5]=ae*he,te[9]=-oe,te[2]=de*oe-ge,te[6]=me+ue*oe,te[10]=ae*le}else if(ee.order==="ZXY"){const ue=le*he,de=le*fe,ge=ce*he,me=ce*fe;te[0]=ue-me*oe,te[4]=-ae*fe,te[8]=ge+de*oe,te[1]=de+ge*oe,te[5]=ae*he,te[9]=me-ue*oe,te[2]=-ae*ce,te[6]=oe,te[10]=ae*le}else if(ee.order==="ZYX"){const ue=ae*he,de=ae*fe,ge=oe*he,me=oe*fe;te[0]=le*he,te[4]=ge*ce-de,te[8]=ue*ce+me,te[1]=le*fe,te[5]=me*ce+ue,te[9]=de*ce-ge,te[2]=-ce,te[6]=oe*le,te[10]=ae*le}else if(ee.order==="YZX"){const ue=ae*le,de=ae*ce,ge=oe*le,me=oe*ce;te[0]=le*he,te[4]=me-ue*fe,te[8]=ge*fe+de,te[1]=fe,te[5]=ae*he,te[9]=-oe*he,te[2]=-ce*he,te[6]=de*fe+ge,te[10]=ue-me*fe}else if(ee.order==="XZY"){const ue=ae*le,de=ae*ce,ge=oe*le,me=oe*ce;te[0]=le*he,te[4]=-fe,te[8]=ce*he,te[1]=ue*fe+me,te[5]=ae*he,te[9]=de*fe-ge,te[2]=ge*fe-de,te[6]=oe*he,te[10]=me*fe+ue}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromQuaternion(ee){return this.compose(_zero,ee,_one)}lookAt(ee,te,ne){const re=this.elements;return _z.subVectors(ee,te),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ne,_z),_x.lengthSq()===0&&(Math.abs(ne.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ne,_z)),_x.normalize(),_y.crossVectors(_z,_x),re[0]=_x.x,re[4]=_y.x,re[8]=_z.x,re[1]=_x.y,re[5]=_y.y,re[9]=_z.y,re[2]=_x.z,re[6]=_y.z,re[10]=_z.z,this}multiply(ee){return this.multiplyMatrices(this,ee)}premultiply(ee){return this.multiplyMatrices(ee,this)}multiplyMatrices(ee,te){const ne=ee.elements,re=te.elements,se=this.elements,ae=ne[0],oe=ne[4],le=ne[8],ce=ne[12],he=ne[1],fe=ne[5],ue=ne[9],de=ne[13],ge=ne[2],me=ne[6],ve=ne[10],pe=ne[14],ye=ne[3],_e=ne[7],xe=ne[11],Se=ne[15],be=re[0],Ee=re[4],Pe=re[8],we=re[12],Me=re[1],De=re[5],ke=re[9],ze=re[13],Ve=re[2],Ue=re[6],Ae=re[10],Fe=re[14],Te=re[3],Ce=re[7],Le=re[11],Be=re[15];return se[0]=ae*be+oe*Me+le*Ve+ce*Te,se[4]=ae*Ee+oe*De+le*Ue+ce*Ce,se[8]=ae*Pe+oe*ke+le*Ae+ce*Le,se[12]=ae*we+oe*ze+le*Fe+ce*Be,se[1]=he*be+fe*Me+ue*Ve+de*Te,se[5]=he*Ee+fe*De+ue*Ue+de*Ce,se[9]=he*Pe+fe*ke+ue*Ae+de*Le,se[13]=he*we+fe*ze+ue*Fe+de*Be,se[2]=ge*be+me*Me+ve*Ve+pe*Te,se[6]=ge*Ee+me*De+ve*Ue+pe*Ce,se[10]=ge*Pe+me*ke+ve*Ae+pe*Le,se[14]=ge*we+me*ze+ve*Fe+pe*Be,se[3]=ye*be+_e*Me+xe*Ve+Se*Te,se[7]=ye*Ee+_e*De+xe*Ue+Se*Ce,se[11]=ye*Pe+_e*ke+xe*Ae+Se*Le,se[15]=ye*we+_e*ze+xe*Fe+Se*Be,this}multiplyScalar(ee){const te=this.elements;return te[0]*=ee,te[4]*=ee,te[8]*=ee,te[12]*=ee,te[1]*=ee,te[5]*=ee,te[9]*=ee,te[13]*=ee,te[2]*=ee,te[6]*=ee,te[10]*=ee,te[14]*=ee,te[3]*=ee,te[7]*=ee,te[11]*=ee,te[15]*=ee,this}determinant(){const ee=this.elements,te=ee[0],ne=ee[4],re=ee[8],se=ee[12],ae=ee[1],oe=ee[5],le=ee[9],ce=ee[13],he=ee[2],fe=ee[6],ue=ee[10],de=ee[14],ge=ee[3],me=ee[7],ve=ee[11],pe=ee[15];return ge*(+se*le*fe-re*ce*fe-se*oe*ue+ne*ce*ue+re*oe*de-ne*le*de)+me*(+te*le*de-te*ce*ue+se*ae*ue-re*ae*de+re*ce*he-se*le*he)+ve*(+te*ce*fe-te*oe*de-se*ae*fe+ne*ae*de+se*oe*he-ne*ce*he)+pe*(-re*oe*he-te*le*fe+te*oe*ue+re*ae*fe-ne*ae*ue+ne*le*he)}transpose(){const ee=this.elements;let te;return te=ee[1],ee[1]=ee[4],ee[4]=te,te=ee[2],ee[2]=ee[8],ee[8]=te,te=ee[6],ee[6]=ee[9],ee[9]=te,te=ee[3],ee[3]=ee[12],ee[12]=te,te=ee[7],ee[7]=ee[13],ee[13]=te,te=ee[11],ee[11]=ee[14],ee[14]=te,this}setPosition(ee,te,ne){const re=this.elements;return ee.isVector3?(re[12]=ee.x,re[13]=ee.y,re[14]=ee.z):(re[12]=ee,re[13]=te,re[14]=ne),this}invert(){const ee=this.elements,te=ee[0],ne=ee[1],re=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],ce=ee[7],he=ee[8],fe=ee[9],ue=ee[10],de=ee[11],ge=ee[12],me=ee[13],ve=ee[14],pe=ee[15],ye=fe*ve*ce-me*ue*ce+me*le*de-oe*ve*de-fe*le*pe+oe*ue*pe,_e=ge*ue*ce-he*ve*ce-ge*le*de+ae*ve*de+he*le*pe-ae*ue*pe,xe=he*me*ce-ge*fe*ce+ge*oe*de-ae*me*de-he*oe*pe+ae*fe*pe,Se=ge*fe*le-he*me*le-ge*oe*ue+ae*me*ue+he*oe*ve-ae*fe*ve,be=te*ye+ne*_e+re*xe+se*Se;if(be===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ee=1/be;return ee[0]=ye*Ee,ee[1]=(me*ue*se-fe*ve*se-me*re*de+ne*ve*de+fe*re*pe-ne*ue*pe)*Ee,ee[2]=(oe*ve*se-me*le*se+me*re*ce-ne*ve*ce-oe*re*pe+ne*le*pe)*Ee,ee[3]=(fe*le*se-oe*ue*se-fe*re*ce+ne*ue*ce+oe*re*de-ne*le*de)*Ee,ee[4]=_e*Ee,ee[5]=(he*ve*se-ge*ue*se+ge*re*de-te*ve*de-he*re*pe+te*ue*pe)*Ee,ee[6]=(ge*le*se-ae*ve*se-ge*re*ce+te*ve*ce+ae*re*pe-te*le*pe)*Ee,ee[7]=(ae*ue*se-he*le*se+he*re*ce-te*ue*ce-ae*re*de+te*le*de)*Ee,ee[8]=xe*Ee,ee[9]=(ge*fe*se-he*me*se-ge*ne*de+te*me*de+he*ne*pe-te*fe*pe)*Ee,ee[10]=(ae*me*se-ge*oe*se+ge*ne*ce-te*me*ce-ae*ne*pe+te*oe*pe)*Ee,ee[11]=(he*oe*se-ae*fe*se-he*ne*ce+te*fe*ce+ae*ne*de-te*oe*de)*Ee,ee[12]=Se*Ee,ee[13]=(he*me*re-ge*fe*re+ge*ne*ue-te*me*ue-he*ne*ve+te*fe*ve)*Ee,ee[14]=(ge*oe*re-ae*me*re-ge*ne*le+te*me*le+ae*ne*ve-te*oe*ve)*Ee,ee[15]=(ae*fe*re-he*oe*re+he*ne*le-te*fe*le-ae*ne*ue+te*oe*ue)*Ee,this}scale(ee){const te=this.elements,ne=ee.x,re=ee.y,se=ee.z;return te[0]*=ne,te[4]*=re,te[8]*=se,te[1]*=ne,te[5]*=re,te[9]*=se,te[2]*=ne,te[6]*=re,te[10]*=se,te[3]*=ne,te[7]*=re,te[11]*=se,this}getMaxScaleOnAxis(){const ee=this.elements,te=ee[0]*ee[0]+ee[1]*ee[1]+ee[2]*ee[2],ne=ee[4]*ee[4]+ee[5]*ee[5]+ee[6]*ee[6],re=ee[8]*ee[8]+ee[9]*ee[9]+ee[10]*ee[10];return Math.sqrt(Math.max(te,ne,re))}makeTranslation(ee,te,ne){return ee.isVector3?this.set(1,0,0,ee.x,0,1,0,ee.y,0,0,1,ee.z,0,0,0,1):this.set(1,0,0,ee,0,1,0,te,0,0,1,ne,0,0,0,1),this}makeRotationX(ee){const te=Math.cos(ee),ne=Math.sin(ee);return this.set(1,0,0,0,0,te,-ne,0,0,ne,te,0,0,0,0,1),this}makeRotationY(ee){const te=Math.cos(ee),ne=Math.sin(ee);return this.set(te,0,ne,0,0,1,0,0,-ne,0,te,0,0,0,0,1),this}makeRotationZ(ee){const te=Math.cos(ee),ne=Math.sin(ee);return this.set(te,-ne,0,0,ne,te,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(ee,te){const ne=Math.cos(te),re=Math.sin(te),se=1-ne,ae=ee.x,oe=ee.y,le=ee.z,ce=se*ae,he=se*oe;return this.set(ce*ae+ne,ce*oe-re*le,ce*le+re*oe,0,ce*oe+re*le,he*oe+ne,he*le-re*ae,0,ce*le-re*oe,he*le+re*ae,se*le*le+ne,0,0,0,0,1),this}makeScale(ee,te,ne){return this.set(ee,0,0,0,0,te,0,0,0,0,ne,0,0,0,0,1),this}makeShear(ee,te,ne,re,se,ae){return this.set(1,ne,se,0,ee,1,ae,0,te,re,1,0,0,0,0,1),this}compose(ee,te,ne){const re=this.elements,se=te._x,ae=te._y,oe=te._z,le=te._w,ce=se+se,he=ae+ae,fe=oe+oe,ue=se*ce,de=se*he,ge=se*fe,me=ae*he,ve=ae*fe,pe=oe*fe,ye=le*ce,_e=le*he,xe=le*fe,Se=ne.x,be=ne.y,Ee=ne.z;return re[0]=(1-(me+pe))*Se,re[1]=(de+xe)*Se,re[2]=(ge-_e)*Se,re[3]=0,re[4]=(de-xe)*be,re[5]=(1-(ue+pe))*be,re[6]=(ve+ye)*be,re[7]=0,re[8]=(ge+_e)*Ee,re[9]=(ve-ye)*Ee,re[10]=(1-(ue+me))*Ee,re[11]=0,re[12]=ee.x,re[13]=ee.y,re[14]=ee.z,re[15]=1,this}decompose(ee,te,ne){const re=this.elements;let se=_v1$5.set(re[0],re[1],re[2]).length();const ae=_v1$5.set(re[4],re[5],re[6]).length(),oe=_v1$5.set(re[8],re[9],re[10]).length();this.determinant()<0&&(se=-se),ee.x=re[12],ee.y=re[13],ee.z=re[14],_m1$4.copy(this);const ce=1/se,he=1/ae,fe=1/oe;return _m1$4.elements[0]*=ce,_m1$4.elements[1]*=ce,_m1$4.elements[2]*=ce,_m1$4.elements[4]*=he,_m1$4.elements[5]*=he,_m1$4.elements[6]*=he,_m1$4.elements[8]*=fe,_m1$4.elements[9]*=fe,_m1$4.elements[10]*=fe,te.setFromRotationMatrix(_m1$4),ne.x=se,ne.y=ae,ne.z=oe,this}makePerspective(ee,te,ne,re,se,ae,oe=WebGLCoordinateSystem){const le=this.elements,ce=2*se/(te-ee),he=2*se/(ne-re),fe=(te+ee)/(te-ee),ue=(ne+re)/(ne-re);let de,ge;if(oe===WebGLCoordinateSystem)de=-(ae+se)/(ae-se),ge=-2*ae*se/(ae-se);else if(oe===WebGPUCoordinateSystem)de=-ae/(ae-se),ge=-ae*se/(ae-se);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+oe);return le[0]=ce,le[4]=0,le[8]=fe,le[12]=0,le[1]=0,le[5]=he,le[9]=ue,le[13]=0,le[2]=0,le[6]=0,le[10]=de,le[14]=ge,le[3]=0,le[7]=0,le[11]=-1,le[15]=0,this}makeOrthographic(ee,te,ne,re,se,ae,oe=WebGLCoordinateSystem){const le=this.elements,ce=1/(te-ee),he=1/(ne-re),fe=1/(ae-se),ue=(te+ee)*ce,de=(ne+re)*he;let ge,me;if(oe===WebGLCoordinateSystem)ge=(ae+se)*fe,me=-2*fe;else if(oe===WebGPUCoordinateSystem)ge=se*fe,me=-1*fe;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+oe);return le[0]=2*ce,le[4]=0,le[8]=0,le[12]=-ue,le[1]=0,le[5]=2*he,le[9]=0,le[13]=-de,le[2]=0,le[6]=0,le[10]=me,le[14]=-ge,le[3]=0,le[7]=0,le[11]=0,le[15]=1,this}equals(ee){const te=this.elements,ne=ee.elements;for(let re=0;re<16;re++)if(te[re]!==ne[re])return!1;return!0}fromArray(ee,te=0){for(let ne=0;ne<16;ne++)this.elements[ne]=ee[ne+te];return this}toArray(ee=[],te=0){const ne=this.elements;return ee[te]=ne[0],ee[te+1]=ne[1],ee[te+2]=ne[2],ee[te+3]=ne[3],ee[te+4]=ne[4],ee[te+5]=ne[5],ee[te+6]=ne[6],ee[te+7]=ne[7],ee[te+8]=ne[8],ee[te+9]=ne[9],ee[te+10]=ne[10],ee[te+11]=ne[11],ee[te+12]=ne[12],ee[te+13]=ne[13],ee[te+14]=ne[14],ee[te+15]=ne[15],ee}}const _v1$5=new Vector3,_m1$4=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(ee=0,te=0,ne=0,re=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=ee,this._y=te,this._z=ne,this._order=re}get x(){return this._x}set x(ee){this._x=ee,this._onChangeCallback()}get y(){return this._y}set y(ee){this._y=ee,this._onChangeCallback()}get z(){return this._z}set z(ee){this._z=ee,this._onChangeCallback()}get order(){return this._order}set order(ee){this._order=ee,this._onChangeCallback()}set(ee,te,ne,re=this._order){return this._x=ee,this._y=te,this._z=ne,this._order=re,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(ee){return this._x=ee._x,this._y=ee._y,this._z=ee._z,this._order=ee._order,this._onChangeCallback(),this}setFromRotationMatrix(ee,te=this._order,ne=!0){const re=ee.elements,se=re[0],ae=re[4],oe=re[8],le=re[1],ce=re[5],he=re[9],fe=re[2],ue=re[6],de=re[10];switch(te){case"XYZ":this._y=Math.asin(clamp$1(oe,-1,1)),Math.abs(oe)<.9999999?(this._x=Math.atan2(-he,de),this._z=Math.atan2(-ae,se)):(this._x=Math.atan2(ue,ce),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(he,-1,1)),Math.abs(he)<.9999999?(this._y=Math.atan2(oe,de),this._z=Math.atan2(le,ce)):(this._y=Math.atan2(-fe,se),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(ue,-1,1)),Math.abs(ue)<.9999999?(this._y=Math.atan2(-fe,de),this._z=Math.atan2(-ae,ce)):(this._y=0,this._z=Math.atan2(le,se));break;case"ZYX":this._y=Math.asin(-clamp$1(fe,-1,1)),Math.abs(fe)<.9999999?(this._x=Math.atan2(ue,de),this._z=Math.atan2(le,se)):(this._x=0,this._z=Math.atan2(-ae,ce));break;case"YZX":this._z=Math.asin(clamp$1(le,-1,1)),Math.abs(le)<.9999999?(this._x=Math.atan2(-he,ce),this._y=Math.atan2(-fe,se)):(this._x=0,this._y=Math.atan2(oe,de));break;case"XZY":this._z=Math.asin(-clamp$1(ae,-1,1)),Math.abs(ae)<.9999999?(this._x=Math.atan2(ue,ce),this._y=Math.atan2(oe,se)):(this._x=Math.atan2(-he,de),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+te)}return this._order=te,ne===!0&&this._onChangeCallback(),this}setFromQuaternion(ee,te,ne){return _matrix$2.makeRotationFromQuaternion(ee),this.setFromRotationMatrix(_matrix$2,te,ne)}setFromVector3(ee,te=this._order){return this.set(ee.x,ee.y,ee.z,te)}reorder(ee){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,ee)}equals(ee){return ee._x===this._x&&ee._y===this._y&&ee._z===this._z&&ee._order===this._order}fromArray(ee){return this._x=ee[0],this._y=ee[1],this._z=ee[2],ee[3]!==void 0&&(this._order=ee[3]),this._onChangeCallback(),this}toArray(ee=[],te=0){return ee[te]=this._x,ee[te+1]=this._y,ee[te+2]=this._z,ee[te+3]=this._order,ee}_onChange(ee){return this._onChangeCallback=ee,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(ee){this.mask=(1<<ee|0)>>>0}enable(ee){this.mask|=1<<ee|0}enableAll(){this.mask=-1}toggle(ee){this.mask^=1<<ee|0}disable(ee){this.mask&=~(1<<ee|0)}disableAll(){this.mask=0}test(ee){return(this.mask&ee.mask)!==0}isEnabled(ee){return(this.mask&(1<<ee|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$3=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const ee=new Vector3,te=new Euler,ne=new Quaternion,re=new Vector3(1,1,1);function se(){ne.setFromEuler(te,!1)}function ae(){te.setFromQuaternion(ne,void 0,!1)}te._onChange(se),ne._onChange(ae),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:ee},rotation:{configurable:!0,enumerable:!0,value:te},quaternion:{configurable:!0,enumerable:!0,value:ne},scale:{configurable:!0,enumerable:!0,value:re},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(ee){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(ee),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(ee){return this.quaternion.premultiply(ee),this}setRotationFromAxisAngle(ee,te){this.quaternion.setFromAxisAngle(ee,te)}setRotationFromEuler(ee){this.quaternion.setFromEuler(ee,!0)}setRotationFromMatrix(ee){this.quaternion.setFromRotationMatrix(ee)}setRotationFromQuaternion(ee){this.quaternion.copy(ee)}rotateOnAxis(ee,te){return _q1.setFromAxisAngle(ee,te),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(ee,te){return _q1.setFromAxisAngle(ee,te),this.quaternion.premultiply(_q1),this}rotateX(ee){return this.rotateOnAxis(_xAxis,ee)}rotateY(ee){return this.rotateOnAxis(_yAxis,ee)}rotateZ(ee){return this.rotateOnAxis(_zAxis,ee)}translateOnAxis(ee,te){return _v1$4.copy(ee).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(te)),this}translateX(ee){return this.translateOnAxis(_xAxis,ee)}translateY(ee){return this.translateOnAxis(_yAxis,ee)}translateZ(ee){return this.translateOnAxis(_zAxis,ee)}localToWorld(ee){return this.updateWorldMatrix(!0,!1),ee.applyMatrix4(this.matrixWorld)}worldToLocal(ee){return this.updateWorldMatrix(!0,!1),ee.applyMatrix4(_m1$3.copy(this.matrixWorld).invert())}lookAt(ee,te,ne){ee.isVector3?_target.copy(ee):_target.set(ee,te,ne);const re=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$3.lookAt(_position$3,_target,this.up):_m1$3.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$3),re&&(_m1$3.extractRotation(re.matrixWorld),_q1.setFromRotationMatrix(_m1$3),this.quaternion.premultiply(_q1.invert()))}add(ee){if(arguments.length>1){for(let te=0;te<arguments.length;te++)this.add(arguments[te]);return this}return ee===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",ee),this):(ee&&ee.isObject3D?(ee.removeFromParent(),ee.parent=this,this.children.push(ee),ee.dispatchEvent(_addedEvent),_childaddedEvent.child=ee,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",ee),this)}remove(ee){if(arguments.length>1){for(let ne=0;ne<arguments.length;ne++)this.remove(arguments[ne]);return this}const te=this.children.indexOf(ee);return te!==-1&&(ee.parent=null,this.children.splice(te,1),ee.dispatchEvent(_removedEvent),_childremovedEvent.child=ee,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const ee=this.parent;return ee!==null&&ee.remove(this),this}clear(){return this.remove(...this.children)}attach(ee){return this.updateWorldMatrix(!0,!1),_m1$3.copy(this.matrixWorld).invert(),ee.parent!==null&&(ee.parent.updateWorldMatrix(!0,!1),_m1$3.multiply(ee.parent.matrixWorld)),ee.applyMatrix4(_m1$3),ee.removeFromParent(),ee.parent=this,this.children.push(ee),ee.updateWorldMatrix(!1,!0),ee.dispatchEvent(_addedEvent),_childaddedEvent.child=ee,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(ee){return this.getObjectByProperty("id",ee)}getObjectByName(ee){return this.getObjectByProperty("name",ee)}getObjectByProperty(ee,te){if(this[ee]===te)return this;for(let ne=0,re=this.children.length;ne<re;ne++){const ae=this.children[ne].getObjectByProperty(ee,te);if(ae!==void 0)return ae}}getObjectsByProperty(ee,te,ne=[]){this[ee]===te&&ne.push(this);const re=this.children;for(let se=0,ae=re.length;se<ae;se++)re[se].getObjectsByProperty(ee,te,ne);return ne}getWorldPosition(ee){return this.updateWorldMatrix(!0,!1),ee.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(ee){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,ee,_scale$2),ee}getWorldScale(ee){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,ee),ee}getWorldDirection(ee){this.updateWorldMatrix(!0,!1);const te=this.matrixWorld.elements;return ee.set(te[8],te[9],te[10]).normalize()}raycast(){}traverse(ee){ee(this);const te=this.children;for(let ne=0,re=te.length;ne<re;ne++)te[ne].traverse(ee)}traverseVisible(ee){if(this.visible===!1)return;ee(this);const te=this.children;for(let ne=0,re=te.length;ne<re;ne++)te[ne].traverseVisible(ee)}traverseAncestors(ee){const te=this.parent;te!==null&&(ee(te),te.traverseAncestors(ee))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(ee){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||ee)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,ee=!0);const te=this.children;for(let ne=0,re=te.length;ne<re;ne++)te[ne].updateMatrixWorld(ee)}updateWorldMatrix(ee,te){const ne=this.parent;if(ee===!0&&ne!==null&&ne.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),te===!0){const re=this.children;for(let se=0,ae=re.length;se<ae;se++)re[se].updateWorldMatrix(!1,!0)}}toJSON(ee){const te=ee===void 0||typeof ee=="string",ne={};te&&(ee={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ne.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const re={};re.uuid=this.uuid,re.type=this.type,this.name!==""&&(re.name=this.name),this.castShadow===!0&&(re.castShadow=!0),this.receiveShadow===!0&&(re.receiveShadow=!0),this.visible===!1&&(re.visible=!1),this.frustumCulled===!1&&(re.frustumCulled=!1),this.renderOrder!==0&&(re.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(re.userData=this.userData),re.layers=this.layers.mask,re.matrix=this.matrix.toArray(),re.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(re.matrixAutoUpdate=!1),this.isInstancedMesh&&(re.type="InstancedMesh",re.count=this.count,re.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(re.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(re.type="BatchedMesh",re.perObjectFrustumCulled=this.perObjectFrustumCulled,re.sortObjects=this.sortObjects,re.drawRanges=this._drawRanges,re.reservedRanges=this._reservedRanges,re.visibility=this._visibility,re.active=this._active,re.bounds=this._bounds.map(oe=>({boxInitialized:oe.boxInitialized,boxMin:oe.box.min.toArray(),boxMax:oe.box.max.toArray(),sphereInitialized:oe.sphereInitialized,sphereRadius:oe.sphere.radius,sphereCenter:oe.sphere.center.toArray()})),re.maxInstanceCount=this._maxInstanceCount,re.maxVertexCount=this._maxVertexCount,re.maxIndexCount=this._maxIndexCount,re.geometryInitialized=this._geometryInitialized,re.geometryCount=this._geometryCount,re.matricesTexture=this._matricesTexture.toJSON(ee),this._colorsTexture!==null&&(re.colorsTexture=this._colorsTexture.toJSON(ee)),this.boundingSphere!==null&&(re.boundingSphere={center:re.boundingSphere.center.toArray(),radius:re.boundingSphere.radius}),this.boundingBox!==null&&(re.boundingBox={min:re.boundingBox.min.toArray(),max:re.boundingBox.max.toArray()}));function se(oe,le){return oe[le.uuid]===void 0&&(oe[le.uuid]=le.toJSON(ee)),le.uuid}if(this.isScene)this.background&&(this.background.isColor?re.background=this.background.toJSON():this.background.isTexture&&(re.background=this.background.toJSON(ee).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(re.environment=this.environment.toJSON(ee).uuid);else if(this.isMesh||this.isLine||this.isPoints){re.geometry=se(ee.geometries,this.geometry);const oe=this.geometry.parameters;if(oe!==void 0&&oe.shapes!==void 0){const le=oe.shapes;if(Array.isArray(le))for(let ce=0,he=le.length;ce<he;ce++){const fe=le[ce];se(ee.shapes,fe)}else se(ee.shapes,le)}}if(this.isSkinnedMesh&&(re.bindMode=this.bindMode,re.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(se(ee.skeletons,this.skeleton),re.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const oe=[];for(let le=0,ce=this.material.length;le<ce;le++)oe.push(se(ee.materials,this.material[le]));re.material=oe}else re.material=se(ee.materials,this.material);if(this.children.length>0){re.children=[];for(let oe=0;oe<this.children.length;oe++)re.children.push(this.children[oe].toJSON(ee).object)}if(this.animations.length>0){re.animations=[];for(let oe=0;oe<this.animations.length;oe++){const le=this.animations[oe];re.animations.push(se(ee.animations,le))}}if(te){const oe=ae(ee.geometries),le=ae(ee.materials),ce=ae(ee.textures),he=ae(ee.images),fe=ae(ee.shapes),ue=ae(ee.skeletons),de=ae(ee.animations),ge=ae(ee.nodes);oe.length>0&&(ne.geometries=oe),le.length>0&&(ne.materials=le),ce.length>0&&(ne.textures=ce),he.length>0&&(ne.images=he),fe.length>0&&(ne.shapes=fe),ue.length>0&&(ne.skeletons=ue),de.length>0&&(ne.animations=de),ge.length>0&&(ne.nodes=ge)}return ne.object=re,ne;function ae(oe){const le=[];for(const ce in oe){const he=oe[ce];delete he.metadata,le.push(he)}return le}}clone(ee){return new this.constructor().copy(this,ee)}copy(ee,te=!0){if(this.name=ee.name,this.up.copy(ee.up),this.position.copy(ee.position),this.rotation.order=ee.rotation.order,this.quaternion.copy(ee.quaternion),this.scale.copy(ee.scale),this.matrix.copy(ee.matrix),this.matrixWorld.copy(ee.matrixWorld),this.matrixAutoUpdate=ee.matrixAutoUpdate,this.matrixWorldAutoUpdate=ee.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=ee.matrixWorldNeedsUpdate,this.layers.mask=ee.layers.mask,this.visible=ee.visible,this.castShadow=ee.castShadow,this.receiveShadow=ee.receiveShadow,this.frustumCulled=ee.frustumCulled,this.renderOrder=ee.renderOrder,this.animations=ee.animations.slice(),this.userData=JSON.parse(JSON.stringify(ee.userData)),te===!0)for(let ne=0;ne<ee.children.length;ne++){const re=ee.children[ne];this.add(re.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$2=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(ee=new Vector3,te=new Vector3,ne=new Vector3){this.a=ee,this.b=te,this.c=ne}static getNormal(ee,te,ne,re){re.subVectors(ne,te),_v0$2.subVectors(ee,te),re.cross(_v0$2);const se=re.lengthSq();return se>0?re.multiplyScalar(1/Math.sqrt(se)):re.set(0,0,0)}static getBarycoord(ee,te,ne,re,se){_v0$2.subVectors(re,te),_v1$3.subVectors(ne,te),_v2$2.subVectors(ee,te);const ae=_v0$2.dot(_v0$2),oe=_v0$2.dot(_v1$3),le=_v0$2.dot(_v2$2),ce=_v1$3.dot(_v1$3),he=_v1$3.dot(_v2$2),fe=ae*ce-oe*oe;if(fe===0)return se.set(0,0,0),null;const ue=1/fe,de=(ce*le-oe*he)*ue,ge=(ae*he-oe*le)*ue;return se.set(1-de-ge,ge,de)}static containsPoint(ee,te,ne,re){return this.getBarycoord(ee,te,ne,re,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(ee,te,ne,re,se,ae,oe,le){return this.getBarycoord(ee,te,ne,re,_v3$2)===null?(le.x=0,le.y=0,"z"in le&&(le.z=0),"w"in le&&(le.w=0),null):(le.setScalar(0),le.addScaledVector(se,_v3$2.x),le.addScaledVector(ae,_v3$2.y),le.addScaledVector(oe,_v3$2.z),le)}static isFrontFacing(ee,te,ne,re){return _v0$2.subVectors(ne,te),_v1$3.subVectors(ee,te),_v0$2.cross(_v1$3).dot(re)<0}set(ee,te,ne){return this.a.copy(ee),this.b.copy(te),this.c.copy(ne),this}setFromPointsAndIndices(ee,te,ne,re){return this.a.copy(ee[te]),this.b.copy(ee[ne]),this.c.copy(ee[re]),this}setFromAttributeAndIndices(ee,te,ne,re){return this.a.fromBufferAttribute(ee,te),this.b.fromBufferAttribute(ee,ne),this.c.fromBufferAttribute(ee,re),this}clone(){return new this.constructor().copy(this)}copy(ee){return this.a.copy(ee.a),this.b.copy(ee.b),this.c.copy(ee.c),this}getArea(){return _v0$2.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$2.cross(_v1$3).length()*.5}getMidpoint(ee){return ee.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(ee){return Triangle.getNormal(this.a,this.b,this.c,ee)}getPlane(ee){return ee.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(ee,te){return Triangle.getBarycoord(ee,this.a,this.b,this.c,te)}getInterpolation(ee,te,ne,re,se){return Triangle.getInterpolation(ee,this.a,this.b,this.c,te,ne,re,se)}containsPoint(ee){return Triangle.containsPoint(ee,this.a,this.b,this.c)}isFrontFacing(ee){return Triangle.isFrontFacing(this.a,this.b,this.c,ee)}intersectsBox(ee){return ee.intersectsTriangle(this)}closestPointToPoint(ee,te){const ne=this.a,re=this.b,se=this.c;let ae,oe;_vab.subVectors(re,ne),_vac.subVectors(se,ne),_vap.subVectors(ee,ne);const le=_vab.dot(_vap),ce=_vac.dot(_vap);if(le<=0&&ce<=0)return te.copy(ne);_vbp.subVectors(ee,re);const he=_vab.dot(_vbp),fe=_vac.dot(_vbp);if(he>=0&&fe<=he)return te.copy(re);const ue=le*fe-he*ce;if(ue<=0&&le>=0&&he<=0)return ae=le/(le-he),te.copy(ne).addScaledVector(_vab,ae);_vcp.subVectors(ee,se);const de=_vab.dot(_vcp),ge=_vac.dot(_vcp);if(ge>=0&&de<=ge)return te.copy(se);const me=de*ce-le*ge;if(me<=0&&ce>=0&&ge<=0)return oe=ce/(ce-ge),te.copy(ne).addScaledVector(_vac,oe);const ve=he*ge-de*fe;if(ve<=0&&fe-he>=0&&de-ge>=0)return _vbc.subVectors(se,re),oe=(fe-he)/(fe-he+(de-ge)),te.copy(re).addScaledVector(_vbc,oe);const pe=1/(ve+me+ue);return ae=me*pe,oe=ue*pe,te.copy(ne).addScaledVector(_vab,ae).addScaledVector(_vac,oe)}equals(ee){return ee.a.equals(this.a)&&ee.b.equals(this.b)&&ee.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(ie,ee,te){return te<0&&(te+=1),te>1&&(te-=1),te<1/6?ie+(ee-ie)*6*te:te<1/2?ee:te<2/3?ie+(ee-ie)*6*(2/3-te):ie}class Color{constructor(ee,te,ne){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(ee,te,ne)}set(ee,te,ne){if(te===void 0&&ne===void 0){const re=ee;re&&re.isColor?this.copy(re):typeof re=="number"?this.setHex(re):typeof re=="string"&&this.setStyle(re)}else this.setRGB(ee,te,ne);return this}setScalar(ee){return this.r=ee,this.g=ee,this.b=ee,this}setHex(ee,te=SRGBColorSpace){return ee=Math.floor(ee),this.r=(ee>>16&255)/255,this.g=(ee>>8&255)/255,this.b=(ee&255)/255,ColorManagement.toWorkingColorSpace(this,te),this}setRGB(ee,te,ne,re=ColorManagement.workingColorSpace){return this.r=ee,this.g=te,this.b=ne,ColorManagement.toWorkingColorSpace(this,re),this}setHSL(ee,te,ne,re=ColorManagement.workingColorSpace){if(ee=euclideanModulo(ee,1),te=clamp$1(te,0,1),ne=clamp$1(ne,0,1),te===0)this.r=this.g=this.b=ne;else{const se=ne<=.5?ne*(1+te):ne+te-ne*te,ae=2*ne-se;this.r=hue2rgb(ae,se,ee+1/3),this.g=hue2rgb(ae,se,ee),this.b=hue2rgb(ae,se,ee-1/3)}return ColorManagement.toWorkingColorSpace(this,re),this}setStyle(ee,te=SRGBColorSpace){function ne(se){se!==void 0&&parseFloat(se)<1&&console.warn("THREE.Color: Alpha component of "+ee+" will be ignored.")}let re;if(re=/^(\w+)\(([^\)]*)\)/.exec(ee)){let se;const ae=re[1],oe=re[2];switch(ae){case"rgb":case"rgba":if(se=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return ne(se[4]),this.setRGB(Math.min(255,parseInt(se[1],10))/255,Math.min(255,parseInt(se[2],10))/255,Math.min(255,parseInt(se[3],10))/255,te);if(se=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return ne(se[4]),this.setRGB(Math.min(100,parseInt(se[1],10))/100,Math.min(100,parseInt(se[2],10))/100,Math.min(100,parseInt(se[3],10))/100,te);break;case"hsl":case"hsla":if(se=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return ne(se[4]),this.setHSL(parseFloat(se[1])/360,parseFloat(se[2])/100,parseFloat(se[3])/100,te);break;default:console.warn("THREE.Color: Unknown color model "+ee)}}else if(re=/^\#([A-Fa-f\d]+)$/.exec(ee)){const se=re[1],ae=se.length;if(ae===3)return this.setRGB(parseInt(se.charAt(0),16)/15,parseInt(se.charAt(1),16)/15,parseInt(se.charAt(2),16)/15,te);if(ae===6)return this.setHex(parseInt(se,16),te);console.warn("THREE.Color: Invalid hex color "+ee)}else if(ee&&ee.length>0)return this.setColorName(ee,te);return this}setColorName(ee,te=SRGBColorSpace){const ne=_colorKeywords[ee.toLowerCase()];return ne!==void 0?this.setHex(ne,te):console.warn("THREE.Color: Unknown color "+ee),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(ee){return this.r=ee.r,this.g=ee.g,this.b=ee.b,this}copySRGBToLinear(ee){return this.r=SRGBToLinear(ee.r),this.g=SRGBToLinear(ee.g),this.b=SRGBToLinear(ee.b),this}copyLinearToSRGB(ee){return this.r=LinearToSRGB(ee.r),this.g=LinearToSRGB(ee.g),this.b=LinearToSRGB(ee.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(ee=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),ee),Math.round(clamp$1(_color.r*255,0,255))*65536+Math.round(clamp$1(_color.g*255,0,255))*256+Math.round(clamp$1(_color.b*255,0,255))}getHexString(ee=SRGBColorSpace){return("000000"+this.getHex(ee).toString(16)).slice(-6)}getHSL(ee,te=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),te);const ne=_color.r,re=_color.g,se=_color.b,ae=Math.max(ne,re,se),oe=Math.min(ne,re,se);let le,ce;const he=(oe+ae)/2;if(oe===ae)le=0,ce=0;else{const fe=ae-oe;switch(ce=he<=.5?fe/(ae+oe):fe/(2-ae-oe),ae){case ne:le=(re-se)/fe+(re<se?6:0);break;case re:le=(se-ne)/fe+2;break;case se:le=(ne-re)/fe+4;break}le/=6}return ee.h=le,ee.s=ce,ee.l=he,ee}getRGB(ee,te=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),te),ee.r=_color.r,ee.g=_color.g,ee.b=_color.b,ee}getStyle(ee=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),ee);const te=_color.r,ne=_color.g,re=_color.b;return ee!==SRGBColorSpace?`color(${ee} ${te.toFixed(3)} ${ne.toFixed(3)} ${re.toFixed(3)})`:`rgb(${Math.round(te*255)},${Math.round(ne*255)},${Math.round(re*255)})`}offsetHSL(ee,te,ne){return this.getHSL(_hslA),this.setHSL(_hslA.h+ee,_hslA.s+te,_hslA.l+ne)}add(ee){return this.r+=ee.r,this.g+=ee.g,this.b+=ee.b,this}addColors(ee,te){return this.r=ee.r+te.r,this.g=ee.g+te.g,this.b=ee.b+te.b,this}addScalar(ee){return this.r+=ee,this.g+=ee,this.b+=ee,this}sub(ee){return this.r=Math.max(0,this.r-ee.r),this.g=Math.max(0,this.g-ee.g),this.b=Math.max(0,this.b-ee.b),this}multiply(ee){return this.r*=ee.r,this.g*=ee.g,this.b*=ee.b,this}multiplyScalar(ee){return this.r*=ee,this.g*=ee,this.b*=ee,this}lerp(ee,te){return this.r+=(ee.r-this.r)*te,this.g+=(ee.g-this.g)*te,this.b+=(ee.b-this.b)*te,this}lerpColors(ee,te,ne){return this.r=ee.r+(te.r-ee.r)*ne,this.g=ee.g+(te.g-ee.g)*ne,this.b=ee.b+(te.b-ee.b)*ne,this}lerpHSL(ee,te){this.getHSL(_hslA),ee.getHSL(_hslB);const ne=lerp(_hslA.h,_hslB.h,te),re=lerp(_hslA.s,_hslB.s,te),se=lerp(_hslA.l,_hslB.l,te);return this.setHSL(ne,re,se),this}setFromVector3(ee){return this.r=ee.x,this.g=ee.y,this.b=ee.z,this}applyMatrix3(ee){const te=this.r,ne=this.g,re=this.b,se=ee.elements;return this.r=se[0]*te+se[3]*ne+se[6]*re,this.g=se[1]*te+se[4]*ne+se[7]*re,this.b=se[2]*te+se[5]*ne+se[8]*re,this}equals(ee){return ee.r===this.r&&ee.g===this.g&&ee.b===this.b}fromArray(ee,te=0){return this.r=ee[te],this.g=ee[te+1],this.b=ee[te+2],this}toArray(ee=[],te=0){return ee[te]=this.r,ee[te+1]=this.g,ee[te+2]=this.b,ee}fromBufferAttribute(ee,te){return this.r=ee.getX(te),this.g=ee.getY(te),this.b=ee.getZ(te),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(ee){this._alphaTest>0!=ee>0&&this.version++,this._alphaTest=ee}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(ee){if(ee!==void 0)for(const te in ee){const ne=ee[te];if(ne===void 0){console.warn(`THREE.Material: parameter '${te}' has value of undefined.`);continue}const re=this[te];if(re===void 0){console.warn(`THREE.Material: '${te}' is not a property of THREE.${this.type}.`);continue}re&&re.isColor?re.set(ne):re&&re.isVector3&&ne&&ne.isVector3?re.copy(ne):this[te]=ne}}toJSON(ee){const te=ee===void 0||typeof ee=="string";te&&(ee={textures:{},images:{}});const ne={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};ne.uuid=this.uuid,ne.type=this.type,this.name!==""&&(ne.name=this.name),this.color&&this.color.isColor&&(ne.color=this.color.getHex()),this.roughness!==void 0&&(ne.roughness=this.roughness),this.metalness!==void 0&&(ne.metalness=this.metalness),this.sheen!==void 0&&(ne.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ne.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(ne.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ne.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(ne.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ne.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(ne.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ne.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(ne.shininess=this.shininess),this.clearcoat!==void 0&&(ne.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ne.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ne.clearcoatMap=this.clearcoatMap.toJSON(ee).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ne.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(ee).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ne.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(ee).uuid,ne.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(ne.dispersion=this.dispersion),this.iridescence!==void 0&&(ne.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(ne.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(ne.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ne.iridescenceMap=this.iridescenceMap.toJSON(ee).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ne.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(ee).uuid),this.anisotropy!==void 0&&(ne.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(ne.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(ne.anisotropyMap=this.anisotropyMap.toJSON(ee).uuid),this.map&&this.map.isTexture&&(ne.map=this.map.toJSON(ee).uuid),this.matcap&&this.matcap.isTexture&&(ne.matcap=this.matcap.toJSON(ee).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ne.alphaMap=this.alphaMap.toJSON(ee).uuid),this.lightMap&&this.lightMap.isTexture&&(ne.lightMap=this.lightMap.toJSON(ee).uuid,ne.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ne.aoMap=this.aoMap.toJSON(ee).uuid,ne.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ne.bumpMap=this.bumpMap.toJSON(ee).uuid,ne.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ne.normalMap=this.normalMap.toJSON(ee).uuid,ne.normalMapType=this.normalMapType,ne.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ne.displacementMap=this.displacementMap.toJSON(ee).uuid,ne.displacementScale=this.displacementScale,ne.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ne.roughnessMap=this.roughnessMap.toJSON(ee).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ne.metalnessMap=this.metalnessMap.toJSON(ee).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ne.emissiveMap=this.emissiveMap.toJSON(ee).uuid),this.specularMap&&this.specularMap.isTexture&&(ne.specularMap=this.specularMap.toJSON(ee).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ne.specularIntensityMap=this.specularIntensityMap.toJSON(ee).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ne.specularColorMap=this.specularColorMap.toJSON(ee).uuid),this.envMap&&this.envMap.isTexture&&(ne.envMap=this.envMap.toJSON(ee).uuid,this.combine!==void 0&&(ne.combine=this.combine)),this.envMapRotation!==void 0&&(ne.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(ne.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(ne.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(ne.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ne.gradientMap=this.gradientMap.toJSON(ee).uuid),this.transmission!==void 0&&(ne.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ne.transmissionMap=this.transmissionMap.toJSON(ee).uuid),this.thickness!==void 0&&(ne.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ne.thicknessMap=this.thicknessMap.toJSON(ee).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(ne.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(ne.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(ne.size=this.size),this.shadowSide!==null&&(ne.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(ne.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(ne.blending=this.blending),this.side!==FrontSide&&(ne.side=this.side),this.vertexColors===!0&&(ne.vertexColors=!0),this.opacity<1&&(ne.opacity=this.opacity),this.transparent===!0&&(ne.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(ne.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(ne.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(ne.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(ne.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(ne.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(ne.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(ne.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(ne.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(ne.depthFunc=this.depthFunc),this.depthTest===!1&&(ne.depthTest=this.depthTest),this.depthWrite===!1&&(ne.depthWrite=this.depthWrite),this.colorWrite===!1&&(ne.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(ne.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(ne.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(ne.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(ne.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(ne.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(ne.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(ne.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(ne.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(ne.rotation=this.rotation),this.polygonOffset===!0&&(ne.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ne.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ne.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(ne.linewidth=this.linewidth),this.dashSize!==void 0&&(ne.dashSize=this.dashSize),this.gapSize!==void 0&&(ne.gapSize=this.gapSize),this.scale!==void 0&&(ne.scale=this.scale),this.dithering===!0&&(ne.dithering=!0),this.alphaTest>0&&(ne.alphaTest=this.alphaTest),this.alphaHash===!0&&(ne.alphaHash=!0),this.alphaToCoverage===!0&&(ne.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(ne.premultipliedAlpha=!0),this.forceSinglePass===!0&&(ne.forceSinglePass=!0),this.wireframe===!0&&(ne.wireframe=!0),this.wireframeLinewidth>1&&(ne.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ne.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ne.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(ne.flatShading=!0),this.visible===!1&&(ne.visible=!1),this.toneMapped===!1&&(ne.toneMapped=!1),this.fog===!1&&(ne.fog=!1),Object.keys(this.userData).length>0&&(ne.userData=this.userData);function re(se){const ae=[];for(const oe in se){const le=se[oe];delete le.metadata,ae.push(le)}return ae}if(te){const se=re(ee.textures),ae=re(ee.images);se.length>0&&(ne.textures=se),ae.length>0&&(ne.images=ae)}return ne}clone(){return new this.constructor().copy(this)}copy(ee){this.name=ee.name,this.blending=ee.blending,this.side=ee.side,this.vertexColors=ee.vertexColors,this.opacity=ee.opacity,this.transparent=ee.transparent,this.blendSrc=ee.blendSrc,this.blendDst=ee.blendDst,this.blendEquation=ee.blendEquation,this.blendSrcAlpha=ee.blendSrcAlpha,this.blendDstAlpha=ee.blendDstAlpha,this.blendEquationAlpha=ee.blendEquationAlpha,this.blendColor.copy(ee.blendColor),this.blendAlpha=ee.blendAlpha,this.depthFunc=ee.depthFunc,this.depthTest=ee.depthTest,this.depthWrite=ee.depthWrite,this.stencilWriteMask=ee.stencilWriteMask,this.stencilFunc=ee.stencilFunc,this.stencilRef=ee.stencilRef,this.stencilFuncMask=ee.stencilFuncMask,this.stencilFail=ee.stencilFail,this.stencilZFail=ee.stencilZFail,this.stencilZPass=ee.stencilZPass,this.stencilWrite=ee.stencilWrite;const te=ee.clippingPlanes;let ne=null;if(te!==null){const re=te.length;ne=new Array(re);for(let se=0;se!==re;++se)ne[se]=te[se].clone()}return this.clippingPlanes=ne,this.clipIntersection=ee.clipIntersection,this.clipShadows=ee.clipShadows,this.shadowSide=ee.shadowSide,this.colorWrite=ee.colorWrite,this.precision=ee.precision,this.polygonOffset=ee.polygonOffset,this.polygonOffsetFactor=ee.polygonOffsetFactor,this.polygonOffsetUnits=ee.polygonOffsetUnits,this.dithering=ee.dithering,this.alphaTest=ee.alphaTest,this.alphaHash=ee.alphaHash,this.alphaToCoverage=ee.alphaToCoverage,this.premultipliedAlpha=ee.premultipliedAlpha,this.forceSinglePass=ee.forceSinglePass,this.visible=ee.visible,this.toneMapped=ee.toneMapped,this.userData=JSON.parse(JSON.stringify(ee.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(ee){ee===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class MeshBasicMaterial extends Material{constructor(ee){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.specularMap=ee.specularMap,this.alphaMap=ee.alphaMap,this.envMap=ee.envMap,this.envMapRotation.copy(ee.envMapRotation),this.combine=ee.combine,this.reflectivity=ee.reflectivity,this.refractionRatio=ee.refractionRatio,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this.fog=ee.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(ee,te,ne=!1){if(Array.isArray(ee))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=ee,this.itemSize=te,this.count=ee!==void 0?ee.length/te:0,this.normalized=ne,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(ee){ee===!0&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(ee){return this.usage=ee,this}addUpdateRange(ee,te){this.updateRanges.push({start:ee,count:te})}clearUpdateRanges(){this.updateRanges.length=0}copy(ee){return this.name=ee.name,this.array=new ee.array.constructor(ee.array),this.itemSize=ee.itemSize,this.count=ee.count,this.normalized=ee.normalized,this.usage=ee.usage,this.gpuType=ee.gpuType,this}copyAt(ee,te,ne){ee*=this.itemSize,ne*=te.itemSize;for(let re=0,se=this.itemSize;re<se;re++)this.array[ee+re]=te.array[ne+re];return this}copyArray(ee){return this.array.set(ee),this}applyMatrix3(ee){if(this.itemSize===2)for(let te=0,ne=this.count;te<ne;te++)_vector2$1.fromBufferAttribute(this,te),_vector2$1.applyMatrix3(ee),this.setXY(te,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let te=0,ne=this.count;te<ne;te++)_vector$9.fromBufferAttribute(this,te),_vector$9.applyMatrix3(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(ee){for(let te=0,ne=this.count;te<ne;te++)_vector$9.fromBufferAttribute(this,te),_vector$9.applyMatrix4(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(ee){for(let te=0,ne=this.count;te<ne;te++)_vector$9.fromBufferAttribute(this,te),_vector$9.applyNormalMatrix(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(ee){for(let te=0,ne=this.count;te<ne;te++)_vector$9.fromBufferAttribute(this,te),_vector$9.transformDirection(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(ee,te=0){return this.array.set(ee,te),this}getComponent(ee,te){let ne=this.array[ee*this.itemSize+te];return this.normalized&&(ne=denormalize(ne,this.array)),ne}setComponent(ee,te,ne){return this.normalized&&(ne=normalize(ne,this.array)),this.array[ee*this.itemSize+te]=ne,this}getX(ee){let te=this.array[ee*this.itemSize];return this.normalized&&(te=denormalize(te,this.array)),te}setX(ee,te){return this.normalized&&(te=normalize(te,this.array)),this.array[ee*this.itemSize]=te,this}getY(ee){let te=this.array[ee*this.itemSize+1];return this.normalized&&(te=denormalize(te,this.array)),te}setY(ee,te){return this.normalized&&(te=normalize(te,this.array)),this.array[ee*this.itemSize+1]=te,this}getZ(ee){let te=this.array[ee*this.itemSize+2];return this.normalized&&(te=denormalize(te,this.array)),te}setZ(ee,te){return this.normalized&&(te=normalize(te,this.array)),this.array[ee*this.itemSize+2]=te,this}getW(ee){let te=this.array[ee*this.itemSize+3];return this.normalized&&(te=denormalize(te,this.array)),te}setW(ee,te){return this.normalized&&(te=normalize(te,this.array)),this.array[ee*this.itemSize+3]=te,this}setXY(ee,te,ne){return ee*=this.itemSize,this.normalized&&(te=normalize(te,this.array),ne=normalize(ne,this.array)),this.array[ee+0]=te,this.array[ee+1]=ne,this}setXYZ(ee,te,ne,re){return ee*=this.itemSize,this.normalized&&(te=normalize(te,this.array),ne=normalize(ne,this.array),re=normalize(re,this.array)),this.array[ee+0]=te,this.array[ee+1]=ne,this.array[ee+2]=re,this}setXYZW(ee,te,ne,re,se){return ee*=this.itemSize,this.normalized&&(te=normalize(te,this.array),ne=normalize(ne,this.array),re=normalize(re,this.array),se=normalize(se,this.array)),this.array[ee+0]=te,this.array[ee+1]=ne,this.array[ee+2]=re,this.array[ee+3]=se,this}onUpload(ee){return this.onUploadCallback=ee,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const ee={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(ee.name=this.name),this.usage!==StaticDrawUsage&&(ee.usage=this.usage),ee}}class Uint16BufferAttribute extends BufferAttribute{constructor(ee,te,ne){super(new Uint16Array(ee),te,ne)}}class Uint32BufferAttribute extends BufferAttribute{constructor(ee,te,ne){super(new Uint32Array(ee),te,ne)}}class Float32BufferAttribute extends BufferAttribute{constructor(ee,te,ne){super(new Float32Array(ee),te,ne)}}let _id$2=0;const _m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(ee){return Array.isArray(ee)?this.index=new(arrayNeedsUint32(ee)?Uint32BufferAttribute:Uint16BufferAttribute)(ee,1):this.index=ee,this}getAttribute(ee){return this.attributes[ee]}setAttribute(ee,te){return this.attributes[ee]=te,this}deleteAttribute(ee){return delete this.attributes[ee],this}hasAttribute(ee){return this.attributes[ee]!==void 0}addGroup(ee,te,ne=0){this.groups.push({start:ee,count:te,materialIndex:ne})}clearGroups(){this.groups=[]}setDrawRange(ee,te){this.drawRange.start=ee,this.drawRange.count=te}applyMatrix4(ee){const te=this.attributes.position;te!==void 0&&(te.applyMatrix4(ee),te.needsUpdate=!0);const ne=this.attributes.normal;if(ne!==void 0){const se=new Matrix3().getNormalMatrix(ee);ne.applyNormalMatrix(se),ne.needsUpdate=!0}const re=this.attributes.tangent;return re!==void 0&&(re.transformDirection(ee),re.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(ee){return _m1$2.makeRotationFromQuaternion(ee),this.applyMatrix4(_m1$2),this}rotateX(ee){return _m1$2.makeRotationX(ee),this.applyMatrix4(_m1$2),this}rotateY(ee){return _m1$2.makeRotationY(ee),this.applyMatrix4(_m1$2),this}rotateZ(ee){return _m1$2.makeRotationZ(ee),this.applyMatrix4(_m1$2),this}translate(ee,te,ne){return _m1$2.makeTranslation(ee,te,ne),this.applyMatrix4(_m1$2),this}scale(ee,te,ne){return _m1$2.makeScale(ee,te,ne),this.applyMatrix4(_m1$2),this}lookAt(ee){return _obj.lookAt(ee),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(ee){const te=[];for(let ne=0,re=ee.length;ne<re;ne++){const se=ee[ne];te.push(se.x,se.y,se.z||0)}return this.setAttribute("position",new Float32BufferAttribute(te,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const ee=this.attributes.position,te=this.morphAttributes.position;if(ee&&ee.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(ee!==void 0){if(this.boundingBox.setFromBufferAttribute(ee),te)for(let ne=0,re=te.length;ne<re;ne++){const se=te[ne];_box$2.setFromBufferAttribute(se),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const ee=this.attributes.position,te=this.morphAttributes.position;if(ee&&ee.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(ee){const ne=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(ee),te)for(let se=0,ae=te.length;se<ae;se++){const oe=te[se];_boxMorphTargets.setFromBufferAttribute(oe),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(ne);let re=0;for(let se=0,ae=ee.count;se<ae;se++)_vector$8.fromBufferAttribute(ee,se),re=Math.max(re,ne.distanceToSquared(_vector$8));if(te)for(let se=0,ae=te.length;se<ae;se++){const oe=te[se],le=this.morphTargetsRelative;for(let ce=0,he=oe.count;ce<he;ce++)_vector$8.fromBufferAttribute(oe,ce),le&&(_offset.fromBufferAttribute(ee,ce),_vector$8.add(_offset)),re=Math.max(re,ne.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(re),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const ee=this.index,te=this.attributes;if(ee===null||te.position===void 0||te.normal===void 0||te.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const ne=te.position,re=te.normal,se=te.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ne.count),4));const ae=this.getAttribute("tangent"),oe=[],le=[];for(let Pe=0;Pe<ne.count;Pe++)oe[Pe]=new Vector3,le[Pe]=new Vector3;const ce=new Vector3,he=new Vector3,fe=new Vector3,ue=new Vector2,de=new Vector2,ge=new Vector2,me=new Vector3,ve=new Vector3;function pe(Pe,we,Me){ce.fromBufferAttribute(ne,Pe),he.fromBufferAttribute(ne,we),fe.fromBufferAttribute(ne,Me),ue.fromBufferAttribute(se,Pe),de.fromBufferAttribute(se,we),ge.fromBufferAttribute(se,Me),he.sub(ce),fe.sub(ce),de.sub(ue),ge.sub(ue);const De=1/(de.x*ge.y-ge.x*de.y);isFinite(De)&&(me.copy(he).multiplyScalar(ge.y).addScaledVector(fe,-de.y).multiplyScalar(De),ve.copy(fe).multiplyScalar(de.x).addScaledVector(he,-ge.x).multiplyScalar(De),oe[Pe].add(me),oe[we].add(me),oe[Me].add(me),le[Pe].add(ve),le[we].add(ve),le[Me].add(ve))}let ye=this.groups;ye.length===0&&(ye=[{start:0,count:ee.count}]);for(let Pe=0,we=ye.length;Pe<we;++Pe){const Me=ye[Pe],De=Me.start,ke=Me.count;for(let ze=De,Ve=De+ke;ze<Ve;ze+=3)pe(ee.getX(ze+0),ee.getX(ze+1),ee.getX(ze+2))}const _e=new Vector3,xe=new Vector3,Se=new Vector3,be=new Vector3;function Ee(Pe){Se.fromBufferAttribute(re,Pe),be.copy(Se);const we=oe[Pe];_e.copy(we),_e.sub(Se.multiplyScalar(Se.dot(we))).normalize(),xe.crossVectors(be,we);const De=xe.dot(le[Pe])<0?-1:1;ae.setXYZW(Pe,_e.x,_e.y,_e.z,De)}for(let Pe=0,we=ye.length;Pe<we;++Pe){const Me=ye[Pe],De=Me.start,ke=Me.count;for(let ze=De,Ve=De+ke;ze<Ve;ze+=3)Ee(ee.getX(ze+0)),Ee(ee.getX(ze+1)),Ee(ee.getX(ze+2))}}computeVertexNormals(){const ee=this.index,te=this.getAttribute("position");if(te!==void 0){let ne=this.getAttribute("normal");if(ne===void 0)ne=new BufferAttribute(new Float32Array(te.count*3),3),this.setAttribute("normal",ne);else for(let ue=0,de=ne.count;ue<de;ue++)ne.setXYZ(ue,0,0,0);const re=new Vector3,se=new Vector3,ae=new Vector3,oe=new Vector3,le=new Vector3,ce=new Vector3,he=new Vector3,fe=new Vector3;if(ee)for(let ue=0,de=ee.count;ue<de;ue+=3){const ge=ee.getX(ue+0),me=ee.getX(ue+1),ve=ee.getX(ue+2);re.fromBufferAttribute(te,ge),se.fromBufferAttribute(te,me),ae.fromBufferAttribute(te,ve),he.subVectors(ae,se),fe.subVectors(re,se),he.cross(fe),oe.fromBufferAttribute(ne,ge),le.fromBufferAttribute(ne,me),ce.fromBufferAttribute(ne,ve),oe.add(he),le.add(he),ce.add(he),ne.setXYZ(ge,oe.x,oe.y,oe.z),ne.setXYZ(me,le.x,le.y,le.z),ne.setXYZ(ve,ce.x,ce.y,ce.z)}else for(let ue=0,de=te.count;ue<de;ue+=3)re.fromBufferAttribute(te,ue+0),se.fromBufferAttribute(te,ue+1),ae.fromBufferAttribute(te,ue+2),he.subVectors(ae,se),fe.subVectors(re,se),he.cross(fe),ne.setXYZ(ue+0,he.x,he.y,he.z),ne.setXYZ(ue+1,he.x,he.y,he.z),ne.setXYZ(ue+2,he.x,he.y,he.z);this.normalizeNormals(),ne.needsUpdate=!0}}normalizeNormals(){const ee=this.attributes.normal;for(let te=0,ne=ee.count;te<ne;te++)_vector$8.fromBufferAttribute(ee,te),_vector$8.normalize(),ee.setXYZ(te,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function ee(oe,le){const ce=oe.array,he=oe.itemSize,fe=oe.normalized,ue=new ce.constructor(le.length*he);let de=0,ge=0;for(let me=0,ve=le.length;me<ve;me++){oe.isInterleavedBufferAttribute?de=le[me]*oe.data.stride+oe.offset:de=le[me]*he;for(let pe=0;pe<he;pe++)ue[ge++]=ce[de++]}return new BufferAttribute(ue,he,fe)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const te=new BufferGeometry,ne=this.index.array,re=this.attributes;for(const oe in re){const le=re[oe],ce=ee(le,ne);te.setAttribute(oe,ce)}const se=this.morphAttributes;for(const oe in se){const le=[],ce=se[oe];for(let he=0,fe=ce.length;he<fe;he++){const ue=ce[he],de=ee(ue,ne);le.push(de)}te.morphAttributes[oe]=le}te.morphTargetsRelative=this.morphTargetsRelative;const ae=this.groups;for(let oe=0,le=ae.length;oe<le;oe++){const ce=ae[oe];te.addGroup(ce.start,ce.count,ce.materialIndex)}return te}toJSON(){const ee={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(ee.uuid=this.uuid,ee.type=this.type,this.name!==""&&(ee.name=this.name),Object.keys(this.userData).length>0&&(ee.userData=this.userData),this.parameters!==void 0){const le=this.parameters;for(const ce in le)le[ce]!==void 0&&(ee[ce]=le[ce]);return ee}ee.data={attributes:{}};const te=this.index;te!==null&&(ee.data.index={type:te.array.constructor.name,array:Array.prototype.slice.call(te.array)});const ne=this.attributes;for(const le in ne){const ce=ne[le];ee.data.attributes[le]=ce.toJSON(ee.data)}const re={};let se=!1;for(const le in this.morphAttributes){const ce=this.morphAttributes[le],he=[];for(let fe=0,ue=ce.length;fe<ue;fe++){const de=ce[fe];he.push(de.toJSON(ee.data))}he.length>0&&(re[le]=he,se=!0)}se&&(ee.data.morphAttributes=re,ee.data.morphTargetsRelative=this.morphTargetsRelative);const ae=this.groups;ae.length>0&&(ee.data.groups=JSON.parse(JSON.stringify(ae)));const oe=this.boundingSphere;return oe!==null&&(ee.data.boundingSphere={center:oe.center.toArray(),radius:oe.radius}),ee}clone(){return new this.constructor().copy(this)}copy(ee){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const te={};this.name=ee.name;const ne=ee.index;ne!==null&&this.setIndex(ne.clone(te));const re=ee.attributes;for(const ce in re){const he=re[ce];this.setAttribute(ce,he.clone(te))}const se=ee.morphAttributes;for(const ce in se){const he=[],fe=se[ce];for(let ue=0,de=fe.length;ue<de;ue++)he.push(fe[ue].clone(te));this.morphAttributes[ce]=he}this.morphTargetsRelative=ee.morphTargetsRelative;const ae=ee.groups;for(let ce=0,he=ae.length;ce<he;ce++){const fe=ae[ce];this.addGroup(fe.start,fe.count,fe.materialIndex)}const oe=ee.boundingBox;oe!==null&&(this.boundingBox=oe.clone());const le=ee.boundingSphere;return le!==null&&(this.boundingSphere=le.clone()),this.drawRange.start=ee.drawRange.start,this.drawRange.count=ee.drawRange.count,this.userData=ee.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(ee=new BufferGeometry,te=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=ee,this.material=te,this.updateMorphTargets()}copy(ee,te){return super.copy(ee,te),ee.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=ee.morphTargetInfluences.slice()),ee.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},ee.morphTargetDictionary)),this.material=Array.isArray(ee.material)?ee.material.slice():ee.material,this.geometry=ee.geometry,this}updateMorphTargets(){const te=this.geometry.morphAttributes,ne=Object.keys(te);if(ne.length>0){const re=te[ne[0]];if(re!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let se=0,ae=re.length;se<ae;se++){const oe=re[se].name||String(se);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=se}}}}getVertexPosition(ee,te){const ne=this.geometry,re=ne.attributes.position,se=ne.morphAttributes.position,ae=ne.morphTargetsRelative;te.fromBufferAttribute(re,ee);const oe=this.morphTargetInfluences;if(se&&oe){_morphA.set(0,0,0);for(let le=0,ce=se.length;le<ce;le++){const he=oe[le],fe=se[le];he!==0&&(_tempA.fromBufferAttribute(fe,ee),ae?_morphA.addScaledVector(_tempA,he):_morphA.addScaledVector(_tempA.sub(te),he))}te.add(_morphA)}return te}raycast(ee,te){const ne=this.geometry,re=this.material,se=this.matrixWorld;re!==void 0&&(ne.boundingSphere===null&&ne.computeBoundingSphere(),_sphere$6.copy(ne.boundingSphere),_sphere$6.applyMatrix4(se),_ray$3.copy(ee.ray).recast(ee.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(ee.far-ee.near)**2))&&(_inverseMatrix$3.copy(se).invert(),_ray$3.copy(ee.ray).applyMatrix4(_inverseMatrix$3),!(ne.boundingBox!==null&&_ray$3.intersectsBox(ne.boundingBox)===!1)&&this._computeIntersections(ee,te,_ray$3)))}_computeIntersections(ee,te,ne){let re;const se=this.geometry,ae=this.material,oe=se.index,le=se.attributes.position,ce=se.attributes.uv,he=se.attributes.uv1,fe=se.attributes.normal,ue=se.groups,de=se.drawRange;if(oe!==null)if(Array.isArray(ae))for(let ge=0,me=ue.length;ge<me;ge++){const ve=ue[ge],pe=ae[ve.materialIndex],ye=Math.max(ve.start,de.start),_e=Math.min(oe.count,Math.min(ve.start+ve.count,de.start+de.count));for(let xe=ye,Se=_e;xe<Se;xe+=3){const be=oe.getX(xe),Ee=oe.getX(xe+1),Pe=oe.getX(xe+2);re=checkGeometryIntersection(this,pe,ee,ne,ce,he,fe,be,Ee,Pe),re&&(re.faceIndex=Math.floor(xe/3),re.face.materialIndex=ve.materialIndex,te.push(re))}}else{const ge=Math.max(0,de.start),me=Math.min(oe.count,de.start+de.count);for(let ve=ge,pe=me;ve<pe;ve+=3){const ye=oe.getX(ve),_e=oe.getX(ve+1),xe=oe.getX(ve+2);re=checkGeometryIntersection(this,ae,ee,ne,ce,he,fe,ye,_e,xe),re&&(re.faceIndex=Math.floor(ve/3),te.push(re))}}else if(le!==void 0)if(Array.isArray(ae))for(let ge=0,me=ue.length;ge<me;ge++){const ve=ue[ge],pe=ae[ve.materialIndex],ye=Math.max(ve.start,de.start),_e=Math.min(le.count,Math.min(ve.start+ve.count,de.start+de.count));for(let xe=ye,Se=_e;xe<Se;xe+=3){const be=xe,Ee=xe+1,Pe=xe+2;re=checkGeometryIntersection(this,pe,ee,ne,ce,he,fe,be,Ee,Pe),re&&(re.faceIndex=Math.floor(xe/3),re.face.materialIndex=ve.materialIndex,te.push(re))}}else{const ge=Math.max(0,de.start),me=Math.min(le.count,de.start+de.count);for(let ve=ge,pe=me;ve<pe;ve+=3){const ye=ve,_e=ve+1,xe=ve+2;re=checkGeometryIntersection(this,ae,ee,ne,ce,he,fe,ye,_e,xe),re&&(re.faceIndex=Math.floor(ve/3),te.push(re))}}}}function checkIntersection$1(ie,ee,te,ne,re,se,ae,oe){let le;if(ee.side===BackSide?le=ne.intersectTriangle(ae,se,re,!0,oe):le=ne.intersectTriangle(re,se,ae,ee.side===FrontSide,oe),le===null)return null;_intersectionPointWorld.copy(oe),_intersectionPointWorld.applyMatrix4(ie.matrixWorld);const ce=te.ray.origin.distanceTo(_intersectionPointWorld);return ce<te.near||ce>te.far?null:{distance:ce,point:_intersectionPointWorld.clone(),object:ie}}function checkGeometryIntersection(ie,ee,te,ne,re,se,ae,oe,le,ce){ie.getVertexPosition(oe,_vA$1),ie.getVertexPosition(le,_vB$1),ie.getVertexPosition(ce,_vC$1);const he=checkIntersection$1(ie,ee,te,ne,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(he){re&&(_uvA$1.fromBufferAttribute(re,oe),_uvB$1.fromBufferAttribute(re,le),_uvC$1.fromBufferAttribute(re,ce),he.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),se&&(_uvA$1.fromBufferAttribute(se,oe),_uvB$1.fromBufferAttribute(se,le),_uvC$1.fromBufferAttribute(se,ce),he.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),ae&&(_normalA.fromBufferAttribute(ae,oe),_normalB.fromBufferAttribute(ae,le),_normalC.fromBufferAttribute(ae,ce),he.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),he.normal.dot(ne.direction)>0&&he.normal.multiplyScalar(-1));const fe={a:oe,b:le,c:ce,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,fe.normal),he.face=fe}return he}class BoxGeometry extends BufferGeometry{constructor(ee=1,te=1,ne=1,re=1,se=1,ae=1){super(),this.type="BoxGeometry",this.parameters={width:ee,height:te,depth:ne,widthSegments:re,heightSegments:se,depthSegments:ae};const oe=this;re=Math.floor(re),se=Math.floor(se),ae=Math.floor(ae);const le=[],ce=[],he=[],fe=[];let ue=0,de=0;ge("z","y","x",-1,-1,ne,te,ee,ae,se,0),ge("z","y","x",1,-1,ne,te,-ee,ae,se,1),ge("x","z","y",1,1,ee,ne,te,re,ae,2),ge("x","z","y",1,-1,ee,ne,-te,re,ae,3),ge("x","y","z",1,-1,ee,te,ne,re,se,4),ge("x","y","z",-1,-1,ee,te,-ne,re,se,5),this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(ce,3)),this.setAttribute("normal",new Float32BufferAttribute(he,3)),this.setAttribute("uv",new Float32BufferAttribute(fe,2));function ge(me,ve,pe,ye,_e,xe,Se,be,Ee,Pe,we){const Me=xe/Ee,De=Se/Pe,ke=xe/2,ze=Se/2,Ve=be/2,Ue=Ee+1,Ae=Pe+1;let Fe=0,Te=0;const Ce=new Vector3;for(let Le=0;Le<Ae;Le++){const Be=Le*De-ze;for(let st=0;st<Ue;st++){const Xe=st*Me-ke;Ce[me]=Xe*ye,Ce[ve]=Be*_e,Ce[pe]=Ve,ce.push(Ce.x,Ce.y,Ce.z),Ce[me]=0,Ce[ve]=0,Ce[pe]=be>0?1:-1,he.push(Ce.x,Ce.y,Ce.z),fe.push(st/Ee),fe.push(1-Le/Pe),Fe+=1}}for(let Le=0;Le<Pe;Le++)for(let Be=0;Be<Ee;Be++){const st=ue+Be+Ue*Le,Xe=ue+Be+Ue*(Le+1),Ge=ue+(Be+1)+Ue*(Le+1),He=ue+(Be+1)+Ue*Le;le.push(st,Xe,He),le.push(Xe,Ge,He),Te+=6}oe.addGroup(de,Te,we),de+=Te,ue+=Fe}}copy(ee){return super.copy(ee),this.parameters=Object.assign({},ee.parameters),this}static fromJSON(ee){return new BoxGeometry(ee.width,ee.height,ee.depth,ee.widthSegments,ee.heightSegments,ee.depthSegments)}}function cloneUniforms(ie){const ee={};for(const te in ie){ee[te]={};for(const ne in ie[te]){const re=ie[te][ne];re&&(re.isColor||re.isMatrix3||re.isMatrix4||re.isVector2||re.isVector3||re.isVector4||re.isTexture||re.isQuaternion)?re.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),ee[te][ne]=null):ee[te][ne]=re.clone():Array.isArray(re)?ee[te][ne]=re.slice():ee[te][ne]=re}}return ee}function mergeUniforms(ie){const ee={};for(let te=0;te<ie.length;te++){const ne=cloneUniforms(ie[te]);for(const re in ne)ee[re]=ne[re]}return ee}function cloneUniformsGroups(ie){const ee=[];for(let te=0;te<ie.length;te++)ee.push(ie[te].clone());return ee}function getUnlitUniformColorSpace(ie){const ee=ie.getRenderTarget();return ee===null?ie.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(ee){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,ee!==void 0&&this.setValues(ee)}copy(ee){return super.copy(ee),this.fragmentShader=ee.fragmentShader,this.vertexShader=ee.vertexShader,this.uniforms=cloneUniforms(ee.uniforms),this.uniformsGroups=cloneUniformsGroups(ee.uniformsGroups),this.defines=Object.assign({},ee.defines),this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.fog=ee.fog,this.lights=ee.lights,this.clipping=ee.clipping,this.extensions=Object.assign({},ee.extensions),this.glslVersion=ee.glslVersion,this}toJSON(ee){const te=super.toJSON(ee);te.glslVersion=this.glslVersion,te.uniforms={};for(const re in this.uniforms){const ae=this.uniforms[re].value;ae&&ae.isTexture?te.uniforms[re]={type:"t",value:ae.toJSON(ee).uuid}:ae&&ae.isColor?te.uniforms[re]={type:"c",value:ae.getHex()}:ae&&ae.isVector2?te.uniforms[re]={type:"v2",value:ae.toArray()}:ae&&ae.isVector3?te.uniforms[re]={type:"v3",value:ae.toArray()}:ae&&ae.isVector4?te.uniforms[re]={type:"v4",value:ae.toArray()}:ae&&ae.isMatrix3?te.uniforms[re]={type:"m3",value:ae.toArray()}:ae&&ae.isMatrix4?te.uniforms[re]={type:"m4",value:ae.toArray()}:te.uniforms[re]={value:ae}}Object.keys(this.defines).length>0&&(te.defines=this.defines),te.vertexShader=this.vertexShader,te.fragmentShader=this.fragmentShader,te.lights=this.lights,te.clipping=this.clipping;const ne={};for(const re in this.extensions)this.extensions[re]===!0&&(ne[re]=!0);return Object.keys(ne).length>0&&(te.extensions=ne),te}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(ee,te){return super.copy(ee,te),this.matrixWorldInverse.copy(ee.matrixWorldInverse),this.projectionMatrix.copy(ee.projectionMatrix),this.projectionMatrixInverse.copy(ee.projectionMatrixInverse),this.coordinateSystem=ee.coordinateSystem,this}getWorldDirection(ee){return super.getWorldDirection(ee).negate()}updateMatrixWorld(ee){super.updateMatrixWorld(ee),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(ee,te){super.updateWorldMatrix(ee,te),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(ee=50,te=1,ne=.1,re=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=ee,this.zoom=1,this.near=ne,this.far=re,this.focus=10,this.aspect=te,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(ee,te){return super.copy(ee,te),this.fov=ee.fov,this.zoom=ee.zoom,this.near=ee.near,this.far=ee.far,this.focus=ee.focus,this.aspect=ee.aspect,this.view=ee.view===null?null:Object.assign({},ee.view),this.filmGauge=ee.filmGauge,this.filmOffset=ee.filmOffset,this}setFocalLength(ee){const te=.5*this.getFilmHeight()/ee;this.fov=RAD2DEG*2*Math.atan(te),this.updateProjectionMatrix()}getFocalLength(){const ee=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/ee}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(ee,te,ne){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),te.set(_v3$1.x,_v3$1.y).multiplyScalar(-ee/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),ne.set(_v3$1.x,_v3$1.y).multiplyScalar(-ee/_v3$1.z)}getViewSize(ee,te){return this.getViewBounds(ee,_minTarget,_maxTarget),te.subVectors(_maxTarget,_minTarget)}setViewOffset(ee,te,ne,re,se,ae){this.aspect=ee/te,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ee,this.view.fullHeight=te,this.view.offsetX=ne,this.view.offsetY=re,this.view.width=se,this.view.height=ae,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const ee=this.near;let te=ee*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,ne=2*te,re=this.aspect*ne,se=-.5*re;const ae=this.view;if(this.view!==null&&this.view.enabled){const le=ae.fullWidth,ce=ae.fullHeight;se+=ae.offsetX*re/le,te-=ae.offsetY*ne/ce,re*=ae.width/le,ne*=ae.height/ce}const oe=this.filmOffset;oe!==0&&(se+=ee*oe/this.getFilmWidth()),this.projectionMatrix.makePerspective(se,se+re,te,te-ne,ee,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(ee){const te=super.toJSON(ee);return te.object.fov=this.fov,te.object.zoom=this.zoom,te.object.near=this.near,te.object.far=this.far,te.object.focus=this.focus,te.object.aspect=this.aspect,this.view!==null&&(te.object.view=Object.assign({},this.view)),te.object.filmGauge=this.filmGauge,te.object.filmOffset=this.filmOffset,te}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(ee,te,ne){super(),this.type="CubeCamera",this.renderTarget=ne,this.coordinateSystem=null,this.activeMipmapLevel=0;const re=new PerspectiveCamera(fov,aspect,ee,te);re.layers=this.layers,this.add(re);const se=new PerspectiveCamera(fov,aspect,ee,te);se.layers=this.layers,this.add(se);const ae=new PerspectiveCamera(fov,aspect,ee,te);ae.layers=this.layers,this.add(ae);const oe=new PerspectiveCamera(fov,aspect,ee,te);oe.layers=this.layers,this.add(oe);const le=new PerspectiveCamera(fov,aspect,ee,te);le.layers=this.layers,this.add(le);const ce=new PerspectiveCamera(fov,aspect,ee,te);ce.layers=this.layers,this.add(ce)}updateCoordinateSystem(){const ee=this.coordinateSystem,te=this.children.concat(),[ne,re,se,ae,oe,le]=te;for(const ce of te)this.remove(ce);if(ee===WebGLCoordinateSystem)ne.up.set(0,1,0),ne.lookAt(1,0,0),re.up.set(0,1,0),re.lookAt(-1,0,0),se.up.set(0,0,-1),se.lookAt(0,1,0),ae.up.set(0,0,1),ae.lookAt(0,-1,0),oe.up.set(0,1,0),oe.lookAt(0,0,1),le.up.set(0,1,0),le.lookAt(0,0,-1);else if(ee===WebGPUCoordinateSystem)ne.up.set(0,-1,0),ne.lookAt(-1,0,0),re.up.set(0,-1,0),re.lookAt(1,0,0),se.up.set(0,0,1),se.lookAt(0,1,0),ae.up.set(0,0,-1),ae.lookAt(0,-1,0),oe.up.set(0,-1,0),oe.lookAt(0,0,1),le.up.set(0,-1,0),le.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+ee);for(const ce of te)this.add(ce),ce.updateMatrixWorld()}update(ee,te){this.parent===null&&this.updateMatrixWorld();const{renderTarget:ne,activeMipmapLevel:re}=this;this.coordinateSystem!==ee.coordinateSystem&&(this.coordinateSystem=ee.coordinateSystem,this.updateCoordinateSystem());const[se,ae,oe,le,ce,he]=this.children,fe=ee.getRenderTarget(),ue=ee.getActiveCubeFace(),de=ee.getActiveMipmapLevel(),ge=ee.xr.enabled;ee.xr.enabled=!1;const me=ne.texture.generateMipmaps;ne.texture.generateMipmaps=!1,ee.setRenderTarget(ne,0,re),ee.render(te,se),ee.setRenderTarget(ne,1,re),ee.render(te,ae),ee.setRenderTarget(ne,2,re),ee.render(te,oe),ee.setRenderTarget(ne,3,re),ee.render(te,le),ee.setRenderTarget(ne,4,re),ee.render(te,ce),ne.texture.generateMipmaps=me,ee.setRenderTarget(ne,5,re),ee.render(te,he),ee.setRenderTarget(fe,ue,de),ee.xr.enabled=ge,ne.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(ee,te,ne,re,se,ae,oe,le,ce,he){ee=ee!==void 0?ee:[],te=te!==void 0?te:CubeReflectionMapping,super(ee,te,ne,re,se,ae,oe,le,ce,he),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(ee){this.image=ee}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(ee=1,te={}){super(ee,ee,te),this.isWebGLCubeRenderTarget=!0;const ne={width:ee,height:ee,depth:1},re=[ne,ne,ne,ne,ne,ne];this.texture=new CubeTexture(re,te.mapping,te.wrapS,te.wrapT,te.magFilter,te.minFilter,te.format,te.type,te.anisotropy,te.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=te.generateMipmaps!==void 0?te.generateMipmaps:!1,this.texture.minFilter=te.minFilter!==void 0?te.minFilter:LinearFilter}fromEquirectangularTexture(ee,te){this.texture.type=te.type,this.texture.colorSpace=te.colorSpace,this.texture.generateMipmaps=te.generateMipmaps,this.texture.minFilter=te.minFilter,this.texture.magFilter=te.magFilter;const ne={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},re=new BoxGeometry(5,5,5),se=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(ne.uniforms),vertexShader:ne.vertexShader,fragmentShader:ne.fragmentShader,side:BackSide,blending:NoBlending});se.uniforms.tEquirect.value=te;const ae=new Mesh(re,se),oe=te.minFilter;return te.minFilter===LinearMipmapLinearFilter&&(te.minFilter=LinearFilter),new CubeCamera(1,10,this).update(ee,ae),te.minFilter=oe,ae.geometry.dispose(),ae.material.dispose(),this}clear(ee,te,ne,re){const se=ee.getRenderTarget();for(let ae=0;ae<6;ae++)ee.setRenderTarget(this,ae),ee.clear(te,ne,re);ee.setRenderTarget(se)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(ee=new Vector3(1,0,0),te=0){this.isPlane=!0,this.normal=ee,this.constant=te}set(ee,te){return this.normal.copy(ee),this.constant=te,this}setComponents(ee,te,ne,re){return this.normal.set(ee,te,ne),this.constant=re,this}setFromNormalAndCoplanarPoint(ee,te){return this.normal.copy(ee),this.constant=-te.dot(this.normal),this}setFromCoplanarPoints(ee,te,ne){const re=_vector1.subVectors(ne,te).cross(_vector2.subVectors(ee,te)).normalize();return this.setFromNormalAndCoplanarPoint(re,ee),this}copy(ee){return this.normal.copy(ee.normal),this.constant=ee.constant,this}normalize(){const ee=1/this.normal.length();return this.normal.multiplyScalar(ee),this.constant*=ee,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(ee){return this.normal.dot(ee)+this.constant}distanceToSphere(ee){return this.distanceToPoint(ee.center)-ee.radius}projectPoint(ee,te){return te.copy(ee).addScaledVector(this.normal,-this.distanceToPoint(ee))}intersectLine(ee,te){const ne=ee.delta(_vector1),re=this.normal.dot(ne);if(re===0)return this.distanceToPoint(ee.start)===0?te.copy(ee.start):null;const se=-(ee.start.dot(this.normal)+this.constant)/re;return se<0||se>1?null:te.copy(ee.start).addScaledVector(ne,se)}intersectsLine(ee){const te=this.distanceToPoint(ee.start),ne=this.distanceToPoint(ee.end);return te<0&&ne>0||ne<0&&te>0}intersectsBox(ee){return ee.intersectsPlane(this)}intersectsSphere(ee){return ee.intersectsPlane(this)}coplanarPoint(ee){return ee.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(ee,te){const ne=te||_normalMatrix.getNormalMatrix(ee),re=this.coplanarPoint(_vector1).applyMatrix4(ee),se=this.normal.applyMatrix3(ne).normalize();return this.constant=-re.dot(se),this}translate(ee){return this.constant-=ee.dot(this.normal),this}equals(ee){return ee.normal.equals(this.normal)&&ee.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(ee=new Plane$1,te=new Plane$1,ne=new Plane$1,re=new Plane$1,se=new Plane$1,ae=new Plane$1){this.planes=[ee,te,ne,re,se,ae]}set(ee,te,ne,re,se,ae){const oe=this.planes;return oe[0].copy(ee),oe[1].copy(te),oe[2].copy(ne),oe[3].copy(re),oe[4].copy(se),oe[5].copy(ae),this}copy(ee){const te=this.planes;for(let ne=0;ne<6;ne++)te[ne].copy(ee.planes[ne]);return this}setFromProjectionMatrix(ee,te=WebGLCoordinateSystem){const ne=this.planes,re=ee.elements,se=re[0],ae=re[1],oe=re[2],le=re[3],ce=re[4],he=re[5],fe=re[6],ue=re[7],de=re[8],ge=re[9],me=re[10],ve=re[11],pe=re[12],ye=re[13],_e=re[14],xe=re[15];if(ne[0].setComponents(le-se,ue-ce,ve-de,xe-pe).normalize(),ne[1].setComponents(le+se,ue+ce,ve+de,xe+pe).normalize(),ne[2].setComponents(le+ae,ue+he,ve+ge,xe+ye).normalize(),ne[3].setComponents(le-ae,ue-he,ve-ge,xe-ye).normalize(),ne[4].setComponents(le-oe,ue-fe,ve-me,xe-_e).normalize(),te===WebGLCoordinateSystem)ne[5].setComponents(le+oe,ue+fe,ve+me,xe+_e).normalize();else if(te===WebGPUCoordinateSystem)ne[5].setComponents(oe,fe,me,_e).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+te);return this}intersectsObject(ee){if(ee.boundingSphere!==void 0)ee.boundingSphere===null&&ee.computeBoundingSphere(),_sphere$5.copy(ee.boundingSphere).applyMatrix4(ee.matrixWorld);else{const te=ee.geometry;te.boundingSphere===null&&te.computeBoundingSphere(),_sphere$5.copy(te.boundingSphere).applyMatrix4(ee.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(ee){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(ee.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(ee){const te=this.planes,ne=ee.center,re=-ee.radius;for(let se=0;se<6;se++)if(te[se].distanceToPoint(ne)<re)return!1;return!0}intersectsBox(ee){const te=this.planes;for(let ne=0;ne<6;ne++){const re=te[ne];if(_vector$7.x=re.normal.x>0?ee.max.x:ee.min.x,_vector$7.y=re.normal.y>0?ee.max.y:ee.min.y,_vector$7.z=re.normal.z>0?ee.max.z:ee.min.z,re.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(ee){const te=this.planes;for(let ne=0;ne<6;ne++)if(te[ne].distanceToPoint(ee)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let ie=null,ee=!1,te=null,ne=null;function re(se,ae){te(se,ae),ne=ie.requestAnimationFrame(re)}return{start:function(){ee!==!0&&te!==null&&(ne=ie.requestAnimationFrame(re),ee=!0)},stop:function(){ie.cancelAnimationFrame(ne),ee=!1},setAnimationLoop:function(se){te=se},setContext:function(se){ie=se}}}function WebGLAttributes(ie){const ee=new WeakMap;function te(oe,le){const ce=oe.array,he=oe.usage,fe=ce.byteLength,ue=ie.createBuffer();ie.bindBuffer(le,ue),ie.bufferData(le,ce,he),oe.onUploadCallback();let de;if(ce instanceof Float32Array)de=ie.FLOAT;else if(ce instanceof Uint16Array)oe.isFloat16BufferAttribute?de=ie.HALF_FLOAT:de=ie.UNSIGNED_SHORT;else if(ce instanceof Int16Array)de=ie.SHORT;else if(ce instanceof Uint32Array)de=ie.UNSIGNED_INT;else if(ce instanceof Int32Array)de=ie.INT;else if(ce instanceof Int8Array)de=ie.BYTE;else if(ce instanceof Uint8Array)de=ie.UNSIGNED_BYTE;else if(ce instanceof Uint8ClampedArray)de=ie.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ce);return{buffer:ue,type:de,bytesPerElement:ce.BYTES_PER_ELEMENT,version:oe.version,size:fe}}function ne(oe,le,ce){const he=le.array,fe=le._updateRange,ue=le.updateRanges;if(ie.bindBuffer(ce,oe),fe.count===-1&&ue.length===0&&ie.bufferSubData(ce,0,he),ue.length!==0){for(let de=0,ge=ue.length;de<ge;de++){const me=ue[de];ie.bufferSubData(ce,me.start*he.BYTES_PER_ELEMENT,he,me.start,me.count)}le.clearUpdateRanges()}fe.count!==-1&&(ie.bufferSubData(ce,fe.offset*he.BYTES_PER_ELEMENT,he,fe.offset,fe.count),fe.count=-1),le.onUploadCallback()}function re(oe){return oe.isInterleavedBufferAttribute&&(oe=oe.data),ee.get(oe)}function se(oe){oe.isInterleavedBufferAttribute&&(oe=oe.data);const le=ee.get(oe);le&&(ie.deleteBuffer(le.buffer),ee.delete(oe))}function ae(oe,le){if(oe.isInterleavedBufferAttribute&&(oe=oe.data),oe.isGLBufferAttribute){const he=ee.get(oe);(!he||he.version<oe.version)&&ee.set(oe,{buffer:oe.buffer,type:oe.type,bytesPerElement:oe.elementSize,version:oe.version});return}const ce=ee.get(oe);if(ce===void 0)ee.set(oe,te(oe,le));else if(ce.version<oe.version){if(ce.size!==oe.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");ne(ce.buffer,oe,le),ce.version=oe.version}}return{get:re,remove:se,update:ae}}class PlaneGeometry extends BufferGeometry{constructor(ee=1,te=1,ne=1,re=1){super(),this.type="PlaneGeometry",this.parameters={width:ee,height:te,widthSegments:ne,heightSegments:re};const se=ee/2,ae=te/2,oe=Math.floor(ne),le=Math.floor(re),ce=oe+1,he=le+1,fe=ee/oe,ue=te/le,de=[],ge=[],me=[],ve=[];for(let pe=0;pe<he;pe++){const ye=pe*ue-ae;for(let _e=0;_e<ce;_e++){const xe=_e*fe-se;ge.push(xe,-ye,0),me.push(0,0,1),ve.push(_e/oe),ve.push(1-pe/le)}}for(let pe=0;pe<le;pe++)for(let ye=0;ye<oe;ye++){const _e=ye+ce*pe,xe=ye+ce*(pe+1),Se=ye+1+ce*(pe+1),be=ye+1+ce*pe;de.push(_e,xe,be),de.push(xe,Se,be)}this.setIndex(de),this.setAttribute("position",new Float32BufferAttribute(ge,3)),this.setAttribute("normal",new Float32BufferAttribute(me,3)),this.setAttribute("uv",new Float32BufferAttribute(ve,2))}copy(ee){return super.copy(ee),this.parameters=Object.assign({},ee.parameters),this}static fromJSON(ee){return new PlaneGeometry(ee.width,ee.height,ee.widthSegments,ee.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(ie,ee,te,ne,re,se,ae){const oe=new Color(0);let le=se===!0?0:1,ce,he,fe=null,ue=0,de=null;function ge(ye){let _e=ye.isScene===!0?ye.background:null;return _e&&_e.isTexture&&(_e=(ye.backgroundBlurriness>0?te:ee).get(_e)),_e}function me(ye){let _e=!1;const xe=ge(ye);xe===null?pe(oe,le):xe&&xe.isColor&&(pe(xe,1),_e=!0);const Se=ie.xr.getEnvironmentBlendMode();Se==="additive"?ne.buffers.color.setClear(0,0,0,1,ae):Se==="alpha-blend"&&ne.buffers.color.setClear(0,0,0,0,ae),(ie.autoClear||_e)&&(ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ie.clear(ie.autoClearColor,ie.autoClearDepth,ie.autoClearStencil))}function ve(ye,_e){const xe=ge(_e);xe&&(xe.isCubeTexture||xe.mapping===CubeUVReflectionMapping)?(he===void 0&&(he=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),he.geometry.deleteAttribute("normal"),he.geometry.deleteAttribute("uv"),he.onBeforeRender=function(Se,be,Ee){this.matrixWorld.copyPosition(Ee.matrixWorld)},Object.defineProperty(he.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),re.update(he)),_e1$1.copy(_e.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,xe.isCubeTexture&&xe.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),he.material.uniforms.envMap.value=xe,he.material.uniforms.flipEnvMap.value=xe.isCubeTexture&&xe.isRenderTargetTexture===!1?-1:1,he.material.uniforms.backgroundBlurriness.value=_e.backgroundBlurriness,he.material.uniforms.backgroundIntensity.value=_e.backgroundIntensity,he.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),he.material.toneMapped=ColorManagement.getTransfer(xe.colorSpace)!==SRGBTransfer,(fe!==xe||ue!==xe.version||de!==ie.toneMapping)&&(he.material.needsUpdate=!0,fe=xe,ue=xe.version,de=ie.toneMapping),he.layers.enableAll(),ye.unshift(he,he.geometry,he.material,0,0,null)):xe&&xe.isTexture&&(ce===void 0&&(ce=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),ce.geometry.deleteAttribute("normal"),Object.defineProperty(ce.material,"map",{get:function(){return this.uniforms.t2D.value}}),re.update(ce)),ce.material.uniforms.t2D.value=xe,ce.material.uniforms.backgroundIntensity.value=_e.backgroundIntensity,ce.material.toneMapped=ColorManagement.getTransfer(xe.colorSpace)!==SRGBTransfer,xe.matrixAutoUpdate===!0&&xe.updateMatrix(),ce.material.uniforms.uvTransform.value.copy(xe.matrix),(fe!==xe||ue!==xe.version||de!==ie.toneMapping)&&(ce.material.needsUpdate=!0,fe=xe,ue=xe.version,de=ie.toneMapping),ce.layers.enableAll(),ye.unshift(ce,ce.geometry,ce.material,0,0,null))}function pe(ye,_e){ye.getRGB(_rgb,getUnlitUniformColorSpace(ie)),ne.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,_e,ae)}return{getClearColor:function(){return oe},setClearColor:function(ye,_e=1){oe.set(ye),le=_e,pe(oe,le)},getClearAlpha:function(){return le},setClearAlpha:function(ye){le=ye,pe(oe,le)},render:me,addToRenderList:ve}}function WebGLBindingStates(ie,ee){const te=ie.getParameter(ie.MAX_VERTEX_ATTRIBS),ne={},re=ue(null);let se=re,ae=!1;function oe(Me,De,ke,ze,Ve){let Ue=!1;const Ae=fe(ze,ke,De);se!==Ae&&(se=Ae,ce(se.object)),Ue=de(Me,ze,ke,Ve),Ue&&ge(Me,ze,ke,Ve),Ve!==null&&ee.update(Ve,ie.ELEMENT_ARRAY_BUFFER),(Ue||ae)&&(ae=!1,xe(Me,De,ke,ze),Ve!==null&&ie.bindBuffer(ie.ELEMENT_ARRAY_BUFFER,ee.get(Ve).buffer))}function le(){return ie.createVertexArray()}function ce(Me){return ie.bindVertexArray(Me)}function he(Me){return ie.deleteVertexArray(Me)}function fe(Me,De,ke){const ze=ke.wireframe===!0;let Ve=ne[Me.id];Ve===void 0&&(Ve={},ne[Me.id]=Ve);let Ue=Ve[De.id];Ue===void 0&&(Ue={},Ve[De.id]=Ue);let Ae=Ue[ze];return Ae===void 0&&(Ae=ue(le()),Ue[ze]=Ae),Ae}function ue(Me){const De=[],ke=[],ze=[];for(let Ve=0;Ve<te;Ve++)De[Ve]=0,ke[Ve]=0,ze[Ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:De,enabledAttributes:ke,attributeDivisors:ze,object:Me,attributes:{},index:null}}function de(Me,De,ke,ze){const Ve=se.attributes,Ue=De.attributes;let Ae=0;const Fe=ke.getAttributes();for(const Te in Fe)if(Fe[Te].location>=0){const Le=Ve[Te];let Be=Ue[Te];if(Be===void 0&&(Te==="instanceMatrix"&&Me.instanceMatrix&&(Be=Me.instanceMatrix),Te==="instanceColor"&&Me.instanceColor&&(Be=Me.instanceColor)),Le===void 0||Le.attribute!==Be||Be&&Le.data!==Be.data)return!0;Ae++}return se.attributesNum!==Ae||se.index!==ze}function ge(Me,De,ke,ze){const Ve={},Ue=De.attributes;let Ae=0;const Fe=ke.getAttributes();for(const Te in Fe)if(Fe[Te].location>=0){let Le=Ue[Te];Le===void 0&&(Te==="instanceMatrix"&&Me.instanceMatrix&&(Le=Me.instanceMatrix),Te==="instanceColor"&&Me.instanceColor&&(Le=Me.instanceColor));const Be={};Be.attribute=Le,Le&&Le.data&&(Be.data=Le.data),Ve[Te]=Be,Ae++}se.attributes=Ve,se.attributesNum=Ae,se.index=ze}function me(){const Me=se.newAttributes;for(let De=0,ke=Me.length;De<ke;De++)Me[De]=0}function ve(Me){pe(Me,0)}function pe(Me,De){const ke=se.newAttributes,ze=se.enabledAttributes,Ve=se.attributeDivisors;ke[Me]=1,ze[Me]===0&&(ie.enableVertexAttribArray(Me),ze[Me]=1),Ve[Me]!==De&&(ie.vertexAttribDivisor(Me,De),Ve[Me]=De)}function ye(){const Me=se.newAttributes,De=se.enabledAttributes;for(let ke=0,ze=De.length;ke<ze;ke++)De[ke]!==Me[ke]&&(ie.disableVertexAttribArray(ke),De[ke]=0)}function _e(Me,De,ke,ze,Ve,Ue,Ae){Ae===!0?ie.vertexAttribIPointer(Me,De,ke,Ve,Ue):ie.vertexAttribPointer(Me,De,ke,ze,Ve,Ue)}function xe(Me,De,ke,ze){me();const Ve=ze.attributes,Ue=ke.getAttributes(),Ae=De.defaultAttributeValues;for(const Fe in Ue){const Te=Ue[Fe];if(Te.location>=0){let Ce=Ve[Fe];if(Ce===void 0&&(Fe==="instanceMatrix"&&Me.instanceMatrix&&(Ce=Me.instanceMatrix),Fe==="instanceColor"&&Me.instanceColor&&(Ce=Me.instanceColor)),Ce!==void 0){const Le=Ce.normalized,Be=Ce.itemSize,st=ee.get(Ce);if(st===void 0)continue;const Xe=st.buffer,Ge=st.type,He=st.bytesPerElement,Je=Ge===ie.INT||Ge===ie.UNSIGNED_INT||Ce.gpuType===IntType;if(Ce.isInterleavedBufferAttribute){const et=Ce.data,ht=et.stride,vt=Ce.offset;if(et.isInstancedInterleavedBuffer){for(let gt=0;gt<Te.locationSize;gt++)pe(Te.location+gt,et.meshPerAttribute);Me.isInstancedMesh!==!0&&ze._maxInstanceCount===void 0&&(ze._maxInstanceCount=et.meshPerAttribute*et.count)}else for(let gt=0;gt<Te.locationSize;gt++)ve(Te.location+gt);ie.bindBuffer(ie.ARRAY_BUFFER,Xe);for(let gt=0;gt<Te.locationSize;gt++)_e(Te.location+gt,Be/Te.locationSize,Ge,Le,ht*He,(vt+Be/Te.locationSize*gt)*He,Je)}else{if(Ce.isInstancedBufferAttribute){for(let et=0;et<Te.locationSize;et++)pe(Te.location+et,Ce.meshPerAttribute);Me.isInstancedMesh!==!0&&ze._maxInstanceCount===void 0&&(ze._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let et=0;et<Te.locationSize;et++)ve(Te.location+et);ie.bindBuffer(ie.ARRAY_BUFFER,Xe);for(let et=0;et<Te.locationSize;et++)_e(Te.location+et,Be/Te.locationSize,Ge,Le,Be*He,Be/Te.locationSize*et*He,Je)}}else if(Ae!==void 0){const Le=Ae[Fe];if(Le!==void 0)switch(Le.length){case 2:ie.vertexAttrib2fv(Te.location,Le);break;case 3:ie.vertexAttrib3fv(Te.location,Le);break;case 4:ie.vertexAttrib4fv(Te.location,Le);break;default:ie.vertexAttrib1fv(Te.location,Le)}}}}ye()}function Se(){Pe();for(const Me in ne){const De=ne[Me];for(const ke in De){const ze=De[ke];for(const Ve in ze)he(ze[Ve].object),delete ze[Ve];delete De[ke]}delete ne[Me]}}function be(Me){if(ne[Me.id]===void 0)return;const De=ne[Me.id];for(const ke in De){const ze=De[ke];for(const Ve in ze)he(ze[Ve].object),delete ze[Ve];delete De[ke]}delete ne[Me.id]}function Ee(Me){for(const De in ne){const ke=ne[De];if(ke[Me.id]===void 0)continue;const ze=ke[Me.id];for(const Ve in ze)he(ze[Ve].object),delete ze[Ve];delete ke[Me.id]}}function Pe(){we(),ae=!0,se!==re&&(se=re,ce(se.object))}function we(){re.geometry=null,re.program=null,re.wireframe=!1}return{setup:oe,reset:Pe,resetDefaultState:we,dispose:Se,releaseStatesOfGeometry:be,releaseStatesOfProgram:Ee,initAttributes:me,enableAttribute:ve,disableUnusedAttributes:ye}}function WebGLBufferRenderer(ie,ee,te){let ne;function re(ce){ne=ce}function se(ce,he){ie.drawArrays(ne,ce,he),te.update(he,ne,1)}function ae(ce,he,fe){fe!==0&&(ie.drawArraysInstanced(ne,ce,he,fe),te.update(he,ne,fe))}function oe(ce,he,fe){if(fe===0)return;ee.get("WEBGL_multi_draw").multiDrawArraysWEBGL(ne,ce,0,he,0,fe);let de=0;for(let ge=0;ge<fe;ge++)de+=he[ge];te.update(de,ne,1)}function le(ce,he,fe,ue){if(fe===0)return;const de=ee.get("WEBGL_multi_draw");if(de===null)for(let ge=0;ge<ce.length;ge++)ae(ce[ge],he[ge],ue[ge]);else{de.multiDrawArraysInstancedWEBGL(ne,ce,0,he,0,ue,0,fe);let ge=0;for(let me=0;me<fe;me++)ge+=he[me];for(let me=0;me<ue.length;me++)te.update(ge,ne,ue[me])}}this.setMode=re,this.render=se,this.renderInstances=ae,this.renderMultiDraw=oe,this.renderMultiDrawInstances=le}function WebGLCapabilities(ie,ee,te,ne){let re;function se(){if(re!==void 0)return re;if(ee.has("EXT_texture_filter_anisotropic")===!0){const be=ee.get("EXT_texture_filter_anisotropic");re=ie.getParameter(be.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else re=0;return re}function ae(be){return!(be!==RGBAFormat&&ne.convert(be)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_FORMAT))}function oe(be){const Ee=be===HalfFloatType&&(ee.has("EXT_color_buffer_half_float")||ee.has("EXT_color_buffer_float"));return!(be!==UnsignedByteType&&ne.convert(be)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_TYPE)&&be!==FloatType&&!Ee)}function le(be){if(be==="highp"){if(ie.getShaderPrecisionFormat(ie.VERTEX_SHADER,ie.HIGH_FLOAT).precision>0&&ie.getShaderPrecisionFormat(ie.FRAGMENT_SHADER,ie.HIGH_FLOAT).precision>0)return"highp";be="mediump"}return be==="mediump"&&ie.getShaderPrecisionFormat(ie.VERTEX_SHADER,ie.MEDIUM_FLOAT).precision>0&&ie.getShaderPrecisionFormat(ie.FRAGMENT_SHADER,ie.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let ce=te.precision!==void 0?te.precision:"highp";const he=le(ce);he!==ce&&(console.warn("THREE.WebGLRenderer:",ce,"not supported, using",he,"instead."),ce=he);const fe=te.logarithmicDepthBuffer===!0,ue=ie.getParameter(ie.MAX_TEXTURE_IMAGE_UNITS),de=ie.getParameter(ie.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ge=ie.getParameter(ie.MAX_TEXTURE_SIZE),me=ie.getParameter(ie.MAX_CUBE_MAP_TEXTURE_SIZE),ve=ie.getParameter(ie.MAX_VERTEX_ATTRIBS),pe=ie.getParameter(ie.MAX_VERTEX_UNIFORM_VECTORS),ye=ie.getParameter(ie.MAX_VARYING_VECTORS),_e=ie.getParameter(ie.MAX_FRAGMENT_UNIFORM_VECTORS),xe=de>0,Se=ie.getParameter(ie.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:se,getMaxPrecision:le,textureFormatReadable:ae,textureTypeReadable:oe,precision:ce,logarithmicDepthBuffer:fe,maxTextures:ue,maxVertexTextures:de,maxTextureSize:ge,maxCubemapSize:me,maxAttributes:ve,maxVertexUniforms:pe,maxVaryings:ye,maxFragmentUniforms:_e,vertexTextures:xe,maxSamples:Se}}function WebGLClipping(ie){const ee=this;let te=null,ne=0,re=!1,se=!1;const ae=new Plane$1,oe=new Matrix3,le={value:null,needsUpdate:!1};this.uniform=le,this.numPlanes=0,this.numIntersection=0,this.init=function(fe,ue){const de=fe.length!==0||ue||ne!==0||re;return re=ue,ne=fe.length,de},this.beginShadows=function(){se=!0,he(null)},this.endShadows=function(){se=!1},this.setGlobalState=function(fe,ue){te=he(fe,ue,0)},this.setState=function(fe,ue,de){const ge=fe.clippingPlanes,me=fe.clipIntersection,ve=fe.clipShadows,pe=ie.get(fe);if(!re||ge===null||ge.length===0||se&&!ve)se?he(null):ce();else{const ye=se?0:ne,_e=ye*4;let xe=pe.clippingState||null;le.value=xe,xe=he(ge,ue,_e,de);for(let Se=0;Se!==_e;++Se)xe[Se]=te[Se];pe.clippingState=xe,this.numIntersection=me?this.numPlanes:0,this.numPlanes+=ye}};function ce(){le.value!==te&&(le.value=te,le.needsUpdate=ne>0),ee.numPlanes=ne,ee.numIntersection=0}function he(fe,ue,de,ge){const me=fe!==null?fe.length:0;let ve=null;if(me!==0){if(ve=le.value,ge!==!0||ve===null){const pe=de+me*4,ye=ue.matrixWorldInverse;oe.getNormalMatrix(ye),(ve===null||ve.length<pe)&&(ve=new Float32Array(pe));for(let _e=0,xe=de;_e!==me;++_e,xe+=4)ae.copy(fe[_e]).applyMatrix4(ye,oe),ae.normal.toArray(ve,xe),ve[xe+3]=ae.constant}le.value=ve,le.needsUpdate=!0}return ee.numPlanes=me,ee.numIntersection=0,ve}}function WebGLCubeMaps(ie){let ee=new WeakMap;function te(ae,oe){return oe===EquirectangularReflectionMapping?ae.mapping=CubeReflectionMapping:oe===EquirectangularRefractionMapping&&(ae.mapping=CubeRefractionMapping),ae}function ne(ae){if(ae&&ae.isTexture){const oe=ae.mapping;if(oe===EquirectangularReflectionMapping||oe===EquirectangularRefractionMapping)if(ee.has(ae)){const le=ee.get(ae).texture;return te(le,ae.mapping)}else{const le=ae.image;if(le&&le.height>0){const ce=new WebGLCubeRenderTarget(le.height);return ce.fromEquirectangularTexture(ie,ae),ee.set(ae,ce),ae.addEventListener("dispose",re),te(ce.texture,ae.mapping)}else return null}}return ae}function re(ae){const oe=ae.target;oe.removeEventListener("dispose",re);const le=ee.get(oe);le!==void 0&&(ee.delete(oe),le.dispose())}function se(){ee=new WeakMap}return{get:ne,dispose:se}}class OrthographicCamera extends Camera{constructor(ee=-1,te=1,ne=1,re=-1,se=.1,ae=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=ee,this.right=te,this.top=ne,this.bottom=re,this.near=se,this.far=ae,this.updateProjectionMatrix()}copy(ee,te){return super.copy(ee,te),this.left=ee.left,this.right=ee.right,this.top=ee.top,this.bottom=ee.bottom,this.near=ee.near,this.far=ee.far,this.zoom=ee.zoom,this.view=ee.view===null?null:Object.assign({},ee.view),this}setViewOffset(ee,te,ne,re,se,ae){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ee,this.view.fullHeight=te,this.view.offsetX=ne,this.view.offsetY=re,this.view.width=se,this.view.height=ae,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const ee=(this.right-this.left)/(2*this.zoom),te=(this.top-this.bottom)/(2*this.zoom),ne=(this.right+this.left)/2,re=(this.top+this.bottom)/2;let se=ne-ee,ae=ne+ee,oe=re+te,le=re-te;if(this.view!==null&&this.view.enabled){const ce=(this.right-this.left)/this.view.fullWidth/this.zoom,he=(this.top-this.bottom)/this.view.fullHeight/this.zoom;se+=ce*this.view.offsetX,ae=se+ce*this.view.width,oe-=he*this.view.offsetY,le=oe-he*this.view.height}this.projectionMatrix.makeOrthographic(se,ae,oe,le,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(ee){const te=super.toJSON(ee);return te.object.zoom=this.zoom,te.object.left=this.left,te.object.right=this.right,te.object.top=this.top,te.object.bottom=this.bottom,te.object.near=this.near,te.object.far=this.far,this.view!==null&&(te.object.view=Object.assign({},this.view)),te}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(ee){this._renderer=ee,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(ee,te=0,ne=.1,re=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const se=this._allocateTargets();return se.depthBuffer=!0,this._sceneToCubeUV(ee,ne,re,se),te>0&&this._blur(se,0,0,te),this._applyPMREM(se),this._cleanup(se),se}fromEquirectangular(ee,te=null){return this._fromTexture(ee,te)}fromCubemap(ee,te=null){return this._fromTexture(ee,te)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(ee){this._lodMax=Math.floor(Math.log2(ee)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let ee=0;ee<this._lodPlanes.length;ee++)this._lodPlanes[ee].dispose()}_cleanup(ee){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,ee.scissorTest=!1,_setViewport(ee,0,0,ee.width,ee.height)}_fromTexture(ee,te){ee.mapping===CubeReflectionMapping||ee.mapping===CubeRefractionMapping?this._setSize(ee.image.length===0?16:ee.image[0].width||ee.image[0].image.width):this._setSize(ee.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const ne=te||this._allocateTargets();return this._textureToCubeUV(ee,ne),this._applyPMREM(ne),this._cleanup(ne),ne}_allocateTargets(){const ee=3*Math.max(this._cubeSize,112),te=4*this._cubeSize,ne={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},re=_createRenderTarget(ee,te,ne);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==ee||this._pingPongRenderTarget.height!==te){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(ee,te,ne);const{_lodMax:se}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(se)),this._blurMaterial=_getBlurShader(se,ee,te)}return re}_compileMaterial(ee){const te=new Mesh(this._lodPlanes[0],ee);this._renderer.compile(te,_flatCamera)}_sceneToCubeUV(ee,te,ne,re){const oe=new PerspectiveCamera(90,1,te,ne),le=[1,-1,1,1,1,1],ce=[1,1,1,-1,-1,-1],he=this._renderer,fe=he.autoClear,ue=he.toneMapping;he.getClearColor(_clearColor),he.toneMapping=NoToneMapping,he.autoClear=!1;const de=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),ge=new Mesh(new BoxGeometry,de);let me=!1;const ve=ee.background;ve?ve.isColor&&(de.color.copy(ve),ee.background=null,me=!0):(de.color.copy(_clearColor),me=!0);for(let pe=0;pe<6;pe++){const ye=pe%3;ye===0?(oe.up.set(0,le[pe],0),oe.lookAt(ce[pe],0,0)):ye===1?(oe.up.set(0,0,le[pe]),oe.lookAt(0,ce[pe],0)):(oe.up.set(0,le[pe],0),oe.lookAt(0,0,ce[pe]));const _e=this._cubeSize;_setViewport(re,ye*_e,pe>2?_e:0,_e,_e),he.setRenderTarget(re),me&&he.render(ge,oe),he.render(ee,oe)}ge.geometry.dispose(),ge.material.dispose(),he.toneMapping=ue,he.autoClear=fe,ee.background=ve}_textureToCubeUV(ee,te){const ne=this._renderer,re=ee.mapping===CubeReflectionMapping||ee.mapping===CubeRefractionMapping;re?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=ee.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const se=re?this._cubemapMaterial:this._equirectMaterial,ae=new Mesh(this._lodPlanes[0],se),oe=se.uniforms;oe.envMap.value=ee;const le=this._cubeSize;_setViewport(te,0,0,3*le,2*le),ne.setRenderTarget(te),ne.render(ae,_flatCamera)}_applyPMREM(ee){const te=this._renderer,ne=te.autoClear;te.autoClear=!1;const re=this._lodPlanes.length;for(let se=1;se<re;se++){const ae=Math.sqrt(this._sigmas[se]*this._sigmas[se]-this._sigmas[se-1]*this._sigmas[se-1]),oe=_axisDirections[(re-se-1)%_axisDirections.length];this._blur(ee,se-1,se,ae,oe)}te.autoClear=ne}_blur(ee,te,ne,re,se){const ae=this._pingPongRenderTarget;this._halfBlur(ee,ae,te,ne,re,"latitudinal",se),this._halfBlur(ae,ee,ne,ne,re,"longitudinal",se)}_halfBlur(ee,te,ne,re,se,ae,oe){const le=this._renderer,ce=this._blurMaterial;ae!=="latitudinal"&&ae!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const he=3,fe=new Mesh(this._lodPlanes[re],ce),ue=ce.uniforms,de=this._sizeLods[ne]-1,ge=isFinite(se)?Math.PI/(2*de):2*Math.PI/(2*MAX_SAMPLES-1),me=se/ge,ve=isFinite(se)?1+Math.floor(he*me):MAX_SAMPLES;ve>MAX_SAMPLES&&console.warn(`sigmaRadians, ${se}, is too large and will clip, as it requested ${ve} samples when the maximum is set to ${MAX_SAMPLES}`);const pe=[];let ye=0;for(let Ee=0;Ee<MAX_SAMPLES;++Ee){const Pe=Ee/me,we=Math.exp(-Pe*Pe/2);pe.push(we),Ee===0?ye+=we:Ee<ve&&(ye+=2*we)}for(let Ee=0;Ee<pe.length;Ee++)pe[Ee]=pe[Ee]/ye;ue.envMap.value=ee.texture,ue.samples.value=ve,ue.weights.value=pe,ue.latitudinal.value=ae==="latitudinal",oe&&(ue.poleAxis.value=oe);const{_lodMax:_e}=this;ue.dTheta.value=ge,ue.mipInt.value=_e-ne;const xe=this._sizeLods[re],Se=3*xe*(re>_e-LOD_MIN?re-_e+LOD_MIN:0),be=4*(this._cubeSize-xe);_setViewport(te,Se,be,3*xe,2*xe),le.setRenderTarget(te),le.render(fe,_flatCamera)}}function _createPlanes(ie){const ee=[],te=[],ne=[];let re=ie;const se=ie-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let ae=0;ae<se;ae++){const oe=Math.pow(2,re);te.push(oe);let le=1/oe;ae>ie-LOD_MIN?le=EXTRA_LOD_SIGMA[ae-ie+LOD_MIN-1]:ae===0&&(le=0),ne.push(le);const ce=1/(oe-2),he=-ce,fe=1+ce,ue=[he,he,fe,he,fe,fe,he,he,fe,fe,he,fe],de=6,ge=6,me=3,ve=2,pe=1,ye=new Float32Array(me*ge*de),_e=new Float32Array(ve*ge*de),xe=new Float32Array(pe*ge*de);for(let be=0;be<de;be++){const Ee=be%3*2/3-1,Pe=be>2?0:-1,we=[Ee,Pe,0,Ee+2/3,Pe,0,Ee+2/3,Pe+1,0,Ee,Pe,0,Ee+2/3,Pe+1,0,Ee,Pe+1,0];ye.set(we,me*ge*be),_e.set(ue,ve*ge*be);const Me=[be,be,be,be,be,be];xe.set(Me,pe*ge*be)}const Se=new BufferGeometry;Se.setAttribute("position",new BufferAttribute(ye,me)),Se.setAttribute("uv",new BufferAttribute(_e,ve)),Se.setAttribute("faceIndex",new BufferAttribute(xe,pe)),ee.push(Se),re>LOD_MIN&&re--}return{lodPlanes:ee,sizeLods:te,sigmas:ne}}function _createRenderTarget(ie,ee,te){const ne=new WebGLRenderTarget(ie,ee,te);return ne.texture.mapping=CubeUVReflectionMapping,ne.texture.name="PMREM.cubeUv",ne.scissorTest=!0,ne}function _setViewport(ie,ee,te,ne,re){ie.viewport.set(ee,te,ne,re),ie.scissor.set(ee,te,ne,re)}function _getBlurShader(ie,ee,te){const ne=new Float32Array(MAX_SAMPLES),re=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/ee,CUBEUV_TEXEL_HEIGHT:1/te,CUBEUV_MAX_MIP:`${ie}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ne},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:re}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(ie){let ee=new WeakMap,te=null;function ne(oe){if(oe&&oe.isTexture){const le=oe.mapping,ce=le===EquirectangularReflectionMapping||le===EquirectangularRefractionMapping,he=le===CubeReflectionMapping||le===CubeRefractionMapping;if(ce||he){let fe=ee.get(oe);const ue=fe!==void 0?fe.texture.pmremVersion:0;if(oe.isRenderTargetTexture&&oe.pmremVersion!==ue)return te===null&&(te=new PMREMGenerator(ie)),fe=ce?te.fromEquirectangular(oe,fe):te.fromCubemap(oe,fe),fe.texture.pmremVersion=oe.pmremVersion,ee.set(oe,fe),fe.texture;if(fe!==void 0)return fe.texture;{const de=oe.image;return ce&&de&&de.height>0||he&&de&&re(de)?(te===null&&(te=new PMREMGenerator(ie)),fe=ce?te.fromEquirectangular(oe):te.fromCubemap(oe),fe.texture.pmremVersion=oe.pmremVersion,ee.set(oe,fe),oe.addEventListener("dispose",se),fe.texture):null}}}return oe}function re(oe){let le=0;const ce=6;for(let he=0;he<ce;he++)oe[he]!==void 0&&le++;return le===ce}function se(oe){const le=oe.target;le.removeEventListener("dispose",se);const ce=ee.get(le);ce!==void 0&&(ee.delete(le),ce.dispose())}function ae(){ee=new WeakMap,te!==null&&(te.dispose(),te=null)}return{get:ne,dispose:ae}}function WebGLExtensions(ie){const ee={};function te(ne){if(ee[ne]!==void 0)return ee[ne];let re;switch(ne){case"WEBGL_depth_texture":re=ie.getExtension("WEBGL_depth_texture")||ie.getExtension("MOZ_WEBGL_depth_texture")||ie.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":re=ie.getExtension("EXT_texture_filter_anisotropic")||ie.getExtension("MOZ_EXT_texture_filter_anisotropic")||ie.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":re=ie.getExtension("WEBGL_compressed_texture_s3tc")||ie.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ie.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":re=ie.getExtension("WEBGL_compressed_texture_pvrtc")||ie.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:re=ie.getExtension(ne)}return ee[ne]=re,re}return{has:function(ne){return te(ne)!==null},init:function(){te("EXT_color_buffer_float"),te("WEBGL_clip_cull_distance"),te("OES_texture_float_linear"),te("EXT_color_buffer_half_float"),te("WEBGL_multisampled_render_to_texture"),te("WEBGL_render_shared_exponent")},get:function(ne){const re=te(ne);return re===null&&warnOnce("THREE.WebGLRenderer: "+ne+" extension not supported."),re}}}function WebGLGeometries(ie,ee,te,ne){const re={},se=new WeakMap;function ae(fe){const ue=fe.target;ue.index!==null&&ee.remove(ue.index);for(const ge in ue.attributes)ee.remove(ue.attributes[ge]);for(const ge in ue.morphAttributes){const me=ue.morphAttributes[ge];for(let ve=0,pe=me.length;ve<pe;ve++)ee.remove(me[ve])}ue.removeEventListener("dispose",ae),delete re[ue.id];const de=se.get(ue);de&&(ee.remove(de),se.delete(ue)),ne.releaseStatesOfGeometry(ue),ue.isInstancedBufferGeometry===!0&&delete ue._maxInstanceCount,te.memory.geometries--}function oe(fe,ue){return re[ue.id]===!0||(ue.addEventListener("dispose",ae),re[ue.id]=!0,te.memory.geometries++),ue}function le(fe){const ue=fe.attributes;for(const ge in ue)ee.update(ue[ge],ie.ARRAY_BUFFER);const de=fe.morphAttributes;for(const ge in de){const me=de[ge];for(let ve=0,pe=me.length;ve<pe;ve++)ee.update(me[ve],ie.ARRAY_BUFFER)}}function ce(fe){const ue=[],de=fe.index,ge=fe.attributes.position;let me=0;if(de!==null){const ye=de.array;me=de.version;for(let _e=0,xe=ye.length;_e<xe;_e+=3){const Se=ye[_e+0],be=ye[_e+1],Ee=ye[_e+2];ue.push(Se,be,be,Ee,Ee,Se)}}else if(ge!==void 0){const ye=ge.array;me=ge.version;for(let _e=0,xe=ye.length/3-1;_e<xe;_e+=3){const Se=_e+0,be=_e+1,Ee=_e+2;ue.push(Se,be,be,Ee,Ee,Se)}}else return;const ve=new(arrayNeedsUint32(ue)?Uint32BufferAttribute:Uint16BufferAttribute)(ue,1);ve.version=me;const pe=se.get(fe);pe&&ee.remove(pe),se.set(fe,ve)}function he(fe){const ue=se.get(fe);if(ue){const de=fe.index;de!==null&&ue.version<de.version&&ce(fe)}else ce(fe);return se.get(fe)}return{get:oe,update:le,getWireframeAttribute:he}}function WebGLIndexedBufferRenderer(ie,ee,te){let ne;function re(ue){ne=ue}let se,ae;function oe(ue){se=ue.type,ae=ue.bytesPerElement}function le(ue,de){ie.drawElements(ne,de,se,ue*ae),te.update(de,ne,1)}function ce(ue,de,ge){ge!==0&&(ie.drawElementsInstanced(ne,de,se,ue*ae,ge),te.update(de,ne,ge))}function he(ue,de,ge){if(ge===0)return;ee.get("WEBGL_multi_draw").multiDrawElementsWEBGL(ne,de,0,se,ue,0,ge);let ve=0;for(let pe=0;pe<ge;pe++)ve+=de[pe];te.update(ve,ne,1)}function fe(ue,de,ge,me){if(ge===0)return;const ve=ee.get("WEBGL_multi_draw");if(ve===null)for(let pe=0;pe<ue.length;pe++)ce(ue[pe]/ae,de[pe],me[pe]);else{ve.multiDrawElementsInstancedWEBGL(ne,de,0,se,ue,0,me,0,ge);let pe=0;for(let ye=0;ye<ge;ye++)pe+=de[ye];for(let ye=0;ye<me.length;ye++)te.update(pe,ne,me[ye])}}this.setMode=re,this.setIndex=oe,this.render=le,this.renderInstances=ce,this.renderMultiDraw=he,this.renderMultiDrawInstances=fe}function WebGLInfo(ie){const ee={geometries:0,textures:0},te={frame:0,calls:0,triangles:0,points:0,lines:0};function ne(se,ae,oe){switch(te.calls++,ae){case ie.TRIANGLES:te.triangles+=oe*(se/3);break;case ie.LINES:te.lines+=oe*(se/2);break;case ie.LINE_STRIP:te.lines+=oe*(se-1);break;case ie.LINE_LOOP:te.lines+=oe*se;break;case ie.POINTS:te.points+=oe*se;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ae);break}}function re(){te.calls=0,te.triangles=0,te.points=0,te.lines=0}return{memory:ee,render:te,programs:null,autoReset:!0,reset:re,update:ne}}function WebGLMorphtargets(ie,ee,te){const ne=new WeakMap,re=new Vector4;function se(ae,oe,le){const ce=ae.morphTargetInfluences,he=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,fe=he!==void 0?he.length:0;let ue=ne.get(oe);if(ue===void 0||ue.count!==fe){let we=function(){Ee.dispose(),ne.delete(oe),oe.removeEventListener("dispose",we)};ue!==void 0&&ue.texture.dispose();const de=oe.morphAttributes.position!==void 0,ge=oe.morphAttributes.normal!==void 0,me=oe.morphAttributes.color!==void 0,ve=oe.morphAttributes.position||[],pe=oe.morphAttributes.normal||[],ye=oe.morphAttributes.color||[];let _e=0;de===!0&&(_e=1),ge===!0&&(_e=2),me===!0&&(_e=3);let xe=oe.attributes.position.count*_e,Se=1;xe>ee.maxTextureSize&&(Se=Math.ceil(xe/ee.maxTextureSize),xe=ee.maxTextureSize);const be=new Float32Array(xe*Se*4*fe),Ee=new DataArrayTexture(be,xe,Se,fe);Ee.type=FloatType,Ee.needsUpdate=!0;const Pe=_e*4;for(let Me=0;Me<fe;Me++){const De=ve[Me],ke=pe[Me],ze=ye[Me],Ve=xe*Se*4*Me;for(let Ue=0;Ue<De.count;Ue++){const Ae=Ue*Pe;de===!0&&(re.fromBufferAttribute(De,Ue),be[Ve+Ae+0]=re.x,be[Ve+Ae+1]=re.y,be[Ve+Ae+2]=re.z,be[Ve+Ae+3]=0),ge===!0&&(re.fromBufferAttribute(ke,Ue),be[Ve+Ae+4]=re.x,be[Ve+Ae+5]=re.y,be[Ve+Ae+6]=re.z,be[Ve+Ae+7]=0),me===!0&&(re.fromBufferAttribute(ze,Ue),be[Ve+Ae+8]=re.x,be[Ve+Ae+9]=re.y,be[Ve+Ae+10]=re.z,be[Ve+Ae+11]=ze.itemSize===4?re.w:1)}}ue={count:fe,texture:Ee,size:new Vector2(xe,Se)},ne.set(oe,ue),oe.addEventListener("dispose",we)}if(ae.isInstancedMesh===!0&&ae.morphTexture!==null)le.getUniforms().setValue(ie,"morphTexture",ae.morphTexture,te);else{let de=0;for(let me=0;me<ce.length;me++)de+=ce[me];const ge=oe.morphTargetsRelative?1:1-de;le.getUniforms().setValue(ie,"morphTargetBaseInfluence",ge),le.getUniforms().setValue(ie,"morphTargetInfluences",ce)}le.getUniforms().setValue(ie,"morphTargetsTexture",ue.texture,te),le.getUniforms().setValue(ie,"morphTargetsTextureSize",ue.size)}return{update:se}}function WebGLObjects(ie,ee,te,ne){let re=new WeakMap;function se(le){const ce=ne.render.frame,he=le.geometry,fe=ee.get(le,he);if(re.get(fe)!==ce&&(ee.update(fe),re.set(fe,ce)),le.isInstancedMesh&&(le.hasEventListener("dispose",oe)===!1&&le.addEventListener("dispose",oe),re.get(le)!==ce&&(te.update(le.instanceMatrix,ie.ARRAY_BUFFER),le.instanceColor!==null&&te.update(le.instanceColor,ie.ARRAY_BUFFER),re.set(le,ce))),le.isSkinnedMesh){const ue=le.skeleton;re.get(ue)!==ce&&(ue.update(),re.set(ue,ce))}return fe}function ae(){re=new WeakMap}function oe(le){const ce=le.target;ce.removeEventListener("dispose",oe),te.remove(ce.instanceMatrix),ce.instanceColor!==null&&te.remove(ce.instanceColor)}return{update:se,dispose:ae}}class DepthTexture extends Texture{constructor(ee,te,ne,re,se,ae,oe,le,ce,he=DepthFormat){if(he!==DepthFormat&&he!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ne===void 0&&he===DepthFormat&&(ne=UnsignedIntType),ne===void 0&&he===DepthStencilFormat&&(ne=UnsignedInt248Type),super(null,re,se,ae,oe,le,he,ne,ce),this.isDepthTexture=!0,this.image={width:ee,height:te},this.magFilter=oe!==void 0?oe:NearestFilter,this.minFilter=le!==void 0?le:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(ee){return super.copy(ee),this.compareFunction=ee.compareFunction,this}toJSON(ee){const te=super.toJSON(ee);return this.compareFunction!==null&&(te.compareFunction=this.compareFunction),te}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(ie,ee,te){const ne=ie[0];if(ne<=0||ne>0)return ie;const re=ee*te;let se=arrayCacheF32[re];if(se===void 0&&(se=new Float32Array(re),arrayCacheF32[re]=se),ee!==0){ne.toArray(se,0);for(let ae=1,oe=0;ae!==ee;++ae)oe+=te,ie[ae].toArray(se,oe)}return se}function arraysEqual(ie,ee){if(ie.length!==ee.length)return!1;for(let te=0,ne=ie.length;te<ne;te++)if(ie[te]!==ee[te])return!1;return!0}function copyArray(ie,ee){for(let te=0,ne=ee.length;te<ne;te++)ie[te]=ee[te]}function allocTexUnits(ie,ee){let te=arrayCacheI32[ee];te===void 0&&(te=new Int32Array(ee),arrayCacheI32[ee]=te);for(let ne=0;ne!==ee;++ne)te[ne]=ie.allocateTextureUnit();return te}function setValueV1f(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1f(this.addr,ee),te[0]=ee)}function setValueV2f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y)&&(ie.uniform2f(this.addr,ee.x,ee.y),te[0]=ee.x,te[1]=ee.y);else{if(arraysEqual(te,ee))return;ie.uniform2fv(this.addr,ee),copyArray(te,ee)}}function setValueV3f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z)&&(ie.uniform3f(this.addr,ee.x,ee.y,ee.z),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z);else if(ee.r!==void 0)(te[0]!==ee.r||te[1]!==ee.g||te[2]!==ee.b)&&(ie.uniform3f(this.addr,ee.r,ee.g,ee.b),te[0]=ee.r,te[1]=ee.g,te[2]=ee.b);else{if(arraysEqual(te,ee))return;ie.uniform3fv(this.addr,ee),copyArray(te,ee)}}function setValueV4f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z||te[3]!==ee.w)&&(ie.uniform4f(this.addr,ee.x,ee.y,ee.z,ee.w),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z,te[3]=ee.w);else{if(arraysEqual(te,ee))return;ie.uniform4fv(this.addr,ee),copyArray(te,ee)}}function setValueM2(ie,ee){const te=this.cache,ne=ee.elements;if(ne===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix2fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,ne))return;mat2array.set(ne),ie.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(te,ne)}}function setValueM3(ie,ee){const te=this.cache,ne=ee.elements;if(ne===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix3fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,ne))return;mat3array.set(ne),ie.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(te,ne)}}function setValueM4(ie,ee){const te=this.cache,ne=ee.elements;if(ne===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix4fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,ne))return;mat4array.set(ne),ie.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(te,ne)}}function setValueV1i(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1i(this.addr,ee),te[0]=ee)}function setValueV2i(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y)&&(ie.uniform2i(this.addr,ee.x,ee.y),te[0]=ee.x,te[1]=ee.y);else{if(arraysEqual(te,ee))return;ie.uniform2iv(this.addr,ee),copyArray(te,ee)}}function setValueV3i(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z)&&(ie.uniform3i(this.addr,ee.x,ee.y,ee.z),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z);else{if(arraysEqual(te,ee))return;ie.uniform3iv(this.addr,ee),copyArray(te,ee)}}function setValueV4i(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z||te[3]!==ee.w)&&(ie.uniform4i(this.addr,ee.x,ee.y,ee.z,ee.w),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z,te[3]=ee.w);else{if(arraysEqual(te,ee))return;ie.uniform4iv(this.addr,ee),copyArray(te,ee)}}function setValueV1ui(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1ui(this.addr,ee),te[0]=ee)}function setValueV2ui(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y)&&(ie.uniform2ui(this.addr,ee.x,ee.y),te[0]=ee.x,te[1]=ee.y);else{if(arraysEqual(te,ee))return;ie.uniform2uiv(this.addr,ee),copyArray(te,ee)}}function setValueV3ui(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z)&&(ie.uniform3ui(this.addr,ee.x,ee.y,ee.z),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z);else{if(arraysEqual(te,ee))return;ie.uniform3uiv(this.addr,ee),copyArray(te,ee)}}function setValueV4ui(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z||te[3]!==ee.w)&&(ie.uniform4ui(this.addr,ee.x,ee.y,ee.z,ee.w),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z,te[3]=ee.w);else{if(arraysEqual(te,ee))return;ie.uniform4uiv(this.addr,ee),copyArray(te,ee)}}function setValueT1(ie,ee,te){const ne=this.cache,re=te.allocateTextureUnit();ne[0]!==re&&(ie.uniform1i(this.addr,re),ne[0]=re);let se;this.type===ie.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,se=emptyShadowTexture):se=emptyTexture,te.setTexture2D(ee||se,re)}function setValueT3D1(ie,ee,te){const ne=this.cache,re=te.allocateTextureUnit();ne[0]!==re&&(ie.uniform1i(this.addr,re),ne[0]=re),te.setTexture3D(ee||empty3dTexture,re)}function setValueT6(ie,ee,te){const ne=this.cache,re=te.allocateTextureUnit();ne[0]!==re&&(ie.uniform1i(this.addr,re),ne[0]=re),te.setTextureCube(ee||emptyCubeTexture,re)}function setValueT2DArray1(ie,ee,te){const ne=this.cache,re=te.allocateTextureUnit();ne[0]!==re&&(ie.uniform1i(this.addr,re),ne[0]=re),te.setTexture2DArray(ee||emptyArrayTexture,re)}function getSingularSetter(ie){switch(ie){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ie,ee){ie.uniform1fv(this.addr,ee)}function setValueV2fArray(ie,ee){const te=flatten(ee,this.size,2);ie.uniform2fv(this.addr,te)}function setValueV3fArray(ie,ee){const te=flatten(ee,this.size,3);ie.uniform3fv(this.addr,te)}function setValueV4fArray(ie,ee){const te=flatten(ee,this.size,4);ie.uniform4fv(this.addr,te)}function setValueM2Array(ie,ee){const te=flatten(ee,this.size,4);ie.uniformMatrix2fv(this.addr,!1,te)}function setValueM3Array(ie,ee){const te=flatten(ee,this.size,9);ie.uniformMatrix3fv(this.addr,!1,te)}function setValueM4Array(ie,ee){const te=flatten(ee,this.size,16);ie.uniformMatrix4fv(this.addr,!1,te)}function setValueV1iArray(ie,ee){ie.uniform1iv(this.addr,ee)}function setValueV2iArray(ie,ee){ie.uniform2iv(this.addr,ee)}function setValueV3iArray(ie,ee){ie.uniform3iv(this.addr,ee)}function setValueV4iArray(ie,ee){ie.uniform4iv(this.addr,ee)}function setValueV1uiArray(ie,ee){ie.uniform1uiv(this.addr,ee)}function setValueV2uiArray(ie,ee){ie.uniform2uiv(this.addr,ee)}function setValueV3uiArray(ie,ee){ie.uniform3uiv(this.addr,ee)}function setValueV4uiArray(ie,ee){ie.uniform4uiv(this.addr,ee)}function setValueT1Array(ie,ee,te){const ne=this.cache,re=ee.length,se=allocTexUnits(te,re);arraysEqual(ne,se)||(ie.uniform1iv(this.addr,se),copyArray(ne,se));for(let ae=0;ae!==re;++ae)te.setTexture2D(ee[ae]||emptyTexture,se[ae])}function setValueT3DArray(ie,ee,te){const ne=this.cache,re=ee.length,se=allocTexUnits(te,re);arraysEqual(ne,se)||(ie.uniform1iv(this.addr,se),copyArray(ne,se));for(let ae=0;ae!==re;++ae)te.setTexture3D(ee[ae]||empty3dTexture,se[ae])}function setValueT6Array(ie,ee,te){const ne=this.cache,re=ee.length,se=allocTexUnits(te,re);arraysEqual(ne,se)||(ie.uniform1iv(this.addr,se),copyArray(ne,se));for(let ae=0;ae!==re;++ae)te.setTextureCube(ee[ae]||emptyCubeTexture,se[ae])}function setValueT2DArrayArray(ie,ee,te){const ne=this.cache,re=ee.length,se=allocTexUnits(te,re);arraysEqual(ne,se)||(ie.uniform1iv(this.addr,se),copyArray(ne,se));for(let ae=0;ae!==re;++ae)te.setTexture2DArray(ee[ae]||emptyArrayTexture,se[ae])}function getPureArraySetter(ie){switch(ie){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(ee,te,ne){this.id=ee,this.addr=ne,this.cache=[],this.type=te.type,this.setValue=getSingularSetter(te.type)}}class PureArrayUniform{constructor(ee,te,ne){this.id=ee,this.addr=ne,this.cache=[],this.type=te.type,this.size=te.size,this.setValue=getPureArraySetter(te.type)}}class StructuredUniform{constructor(ee){this.id=ee,this.seq=[],this.map={}}setValue(ee,te,ne){const re=this.seq;for(let se=0,ae=re.length;se!==ae;++se){const oe=re[se];oe.setValue(ee,te[oe.id],ne)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(ie,ee){ie.seq.push(ee),ie.map[ee.id]=ee}function parseUniform(ie,ee,te){const ne=ie.name,re=ne.length;for(RePathPart.lastIndex=0;;){const se=RePathPart.exec(ne),ae=RePathPart.lastIndex;let oe=se[1];const le=se[2]==="]",ce=se[3];if(le&&(oe=oe|0),ce===void 0||ce==="["&&ae+2===re){addUniform(te,ce===void 0?new SingleUniform(oe,ie,ee):new PureArrayUniform(oe,ie,ee));break}else{let fe=te.map[oe];fe===void 0&&(fe=new StructuredUniform(oe),addUniform(te,fe)),te=fe}}}class WebGLUniforms{constructor(ee,te){this.seq=[],this.map={};const ne=ee.getProgramParameter(te,ee.ACTIVE_UNIFORMS);for(let re=0;re<ne;++re){const se=ee.getActiveUniform(te,re),ae=ee.getUniformLocation(te,se.name);parseUniform(se,ae,this)}}setValue(ee,te,ne,re){const se=this.map[te];se!==void 0&&se.setValue(ee,ne,re)}setOptional(ee,te,ne){const re=te[ne];re!==void 0&&this.setValue(ee,ne,re)}static upload(ee,te,ne,re){for(let se=0,ae=te.length;se!==ae;++se){const oe=te[se],le=ne[oe.id];le.needsUpdate!==!1&&oe.setValue(ee,le.value,re)}}static seqWithValue(ee,te){const ne=[];for(let re=0,se=ee.length;re!==se;++re){const ae=ee[re];ae.id in te&&ne.push(ae)}return ne}}function WebGLShader(ie,ee,te){const ne=ie.createShader(ee);return ie.shaderSource(ne,te),ie.compileShader(ne),ne}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(ie,ee){const te=ie.split(`
`),ne=[],re=Math.max(ee-6,0),se=Math.min(ee+6,te.length);for(let ae=re;ae<se;ae++){const oe=ae+1;ne.push(`${oe===ee?">":" "} ${oe}: ${te[ae]}`)}return ne.join(`
`)}function getEncodingComponents(ie){const ee=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),te=ColorManagement.getPrimaries(ie);let ne;switch(ee===te?ne="":ee===P3Primaries&&te===Rec709Primaries?ne="LinearDisplayP3ToLinearSRGB":ee===Rec709Primaries&&te===P3Primaries&&(ne="LinearSRGBToLinearDisplayP3"),ie){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[ne,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[ne,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",ie),[ne,"LinearTransferOETF"]}}function getShaderErrors(ie,ee,te){const ne=ie.getShaderParameter(ee,ie.COMPILE_STATUS),re=ie.getShaderInfoLog(ee).trim();if(ne&&re==="")return"";const se=/ERROR: 0:(\d+)/.exec(re);if(se){const ae=parseInt(se[1]);return te.toUpperCase()+`

`+re+`

`+handleSource(ie.getShaderSource(ee),ae)}else return re}function getTexelEncodingFunction(ie,ee){const te=getEncodingComponents(ee);return`vec4 ${ie}( vec4 value ) { return ${te[0]}( ${te[1]}( value ) ); }`}function getToneMappingFunction(ie,ee){let te;switch(ee){case LinearToneMapping:te="Linear";break;case ReinhardToneMapping:te="Reinhard";break;case CineonToneMapping:te="OptimizedCineon";break;case ACESFilmicToneMapping:te="ACESFilmic";break;case AgXToneMapping:te="AgX";break;case NeutralToneMapping:te="Neutral";break;case CustomToneMapping:te="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",ee),te="Linear"}return"vec3 "+ie+"( vec3 color ) { return "+te+"ToneMapping( color ); }"}const _v0$1=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0$1);const ie=_v0$1.x.toFixed(4),ee=_v0$1.y.toFixed(4),te=_v0$1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${ie}, ${ee}, ${te} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(ie){return[ie.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",ie.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(ie){const ee=[];for(const te in ie){const ne=ie[te];ne!==!1&&ee.push("#define "+te+" "+ne)}return ee.join(`
`)}function fetchAttributeLocations(ie,ee){const te={},ne=ie.getProgramParameter(ee,ie.ACTIVE_ATTRIBUTES);for(let re=0;re<ne;re++){const se=ie.getActiveAttrib(ee,re),ae=se.name;let oe=1;se.type===ie.FLOAT_MAT2&&(oe=2),se.type===ie.FLOAT_MAT3&&(oe=3),se.type===ie.FLOAT_MAT4&&(oe=4),te[ae]={type:se.type,location:ie.getAttribLocation(ee,ae),locationSize:oe}}return te}function filterEmptyLine(ie){return ie!==""}function replaceLightNums(ie,ee){const te=ee.numSpotLightShadows+ee.numSpotLightMaps-ee.numSpotLightShadowsWithMaps;return ie.replace(/NUM_DIR_LIGHTS/g,ee.numDirLights).replace(/NUM_SPOT_LIGHTS/g,ee.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,ee.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,te).replace(/NUM_RECT_AREA_LIGHTS/g,ee.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,ee.numPointLights).replace(/NUM_HEMI_LIGHTS/g,ee.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,ee.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,ee.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,ee.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,ee.numPointLightShadows)}function replaceClippingPlaneNums(ie,ee){return ie.replace(/NUM_CLIPPING_PLANES/g,ee.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,ee.numClippingPlanes-ee.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ie){return ie.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(ie,ee){let te=ShaderChunk[ee];if(te===void 0){const ne=shaderChunkMap.get(ee);if(ne!==void 0)te=ShaderChunk[ne],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',ee,ne);else throw new Error("Can not resolve #include <"+ee+">")}return resolveIncludes(te)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(ie){return ie.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(ie,ee,te,ne){let re="";for(let se=parseInt(ee);se<parseInt(te);se++)re+=ne.replace(/\[\s*i\s*\]/g,"[ "+se+" ]").replace(/UNROLLED_LOOP_INDEX/g,se);return re}function generatePrecision(ie){let ee=`precision ${ie.precision} float;
	precision ${ie.precision} int;
	precision ${ie.precision} sampler2D;
	precision ${ie.precision} samplerCube;
	precision ${ie.precision} sampler3D;
	precision ${ie.precision} sampler2DArray;
	precision ${ie.precision} sampler2DShadow;
	precision ${ie.precision} samplerCubeShadow;
	precision ${ie.precision} sampler2DArrayShadow;
	precision ${ie.precision} isampler2D;
	precision ${ie.precision} isampler3D;
	precision ${ie.precision} isamplerCube;
	precision ${ie.precision} isampler2DArray;
	precision ${ie.precision} usampler2D;
	precision ${ie.precision} usampler3D;
	precision ${ie.precision} usamplerCube;
	precision ${ie.precision} usampler2DArray;
	`;return ie.precision==="highp"?ee+=`
#define HIGH_PRECISION`:ie.precision==="mediump"?ee+=`
#define MEDIUM_PRECISION`:ie.precision==="lowp"&&(ee+=`
#define LOW_PRECISION`),ee}function generateShadowMapTypeDefine(ie){let ee="SHADOWMAP_TYPE_BASIC";return ie.shadowMapType===PCFShadowMap?ee="SHADOWMAP_TYPE_PCF":ie.shadowMapType===PCFSoftShadowMap?ee="SHADOWMAP_TYPE_PCF_SOFT":ie.shadowMapType===VSMShadowMap&&(ee="SHADOWMAP_TYPE_VSM"),ee}function generateEnvMapTypeDefine(ie){let ee="ENVMAP_TYPE_CUBE";if(ie.envMap)switch(ie.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:ee="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:ee="ENVMAP_TYPE_CUBE_UV";break}return ee}function generateEnvMapModeDefine(ie){let ee="ENVMAP_MODE_REFLECTION";if(ie.envMap)switch(ie.envMapMode){case CubeRefractionMapping:ee="ENVMAP_MODE_REFRACTION";break}return ee}function generateEnvMapBlendingDefine(ie){let ee="ENVMAP_BLENDING_NONE";if(ie.envMap)switch(ie.combine){case MultiplyOperation:ee="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:ee="ENVMAP_BLENDING_MIX";break;case AddOperation:ee="ENVMAP_BLENDING_ADD";break}return ee}function generateCubeUVSize(ie){const ee=ie.envMapCubeUVHeight;if(ee===null)return null;const te=Math.log2(ee)-2,ne=1/ee;return{texelWidth:1/(3*Math.max(Math.pow(2,te),7*16)),texelHeight:ne,maxMip:te}}function WebGLProgram(ie,ee,te,ne){const re=ie.getContext(),se=te.defines;let ae=te.vertexShader,oe=te.fragmentShader;const le=generateShadowMapTypeDefine(te),ce=generateEnvMapTypeDefine(te),he=generateEnvMapModeDefine(te),fe=generateEnvMapBlendingDefine(te),ue=generateCubeUVSize(te),de=generateVertexExtensions(te),ge=generateDefines(se),me=re.createProgram();let ve,pe,ye=te.glslVersion?"#version "+te.glslVersion+`
`:"";te.isRawShaderMaterial?(ve=["#define SHADER_TYPE "+te.shaderType,"#define SHADER_NAME "+te.shaderName,ge].filter(filterEmptyLine).join(`
`),ve.length>0&&(ve+=`
`),pe=["#define SHADER_TYPE "+te.shaderType,"#define SHADER_NAME "+te.shaderName,ge].filter(filterEmptyLine).join(`
`),pe.length>0&&(pe+=`
`)):(ve=[generatePrecision(te),"#define SHADER_TYPE "+te.shaderType,"#define SHADER_NAME "+te.shaderName,ge,te.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",te.batching?"#define USE_BATCHING":"",te.batchingColor?"#define USE_BATCHING_COLOR":"",te.instancing?"#define USE_INSTANCING":"",te.instancingColor?"#define USE_INSTANCING_COLOR":"",te.instancingMorph?"#define USE_INSTANCING_MORPH":"",te.useFog&&te.fog?"#define USE_FOG":"",te.useFog&&te.fogExp2?"#define FOG_EXP2":"",te.map?"#define USE_MAP":"",te.envMap?"#define USE_ENVMAP":"",te.envMap?"#define "+he:"",te.lightMap?"#define USE_LIGHTMAP":"",te.aoMap?"#define USE_AOMAP":"",te.bumpMap?"#define USE_BUMPMAP":"",te.normalMap?"#define USE_NORMALMAP":"",te.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",te.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",te.displacementMap?"#define USE_DISPLACEMENTMAP":"",te.emissiveMap?"#define USE_EMISSIVEMAP":"",te.anisotropy?"#define USE_ANISOTROPY":"",te.anisotropyMap?"#define USE_ANISOTROPYMAP":"",te.clearcoatMap?"#define USE_CLEARCOATMAP":"",te.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",te.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",te.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",te.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",te.specularMap?"#define USE_SPECULARMAP":"",te.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",te.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",te.roughnessMap?"#define USE_ROUGHNESSMAP":"",te.metalnessMap?"#define USE_METALNESSMAP":"",te.alphaMap?"#define USE_ALPHAMAP":"",te.alphaHash?"#define USE_ALPHAHASH":"",te.transmission?"#define USE_TRANSMISSION":"",te.transmissionMap?"#define USE_TRANSMISSIONMAP":"",te.thicknessMap?"#define USE_THICKNESSMAP":"",te.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",te.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",te.mapUv?"#define MAP_UV "+te.mapUv:"",te.alphaMapUv?"#define ALPHAMAP_UV "+te.alphaMapUv:"",te.lightMapUv?"#define LIGHTMAP_UV "+te.lightMapUv:"",te.aoMapUv?"#define AOMAP_UV "+te.aoMapUv:"",te.emissiveMapUv?"#define EMISSIVEMAP_UV "+te.emissiveMapUv:"",te.bumpMapUv?"#define BUMPMAP_UV "+te.bumpMapUv:"",te.normalMapUv?"#define NORMALMAP_UV "+te.normalMapUv:"",te.displacementMapUv?"#define DISPLACEMENTMAP_UV "+te.displacementMapUv:"",te.metalnessMapUv?"#define METALNESSMAP_UV "+te.metalnessMapUv:"",te.roughnessMapUv?"#define ROUGHNESSMAP_UV "+te.roughnessMapUv:"",te.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+te.anisotropyMapUv:"",te.clearcoatMapUv?"#define CLEARCOATMAP_UV "+te.clearcoatMapUv:"",te.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+te.clearcoatNormalMapUv:"",te.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+te.clearcoatRoughnessMapUv:"",te.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+te.iridescenceMapUv:"",te.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+te.iridescenceThicknessMapUv:"",te.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+te.sheenColorMapUv:"",te.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+te.sheenRoughnessMapUv:"",te.specularMapUv?"#define SPECULARMAP_UV "+te.specularMapUv:"",te.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+te.specularColorMapUv:"",te.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+te.specularIntensityMapUv:"",te.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+te.transmissionMapUv:"",te.thicknessMapUv?"#define THICKNESSMAP_UV "+te.thicknessMapUv:"",te.vertexTangents&&te.flatShading===!1?"#define USE_TANGENT":"",te.vertexColors?"#define USE_COLOR":"",te.vertexAlphas?"#define USE_COLOR_ALPHA":"",te.vertexUv1s?"#define USE_UV1":"",te.vertexUv2s?"#define USE_UV2":"",te.vertexUv3s?"#define USE_UV3":"",te.pointsUvs?"#define USE_POINTS_UV":"",te.flatShading?"#define FLAT_SHADED":"",te.skinning?"#define USE_SKINNING":"",te.morphTargets?"#define USE_MORPHTARGETS":"",te.morphNormals&&te.flatShading===!1?"#define USE_MORPHNORMALS":"",te.morphColors?"#define USE_MORPHCOLORS":"",te.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+te.morphTextureStride:"",te.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+te.morphTargetsCount:"",te.doubleSided?"#define DOUBLE_SIDED":"",te.flipSided?"#define FLIP_SIDED":"",te.shadowMapEnabled?"#define USE_SHADOWMAP":"",te.shadowMapEnabled?"#define "+le:"",te.sizeAttenuation?"#define USE_SIZEATTENUATION":"",te.numLightProbes>0?"#define USE_LIGHT_PROBES":"",te.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),pe=[generatePrecision(te),"#define SHADER_TYPE "+te.shaderType,"#define SHADER_NAME "+te.shaderName,ge,te.useFog&&te.fog?"#define USE_FOG":"",te.useFog&&te.fogExp2?"#define FOG_EXP2":"",te.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",te.map?"#define USE_MAP":"",te.matcap?"#define USE_MATCAP":"",te.envMap?"#define USE_ENVMAP":"",te.envMap?"#define "+ce:"",te.envMap?"#define "+he:"",te.envMap?"#define "+fe:"",ue?"#define CUBEUV_TEXEL_WIDTH "+ue.texelWidth:"",ue?"#define CUBEUV_TEXEL_HEIGHT "+ue.texelHeight:"",ue?"#define CUBEUV_MAX_MIP "+ue.maxMip+".0":"",te.lightMap?"#define USE_LIGHTMAP":"",te.aoMap?"#define USE_AOMAP":"",te.bumpMap?"#define USE_BUMPMAP":"",te.normalMap?"#define USE_NORMALMAP":"",te.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",te.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",te.emissiveMap?"#define USE_EMISSIVEMAP":"",te.anisotropy?"#define USE_ANISOTROPY":"",te.anisotropyMap?"#define USE_ANISOTROPYMAP":"",te.clearcoat?"#define USE_CLEARCOAT":"",te.clearcoatMap?"#define USE_CLEARCOATMAP":"",te.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",te.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",te.dispersion?"#define USE_DISPERSION":"",te.iridescence?"#define USE_IRIDESCENCE":"",te.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",te.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",te.specularMap?"#define USE_SPECULARMAP":"",te.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",te.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",te.roughnessMap?"#define USE_ROUGHNESSMAP":"",te.metalnessMap?"#define USE_METALNESSMAP":"",te.alphaMap?"#define USE_ALPHAMAP":"",te.alphaTest?"#define USE_ALPHATEST":"",te.alphaHash?"#define USE_ALPHAHASH":"",te.sheen?"#define USE_SHEEN":"",te.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",te.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",te.transmission?"#define USE_TRANSMISSION":"",te.transmissionMap?"#define USE_TRANSMISSIONMAP":"",te.thicknessMap?"#define USE_THICKNESSMAP":"",te.vertexTangents&&te.flatShading===!1?"#define USE_TANGENT":"",te.vertexColors||te.instancingColor||te.batchingColor?"#define USE_COLOR":"",te.vertexAlphas?"#define USE_COLOR_ALPHA":"",te.vertexUv1s?"#define USE_UV1":"",te.vertexUv2s?"#define USE_UV2":"",te.vertexUv3s?"#define USE_UV3":"",te.pointsUvs?"#define USE_POINTS_UV":"",te.gradientMap?"#define USE_GRADIENTMAP":"",te.flatShading?"#define FLAT_SHADED":"",te.doubleSided?"#define DOUBLE_SIDED":"",te.flipSided?"#define FLIP_SIDED":"",te.shadowMapEnabled?"#define USE_SHADOWMAP":"",te.shadowMapEnabled?"#define "+le:"",te.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",te.numLightProbes>0?"#define USE_LIGHT_PROBES":"",te.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",te.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",te.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",te.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",te.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",te.toneMapping):"",te.dithering?"#define DITHERING":"",te.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",te.outputColorSpace),getLuminanceFunction(),te.useDepthPacking?"#define DEPTH_PACKING "+te.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ae=resolveIncludes(ae),ae=replaceLightNums(ae,te),ae=replaceClippingPlaneNums(ae,te),oe=resolveIncludes(oe),oe=replaceLightNums(oe,te),oe=replaceClippingPlaneNums(oe,te),ae=unrollLoops(ae),oe=unrollLoops(oe),te.isRawShaderMaterial!==!0&&(ye=`#version 300 es
`,ve=[de,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+ve,pe=["#define varying in",te.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",te.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+pe);const _e=ye+ve+ae,xe=ye+pe+oe,Se=WebGLShader(re,re.VERTEX_SHADER,_e),be=WebGLShader(re,re.FRAGMENT_SHADER,xe);re.attachShader(me,Se),re.attachShader(me,be),te.index0AttributeName!==void 0?re.bindAttribLocation(me,0,te.index0AttributeName):te.morphTargets===!0&&re.bindAttribLocation(me,0,"position"),re.linkProgram(me);function Ee(De){if(ie.debug.checkShaderErrors){const ke=re.getProgramInfoLog(me).trim(),ze=re.getShaderInfoLog(Se).trim(),Ve=re.getShaderInfoLog(be).trim();let Ue=!0,Ae=!0;if(re.getProgramParameter(me,re.LINK_STATUS)===!1)if(Ue=!1,typeof ie.debug.onShaderError=="function")ie.debug.onShaderError(re,me,Se,be);else{const Fe=getShaderErrors(re,Se,"vertex"),Te=getShaderErrors(re,be,"fragment");console.error("THREE.WebGLProgram: Shader Error "+re.getError()+" - VALIDATE_STATUS "+re.getProgramParameter(me,re.VALIDATE_STATUS)+`

Material Name: `+De.name+`
Material Type: `+De.type+`

Program Info Log: `+ke+`
`+Fe+`
`+Te)}else ke!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ke):(ze===""||Ve==="")&&(Ae=!1);Ae&&(De.diagnostics={runnable:Ue,programLog:ke,vertexShader:{log:ze,prefix:ve},fragmentShader:{log:Ve,prefix:pe}})}re.deleteShader(Se),re.deleteShader(be),Pe=new WebGLUniforms(re,me),we=fetchAttributeLocations(re,me)}let Pe;this.getUniforms=function(){return Pe===void 0&&Ee(this),Pe};let we;this.getAttributes=function(){return we===void 0&&Ee(this),we};let Me=te.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Me===!1&&(Me=re.getProgramParameter(me,COMPLETION_STATUS_KHR)),Me},this.destroy=function(){ne.releaseStatesOfProgram(this),re.deleteProgram(me),this.program=void 0},this.type=te.shaderType,this.name=te.shaderName,this.id=programIdCount++,this.cacheKey=ee,this.usedTimes=1,this.program=me,this.vertexShader=Se,this.fragmentShader=be,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(ee){const te=ee.vertexShader,ne=ee.fragmentShader,re=this._getShaderStage(te),se=this._getShaderStage(ne),ae=this._getShaderCacheForMaterial(ee);return ae.has(re)===!1&&(ae.add(re),re.usedTimes++),ae.has(se)===!1&&(ae.add(se),se.usedTimes++),this}remove(ee){const te=this.materialCache.get(ee);for(const ne of te)ne.usedTimes--,ne.usedTimes===0&&this.shaderCache.delete(ne.code);return this.materialCache.delete(ee),this}getVertexShaderID(ee){return this._getShaderStage(ee.vertexShader).id}getFragmentShaderID(ee){return this._getShaderStage(ee.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(ee){const te=this.materialCache;let ne=te.get(ee);return ne===void 0&&(ne=new Set,te.set(ee,ne)),ne}_getShaderStage(ee){const te=this.shaderCache;let ne=te.get(ee);return ne===void 0&&(ne=new WebGLShaderStage(ee),te.set(ee,ne)),ne}}class WebGLShaderStage{constructor(ee){this.id=_id$1++,this.code=ee,this.usedTimes=0}}function WebGLPrograms(ie,ee,te,ne,re,se,ae){const oe=new Layers,le=new WebGLShaderCache,ce=new Set,he=[],fe=re.logarithmicDepthBuffer,ue=re.vertexTextures;let de=re.precision;const ge={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function me(we){return ce.add(we),we===0?"uv":`uv${we}`}function ve(we,Me,De,ke,ze){const Ve=ke.fog,Ue=ze.geometry,Ae=we.isMeshStandardMaterial?ke.environment:null,Fe=(we.isMeshStandardMaterial?te:ee).get(we.envMap||Ae),Te=Fe&&Fe.mapping===CubeUVReflectionMapping?Fe.image.height:null,Ce=ge[we.type];we.precision!==null&&(de=re.getMaxPrecision(we.precision),de!==we.precision&&console.warn("THREE.WebGLProgram.getParameters:",we.precision,"not supported, using",de,"instead."));const Le=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Be=Le!==void 0?Le.length:0;let st=0;Ue.morphAttributes.position!==void 0&&(st=1),Ue.morphAttributes.normal!==void 0&&(st=2),Ue.morphAttributes.color!==void 0&&(st=3);let Xe,Ge,He,Je;if(Ce){const qt=ShaderLib[Ce];Xe=qt.vertexShader,Ge=qt.fragmentShader}else Xe=we.vertexShader,Ge=we.fragmentShader,le.update(we),He=le.getVertexShaderID(we),Je=le.getFragmentShaderID(we);const et=ie.getRenderTarget(),ht=ze.isInstancedMesh===!0,vt=ze.isBatchedMesh===!0,gt=!!we.map,yt=!!we.matcap,Oe=!!Fe,Ze=!!we.aoMap,qe=!!we.lightMap,ut=!!we.bumpMap,at=!!we.normalMap,We=!!we.displacementMap,ft=!!we.emissiveMap,St=!!we.metalnessMap,$e=!!we.roughnessMap,Re=we.anisotropy>0,Qe=we.clearcoat>0,ct=we.dispersion>0,lt=we.iridescence>0,ot=we.sheen>0,Et=we.transmission>0,dt=Re&&!!we.anisotropyMap,bt=Qe&&!!we.clearcoatMap,It=Qe&&!!we.clearcoatNormalMap,mt=Qe&&!!we.clearcoatRoughnessMap,Tt=lt&&!!we.iridescenceMap,Nt=lt&&!!we.iridescenceThicknessMap,zt=ot&&!!we.sheenColorMap,Ct=ot&&!!we.sheenRoughnessMap,Vt=!!we.specularMap,$t=!!we.specularColorMap,jt=!!we.specularIntensityMap,Ie=Et&&!!we.transmissionMap,Ye=Et&&!!we.thicknessMap,nt=!!we.gradientMap,rt=!!we.alphaMap,pt=we.alphaTest>0,At=!!we.alphaHash,Ut=!!we.extensions;let ti=NoToneMapping;we.toneMapped&&(et===null||et.isXRRenderTarget===!0)&&(ti=ie.toneMapping);const Qt={shaderID:Ce,shaderType:we.type,shaderName:we.name,vertexShader:Xe,fragmentShader:Ge,defines:we.defines,customVertexShaderID:He,customFragmentShaderID:Je,isRawShaderMaterial:we.isRawShaderMaterial===!0,glslVersion:we.glslVersion,precision:de,batching:vt,batchingColor:vt&&ze._colorsTexture!==null,instancing:ht,instancingColor:ht&&ze.instanceColor!==null,instancingMorph:ht&&ze.morphTexture!==null,supportsVertexTextures:ue,outputColorSpace:et===null?ie.outputColorSpace:et.isXRRenderTarget===!0?et.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!we.alphaToCoverage,map:gt,matcap:yt,envMap:Oe,envMapMode:Oe&&Fe.mapping,envMapCubeUVHeight:Te,aoMap:Ze,lightMap:qe,bumpMap:ut,normalMap:at,displacementMap:ue&&We,emissiveMap:ft,normalMapObjectSpace:at&&we.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:at&&we.normalMapType===TangentSpaceNormalMap,metalnessMap:St,roughnessMap:$e,anisotropy:Re,anisotropyMap:dt,clearcoat:Qe,clearcoatMap:bt,clearcoatNormalMap:It,clearcoatRoughnessMap:mt,dispersion:ct,iridescence:lt,iridescenceMap:Tt,iridescenceThicknessMap:Nt,sheen:ot,sheenColorMap:zt,sheenRoughnessMap:Ct,specularMap:Vt,specularColorMap:$t,specularIntensityMap:jt,transmission:Et,transmissionMap:Ie,thicknessMap:Ye,gradientMap:nt,opaque:we.transparent===!1&&we.blending===NormalBlending&&we.alphaToCoverage===!1,alphaMap:rt,alphaTest:pt,alphaHash:At,combine:we.combine,mapUv:gt&&me(we.map.channel),aoMapUv:Ze&&me(we.aoMap.channel),lightMapUv:qe&&me(we.lightMap.channel),bumpMapUv:ut&&me(we.bumpMap.channel),normalMapUv:at&&me(we.normalMap.channel),displacementMapUv:We&&me(we.displacementMap.channel),emissiveMapUv:ft&&me(we.emissiveMap.channel),metalnessMapUv:St&&me(we.metalnessMap.channel),roughnessMapUv:$e&&me(we.roughnessMap.channel),anisotropyMapUv:dt&&me(we.anisotropyMap.channel),clearcoatMapUv:bt&&me(we.clearcoatMap.channel),clearcoatNormalMapUv:It&&me(we.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:mt&&me(we.clearcoatRoughnessMap.channel),iridescenceMapUv:Tt&&me(we.iridescenceMap.channel),iridescenceThicknessMapUv:Nt&&me(we.iridescenceThicknessMap.channel),sheenColorMapUv:zt&&me(we.sheenColorMap.channel),sheenRoughnessMapUv:Ct&&me(we.sheenRoughnessMap.channel),specularMapUv:Vt&&me(we.specularMap.channel),specularColorMapUv:$t&&me(we.specularColorMap.channel),specularIntensityMapUv:jt&&me(we.specularIntensityMap.channel),transmissionMapUv:Ie&&me(we.transmissionMap.channel),thicknessMapUv:Ye&&me(we.thicknessMap.channel),alphaMapUv:rt&&me(we.alphaMap.channel),vertexTangents:!!Ue.attributes.tangent&&(at||Re),vertexColors:we.vertexColors,vertexAlphas:we.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,pointsUvs:ze.isPoints===!0&&!!Ue.attributes.uv&&(gt||rt),fog:!!Ve,useFog:we.fog===!0,fogExp2:!!Ve&&Ve.isFogExp2,flatShading:we.flatShading===!0,sizeAttenuation:we.sizeAttenuation===!0,logarithmicDepthBuffer:fe,skinning:ze.isSkinnedMesh===!0,morphTargets:Ue.morphAttributes.position!==void 0,morphNormals:Ue.morphAttributes.normal!==void 0,morphColors:Ue.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:st,numDirLights:Me.directional.length,numPointLights:Me.point.length,numSpotLights:Me.spot.length,numSpotLightMaps:Me.spotLightMap.length,numRectAreaLights:Me.rectArea.length,numHemiLights:Me.hemi.length,numDirLightShadows:Me.directionalShadowMap.length,numPointLightShadows:Me.pointShadowMap.length,numSpotLightShadows:Me.spotShadowMap.length,numSpotLightShadowsWithMaps:Me.numSpotLightShadowsWithMaps,numLightProbes:Me.numLightProbes,numClippingPlanes:ae.numPlanes,numClipIntersection:ae.numIntersection,dithering:we.dithering,shadowMapEnabled:ie.shadowMap.enabled&&De.length>0,shadowMapType:ie.shadowMap.type,toneMapping:ti,decodeVideoTexture:gt&&we.map.isVideoTexture===!0&&ColorManagement.getTransfer(we.map.colorSpace)===SRGBTransfer,premultipliedAlpha:we.premultipliedAlpha,doubleSided:we.side===DoubleSide,flipSided:we.side===BackSide,useDepthPacking:we.depthPacking>=0,depthPacking:we.depthPacking||0,index0AttributeName:we.index0AttributeName,extensionClipCullDistance:Ut&&we.extensions.clipCullDistance===!0&&ne.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&we.extensions.multiDraw===!0||vt)&&ne.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:ne.has("KHR_parallel_shader_compile"),customProgramCacheKey:we.customProgramCacheKey()};return Qt.vertexUv1s=ce.has(1),Qt.vertexUv2s=ce.has(2),Qt.vertexUv3s=ce.has(3),ce.clear(),Qt}function pe(we){const Me=[];if(we.shaderID?Me.push(we.shaderID):(Me.push(we.customVertexShaderID),Me.push(we.customFragmentShaderID)),we.defines!==void 0)for(const De in we.defines)Me.push(De),Me.push(we.defines[De]);return we.isRawShaderMaterial===!1&&(ye(Me,we),_e(Me,we),Me.push(ie.outputColorSpace)),Me.push(we.customProgramCacheKey),Me.join()}function ye(we,Me){we.push(Me.precision),we.push(Me.outputColorSpace),we.push(Me.envMapMode),we.push(Me.envMapCubeUVHeight),we.push(Me.mapUv),we.push(Me.alphaMapUv),we.push(Me.lightMapUv),we.push(Me.aoMapUv),we.push(Me.bumpMapUv),we.push(Me.normalMapUv),we.push(Me.displacementMapUv),we.push(Me.emissiveMapUv),we.push(Me.metalnessMapUv),we.push(Me.roughnessMapUv),we.push(Me.anisotropyMapUv),we.push(Me.clearcoatMapUv),we.push(Me.clearcoatNormalMapUv),we.push(Me.clearcoatRoughnessMapUv),we.push(Me.iridescenceMapUv),we.push(Me.iridescenceThicknessMapUv),we.push(Me.sheenColorMapUv),we.push(Me.sheenRoughnessMapUv),we.push(Me.specularMapUv),we.push(Me.specularColorMapUv),we.push(Me.specularIntensityMapUv),we.push(Me.transmissionMapUv),we.push(Me.thicknessMapUv),we.push(Me.combine),we.push(Me.fogExp2),we.push(Me.sizeAttenuation),we.push(Me.morphTargetsCount),we.push(Me.morphAttributeCount),we.push(Me.numDirLights),we.push(Me.numPointLights),we.push(Me.numSpotLights),we.push(Me.numSpotLightMaps),we.push(Me.numHemiLights),we.push(Me.numRectAreaLights),we.push(Me.numDirLightShadows),we.push(Me.numPointLightShadows),we.push(Me.numSpotLightShadows),we.push(Me.numSpotLightShadowsWithMaps),we.push(Me.numLightProbes),we.push(Me.shadowMapType),we.push(Me.toneMapping),we.push(Me.numClippingPlanes),we.push(Me.numClipIntersection),we.push(Me.depthPacking)}function _e(we,Me){oe.disableAll(),Me.supportsVertexTextures&&oe.enable(0),Me.instancing&&oe.enable(1),Me.instancingColor&&oe.enable(2),Me.instancingMorph&&oe.enable(3),Me.matcap&&oe.enable(4),Me.envMap&&oe.enable(5),Me.normalMapObjectSpace&&oe.enable(6),Me.normalMapTangentSpace&&oe.enable(7),Me.clearcoat&&oe.enable(8),Me.iridescence&&oe.enable(9),Me.alphaTest&&oe.enable(10),Me.vertexColors&&oe.enable(11),Me.vertexAlphas&&oe.enable(12),Me.vertexUv1s&&oe.enable(13),Me.vertexUv2s&&oe.enable(14),Me.vertexUv3s&&oe.enable(15),Me.vertexTangents&&oe.enable(16),Me.anisotropy&&oe.enable(17),Me.alphaHash&&oe.enable(18),Me.batching&&oe.enable(19),Me.dispersion&&oe.enable(20),Me.batchingColor&&oe.enable(21),we.push(oe.mask),oe.disableAll(),Me.fog&&oe.enable(0),Me.useFog&&oe.enable(1),Me.flatShading&&oe.enable(2),Me.logarithmicDepthBuffer&&oe.enable(3),Me.skinning&&oe.enable(4),Me.morphTargets&&oe.enable(5),Me.morphNormals&&oe.enable(6),Me.morphColors&&oe.enable(7),Me.premultipliedAlpha&&oe.enable(8),Me.shadowMapEnabled&&oe.enable(9),Me.doubleSided&&oe.enable(10),Me.flipSided&&oe.enable(11),Me.useDepthPacking&&oe.enable(12),Me.dithering&&oe.enable(13),Me.transmission&&oe.enable(14),Me.sheen&&oe.enable(15),Me.opaque&&oe.enable(16),Me.pointsUvs&&oe.enable(17),Me.decodeVideoTexture&&oe.enable(18),Me.alphaToCoverage&&oe.enable(19),we.push(oe.mask)}function xe(we){const Me=ge[we.type];let De;if(Me){const ke=ShaderLib[Me];De=UniformsUtils.clone(ke.uniforms)}else De=we.uniforms;return De}function Se(we,Me){let De;for(let ke=0,ze=he.length;ke<ze;ke++){const Ve=he[ke];if(Ve.cacheKey===Me){De=Ve,++De.usedTimes;break}}return De===void 0&&(De=new WebGLProgram(ie,Me,we,se),he.push(De)),De}function be(we){if(--we.usedTimes===0){const Me=he.indexOf(we);he[Me]=he[he.length-1],he.pop(),we.destroy()}}function Ee(we){le.remove(we)}function Pe(){le.dispose()}return{getParameters:ve,getProgramCacheKey:pe,getUniforms:xe,acquireProgram:Se,releaseProgram:be,releaseShaderCache:Ee,programs:he,dispose:Pe}}function WebGLProperties(){let ie=new WeakMap;function ee(se){let ae=ie.get(se);return ae===void 0&&(ae={},ie.set(se,ae)),ae}function te(se){ie.delete(se)}function ne(se,ae,oe){ie.get(se)[ae]=oe}function re(){ie=new WeakMap}return{get:ee,remove:te,update:ne,dispose:re}}function painterSortStable(ie,ee){return ie.groupOrder!==ee.groupOrder?ie.groupOrder-ee.groupOrder:ie.renderOrder!==ee.renderOrder?ie.renderOrder-ee.renderOrder:ie.material.id!==ee.material.id?ie.material.id-ee.material.id:ie.z!==ee.z?ie.z-ee.z:ie.id-ee.id}function reversePainterSortStable(ie,ee){return ie.groupOrder!==ee.groupOrder?ie.groupOrder-ee.groupOrder:ie.renderOrder!==ee.renderOrder?ie.renderOrder-ee.renderOrder:ie.z!==ee.z?ee.z-ie.z:ie.id-ee.id}function WebGLRenderList(){const ie=[];let ee=0;const te=[],ne=[],re=[];function se(){ee=0,te.length=0,ne.length=0,re.length=0}function ae(fe,ue,de,ge,me,ve){let pe=ie[ee];return pe===void 0?(pe={id:fe.id,object:fe,geometry:ue,material:de,groupOrder:ge,renderOrder:fe.renderOrder,z:me,group:ve},ie[ee]=pe):(pe.id=fe.id,pe.object=fe,pe.geometry=ue,pe.material=de,pe.groupOrder=ge,pe.renderOrder=fe.renderOrder,pe.z=me,pe.group=ve),ee++,pe}function oe(fe,ue,de,ge,me,ve){const pe=ae(fe,ue,de,ge,me,ve);de.transmission>0?ne.push(pe):de.transparent===!0?re.push(pe):te.push(pe)}function le(fe,ue,de,ge,me,ve){const pe=ae(fe,ue,de,ge,me,ve);de.transmission>0?ne.unshift(pe):de.transparent===!0?re.unshift(pe):te.unshift(pe)}function ce(fe,ue){te.length>1&&te.sort(fe||painterSortStable),ne.length>1&&ne.sort(ue||reversePainterSortStable),re.length>1&&re.sort(ue||reversePainterSortStable)}function he(){for(let fe=ee,ue=ie.length;fe<ue;fe++){const de=ie[fe];if(de.id===null)break;de.id=null,de.object=null,de.geometry=null,de.material=null,de.group=null}}return{opaque:te,transmissive:ne,transparent:re,init:se,push:oe,unshift:le,finish:he,sort:ce}}function WebGLRenderLists(){let ie=new WeakMap;function ee(ne,re){const se=ie.get(ne);let ae;return se===void 0?(ae=new WebGLRenderList,ie.set(ne,[ae])):re>=se.length?(ae=new WebGLRenderList,se.push(ae)):ae=se[re],ae}function te(){ie=new WeakMap}return{get:ee,dispose:te}}function UniformsCache(){const ie={};return{get:function(ee){if(ie[ee.id]!==void 0)return ie[ee.id];let te;switch(ee.type){case"DirectionalLight":te={direction:new Vector3,color:new Color};break;case"SpotLight":te={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":te={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":te={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":te={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ie[ee.id]=te,te}}}function ShadowUniformsCache(){const ie={};return{get:function(ee){if(ie[ee.id]!==void 0)return ie[ee.id];let te;switch(ee.type){case"DirectionalLight":te={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":te={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":te={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ie[ee.id]=te,te}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(ie,ee){return(ee.castShadow?2:0)-(ie.castShadow?2:0)+(ee.map?1:0)-(ie.map?1:0)}function WebGLLights(ie){const ee=new UniformsCache,te=ShadowUniformsCache(),ne={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let ce=0;ce<9;ce++)ne.probe.push(new Vector3);const re=new Vector3,se=new Matrix4,ae=new Matrix4;function oe(ce){let he=0,fe=0,ue=0;for(let we=0;we<9;we++)ne.probe[we].set(0,0,0);let de=0,ge=0,me=0,ve=0,pe=0,ye=0,_e=0,xe=0,Se=0,be=0,Ee=0;ce.sort(shadowCastingAndTexturingLightsFirst);for(let we=0,Me=ce.length;we<Me;we++){const De=ce[we],ke=De.color,ze=De.intensity,Ve=De.distance,Ue=De.shadow&&De.shadow.map?De.shadow.map.texture:null;if(De.isAmbientLight)he+=ke.r*ze,fe+=ke.g*ze,ue+=ke.b*ze;else if(De.isLightProbe){for(let Ae=0;Ae<9;Ae++)ne.probe[Ae].addScaledVector(De.sh.coefficients[Ae],ze);Ee++}else if(De.isDirectionalLight){const Ae=ee.get(De);if(Ae.color.copy(De.color).multiplyScalar(De.intensity),De.castShadow){const Fe=De.shadow,Te=te.get(De);Te.shadowIntensity=Fe.intensity,Te.shadowBias=Fe.bias,Te.shadowNormalBias=Fe.normalBias,Te.shadowRadius=Fe.radius,Te.shadowMapSize=Fe.mapSize,ne.directionalShadow[de]=Te,ne.directionalShadowMap[de]=Ue,ne.directionalShadowMatrix[de]=De.shadow.matrix,ye++}ne.directional[de]=Ae,de++}else if(De.isSpotLight){const Ae=ee.get(De);Ae.position.setFromMatrixPosition(De.matrixWorld),Ae.color.copy(ke).multiplyScalar(ze),Ae.distance=Ve,Ae.coneCos=Math.cos(De.angle),Ae.penumbraCos=Math.cos(De.angle*(1-De.penumbra)),Ae.decay=De.decay,ne.spot[me]=Ae;const Fe=De.shadow;if(De.map&&(ne.spotLightMap[Se]=De.map,Se++,Fe.updateMatrices(De),De.castShadow&&be++),ne.spotLightMatrix[me]=Fe.matrix,De.castShadow){const Te=te.get(De);Te.shadowIntensity=Fe.intensity,Te.shadowBias=Fe.bias,Te.shadowNormalBias=Fe.normalBias,Te.shadowRadius=Fe.radius,Te.shadowMapSize=Fe.mapSize,ne.spotShadow[me]=Te,ne.spotShadowMap[me]=Ue,xe++}me++}else if(De.isRectAreaLight){const Ae=ee.get(De);Ae.color.copy(ke).multiplyScalar(ze),Ae.halfWidth.set(De.width*.5,0,0),Ae.halfHeight.set(0,De.height*.5,0),ne.rectArea[ve]=Ae,ve++}else if(De.isPointLight){const Ae=ee.get(De);if(Ae.color.copy(De.color).multiplyScalar(De.intensity),Ae.distance=De.distance,Ae.decay=De.decay,De.castShadow){const Fe=De.shadow,Te=te.get(De);Te.shadowIntensity=Fe.intensity,Te.shadowBias=Fe.bias,Te.shadowNormalBias=Fe.normalBias,Te.shadowRadius=Fe.radius,Te.shadowMapSize=Fe.mapSize,Te.shadowCameraNear=Fe.camera.near,Te.shadowCameraFar=Fe.camera.far,ne.pointShadow[ge]=Te,ne.pointShadowMap[ge]=Ue,ne.pointShadowMatrix[ge]=De.shadow.matrix,_e++}ne.point[ge]=Ae,ge++}else if(De.isHemisphereLight){const Ae=ee.get(De);Ae.skyColor.copy(De.color).multiplyScalar(ze),Ae.groundColor.copy(De.groundColor).multiplyScalar(ze),ne.hemi[pe]=Ae,pe++}}ve>0&&(ie.has("OES_texture_float_linear")===!0?(ne.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,ne.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(ne.rectAreaLTC1=UniformsLib.LTC_HALF_1,ne.rectAreaLTC2=UniformsLib.LTC_HALF_2)),ne.ambient[0]=he,ne.ambient[1]=fe,ne.ambient[2]=ue;const Pe=ne.hash;(Pe.directionalLength!==de||Pe.pointLength!==ge||Pe.spotLength!==me||Pe.rectAreaLength!==ve||Pe.hemiLength!==pe||Pe.numDirectionalShadows!==ye||Pe.numPointShadows!==_e||Pe.numSpotShadows!==xe||Pe.numSpotMaps!==Se||Pe.numLightProbes!==Ee)&&(ne.directional.length=de,ne.spot.length=me,ne.rectArea.length=ve,ne.point.length=ge,ne.hemi.length=pe,ne.directionalShadow.length=ye,ne.directionalShadowMap.length=ye,ne.pointShadow.length=_e,ne.pointShadowMap.length=_e,ne.spotShadow.length=xe,ne.spotShadowMap.length=xe,ne.directionalShadowMatrix.length=ye,ne.pointShadowMatrix.length=_e,ne.spotLightMatrix.length=xe+Se-be,ne.spotLightMap.length=Se,ne.numSpotLightShadowsWithMaps=be,ne.numLightProbes=Ee,Pe.directionalLength=de,Pe.pointLength=ge,Pe.spotLength=me,Pe.rectAreaLength=ve,Pe.hemiLength=pe,Pe.numDirectionalShadows=ye,Pe.numPointShadows=_e,Pe.numSpotShadows=xe,Pe.numSpotMaps=Se,Pe.numLightProbes=Ee,ne.version=nextVersion++)}function le(ce,he){let fe=0,ue=0,de=0,ge=0,me=0;const ve=he.matrixWorldInverse;for(let pe=0,ye=ce.length;pe<ye;pe++){const _e=ce[pe];if(_e.isDirectionalLight){const xe=ne.directional[fe];xe.direction.setFromMatrixPosition(_e.matrixWorld),re.setFromMatrixPosition(_e.target.matrixWorld),xe.direction.sub(re),xe.direction.transformDirection(ve),fe++}else if(_e.isSpotLight){const xe=ne.spot[de];xe.position.setFromMatrixPosition(_e.matrixWorld),xe.position.applyMatrix4(ve),xe.direction.setFromMatrixPosition(_e.matrixWorld),re.setFromMatrixPosition(_e.target.matrixWorld),xe.direction.sub(re),xe.direction.transformDirection(ve),de++}else if(_e.isRectAreaLight){const xe=ne.rectArea[ge];xe.position.setFromMatrixPosition(_e.matrixWorld),xe.position.applyMatrix4(ve),ae.identity(),se.copy(_e.matrixWorld),se.premultiply(ve),ae.extractRotation(se),xe.halfWidth.set(_e.width*.5,0,0),xe.halfHeight.set(0,_e.height*.5,0),xe.halfWidth.applyMatrix4(ae),xe.halfHeight.applyMatrix4(ae),ge++}else if(_e.isPointLight){const xe=ne.point[ue];xe.position.setFromMatrixPosition(_e.matrixWorld),xe.position.applyMatrix4(ve),ue++}else if(_e.isHemisphereLight){const xe=ne.hemi[me];xe.direction.setFromMatrixPosition(_e.matrixWorld),xe.direction.transformDirection(ve),me++}}}return{setup:oe,setupView:le,state:ne}}function WebGLRenderState(ie){const ee=new WebGLLights(ie),te=[],ne=[];function re(he){ce.camera=he,te.length=0,ne.length=0}function se(he){te.push(he)}function ae(he){ne.push(he)}function oe(){ee.setup(te)}function le(he){ee.setupView(te,he)}const ce={lightsArray:te,shadowsArray:ne,camera:null,lights:ee,transmissionRenderTarget:{}};return{init:re,state:ce,setupLights:oe,setupLightsView:le,pushLight:se,pushShadow:ae}}function WebGLRenderStates(ie){let ee=new WeakMap;function te(re,se=0){const ae=ee.get(re);let oe;return ae===void 0?(oe=new WebGLRenderState(ie),ee.set(re,[oe])):se>=ae.length?(oe=new WebGLRenderState(ie),ae.push(oe)):oe=ae[se],oe}function ne(){ee=new WeakMap}return{get:te,dispose:ne}}class MeshDepthMaterial extends Material{constructor(ee){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(ee)}copy(ee){return super.copy(ee),this.depthPacking=ee.depthPacking,this.map=ee.map,this.alphaMap=ee.alphaMap,this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(ee){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(ee)}copy(ee){return super.copy(ee),this.map=ee.map,this.alphaMap=ee.alphaMap,this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(ie,ee,te){let ne=new Frustum;const re=new Vector2,se=new Vector2,ae=new Vector4,oe=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),le=new MeshDistanceMaterial,ce={},he=te.maxTextureSize,fe={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},ue=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),de=ue.clone();de.defines.HORIZONTAL_PASS=1;const ge=new BufferGeometry;ge.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const me=new Mesh(ge,ue),ve=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let pe=this.type;this.render=function(be,Ee,Pe){if(ve.enabled===!1||ve.autoUpdate===!1&&ve.needsUpdate===!1||be.length===0)return;const we=ie.getRenderTarget(),Me=ie.getActiveCubeFace(),De=ie.getActiveMipmapLevel(),ke=ie.state;ke.setBlending(NoBlending),ke.buffers.color.setClear(1,1,1,1),ke.buffers.depth.setTest(!0),ke.setScissorTest(!1);const ze=pe!==VSMShadowMap&&this.type===VSMShadowMap,Ve=pe===VSMShadowMap&&this.type!==VSMShadowMap;for(let Ue=0,Ae=be.length;Ue<Ae;Ue++){const Fe=be[Ue],Te=Fe.shadow;if(Te===void 0){console.warn("THREE.WebGLShadowMap:",Fe,"has no shadow.");continue}if(Te.autoUpdate===!1&&Te.needsUpdate===!1)continue;re.copy(Te.mapSize);const Ce=Te.getFrameExtents();if(re.multiply(Ce),se.copy(Te.mapSize),(re.x>he||re.y>he)&&(re.x>he&&(se.x=Math.floor(he/Ce.x),re.x=se.x*Ce.x,Te.mapSize.x=se.x),re.y>he&&(se.y=Math.floor(he/Ce.y),re.y=se.y*Ce.y,Te.mapSize.y=se.y)),Te.map===null||ze===!0||Ve===!0){const Be=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Te.map!==null&&Te.map.dispose(),Te.map=new WebGLRenderTarget(re.x,re.y,Be),Te.map.texture.name=Fe.name+".shadowMap",Te.camera.updateProjectionMatrix()}ie.setRenderTarget(Te.map),ie.clear();const Le=Te.getViewportCount();for(let Be=0;Be<Le;Be++){const st=Te.getViewport(Be);ae.set(se.x*st.x,se.y*st.y,se.x*st.z,se.y*st.w),ke.viewport(ae),Te.updateMatrices(Fe,Be),ne=Te.getFrustum(),xe(Ee,Pe,Te.camera,Fe,this.type)}Te.isPointLightShadow!==!0&&this.type===VSMShadowMap&&ye(Te,Pe),Te.needsUpdate=!1}pe=this.type,ve.needsUpdate=!1,ie.setRenderTarget(we,Me,De)};function ye(be,Ee){const Pe=ee.update(me);ue.defines.VSM_SAMPLES!==be.blurSamples&&(ue.defines.VSM_SAMPLES=be.blurSamples,de.defines.VSM_SAMPLES=be.blurSamples,ue.needsUpdate=!0,de.needsUpdate=!0),be.mapPass===null&&(be.mapPass=new WebGLRenderTarget(re.x,re.y)),ue.uniforms.shadow_pass.value=be.map.texture,ue.uniforms.resolution.value=be.mapSize,ue.uniforms.radius.value=be.radius,ie.setRenderTarget(be.mapPass),ie.clear(),ie.renderBufferDirect(Ee,null,Pe,ue,me,null),de.uniforms.shadow_pass.value=be.mapPass.texture,de.uniforms.resolution.value=be.mapSize,de.uniforms.radius.value=be.radius,ie.setRenderTarget(be.map),ie.clear(),ie.renderBufferDirect(Ee,null,Pe,de,me,null)}function _e(be,Ee,Pe,we){let Me=null;const De=Pe.isPointLight===!0?be.customDistanceMaterial:be.customDepthMaterial;if(De!==void 0)Me=De;else if(Me=Pe.isPointLight===!0?le:oe,ie.localClippingEnabled&&Ee.clipShadows===!0&&Array.isArray(Ee.clippingPlanes)&&Ee.clippingPlanes.length!==0||Ee.displacementMap&&Ee.displacementScale!==0||Ee.alphaMap&&Ee.alphaTest>0||Ee.map&&Ee.alphaTest>0){const ke=Me.uuid,ze=Ee.uuid;let Ve=ce[ke];Ve===void 0&&(Ve={},ce[ke]=Ve);let Ue=Ve[ze];Ue===void 0&&(Ue=Me.clone(),Ve[ze]=Ue,Ee.addEventListener("dispose",Se)),Me=Ue}if(Me.visible=Ee.visible,Me.wireframe=Ee.wireframe,we===VSMShadowMap?Me.side=Ee.shadowSide!==null?Ee.shadowSide:Ee.side:Me.side=Ee.shadowSide!==null?Ee.shadowSide:fe[Ee.side],Me.alphaMap=Ee.alphaMap,Me.alphaTest=Ee.alphaTest,Me.map=Ee.map,Me.clipShadows=Ee.clipShadows,Me.clippingPlanes=Ee.clippingPlanes,Me.clipIntersection=Ee.clipIntersection,Me.displacementMap=Ee.displacementMap,Me.displacementScale=Ee.displacementScale,Me.displacementBias=Ee.displacementBias,Me.wireframeLinewidth=Ee.wireframeLinewidth,Me.linewidth=Ee.linewidth,Pe.isPointLight===!0&&Me.isMeshDistanceMaterial===!0){const ke=ie.properties.get(Me);ke.light=Pe}return Me}function xe(be,Ee,Pe,we,Me){if(be.visible===!1)return;if(be.layers.test(Ee.layers)&&(be.isMesh||be.isLine||be.isPoints)&&(be.castShadow||be.receiveShadow&&Me===VSMShadowMap)&&(!be.frustumCulled||ne.intersectsObject(be))){be.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,be.matrixWorld);const ze=ee.update(be),Ve=be.material;if(Array.isArray(Ve)){const Ue=ze.groups;for(let Ae=0,Fe=Ue.length;Ae<Fe;Ae++){const Te=Ue[Ae],Ce=Ve[Te.materialIndex];if(Ce&&Ce.visible){const Le=_e(be,Ce,we,Me);be.onBeforeShadow(ie,be,Ee,Pe,ze,Le,Te),ie.renderBufferDirect(Pe,null,ze,Le,be,Te),be.onAfterShadow(ie,be,Ee,Pe,ze,Le,Te)}}}else if(Ve.visible){const Ue=_e(be,Ve,we,Me);be.onBeforeShadow(ie,be,Ee,Pe,ze,Ue,null),ie.renderBufferDirect(Pe,null,ze,Ue,be,null),be.onAfterShadow(ie,be,Ee,Pe,ze,Ue,null)}}const ke=be.children;for(let ze=0,Ve=ke.length;ze<Ve;ze++)xe(ke[ze],Ee,Pe,we,Me)}function Se(be){be.target.removeEventListener("dispose",Se);for(const Pe in ce){const we=ce[Pe],Me=be.target.uuid;Me in we&&(we[Me].dispose(),delete we[Me])}}}function WebGLState(ie){function ee(){let Ie=!1;const Ye=new Vector4;let nt=null;const rt=new Vector4(0,0,0,0);return{setMask:function(pt){nt!==pt&&!Ie&&(ie.colorMask(pt,pt,pt,pt),nt=pt)},setLocked:function(pt){Ie=pt},setClear:function(pt,At,Ut,ti,Qt){Qt===!0&&(pt*=ti,At*=ti,Ut*=ti),Ye.set(pt,At,Ut,ti),rt.equals(Ye)===!1&&(ie.clearColor(pt,At,Ut,ti),rt.copy(Ye))},reset:function(){Ie=!1,nt=null,rt.set(-1,0,0,0)}}}function te(){let Ie=!1,Ye=null,nt=null,rt=null;return{setTest:function(pt){pt?Je(ie.DEPTH_TEST):et(ie.DEPTH_TEST)},setMask:function(pt){Ye!==pt&&!Ie&&(ie.depthMask(pt),Ye=pt)},setFunc:function(pt){if(nt!==pt){switch(pt){case NeverDepth:ie.depthFunc(ie.NEVER);break;case AlwaysDepth:ie.depthFunc(ie.ALWAYS);break;case LessDepth:ie.depthFunc(ie.LESS);break;case LessEqualDepth:ie.depthFunc(ie.LEQUAL);break;case EqualDepth:ie.depthFunc(ie.EQUAL);break;case GreaterEqualDepth:ie.depthFunc(ie.GEQUAL);break;case GreaterDepth:ie.depthFunc(ie.GREATER);break;case NotEqualDepth:ie.depthFunc(ie.NOTEQUAL);break;default:ie.depthFunc(ie.LEQUAL)}nt=pt}},setLocked:function(pt){Ie=pt},setClear:function(pt){rt!==pt&&(ie.clearDepth(pt),rt=pt)},reset:function(){Ie=!1,Ye=null,nt=null,rt=null}}}function ne(){let Ie=!1,Ye=null,nt=null,rt=null,pt=null,At=null,Ut=null,ti=null,Qt=null;return{setTest:function(qt){Ie||(qt?Je(ie.STENCIL_TEST):et(ie.STENCIL_TEST))},setMask:function(qt){Ye!==qt&&!Ie&&(ie.stencilMask(qt),Ye=qt)},setFunc:function(qt,Ft,Pt){(nt!==qt||rt!==Ft||pt!==Pt)&&(ie.stencilFunc(qt,Ft,Pt),nt=qt,rt=Ft,pt=Pt)},setOp:function(qt,Ft,Pt){(At!==qt||Ut!==Ft||ti!==Pt)&&(ie.stencilOp(qt,Ft,Pt),At=qt,Ut=Ft,ti=Pt)},setLocked:function(qt){Ie=qt},setClear:function(qt){Qt!==qt&&(ie.clearStencil(qt),Qt=qt)},reset:function(){Ie=!1,Ye=null,nt=null,rt=null,pt=null,At=null,Ut=null,ti=null,Qt=null}}}const re=new ee,se=new te,ae=new ne,oe=new WeakMap,le=new WeakMap;let ce={},he={},fe=new WeakMap,ue=[],de=null,ge=!1,me=null,ve=null,pe=null,ye=null,_e=null,xe=null,Se=null,be=new Color(0,0,0),Ee=0,Pe=!1,we=null,Me=null,De=null,ke=null,ze=null;const Ve=ie.getParameter(ie.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ue=!1,Ae=0;const Fe=ie.getParameter(ie.VERSION);Fe.indexOf("WebGL")!==-1?(Ae=parseFloat(/^WebGL (\d)/.exec(Fe)[1]),Ue=Ae>=1):Fe.indexOf("OpenGL ES")!==-1&&(Ae=parseFloat(/^OpenGL ES (\d)/.exec(Fe)[1]),Ue=Ae>=2);let Te=null,Ce={};const Le=ie.getParameter(ie.SCISSOR_BOX),Be=ie.getParameter(ie.VIEWPORT),st=new Vector4().fromArray(Le),Xe=new Vector4().fromArray(Be);function Ge(Ie,Ye,nt,rt){const pt=new Uint8Array(4),At=ie.createTexture();ie.bindTexture(Ie,At),ie.texParameteri(Ie,ie.TEXTURE_MIN_FILTER,ie.NEAREST),ie.texParameteri(Ie,ie.TEXTURE_MAG_FILTER,ie.NEAREST);for(let Ut=0;Ut<nt;Ut++)Ie===ie.TEXTURE_3D||Ie===ie.TEXTURE_2D_ARRAY?ie.texImage3D(Ye,0,ie.RGBA,1,1,rt,0,ie.RGBA,ie.UNSIGNED_BYTE,pt):ie.texImage2D(Ye+Ut,0,ie.RGBA,1,1,0,ie.RGBA,ie.UNSIGNED_BYTE,pt);return At}const He={};He[ie.TEXTURE_2D]=Ge(ie.TEXTURE_2D,ie.TEXTURE_2D,1),He[ie.TEXTURE_CUBE_MAP]=Ge(ie.TEXTURE_CUBE_MAP,ie.TEXTURE_CUBE_MAP_POSITIVE_X,6),He[ie.TEXTURE_2D_ARRAY]=Ge(ie.TEXTURE_2D_ARRAY,ie.TEXTURE_2D_ARRAY,1,1),He[ie.TEXTURE_3D]=Ge(ie.TEXTURE_3D,ie.TEXTURE_3D,1,1),re.setClear(0,0,0,1),se.setClear(1),ae.setClear(0),Je(ie.DEPTH_TEST),se.setFunc(LessEqualDepth),ut(!1),at(CullFaceBack),Je(ie.CULL_FACE),Ze(NoBlending);function Je(Ie){ce[Ie]!==!0&&(ie.enable(Ie),ce[Ie]=!0)}function et(Ie){ce[Ie]!==!1&&(ie.disable(Ie),ce[Ie]=!1)}function ht(Ie,Ye){return he[Ie]!==Ye?(ie.bindFramebuffer(Ie,Ye),he[Ie]=Ye,Ie===ie.DRAW_FRAMEBUFFER&&(he[ie.FRAMEBUFFER]=Ye),Ie===ie.FRAMEBUFFER&&(he[ie.DRAW_FRAMEBUFFER]=Ye),!0):!1}function vt(Ie,Ye){let nt=ue,rt=!1;if(Ie){nt=fe.get(Ye),nt===void 0&&(nt=[],fe.set(Ye,nt));const pt=Ie.textures;if(nt.length!==pt.length||nt[0]!==ie.COLOR_ATTACHMENT0){for(let At=0,Ut=pt.length;At<Ut;At++)nt[At]=ie.COLOR_ATTACHMENT0+At;nt.length=pt.length,rt=!0}}else nt[0]!==ie.BACK&&(nt[0]=ie.BACK,rt=!0);rt&&ie.drawBuffers(nt)}function gt(Ie){return de!==Ie?(ie.useProgram(Ie),de=Ie,!0):!1}const yt={[AddEquation]:ie.FUNC_ADD,[SubtractEquation]:ie.FUNC_SUBTRACT,[ReverseSubtractEquation]:ie.FUNC_REVERSE_SUBTRACT};yt[MinEquation]=ie.MIN,yt[MaxEquation]=ie.MAX;const Oe={[ZeroFactor]:ie.ZERO,[OneFactor]:ie.ONE,[SrcColorFactor]:ie.SRC_COLOR,[SrcAlphaFactor]:ie.SRC_ALPHA,[SrcAlphaSaturateFactor]:ie.SRC_ALPHA_SATURATE,[DstColorFactor]:ie.DST_COLOR,[DstAlphaFactor]:ie.DST_ALPHA,[OneMinusSrcColorFactor]:ie.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:ie.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:ie.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:ie.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:ie.CONSTANT_COLOR,[OneMinusConstantColorFactor]:ie.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:ie.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:ie.ONE_MINUS_CONSTANT_ALPHA};function Ze(Ie,Ye,nt,rt,pt,At,Ut,ti,Qt,qt){if(Ie===NoBlending){ge===!0&&(et(ie.BLEND),ge=!1);return}if(ge===!1&&(Je(ie.BLEND),ge=!0),Ie!==CustomBlending){if(Ie!==me||qt!==Pe){if((ve!==AddEquation||_e!==AddEquation)&&(ie.blendEquation(ie.FUNC_ADD),ve=AddEquation,_e=AddEquation),qt)switch(Ie){case NormalBlending:ie.blendFuncSeparate(ie.ONE,ie.ONE_MINUS_SRC_ALPHA,ie.ONE,ie.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:ie.blendFunc(ie.ONE,ie.ONE);break;case SubtractiveBlending:ie.blendFuncSeparate(ie.ZERO,ie.ONE_MINUS_SRC_COLOR,ie.ZERO,ie.ONE);break;case MultiplyBlending:ie.blendFuncSeparate(ie.ZERO,ie.SRC_COLOR,ie.ZERO,ie.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}else switch(Ie){case NormalBlending:ie.blendFuncSeparate(ie.SRC_ALPHA,ie.ONE_MINUS_SRC_ALPHA,ie.ONE,ie.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:ie.blendFunc(ie.SRC_ALPHA,ie.ONE);break;case SubtractiveBlending:ie.blendFuncSeparate(ie.ZERO,ie.ONE_MINUS_SRC_COLOR,ie.ZERO,ie.ONE);break;case MultiplyBlending:ie.blendFunc(ie.ZERO,ie.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}pe=null,ye=null,xe=null,Se=null,be.set(0,0,0),Ee=0,me=Ie,Pe=qt}return}pt=pt||Ye,At=At||nt,Ut=Ut||rt,(Ye!==ve||pt!==_e)&&(ie.blendEquationSeparate(yt[Ye],yt[pt]),ve=Ye,_e=pt),(nt!==pe||rt!==ye||At!==xe||Ut!==Se)&&(ie.blendFuncSeparate(Oe[nt],Oe[rt],Oe[At],Oe[Ut]),pe=nt,ye=rt,xe=At,Se=Ut),(ti.equals(be)===!1||Qt!==Ee)&&(ie.blendColor(ti.r,ti.g,ti.b,Qt),be.copy(ti),Ee=Qt),me=Ie,Pe=!1}function qe(Ie,Ye){Ie.side===DoubleSide?et(ie.CULL_FACE):Je(ie.CULL_FACE);let nt=Ie.side===BackSide;Ye&&(nt=!nt),ut(nt),Ie.blending===NormalBlending&&Ie.transparent===!1?Ze(NoBlending):Ze(Ie.blending,Ie.blendEquation,Ie.blendSrc,Ie.blendDst,Ie.blendEquationAlpha,Ie.blendSrcAlpha,Ie.blendDstAlpha,Ie.blendColor,Ie.blendAlpha,Ie.premultipliedAlpha),se.setFunc(Ie.depthFunc),se.setTest(Ie.depthTest),se.setMask(Ie.depthWrite),re.setMask(Ie.colorWrite);const rt=Ie.stencilWrite;ae.setTest(rt),rt&&(ae.setMask(Ie.stencilWriteMask),ae.setFunc(Ie.stencilFunc,Ie.stencilRef,Ie.stencilFuncMask),ae.setOp(Ie.stencilFail,Ie.stencilZFail,Ie.stencilZPass)),ft(Ie.polygonOffset,Ie.polygonOffsetFactor,Ie.polygonOffsetUnits),Ie.alphaToCoverage===!0?Je(ie.SAMPLE_ALPHA_TO_COVERAGE):et(ie.SAMPLE_ALPHA_TO_COVERAGE)}function ut(Ie){we!==Ie&&(Ie?ie.frontFace(ie.CW):ie.frontFace(ie.CCW),we=Ie)}function at(Ie){Ie!==CullFaceNone?(Je(ie.CULL_FACE),Ie!==Me&&(Ie===CullFaceBack?ie.cullFace(ie.BACK):Ie===CullFaceFront?ie.cullFace(ie.FRONT):ie.cullFace(ie.FRONT_AND_BACK))):et(ie.CULL_FACE),Me=Ie}function We(Ie){Ie!==De&&(Ue&&ie.lineWidth(Ie),De=Ie)}function ft(Ie,Ye,nt){Ie?(Je(ie.POLYGON_OFFSET_FILL),(ke!==Ye||ze!==nt)&&(ie.polygonOffset(Ye,nt),ke=Ye,ze=nt)):et(ie.POLYGON_OFFSET_FILL)}function St(Ie){Ie?Je(ie.SCISSOR_TEST):et(ie.SCISSOR_TEST)}function $e(Ie){Ie===void 0&&(Ie=ie.TEXTURE0+Ve-1),Te!==Ie&&(ie.activeTexture(Ie),Te=Ie)}function Re(Ie,Ye,nt){nt===void 0&&(Te===null?nt=ie.TEXTURE0+Ve-1:nt=Te);let rt=Ce[nt];rt===void 0&&(rt={type:void 0,texture:void 0},Ce[nt]=rt),(rt.type!==Ie||rt.texture!==Ye)&&(Te!==nt&&(ie.activeTexture(nt),Te=nt),ie.bindTexture(Ie,Ye||He[Ie]),rt.type=Ie,rt.texture=Ye)}function Qe(){const Ie=Ce[Te];Ie!==void 0&&Ie.type!==void 0&&(ie.bindTexture(Ie.type,null),Ie.type=void 0,Ie.texture=void 0)}function ct(){try{ie.compressedTexImage2D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function lt(){try{ie.compressedTexImage3D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function ot(){try{ie.texSubImage2D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Et(){try{ie.texSubImage3D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function dt(){try{ie.compressedTexSubImage2D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function bt(){try{ie.compressedTexSubImage3D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function It(){try{ie.texStorage2D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function mt(){try{ie.texStorage3D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Tt(){try{ie.texImage2D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Nt(){try{ie.texImage3D.apply(ie,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function zt(Ie){st.equals(Ie)===!1&&(ie.scissor(Ie.x,Ie.y,Ie.z,Ie.w),st.copy(Ie))}function Ct(Ie){Xe.equals(Ie)===!1&&(ie.viewport(Ie.x,Ie.y,Ie.z,Ie.w),Xe.copy(Ie))}function Vt(Ie,Ye){let nt=le.get(Ye);nt===void 0&&(nt=new WeakMap,le.set(Ye,nt));let rt=nt.get(Ie);rt===void 0&&(rt=ie.getUniformBlockIndex(Ye,Ie.name),nt.set(Ie,rt))}function $t(Ie,Ye){const rt=le.get(Ye).get(Ie);oe.get(Ye)!==rt&&(ie.uniformBlockBinding(Ye,rt,Ie.__bindingPointIndex),oe.set(Ye,rt))}function jt(){ie.disable(ie.BLEND),ie.disable(ie.CULL_FACE),ie.disable(ie.DEPTH_TEST),ie.disable(ie.POLYGON_OFFSET_FILL),ie.disable(ie.SCISSOR_TEST),ie.disable(ie.STENCIL_TEST),ie.disable(ie.SAMPLE_ALPHA_TO_COVERAGE),ie.blendEquation(ie.FUNC_ADD),ie.blendFunc(ie.ONE,ie.ZERO),ie.blendFuncSeparate(ie.ONE,ie.ZERO,ie.ONE,ie.ZERO),ie.blendColor(0,0,0,0),ie.colorMask(!0,!0,!0,!0),ie.clearColor(0,0,0,0),ie.depthMask(!0),ie.depthFunc(ie.LESS),ie.clearDepth(1),ie.stencilMask(4294967295),ie.stencilFunc(ie.ALWAYS,0,4294967295),ie.stencilOp(ie.KEEP,ie.KEEP,ie.KEEP),ie.clearStencil(0),ie.cullFace(ie.BACK),ie.frontFace(ie.CCW),ie.polygonOffset(0,0),ie.activeTexture(ie.TEXTURE0),ie.bindFramebuffer(ie.FRAMEBUFFER,null),ie.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null),ie.bindFramebuffer(ie.READ_FRAMEBUFFER,null),ie.useProgram(null),ie.lineWidth(1),ie.scissor(0,0,ie.canvas.width,ie.canvas.height),ie.viewport(0,0,ie.canvas.width,ie.canvas.height),ce={},Te=null,Ce={},he={},fe=new WeakMap,ue=[],de=null,ge=!1,me=null,ve=null,pe=null,ye=null,_e=null,xe=null,Se=null,be=new Color(0,0,0),Ee=0,Pe=!1,we=null,Me=null,De=null,ke=null,ze=null,st.set(0,0,ie.canvas.width,ie.canvas.height),Xe.set(0,0,ie.canvas.width,ie.canvas.height),re.reset(),se.reset(),ae.reset()}return{buffers:{color:re,depth:se,stencil:ae},enable:Je,disable:et,bindFramebuffer:ht,drawBuffers:vt,useProgram:gt,setBlending:Ze,setMaterial:qe,setFlipSided:ut,setCullFace:at,setLineWidth:We,setPolygonOffset:ft,setScissorTest:St,activeTexture:$e,bindTexture:Re,unbindTexture:Qe,compressedTexImage2D:ct,compressedTexImage3D:lt,texImage2D:Tt,texImage3D:Nt,updateUBOMapping:Vt,uniformBlockBinding:$t,texStorage2D:It,texStorage3D:mt,texSubImage2D:ot,texSubImage3D:Et,compressedTexSubImage2D:dt,compressedTexSubImage3D:bt,scissor:zt,viewport:Ct,reset:jt}}function getByteLength(ie,ee,te,ne){const re=getTextureTypeByteLength(ne);switch(te){case AlphaFormat:return ie*ee;case LuminanceFormat:return ie*ee;case LuminanceAlphaFormat:return ie*ee*2;case RedFormat:return ie*ee/re.components*re.byteLength;case RedIntegerFormat:return ie*ee/re.components*re.byteLength;case RGFormat:return ie*ee*2/re.components*re.byteLength;case RGIntegerFormat:return ie*ee*2/re.components*re.byteLength;case RGBFormat:return ie*ee*3/re.components*re.byteLength;case RGBAFormat:return ie*ee*4/re.components*re.byteLength;case RGBAIntegerFormat:return ie*ee*4/re.components*re.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((ie+3)/4)*Math.floor((ee+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((ie+3)/4)*Math.floor((ee+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(ie,16)*Math.max(ee,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(ie,8)*Math.max(ee,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((ie+3)/4)*Math.floor((ee+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((ie+3)/4)*Math.floor((ee+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((ie+3)/4)*Math.floor((ee+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((ie+4)/5)*Math.floor((ee+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((ie+4)/5)*Math.floor((ee+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((ie+5)/6)*Math.floor((ee+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((ie+5)/6)*Math.floor((ee+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((ie+7)/8)*Math.floor((ee+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((ie+7)/8)*Math.floor((ee+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((ie+7)/8)*Math.floor((ee+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((ie+9)/10)*Math.floor((ee+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((ie+9)/10)*Math.floor((ee+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((ie+9)/10)*Math.floor((ee+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((ie+9)/10)*Math.floor((ee+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((ie+11)/12)*Math.floor((ee+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((ie+11)/12)*Math.floor((ee+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(ie/4)*Math.ceil(ee/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(ie/4)*Math.ceil(ee/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(ie/4)*Math.ceil(ee/4)*16}throw new Error(`Unable to determine texture byte length for ${te} format.`)}function getTextureTypeByteLength(ie){switch(ie){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${ie}.`)}function WebGLTextures(ie,ee,te,ne,re,se,ae){const oe=ee.has("WEBGL_multisampled_render_to_texture")?ee.get("WEBGL_multisampled_render_to_texture"):null,le=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),ce=new Vector2,he=new WeakMap;let fe;const ue=new WeakMap;let de=!1;try{de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ge($e,Re){return de?new OffscreenCanvas($e,Re):createElementNS("canvas")}function me($e,Re,Qe){let ct=1;const lt=St($e);if((lt.width>Qe||lt.height>Qe)&&(ct=Qe/Math.max(lt.width,lt.height)),ct<1)if(typeof HTMLImageElement<"u"&&$e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$e instanceof ImageBitmap||typeof VideoFrame<"u"&&$e instanceof VideoFrame){const ot=Math.floor(ct*lt.width),Et=Math.floor(ct*lt.height);fe===void 0&&(fe=ge(ot,Et));const dt=Re?ge(ot,Et):fe;return dt.width=ot,dt.height=Et,dt.getContext("2d").drawImage($e,0,0,ot,Et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+lt.width+"x"+lt.height+") to ("+ot+"x"+Et+")."),dt}else return"data"in $e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+lt.width+"x"+lt.height+")."),$e;return $e}function ve($e){return $e.generateMipmaps&&$e.minFilter!==NearestFilter&&$e.minFilter!==LinearFilter}function pe($e){ie.generateMipmap($e)}function ye($e,Re,Qe,ct,lt=!1){if($e!==null){if(ie[$e]!==void 0)return ie[$e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$e+"'")}let ot=Re;if(Re===ie.RED&&(Qe===ie.FLOAT&&(ot=ie.R32F),Qe===ie.HALF_FLOAT&&(ot=ie.R16F),Qe===ie.UNSIGNED_BYTE&&(ot=ie.R8)),Re===ie.RED_INTEGER&&(Qe===ie.UNSIGNED_BYTE&&(ot=ie.R8UI),Qe===ie.UNSIGNED_SHORT&&(ot=ie.R16UI),Qe===ie.UNSIGNED_INT&&(ot=ie.R32UI),Qe===ie.BYTE&&(ot=ie.R8I),Qe===ie.SHORT&&(ot=ie.R16I),Qe===ie.INT&&(ot=ie.R32I)),Re===ie.RG&&(Qe===ie.FLOAT&&(ot=ie.RG32F),Qe===ie.HALF_FLOAT&&(ot=ie.RG16F),Qe===ie.UNSIGNED_BYTE&&(ot=ie.RG8)),Re===ie.RG_INTEGER&&(Qe===ie.UNSIGNED_BYTE&&(ot=ie.RG8UI),Qe===ie.UNSIGNED_SHORT&&(ot=ie.RG16UI),Qe===ie.UNSIGNED_INT&&(ot=ie.RG32UI),Qe===ie.BYTE&&(ot=ie.RG8I),Qe===ie.SHORT&&(ot=ie.RG16I),Qe===ie.INT&&(ot=ie.RG32I)),Re===ie.RGB&&Qe===ie.UNSIGNED_INT_5_9_9_9_REV&&(ot=ie.RGB9_E5),Re===ie.RGBA){const Et=lt?LinearTransfer:ColorManagement.getTransfer(ct);Qe===ie.FLOAT&&(ot=ie.RGBA32F),Qe===ie.HALF_FLOAT&&(ot=ie.RGBA16F),Qe===ie.UNSIGNED_BYTE&&(ot=Et===SRGBTransfer?ie.SRGB8_ALPHA8:ie.RGBA8),Qe===ie.UNSIGNED_SHORT_4_4_4_4&&(ot=ie.RGBA4),Qe===ie.UNSIGNED_SHORT_5_5_5_1&&(ot=ie.RGB5_A1)}return(ot===ie.R16F||ot===ie.R32F||ot===ie.RG16F||ot===ie.RG32F||ot===ie.RGBA16F||ot===ie.RGBA32F)&&ee.get("EXT_color_buffer_float"),ot}function _e($e,Re){let Qe;return $e?Re===null||Re===UnsignedIntType||Re===UnsignedInt248Type?Qe=ie.DEPTH24_STENCIL8:Re===FloatType?Qe=ie.DEPTH32F_STENCIL8:Re===UnsignedShortType&&(Qe=ie.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Re===null||Re===UnsignedIntType||Re===UnsignedInt248Type?Qe=ie.DEPTH_COMPONENT24:Re===FloatType?Qe=ie.DEPTH_COMPONENT32F:Re===UnsignedShortType&&(Qe=ie.DEPTH_COMPONENT16),Qe}function xe($e,Re){return ve($e)===!0||$e.isFramebufferTexture&&$e.minFilter!==NearestFilter&&$e.minFilter!==LinearFilter?Math.log2(Math.max(Re.width,Re.height))+1:$e.mipmaps!==void 0&&$e.mipmaps.length>0?$e.mipmaps.length:$e.isCompressedTexture&&Array.isArray($e.image)?Re.mipmaps.length:1}function Se($e){const Re=$e.target;Re.removeEventListener("dispose",Se),Ee(Re),Re.isVideoTexture&&he.delete(Re)}function be($e){const Re=$e.target;Re.removeEventListener("dispose",be),we(Re)}function Ee($e){const Re=ne.get($e);if(Re.__webglInit===void 0)return;const Qe=$e.source,ct=ue.get(Qe);if(ct){const lt=ct[Re.__cacheKey];lt.usedTimes--,lt.usedTimes===0&&Pe($e),Object.keys(ct).length===0&&ue.delete(Qe)}ne.remove($e)}function Pe($e){const Re=ne.get($e);ie.deleteTexture(Re.__webglTexture);const Qe=$e.source,ct=ue.get(Qe);delete ct[Re.__cacheKey],ae.memory.textures--}function we($e){const Re=ne.get($e);if($e.depthTexture&&$e.depthTexture.dispose(),$e.isWebGLCubeRenderTarget)for(let ct=0;ct<6;ct++){if(Array.isArray(Re.__webglFramebuffer[ct]))for(let lt=0;lt<Re.__webglFramebuffer[ct].length;lt++)ie.deleteFramebuffer(Re.__webglFramebuffer[ct][lt]);else ie.deleteFramebuffer(Re.__webglFramebuffer[ct]);Re.__webglDepthbuffer&&ie.deleteRenderbuffer(Re.__webglDepthbuffer[ct])}else{if(Array.isArray(Re.__webglFramebuffer))for(let ct=0;ct<Re.__webglFramebuffer.length;ct++)ie.deleteFramebuffer(Re.__webglFramebuffer[ct]);else ie.deleteFramebuffer(Re.__webglFramebuffer);if(Re.__webglDepthbuffer&&ie.deleteRenderbuffer(Re.__webglDepthbuffer),Re.__webglMultisampledFramebuffer&&ie.deleteFramebuffer(Re.__webglMultisampledFramebuffer),Re.__webglColorRenderbuffer)for(let ct=0;ct<Re.__webglColorRenderbuffer.length;ct++)Re.__webglColorRenderbuffer[ct]&&ie.deleteRenderbuffer(Re.__webglColorRenderbuffer[ct]);Re.__webglDepthRenderbuffer&&ie.deleteRenderbuffer(Re.__webglDepthRenderbuffer)}const Qe=$e.textures;for(let ct=0,lt=Qe.length;ct<lt;ct++){const ot=ne.get(Qe[ct]);ot.__webglTexture&&(ie.deleteTexture(ot.__webglTexture),ae.memory.textures--),ne.remove(Qe[ct])}ne.remove($e)}let Me=0;function De(){Me=0}function ke(){const $e=Me;return $e>=re.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$e+" texture units while this GPU supports only "+re.maxTextures),Me+=1,$e}function ze($e){const Re=[];return Re.push($e.wrapS),Re.push($e.wrapT),Re.push($e.wrapR||0),Re.push($e.magFilter),Re.push($e.minFilter),Re.push($e.anisotropy),Re.push($e.internalFormat),Re.push($e.format),Re.push($e.type),Re.push($e.generateMipmaps),Re.push($e.premultiplyAlpha),Re.push($e.flipY),Re.push($e.unpackAlignment),Re.push($e.colorSpace),Re.join()}function Ve($e,Re){const Qe=ne.get($e);if($e.isVideoTexture&&We($e),$e.isRenderTargetTexture===!1&&$e.version>0&&Qe.__version!==$e.version){const ct=$e.image;if(ct===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ct.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(Qe,$e,Re);return}}te.bindTexture(ie.TEXTURE_2D,Qe.__webglTexture,ie.TEXTURE0+Re)}function Ue($e,Re){const Qe=ne.get($e);if($e.version>0&&Qe.__version!==$e.version){Xe(Qe,$e,Re);return}te.bindTexture(ie.TEXTURE_2D_ARRAY,Qe.__webglTexture,ie.TEXTURE0+Re)}function Ae($e,Re){const Qe=ne.get($e);if($e.version>0&&Qe.__version!==$e.version){Xe(Qe,$e,Re);return}te.bindTexture(ie.TEXTURE_3D,Qe.__webglTexture,ie.TEXTURE0+Re)}function Fe($e,Re){const Qe=ne.get($e);if($e.version>0&&Qe.__version!==$e.version){Ge(Qe,$e,Re);return}te.bindTexture(ie.TEXTURE_CUBE_MAP,Qe.__webglTexture,ie.TEXTURE0+Re)}const Te={[RepeatWrapping]:ie.REPEAT,[ClampToEdgeWrapping]:ie.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:ie.MIRRORED_REPEAT},Ce={[NearestFilter]:ie.NEAREST,[NearestMipmapNearestFilter]:ie.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:ie.NEAREST_MIPMAP_LINEAR,[LinearFilter]:ie.LINEAR,[LinearMipmapNearestFilter]:ie.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:ie.LINEAR_MIPMAP_LINEAR},Le={[NeverCompare]:ie.NEVER,[AlwaysCompare]:ie.ALWAYS,[LessCompare]:ie.LESS,[LessEqualCompare]:ie.LEQUAL,[EqualCompare]:ie.EQUAL,[GreaterEqualCompare]:ie.GEQUAL,[GreaterCompare]:ie.GREATER,[NotEqualCompare]:ie.NOTEQUAL};function Be($e,Re){if(Re.type===FloatType&&ee.has("OES_texture_float_linear")===!1&&(Re.magFilter===LinearFilter||Re.magFilter===LinearMipmapNearestFilter||Re.magFilter===NearestMipmapLinearFilter||Re.magFilter===LinearMipmapLinearFilter||Re.minFilter===LinearFilter||Re.minFilter===LinearMipmapNearestFilter||Re.minFilter===NearestMipmapLinearFilter||Re.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ie.texParameteri($e,ie.TEXTURE_WRAP_S,Te[Re.wrapS]),ie.texParameteri($e,ie.TEXTURE_WRAP_T,Te[Re.wrapT]),($e===ie.TEXTURE_3D||$e===ie.TEXTURE_2D_ARRAY)&&ie.texParameteri($e,ie.TEXTURE_WRAP_R,Te[Re.wrapR]),ie.texParameteri($e,ie.TEXTURE_MAG_FILTER,Ce[Re.magFilter]),ie.texParameteri($e,ie.TEXTURE_MIN_FILTER,Ce[Re.minFilter]),Re.compareFunction&&(ie.texParameteri($e,ie.TEXTURE_COMPARE_MODE,ie.COMPARE_REF_TO_TEXTURE),ie.texParameteri($e,ie.TEXTURE_COMPARE_FUNC,Le[Re.compareFunction])),ee.has("EXT_texture_filter_anisotropic")===!0){if(Re.magFilter===NearestFilter||Re.minFilter!==NearestMipmapLinearFilter&&Re.minFilter!==LinearMipmapLinearFilter||Re.type===FloatType&&ee.has("OES_texture_float_linear")===!1)return;if(Re.anisotropy>1||ne.get(Re).__currentAnisotropy){const Qe=ee.get("EXT_texture_filter_anisotropic");ie.texParameterf($e,Qe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Re.anisotropy,re.getMaxAnisotropy())),ne.get(Re).__currentAnisotropy=Re.anisotropy}}}function st($e,Re){let Qe=!1;$e.__webglInit===void 0&&($e.__webglInit=!0,Re.addEventListener("dispose",Se));const ct=Re.source;let lt=ue.get(ct);lt===void 0&&(lt={},ue.set(ct,lt));const ot=ze(Re);if(ot!==$e.__cacheKey){lt[ot]===void 0&&(lt[ot]={texture:ie.createTexture(),usedTimes:0},ae.memory.textures++,Qe=!0),lt[ot].usedTimes++;const Et=lt[$e.__cacheKey];Et!==void 0&&(lt[$e.__cacheKey].usedTimes--,Et.usedTimes===0&&Pe(Re)),$e.__cacheKey=ot,$e.__webglTexture=lt[ot].texture}return Qe}function Xe($e,Re,Qe){let ct=ie.TEXTURE_2D;(Re.isDataArrayTexture||Re.isCompressedArrayTexture)&&(ct=ie.TEXTURE_2D_ARRAY),Re.isData3DTexture&&(ct=ie.TEXTURE_3D);const lt=st($e,Re),ot=Re.source;te.bindTexture(ct,$e.__webglTexture,ie.TEXTURE0+Qe);const Et=ne.get(ot);if(ot.version!==Et.__version||lt===!0){te.activeTexture(ie.TEXTURE0+Qe);const dt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),bt=Re.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Re.colorSpace),It=Re.colorSpace===NoColorSpace||dt===bt?ie.NONE:ie.BROWSER_DEFAULT_WEBGL;ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Re.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Re.unpackAlignment),ie.pixelStorei(ie.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);let mt=me(Re.image,!1,re.maxTextureSize);mt=ft(Re,mt);const Tt=se.convert(Re.format,Re.colorSpace),Nt=se.convert(Re.type);let zt=ye(Re.internalFormat,Tt,Nt,Re.colorSpace,Re.isVideoTexture);Be(ct,Re);let Ct;const Vt=Re.mipmaps,$t=Re.isVideoTexture!==!0,jt=Et.__version===void 0||lt===!0,Ie=ot.dataReady,Ye=xe(Re,mt);if(Re.isDepthTexture)zt=_e(Re.format===DepthStencilFormat,Re.type),jt&&($t?te.texStorage2D(ie.TEXTURE_2D,1,zt,mt.width,mt.height):te.texImage2D(ie.TEXTURE_2D,0,zt,mt.width,mt.height,0,Tt,Nt,null));else if(Re.isDataTexture)if(Vt.length>0){$t&&jt&&te.texStorage2D(ie.TEXTURE_2D,Ye,zt,Vt[0].width,Vt[0].height);for(let nt=0,rt=Vt.length;nt<rt;nt++)Ct=Vt[nt],$t?Ie&&te.texSubImage2D(ie.TEXTURE_2D,nt,0,0,Ct.width,Ct.height,Tt,Nt,Ct.data):te.texImage2D(ie.TEXTURE_2D,nt,zt,Ct.width,Ct.height,0,Tt,Nt,Ct.data);Re.generateMipmaps=!1}else $t?(jt&&te.texStorage2D(ie.TEXTURE_2D,Ye,zt,mt.width,mt.height),Ie&&te.texSubImage2D(ie.TEXTURE_2D,0,0,0,mt.width,mt.height,Tt,Nt,mt.data)):te.texImage2D(ie.TEXTURE_2D,0,zt,mt.width,mt.height,0,Tt,Nt,mt.data);else if(Re.isCompressedTexture)if(Re.isCompressedArrayTexture){$t&&jt&&te.texStorage3D(ie.TEXTURE_2D_ARRAY,Ye,zt,Vt[0].width,Vt[0].height,mt.depth);for(let nt=0,rt=Vt.length;nt<rt;nt++)if(Ct=Vt[nt],Re.format!==RGBAFormat)if(Tt!==null)if($t){if(Ie)if(Re.layerUpdates.size>0){const pt=getByteLength(Ct.width,Ct.height,Re.format,Re.type);for(const At of Re.layerUpdates){const Ut=Ct.data.subarray(At*pt/Ct.data.BYTES_PER_ELEMENT,(At+1)*pt/Ct.data.BYTES_PER_ELEMENT);te.compressedTexSubImage3D(ie.TEXTURE_2D_ARRAY,nt,0,0,At,Ct.width,Ct.height,1,Tt,Ut,0,0)}Re.clearLayerUpdates()}else te.compressedTexSubImage3D(ie.TEXTURE_2D_ARRAY,nt,0,0,0,Ct.width,Ct.height,mt.depth,Tt,Ct.data,0,0)}else te.compressedTexImage3D(ie.TEXTURE_2D_ARRAY,nt,zt,Ct.width,Ct.height,mt.depth,0,Ct.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $t?Ie&&te.texSubImage3D(ie.TEXTURE_2D_ARRAY,nt,0,0,0,Ct.width,Ct.height,mt.depth,Tt,Nt,Ct.data):te.texImage3D(ie.TEXTURE_2D_ARRAY,nt,zt,Ct.width,Ct.height,mt.depth,0,Tt,Nt,Ct.data)}else{$t&&jt&&te.texStorage2D(ie.TEXTURE_2D,Ye,zt,Vt[0].width,Vt[0].height);for(let nt=0,rt=Vt.length;nt<rt;nt++)Ct=Vt[nt],Re.format!==RGBAFormat?Tt!==null?$t?Ie&&te.compressedTexSubImage2D(ie.TEXTURE_2D,nt,0,0,Ct.width,Ct.height,Tt,Ct.data):te.compressedTexImage2D(ie.TEXTURE_2D,nt,zt,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$t?Ie&&te.texSubImage2D(ie.TEXTURE_2D,nt,0,0,Ct.width,Ct.height,Tt,Nt,Ct.data):te.texImage2D(ie.TEXTURE_2D,nt,zt,Ct.width,Ct.height,0,Tt,Nt,Ct.data)}else if(Re.isDataArrayTexture)if($t){if(jt&&te.texStorage3D(ie.TEXTURE_2D_ARRAY,Ye,zt,mt.width,mt.height,mt.depth),Ie)if(Re.layerUpdates.size>0){const nt=getByteLength(mt.width,mt.height,Re.format,Re.type);for(const rt of Re.layerUpdates){const pt=mt.data.subarray(rt*nt/mt.data.BYTES_PER_ELEMENT,(rt+1)*nt/mt.data.BYTES_PER_ELEMENT);te.texSubImage3D(ie.TEXTURE_2D_ARRAY,0,0,0,rt,mt.width,mt.height,1,Tt,Nt,pt)}Re.clearLayerUpdates()}else te.texSubImage3D(ie.TEXTURE_2D_ARRAY,0,0,0,0,mt.width,mt.height,mt.depth,Tt,Nt,mt.data)}else te.texImage3D(ie.TEXTURE_2D_ARRAY,0,zt,mt.width,mt.height,mt.depth,0,Tt,Nt,mt.data);else if(Re.isData3DTexture)$t?(jt&&te.texStorage3D(ie.TEXTURE_3D,Ye,zt,mt.width,mt.height,mt.depth),Ie&&te.texSubImage3D(ie.TEXTURE_3D,0,0,0,0,mt.width,mt.height,mt.depth,Tt,Nt,mt.data)):te.texImage3D(ie.TEXTURE_3D,0,zt,mt.width,mt.height,mt.depth,0,Tt,Nt,mt.data);else if(Re.isFramebufferTexture){if(jt)if($t)te.texStorage2D(ie.TEXTURE_2D,Ye,zt,mt.width,mt.height);else{let nt=mt.width,rt=mt.height;for(let pt=0;pt<Ye;pt++)te.texImage2D(ie.TEXTURE_2D,pt,zt,nt,rt,0,Tt,Nt,null),nt>>=1,rt>>=1}}else if(Vt.length>0){if($t&&jt){const nt=St(Vt[0]);te.texStorage2D(ie.TEXTURE_2D,Ye,zt,nt.width,nt.height)}for(let nt=0,rt=Vt.length;nt<rt;nt++)Ct=Vt[nt],$t?Ie&&te.texSubImage2D(ie.TEXTURE_2D,nt,0,0,Tt,Nt,Ct):te.texImage2D(ie.TEXTURE_2D,nt,zt,Tt,Nt,Ct);Re.generateMipmaps=!1}else if($t){if(jt){const nt=St(mt);te.texStorage2D(ie.TEXTURE_2D,Ye,zt,nt.width,nt.height)}Ie&&te.texSubImage2D(ie.TEXTURE_2D,0,0,0,Tt,Nt,mt)}else te.texImage2D(ie.TEXTURE_2D,0,zt,Tt,Nt,mt);ve(Re)&&pe(ct),Et.__version=ot.version,Re.onUpdate&&Re.onUpdate(Re)}$e.__version=Re.version}function Ge($e,Re,Qe){if(Re.image.length!==6)return;const ct=st($e,Re),lt=Re.source;te.bindTexture(ie.TEXTURE_CUBE_MAP,$e.__webglTexture,ie.TEXTURE0+Qe);const ot=ne.get(lt);if(lt.version!==ot.__version||ct===!0){te.activeTexture(ie.TEXTURE0+Qe);const Et=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),dt=Re.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Re.colorSpace),bt=Re.colorSpace===NoColorSpace||Et===dt?ie.NONE:ie.BROWSER_DEFAULT_WEBGL;ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Re.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Re.unpackAlignment),ie.pixelStorei(ie.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const It=Re.isCompressedTexture||Re.image[0].isCompressedTexture,mt=Re.image[0]&&Re.image[0].isDataTexture,Tt=[];for(let rt=0;rt<6;rt++)!It&&!mt?Tt[rt]=me(Re.image[rt],!0,re.maxCubemapSize):Tt[rt]=mt?Re.image[rt].image:Re.image[rt],Tt[rt]=ft(Re,Tt[rt]);const Nt=Tt[0],zt=se.convert(Re.format,Re.colorSpace),Ct=se.convert(Re.type),Vt=ye(Re.internalFormat,zt,Ct,Re.colorSpace),$t=Re.isVideoTexture!==!0,jt=ot.__version===void 0||ct===!0,Ie=lt.dataReady;let Ye=xe(Re,Nt);Be(ie.TEXTURE_CUBE_MAP,Re);let nt;if(It){$t&&jt&&te.texStorage2D(ie.TEXTURE_CUBE_MAP,Ye,Vt,Nt.width,Nt.height);for(let rt=0;rt<6;rt++){nt=Tt[rt].mipmaps;for(let pt=0;pt<nt.length;pt++){const At=nt[pt];Re.format!==RGBAFormat?zt!==null?$t?Ie&&te.compressedTexSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt,0,0,At.width,At.height,zt,At.data):te.compressedTexImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt,Vt,At.width,At.height,0,At.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$t?Ie&&te.texSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt,0,0,At.width,At.height,zt,Ct,At.data):te.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt,Vt,At.width,At.height,0,zt,Ct,At.data)}}}else{if(nt=Re.mipmaps,$t&&jt){nt.length>0&&Ye++;const rt=St(Tt[0]);te.texStorage2D(ie.TEXTURE_CUBE_MAP,Ye,Vt,rt.width,rt.height)}for(let rt=0;rt<6;rt++)if(mt){$t?Ie&&te.texSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,0,0,Tt[rt].width,Tt[rt].height,zt,Ct,Tt[rt].data):te.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,Vt,Tt[rt].width,Tt[rt].height,0,zt,Ct,Tt[rt].data);for(let pt=0;pt<nt.length;pt++){const Ut=nt[pt].image[rt].image;$t?Ie&&te.texSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt+1,0,0,Ut.width,Ut.height,zt,Ct,Ut.data):te.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt+1,Vt,Ut.width,Ut.height,0,zt,Ct,Ut.data)}}else{$t?Ie&&te.texSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,0,0,zt,Ct,Tt[rt]):te.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,Vt,zt,Ct,Tt[rt]);for(let pt=0;pt<nt.length;pt++){const At=nt[pt];$t?Ie&&te.texSubImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt+1,0,0,zt,Ct,At.image[rt]):te.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,pt+1,Vt,zt,Ct,At.image[rt])}}}ve(Re)&&pe(ie.TEXTURE_CUBE_MAP),ot.__version=lt.version,Re.onUpdate&&Re.onUpdate(Re)}$e.__version=Re.version}function He($e,Re,Qe,ct,lt,ot){const Et=se.convert(Qe.format,Qe.colorSpace),dt=se.convert(Qe.type),bt=ye(Qe.internalFormat,Et,dt,Qe.colorSpace);if(!ne.get(Re).__hasExternalTextures){const mt=Math.max(1,Re.width>>ot),Tt=Math.max(1,Re.height>>ot);lt===ie.TEXTURE_3D||lt===ie.TEXTURE_2D_ARRAY?te.texImage3D(lt,ot,bt,mt,Tt,Re.depth,0,Et,dt,null):te.texImage2D(lt,ot,bt,mt,Tt,0,Et,dt,null)}te.bindFramebuffer(ie.FRAMEBUFFER,$e),at(Re)?oe.framebufferTexture2DMultisampleEXT(ie.FRAMEBUFFER,ct,lt,ne.get(Qe).__webglTexture,0,ut(Re)):(lt===ie.TEXTURE_2D||lt>=ie.TEXTURE_CUBE_MAP_POSITIVE_X&&lt<=ie.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&ie.framebufferTexture2D(ie.FRAMEBUFFER,ct,lt,ne.get(Qe).__webglTexture,ot),te.bindFramebuffer(ie.FRAMEBUFFER,null)}function Je($e,Re,Qe){if(ie.bindRenderbuffer(ie.RENDERBUFFER,$e),Re.depthBuffer){const ct=Re.depthTexture,lt=ct&&ct.isDepthTexture?ct.type:null,ot=_e(Re.stencilBuffer,lt),Et=Re.stencilBuffer?ie.DEPTH_STENCIL_ATTACHMENT:ie.DEPTH_ATTACHMENT,dt=ut(Re);at(Re)?oe.renderbufferStorageMultisampleEXT(ie.RENDERBUFFER,dt,ot,Re.width,Re.height):Qe?ie.renderbufferStorageMultisample(ie.RENDERBUFFER,dt,ot,Re.width,Re.height):ie.renderbufferStorage(ie.RENDERBUFFER,ot,Re.width,Re.height),ie.framebufferRenderbuffer(ie.FRAMEBUFFER,Et,ie.RENDERBUFFER,$e)}else{const ct=Re.textures;for(let lt=0;lt<ct.length;lt++){const ot=ct[lt],Et=se.convert(ot.format,ot.colorSpace),dt=se.convert(ot.type),bt=ye(ot.internalFormat,Et,dt,ot.colorSpace),It=ut(Re);Qe&&at(Re)===!1?ie.renderbufferStorageMultisample(ie.RENDERBUFFER,It,bt,Re.width,Re.height):at(Re)?oe.renderbufferStorageMultisampleEXT(ie.RENDERBUFFER,It,bt,Re.width,Re.height):ie.renderbufferStorage(ie.RENDERBUFFER,bt,Re.width,Re.height)}}ie.bindRenderbuffer(ie.RENDERBUFFER,null)}function et($e,Re){if(Re&&Re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(te.bindFramebuffer(ie.FRAMEBUFFER,$e),!(Re.depthTexture&&Re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!ne.get(Re.depthTexture).__webglTexture||Re.depthTexture.image.width!==Re.width||Re.depthTexture.image.height!==Re.height)&&(Re.depthTexture.image.width=Re.width,Re.depthTexture.image.height=Re.height,Re.depthTexture.needsUpdate=!0),Ve(Re.depthTexture,0);const ct=ne.get(Re.depthTexture).__webglTexture,lt=ut(Re);if(Re.depthTexture.format===DepthFormat)at(Re)?oe.framebufferTexture2DMultisampleEXT(ie.FRAMEBUFFER,ie.DEPTH_ATTACHMENT,ie.TEXTURE_2D,ct,0,lt):ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.DEPTH_ATTACHMENT,ie.TEXTURE_2D,ct,0);else if(Re.depthTexture.format===DepthStencilFormat)at(Re)?oe.framebufferTexture2DMultisampleEXT(ie.FRAMEBUFFER,ie.DEPTH_STENCIL_ATTACHMENT,ie.TEXTURE_2D,ct,0,lt):ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.DEPTH_STENCIL_ATTACHMENT,ie.TEXTURE_2D,ct,0);else throw new Error("Unknown depthTexture format")}function ht($e){const Re=ne.get($e),Qe=$e.isWebGLCubeRenderTarget===!0;if($e.depthTexture&&!Re.__autoAllocateDepthBuffer){if(Qe)throw new Error("target.depthTexture not supported in Cube render targets");et(Re.__webglFramebuffer,$e)}else if(Qe){Re.__webglDepthbuffer=[];for(let ct=0;ct<6;ct++)te.bindFramebuffer(ie.FRAMEBUFFER,Re.__webglFramebuffer[ct]),Re.__webglDepthbuffer[ct]=ie.createRenderbuffer(),Je(Re.__webglDepthbuffer[ct],$e,!1)}else te.bindFramebuffer(ie.FRAMEBUFFER,Re.__webglFramebuffer),Re.__webglDepthbuffer=ie.createRenderbuffer(),Je(Re.__webglDepthbuffer,$e,!1);te.bindFramebuffer(ie.FRAMEBUFFER,null)}function vt($e,Re,Qe){const ct=ne.get($e);Re!==void 0&&He(ct.__webglFramebuffer,$e,$e.texture,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,0),Qe!==void 0&&ht($e)}function gt($e){const Re=$e.texture,Qe=ne.get($e),ct=ne.get(Re);$e.addEventListener("dispose",be);const lt=$e.textures,ot=$e.isWebGLCubeRenderTarget===!0,Et=lt.length>1;if(Et||(ct.__webglTexture===void 0&&(ct.__webglTexture=ie.createTexture()),ct.__version=Re.version,ae.memory.textures++),ot){Qe.__webglFramebuffer=[];for(let dt=0;dt<6;dt++)if(Re.mipmaps&&Re.mipmaps.length>0){Qe.__webglFramebuffer[dt]=[];for(let bt=0;bt<Re.mipmaps.length;bt++)Qe.__webglFramebuffer[dt][bt]=ie.createFramebuffer()}else Qe.__webglFramebuffer[dt]=ie.createFramebuffer()}else{if(Re.mipmaps&&Re.mipmaps.length>0){Qe.__webglFramebuffer=[];for(let dt=0;dt<Re.mipmaps.length;dt++)Qe.__webglFramebuffer[dt]=ie.createFramebuffer()}else Qe.__webglFramebuffer=ie.createFramebuffer();if(Et)for(let dt=0,bt=lt.length;dt<bt;dt++){const It=ne.get(lt[dt]);It.__webglTexture===void 0&&(It.__webglTexture=ie.createTexture(),ae.memory.textures++)}if($e.samples>0&&at($e)===!1){Qe.__webglMultisampledFramebuffer=ie.createFramebuffer(),Qe.__webglColorRenderbuffer=[],te.bindFramebuffer(ie.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer);for(let dt=0;dt<lt.length;dt++){const bt=lt[dt];Qe.__webglColorRenderbuffer[dt]=ie.createRenderbuffer(),ie.bindRenderbuffer(ie.RENDERBUFFER,Qe.__webglColorRenderbuffer[dt]);const It=se.convert(bt.format,bt.colorSpace),mt=se.convert(bt.type),Tt=ye(bt.internalFormat,It,mt,bt.colorSpace,$e.isXRRenderTarget===!0),Nt=ut($e);ie.renderbufferStorageMultisample(ie.RENDERBUFFER,Nt,Tt,$e.width,$e.height),ie.framebufferRenderbuffer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+dt,ie.RENDERBUFFER,Qe.__webglColorRenderbuffer[dt])}ie.bindRenderbuffer(ie.RENDERBUFFER,null),$e.depthBuffer&&(Qe.__webglDepthRenderbuffer=ie.createRenderbuffer(),Je(Qe.__webglDepthRenderbuffer,$e,!0)),te.bindFramebuffer(ie.FRAMEBUFFER,null)}}if(ot){te.bindTexture(ie.TEXTURE_CUBE_MAP,ct.__webglTexture),Be(ie.TEXTURE_CUBE_MAP,Re);for(let dt=0;dt<6;dt++)if(Re.mipmaps&&Re.mipmaps.length>0)for(let bt=0;bt<Re.mipmaps.length;bt++)He(Qe.__webglFramebuffer[dt][bt],$e,Re,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+dt,bt);else He(Qe.__webglFramebuffer[dt],$e,Re,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0);ve(Re)&&pe(ie.TEXTURE_CUBE_MAP),te.unbindTexture()}else if(Et){for(let dt=0,bt=lt.length;dt<bt;dt++){const It=lt[dt],mt=ne.get(It);te.bindTexture(ie.TEXTURE_2D,mt.__webglTexture),Be(ie.TEXTURE_2D,It),He(Qe.__webglFramebuffer,$e,It,ie.COLOR_ATTACHMENT0+dt,ie.TEXTURE_2D,0),ve(It)&&pe(ie.TEXTURE_2D)}te.unbindTexture()}else{let dt=ie.TEXTURE_2D;if(($e.isWebGL3DRenderTarget||$e.isWebGLArrayRenderTarget)&&(dt=$e.isWebGL3DRenderTarget?ie.TEXTURE_3D:ie.TEXTURE_2D_ARRAY),te.bindTexture(dt,ct.__webglTexture),Be(dt,Re),Re.mipmaps&&Re.mipmaps.length>0)for(let bt=0;bt<Re.mipmaps.length;bt++)He(Qe.__webglFramebuffer[bt],$e,Re,ie.COLOR_ATTACHMENT0,dt,bt);else He(Qe.__webglFramebuffer,$e,Re,ie.COLOR_ATTACHMENT0,dt,0);ve(Re)&&pe(dt),te.unbindTexture()}$e.depthBuffer&&ht($e)}function yt($e){const Re=$e.textures;for(let Qe=0,ct=Re.length;Qe<ct;Qe++){const lt=Re[Qe];if(ve(lt)){const ot=$e.isWebGLCubeRenderTarget?ie.TEXTURE_CUBE_MAP:ie.TEXTURE_2D,Et=ne.get(lt).__webglTexture;te.bindTexture(ot,Et),pe(ot),te.unbindTexture()}}}const Oe=[],Ze=[];function qe($e){if($e.samples>0){if(at($e)===!1){const Re=$e.textures,Qe=$e.width,ct=$e.height;let lt=ie.COLOR_BUFFER_BIT;const ot=$e.stencilBuffer?ie.DEPTH_STENCIL_ATTACHMENT:ie.DEPTH_ATTACHMENT,Et=ne.get($e),dt=Re.length>1;if(dt)for(let bt=0;bt<Re.length;bt++)te.bindFramebuffer(ie.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),ie.framebufferRenderbuffer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+bt,ie.RENDERBUFFER,null),te.bindFramebuffer(ie.FRAMEBUFFER,Et.__webglFramebuffer),ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0+bt,ie.TEXTURE_2D,null,0);te.bindFramebuffer(ie.READ_FRAMEBUFFER,Et.__webglMultisampledFramebuffer),te.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Et.__webglFramebuffer);for(let bt=0;bt<Re.length;bt++){if($e.resolveDepthBuffer&&($e.depthBuffer&&(lt|=ie.DEPTH_BUFFER_BIT),$e.stencilBuffer&&$e.resolveStencilBuffer&&(lt|=ie.STENCIL_BUFFER_BIT)),dt){ie.framebufferRenderbuffer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.RENDERBUFFER,Et.__webglColorRenderbuffer[bt]);const It=ne.get(Re[bt]).__webglTexture;ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,It,0)}ie.blitFramebuffer(0,0,Qe,ct,0,0,Qe,ct,lt,ie.NEAREST),le===!0&&(Oe.length=0,Ze.length=0,Oe.push(ie.COLOR_ATTACHMENT0+bt),$e.depthBuffer&&$e.resolveDepthBuffer===!1&&(Oe.push(ot),Ze.push(ot),ie.invalidateFramebuffer(ie.DRAW_FRAMEBUFFER,Ze)),ie.invalidateFramebuffer(ie.READ_FRAMEBUFFER,Oe))}if(te.bindFramebuffer(ie.READ_FRAMEBUFFER,null),te.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null),dt)for(let bt=0;bt<Re.length;bt++){te.bindFramebuffer(ie.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),ie.framebufferRenderbuffer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+bt,ie.RENDERBUFFER,Et.__webglColorRenderbuffer[bt]);const It=ne.get(Re[bt]).__webglTexture;te.bindFramebuffer(ie.FRAMEBUFFER,Et.__webglFramebuffer),ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0+bt,ie.TEXTURE_2D,It,0)}te.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Et.__webglMultisampledFramebuffer)}else if($e.depthBuffer&&$e.resolveDepthBuffer===!1&&le){const Re=$e.stencilBuffer?ie.DEPTH_STENCIL_ATTACHMENT:ie.DEPTH_ATTACHMENT;ie.invalidateFramebuffer(ie.DRAW_FRAMEBUFFER,[Re])}}}function ut($e){return Math.min(re.maxSamples,$e.samples)}function at($e){const Re=ne.get($e);return $e.samples>0&&ee.has("WEBGL_multisampled_render_to_texture")===!0&&Re.__useRenderToTexture!==!1}function We($e){const Re=ae.render.frame;he.get($e)!==Re&&(he.set($e,Re),$e.update())}function ft($e,Re){const Qe=$e.colorSpace,ct=$e.format,lt=$e.type;return $e.isCompressedTexture===!0||$e.isVideoTexture===!0||Qe!==LinearSRGBColorSpace&&Qe!==NoColorSpace&&(ColorManagement.getTransfer(Qe)===SRGBTransfer?(ct!==RGBAFormat||lt!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Qe)),Re}function St($e){return typeof HTMLImageElement<"u"&&$e instanceof HTMLImageElement?(ce.width=$e.naturalWidth||$e.width,ce.height=$e.naturalHeight||$e.height):typeof VideoFrame<"u"&&$e instanceof VideoFrame?(ce.width=$e.displayWidth,ce.height=$e.displayHeight):(ce.width=$e.width,ce.height=$e.height),ce}this.allocateTextureUnit=ke,this.resetTextureUnits=De,this.setTexture2D=Ve,this.setTexture2DArray=Ue,this.setTexture3D=Ae,this.setTextureCube=Fe,this.rebindTextures=vt,this.setupRenderTarget=gt,this.updateRenderTargetMipmap=yt,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=ht,this.setupFrameBufferTexture=He,this.useMultisampledRTT=at}function WebGLUtils(ie,ee){function te(ne,re=NoColorSpace){let se;const ae=ColorManagement.getTransfer(re);if(ne===UnsignedByteType)return ie.UNSIGNED_BYTE;if(ne===UnsignedShort4444Type)return ie.UNSIGNED_SHORT_4_4_4_4;if(ne===UnsignedShort5551Type)return ie.UNSIGNED_SHORT_5_5_5_1;if(ne===UnsignedInt5999Type)return ie.UNSIGNED_INT_5_9_9_9_REV;if(ne===ByteType)return ie.BYTE;if(ne===ShortType)return ie.SHORT;if(ne===UnsignedShortType)return ie.UNSIGNED_SHORT;if(ne===IntType)return ie.INT;if(ne===UnsignedIntType)return ie.UNSIGNED_INT;if(ne===FloatType)return ie.FLOAT;if(ne===HalfFloatType)return ie.HALF_FLOAT;if(ne===AlphaFormat)return ie.ALPHA;if(ne===RGBFormat)return ie.RGB;if(ne===RGBAFormat)return ie.RGBA;if(ne===LuminanceFormat)return ie.LUMINANCE;if(ne===LuminanceAlphaFormat)return ie.LUMINANCE_ALPHA;if(ne===DepthFormat)return ie.DEPTH_COMPONENT;if(ne===DepthStencilFormat)return ie.DEPTH_STENCIL;if(ne===RedFormat)return ie.RED;if(ne===RedIntegerFormat)return ie.RED_INTEGER;if(ne===RGFormat)return ie.RG;if(ne===RGIntegerFormat)return ie.RG_INTEGER;if(ne===RGBAIntegerFormat)return ie.RGBA_INTEGER;if(ne===RGB_S3TC_DXT1_Format||ne===RGBA_S3TC_DXT1_Format||ne===RGBA_S3TC_DXT3_Format||ne===RGBA_S3TC_DXT5_Format)if(ae===SRGBTransfer)if(se=ee.get("WEBGL_compressed_texture_s3tc_srgb"),se!==null){if(ne===RGB_S3TC_DXT1_Format)return se.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ne===RGBA_S3TC_DXT1_Format)return se.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ne===RGBA_S3TC_DXT3_Format)return se.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ne===RGBA_S3TC_DXT5_Format)return se.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(se=ee.get("WEBGL_compressed_texture_s3tc"),se!==null){if(ne===RGB_S3TC_DXT1_Format)return se.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ne===RGBA_S3TC_DXT1_Format)return se.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ne===RGBA_S3TC_DXT3_Format)return se.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ne===RGBA_S3TC_DXT5_Format)return se.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(ne===RGB_PVRTC_4BPPV1_Format||ne===RGB_PVRTC_2BPPV1_Format||ne===RGBA_PVRTC_4BPPV1_Format||ne===RGBA_PVRTC_2BPPV1_Format)if(se=ee.get("WEBGL_compressed_texture_pvrtc"),se!==null){if(ne===RGB_PVRTC_4BPPV1_Format)return se.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ne===RGB_PVRTC_2BPPV1_Format)return se.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ne===RGBA_PVRTC_4BPPV1_Format)return se.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ne===RGBA_PVRTC_2BPPV1_Format)return se.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(ne===RGB_ETC1_Format||ne===RGB_ETC2_Format||ne===RGBA_ETC2_EAC_Format)if(se=ee.get("WEBGL_compressed_texture_etc"),se!==null){if(ne===RGB_ETC1_Format||ne===RGB_ETC2_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ETC2:se.COMPRESSED_RGB8_ETC2;if(ne===RGBA_ETC2_EAC_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:se.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(ne===RGBA_ASTC_4x4_Format||ne===RGBA_ASTC_5x4_Format||ne===RGBA_ASTC_5x5_Format||ne===RGBA_ASTC_6x5_Format||ne===RGBA_ASTC_6x6_Format||ne===RGBA_ASTC_8x5_Format||ne===RGBA_ASTC_8x6_Format||ne===RGBA_ASTC_8x8_Format||ne===RGBA_ASTC_10x5_Format||ne===RGBA_ASTC_10x6_Format||ne===RGBA_ASTC_10x8_Format||ne===RGBA_ASTC_10x10_Format||ne===RGBA_ASTC_12x10_Format||ne===RGBA_ASTC_12x12_Format)if(se=ee.get("WEBGL_compressed_texture_astc"),se!==null){if(ne===RGBA_ASTC_4x4_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:se.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ne===RGBA_ASTC_5x4_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:se.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ne===RGBA_ASTC_5x5_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:se.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ne===RGBA_ASTC_6x5_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:se.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ne===RGBA_ASTC_6x6_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:se.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ne===RGBA_ASTC_8x5_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:se.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ne===RGBA_ASTC_8x6_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:se.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ne===RGBA_ASTC_8x8_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:se.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ne===RGBA_ASTC_10x5_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:se.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ne===RGBA_ASTC_10x6_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:se.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ne===RGBA_ASTC_10x8_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:se.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ne===RGBA_ASTC_10x10_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:se.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ne===RGBA_ASTC_12x10_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:se.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ne===RGBA_ASTC_12x12_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:se.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(ne===RGBA_BPTC_Format||ne===RGB_BPTC_SIGNED_Format||ne===RGB_BPTC_UNSIGNED_Format)if(se=ee.get("EXT_texture_compression_bptc"),se!==null){if(ne===RGBA_BPTC_Format)return ae===SRGBTransfer?se.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:se.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ne===RGB_BPTC_SIGNED_Format)return se.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ne===RGB_BPTC_UNSIGNED_Format)return se.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(ne===RED_RGTC1_Format||ne===SIGNED_RED_RGTC1_Format||ne===RED_GREEN_RGTC2_Format||ne===SIGNED_RED_GREEN_RGTC2_Format)if(se=ee.get("EXT_texture_compression_rgtc"),se!==null){if(ne===RGBA_BPTC_Format)return se.COMPRESSED_RED_RGTC1_EXT;if(ne===SIGNED_RED_RGTC1_Format)return se.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ne===RED_GREEN_RGTC2_Format)return se.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ne===SIGNED_RED_GREEN_RGTC2_Format)return se.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return ne===UnsignedInt248Type?ie.UNSIGNED_INT_24_8:ie[ne]!==void 0?ie[ne]:null}return{convert:te}}class ArrayCamera extends PerspectiveCamera{constructor(ee=[]){super(),this.isArrayCamera=!0,this.cameras=ee}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(ee){return this._targetRay!==null&&this._targetRay.dispatchEvent(ee),this._grip!==null&&this._grip.dispatchEvent(ee),this._hand!==null&&this._hand.dispatchEvent(ee),this}connect(ee){if(ee&&ee.hand){const te=this._hand;if(te)for(const ne of ee.hand.values())this._getHandJoint(te,ne)}return this.dispatchEvent({type:"connected",data:ee}),this}disconnect(ee){return this.dispatchEvent({type:"disconnected",data:ee}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(ee,te,ne){let re=null,se=null,ae=null;const oe=this._targetRay,le=this._grip,ce=this._hand;if(ee&&te.session.visibilityState!=="visible-blurred"){if(ce&&ee.hand){ae=!0;for(const me of ee.hand.values()){const ve=te.getJointPose(me,ne),pe=this._getHandJoint(ce,me);ve!==null&&(pe.matrix.fromArray(ve.transform.matrix),pe.matrix.decompose(pe.position,pe.rotation,pe.scale),pe.matrixWorldNeedsUpdate=!0,pe.jointRadius=ve.radius),pe.visible=ve!==null}const he=ce.joints["index-finger-tip"],fe=ce.joints["thumb-tip"],ue=he.position.distanceTo(fe.position),de=.02,ge=.005;ce.inputState.pinching&&ue>de+ge?(ce.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:ee.handedness,target:this})):!ce.inputState.pinching&&ue<=de-ge&&(ce.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:ee.handedness,target:this}))}else le!==null&&ee.gripSpace&&(se=te.getPose(ee.gripSpace,ne),se!==null&&(le.matrix.fromArray(se.transform.matrix),le.matrix.decompose(le.position,le.rotation,le.scale),le.matrixWorldNeedsUpdate=!0,se.linearVelocity?(le.hasLinearVelocity=!0,le.linearVelocity.copy(se.linearVelocity)):le.hasLinearVelocity=!1,se.angularVelocity?(le.hasAngularVelocity=!0,le.angularVelocity.copy(se.angularVelocity)):le.hasAngularVelocity=!1));oe!==null&&(re=te.getPose(ee.targetRaySpace,ne),re===null&&se!==null&&(re=se),re!==null&&(oe.matrix.fromArray(re.transform.matrix),oe.matrix.decompose(oe.position,oe.rotation,oe.scale),oe.matrixWorldNeedsUpdate=!0,re.linearVelocity?(oe.hasLinearVelocity=!0,oe.linearVelocity.copy(re.linearVelocity)):oe.hasLinearVelocity=!1,re.angularVelocity?(oe.hasAngularVelocity=!0,oe.angularVelocity.copy(re.angularVelocity)):oe.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return oe!==null&&(oe.visible=re!==null),le!==null&&(le.visible=se!==null),ce!==null&&(ce.visible=ae!==null),this}_getHandJoint(ee,te){if(ee.joints[te.jointName]===void 0){const ne=new Group;ne.matrixAutoUpdate=!1,ne.visible=!1,ee.joints[te.jointName]=ne,ee.add(ne)}return ee.joints[te.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(ee,te,ne){if(this.texture===null){const re=new Texture,se=ee.properties.get(re);se.__webglTexture=te.texture,(te.depthNear!=ne.depthNear||te.depthFar!=ne.depthFar)&&(this.depthNear=te.depthNear,this.depthFar=te.depthFar),this.texture=re}}getMesh(ee){if(this.texture!==null&&this.mesh===null){const te=ee.cameras[0].viewport,ne=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:te.z},depthHeight:{value:te.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),ne)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(ee,te){super();const ne=this;let re=null,se=1,ae=null,oe="local-floor",le=1,ce=null,he=null,fe=null,ue=null,de=null,ge=null;const me=new WebXRDepthSensing,ve=te.getContextAttributes();let pe=null,ye=null;const _e=[],xe=[],Se=new Vector2;let be=null;const Ee=new PerspectiveCamera;Ee.layers.enable(1),Ee.viewport=new Vector4;const Pe=new PerspectiveCamera;Pe.layers.enable(2),Pe.viewport=new Vector4;const we=[Ee,Pe],Me=new ArrayCamera;Me.layers.enable(1),Me.layers.enable(2);let De=null,ke=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ge){let He=_e[Ge];return He===void 0&&(He=new WebXRController,_e[Ge]=He),He.getTargetRaySpace()},this.getControllerGrip=function(Ge){let He=_e[Ge];return He===void 0&&(He=new WebXRController,_e[Ge]=He),He.getGripSpace()},this.getHand=function(Ge){let He=_e[Ge];return He===void 0&&(He=new WebXRController,_e[Ge]=He),He.getHandSpace()};function ze(Ge){const He=xe.indexOf(Ge.inputSource);if(He===-1)return;const Je=_e[He];Je!==void 0&&(Je.update(Ge.inputSource,Ge.frame,ce||ae),Je.dispatchEvent({type:Ge.type,data:Ge.inputSource}))}function Ve(){re.removeEventListener("select",ze),re.removeEventListener("selectstart",ze),re.removeEventListener("selectend",ze),re.removeEventListener("squeeze",ze),re.removeEventListener("squeezestart",ze),re.removeEventListener("squeezeend",ze),re.removeEventListener("end",Ve),re.removeEventListener("inputsourceschange",Ue);for(let Ge=0;Ge<_e.length;Ge++){const He=xe[Ge];He!==null&&(xe[Ge]=null,_e[Ge].disconnect(He))}De=null,ke=null,me.reset(),ee.setRenderTarget(pe),de=null,ue=null,fe=null,re=null,ye=null,Xe.stop(),ne.isPresenting=!1,ee.setPixelRatio(be),ee.setSize(Se.width,Se.height,!1),ne.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ge){se=Ge,ne.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ge){oe=Ge,ne.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ce||ae},this.setReferenceSpace=function(Ge){ce=Ge},this.getBaseLayer=function(){return ue!==null?ue:de},this.getBinding=function(){return fe},this.getFrame=function(){return ge},this.getSession=function(){return re},this.setSession=async function(Ge){if(re=Ge,re!==null){if(pe=ee.getRenderTarget(),re.addEventListener("select",ze),re.addEventListener("selectstart",ze),re.addEventListener("selectend",ze),re.addEventListener("squeeze",ze),re.addEventListener("squeezestart",ze),re.addEventListener("squeezeend",ze),re.addEventListener("end",Ve),re.addEventListener("inputsourceschange",Ue),ve.xrCompatible!==!0&&await te.makeXRCompatible(),be=ee.getPixelRatio(),ee.getSize(Se),re.renderState.layers===void 0){const He={antialias:ve.antialias,alpha:!0,depth:ve.depth,stencil:ve.stencil,framebufferScaleFactor:se};de=new XRWebGLLayer(re,te,He),re.updateRenderState({baseLayer:de}),ee.setPixelRatio(1),ee.setSize(de.framebufferWidth,de.framebufferHeight,!1),ye=new WebGLRenderTarget(de.framebufferWidth,de.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:ee.outputColorSpace,stencilBuffer:ve.stencil})}else{let He=null,Je=null,et=null;ve.depth&&(et=ve.stencil?te.DEPTH24_STENCIL8:te.DEPTH_COMPONENT24,He=ve.stencil?DepthStencilFormat:DepthFormat,Je=ve.stencil?UnsignedInt248Type:UnsignedIntType);const ht={colorFormat:te.RGBA8,depthFormat:et,scaleFactor:se};fe=new XRWebGLBinding(re,te),ue=fe.createProjectionLayer(ht),re.updateRenderState({layers:[ue]}),ee.setPixelRatio(1),ee.setSize(ue.textureWidth,ue.textureHeight,!1),ye=new WebGLRenderTarget(ue.textureWidth,ue.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(ue.textureWidth,ue.textureHeight,Je,void 0,void 0,void 0,void 0,void 0,void 0,He),stencilBuffer:ve.stencil,colorSpace:ee.outputColorSpace,samples:ve.antialias?4:0,resolveDepthBuffer:ue.ignoreDepthValues===!1})}ye.isXRRenderTarget=!0,this.setFoveation(le),ce=null,ae=await re.requestReferenceSpace(oe),Xe.setContext(re),Xe.start(),ne.isPresenting=!0,ne.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(re!==null)return re.environmentBlendMode},this.getDepthTexture=function(){return me.getDepthTexture()};function Ue(Ge){for(let He=0;He<Ge.removed.length;He++){const Je=Ge.removed[He],et=xe.indexOf(Je);et>=0&&(xe[et]=null,_e[et].disconnect(Je))}for(let He=0;He<Ge.added.length;He++){const Je=Ge.added[He];let et=xe.indexOf(Je);if(et===-1){for(let vt=0;vt<_e.length;vt++)if(vt>=xe.length){xe.push(Je),et=vt;break}else if(xe[vt]===null){xe[vt]=Je,et=vt;break}if(et===-1)break}const ht=_e[et];ht&&ht.connect(Je)}}const Ae=new Vector3,Fe=new Vector3;function Te(Ge,He,Je){Ae.setFromMatrixPosition(He.matrixWorld),Fe.setFromMatrixPosition(Je.matrixWorld);const et=Ae.distanceTo(Fe),ht=He.projectionMatrix.elements,vt=Je.projectionMatrix.elements,gt=ht[14]/(ht[10]-1),yt=ht[14]/(ht[10]+1),Oe=(ht[9]+1)/ht[5],Ze=(ht[9]-1)/ht[5],qe=(ht[8]-1)/ht[0],ut=(vt[8]+1)/vt[0],at=gt*qe,We=gt*ut,ft=et/(-qe+ut),St=ft*-qe;He.matrixWorld.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.translateX(St),Ge.translateZ(ft),Ge.matrixWorld.compose(Ge.position,Ge.quaternion,Ge.scale),Ge.matrixWorldInverse.copy(Ge.matrixWorld).invert();const $e=gt+ft,Re=yt+ft,Qe=at-St,ct=We+(et-St),lt=Oe*yt/Re*$e,ot=Ze*yt/Re*$e;Ge.projectionMatrix.makePerspective(Qe,ct,lt,ot,$e,Re),Ge.projectionMatrixInverse.copy(Ge.projectionMatrix).invert()}function Ce(Ge,He){He===null?Ge.matrixWorld.copy(Ge.matrix):Ge.matrixWorld.multiplyMatrices(He.matrixWorld,Ge.matrix),Ge.matrixWorldInverse.copy(Ge.matrixWorld).invert()}this.updateCamera=function(Ge){if(re===null)return;me.texture!==null&&(Ge.near=me.depthNear,Ge.far=me.depthFar),Me.near=Pe.near=Ee.near=Ge.near,Me.far=Pe.far=Ee.far=Ge.far,(De!==Me.near||ke!==Me.far)&&(re.updateRenderState({depthNear:Me.near,depthFar:Me.far}),De=Me.near,ke=Me.far,Ee.near=De,Ee.far=ke,Pe.near=De,Pe.far=ke,Ee.updateProjectionMatrix(),Pe.updateProjectionMatrix(),Ge.updateProjectionMatrix());const He=Ge.parent,Je=Me.cameras;Ce(Me,He);for(let et=0;et<Je.length;et++)Ce(Je[et],He);Je.length===2?Te(Me,Ee,Pe):Me.projectionMatrix.copy(Ee.projectionMatrix),Le(Ge,Me,He)};function Le(Ge,He,Je){Je===null?Ge.matrix.copy(He.matrixWorld):(Ge.matrix.copy(Je.matrixWorld),Ge.matrix.invert(),Ge.matrix.multiply(He.matrixWorld)),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.updateMatrixWorld(!0),Ge.projectionMatrix.copy(He.projectionMatrix),Ge.projectionMatrixInverse.copy(He.projectionMatrixInverse),Ge.isPerspectiveCamera&&(Ge.fov=RAD2DEG*2*Math.atan(1/Ge.projectionMatrix.elements[5]),Ge.zoom=1)}this.getCamera=function(){return Me},this.getFoveation=function(){if(!(ue===null&&de===null))return le},this.setFoveation=function(Ge){le=Ge,ue!==null&&(ue.fixedFoveation=Ge),de!==null&&de.fixedFoveation!==void 0&&(de.fixedFoveation=Ge)},this.hasDepthSensing=function(){return me.texture!==null},this.getDepthSensingMesh=function(){return me.getMesh(Me)};let Be=null;function st(Ge,He){if(he=He.getViewerPose(ce||ae),ge=He,he!==null){const Je=he.views;de!==null&&(ee.setRenderTargetFramebuffer(ye,de.framebuffer),ee.setRenderTarget(ye));let et=!1;Je.length!==Me.cameras.length&&(Me.cameras.length=0,et=!0);for(let vt=0;vt<Je.length;vt++){const gt=Je[vt];let yt=null;if(de!==null)yt=de.getViewport(gt);else{const Ze=fe.getViewSubImage(ue,gt);yt=Ze.viewport,vt===0&&(ee.setRenderTargetTextures(ye,Ze.colorTexture,ue.ignoreDepthValues?void 0:Ze.depthStencilTexture),ee.setRenderTarget(ye))}let Oe=we[vt];Oe===void 0&&(Oe=new PerspectiveCamera,Oe.layers.enable(vt),Oe.viewport=new Vector4,we[vt]=Oe),Oe.matrix.fromArray(gt.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(gt.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(yt.x,yt.y,yt.width,yt.height),vt===0&&(Me.matrix.copy(Oe.matrix),Me.matrix.decompose(Me.position,Me.quaternion,Me.scale)),et===!0&&Me.cameras.push(Oe)}const ht=re.enabledFeatures;if(ht&&ht.includes("depth-sensing")){const vt=fe.getDepthInformation(Je[0]);vt&&vt.isValid&&vt.texture&&me.init(ee,vt,re.renderState)}}for(let Je=0;Je<_e.length;Je++){const et=xe[Je],ht=_e[Je];et!==null&&ht!==void 0&&ht.update(et,He,ce||ae)}Be&&Be(Ge,He),He.detectedPlanes&&ne.dispatchEvent({type:"planesdetected",data:He}),ge=null}const Xe=new WebGLAnimation;Xe.setAnimationLoop(st),this.setAnimationLoop=function(Ge){Be=Ge},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(ie,ee){function te(ve,pe){ve.matrixAutoUpdate===!0&&ve.updateMatrix(),pe.value.copy(ve.matrix)}function ne(ve,pe){pe.color.getRGB(ve.fogColor.value,getUnlitUniformColorSpace(ie)),pe.isFog?(ve.fogNear.value=pe.near,ve.fogFar.value=pe.far):pe.isFogExp2&&(ve.fogDensity.value=pe.density)}function re(ve,pe,ye,_e,xe){pe.isMeshBasicMaterial||pe.isMeshLambertMaterial?se(ve,pe):pe.isMeshToonMaterial?(se(ve,pe),fe(ve,pe)):pe.isMeshPhongMaterial?(se(ve,pe),he(ve,pe)):pe.isMeshStandardMaterial?(se(ve,pe),ue(ve,pe),pe.isMeshPhysicalMaterial&&de(ve,pe,xe)):pe.isMeshMatcapMaterial?(se(ve,pe),ge(ve,pe)):pe.isMeshDepthMaterial?se(ve,pe):pe.isMeshDistanceMaterial?(se(ve,pe),me(ve,pe)):pe.isMeshNormalMaterial?se(ve,pe):pe.isLineBasicMaterial?(ae(ve,pe),pe.isLineDashedMaterial&&oe(ve,pe)):pe.isPointsMaterial?le(ve,pe,ye,_e):pe.isSpriteMaterial?ce(ve,pe):pe.isShadowMaterial?(ve.color.value.copy(pe.color),ve.opacity.value=pe.opacity):pe.isShaderMaterial&&(pe.uniformsNeedUpdate=!1)}function se(ve,pe){ve.opacity.value=pe.opacity,pe.color&&ve.diffuse.value.copy(pe.color),pe.emissive&&ve.emissive.value.copy(pe.emissive).multiplyScalar(pe.emissiveIntensity),pe.map&&(ve.map.value=pe.map,te(pe.map,ve.mapTransform)),pe.alphaMap&&(ve.alphaMap.value=pe.alphaMap,te(pe.alphaMap,ve.alphaMapTransform)),pe.bumpMap&&(ve.bumpMap.value=pe.bumpMap,te(pe.bumpMap,ve.bumpMapTransform),ve.bumpScale.value=pe.bumpScale,pe.side===BackSide&&(ve.bumpScale.value*=-1)),pe.normalMap&&(ve.normalMap.value=pe.normalMap,te(pe.normalMap,ve.normalMapTransform),ve.normalScale.value.copy(pe.normalScale),pe.side===BackSide&&ve.normalScale.value.negate()),pe.displacementMap&&(ve.displacementMap.value=pe.displacementMap,te(pe.displacementMap,ve.displacementMapTransform),ve.displacementScale.value=pe.displacementScale,ve.displacementBias.value=pe.displacementBias),pe.emissiveMap&&(ve.emissiveMap.value=pe.emissiveMap,te(pe.emissiveMap,ve.emissiveMapTransform)),pe.specularMap&&(ve.specularMap.value=pe.specularMap,te(pe.specularMap,ve.specularMapTransform)),pe.alphaTest>0&&(ve.alphaTest.value=pe.alphaTest);const ye=ee.get(pe),_e=ye.envMap,xe=ye.envMapRotation;_e&&(ve.envMap.value=_e,_e1.copy(xe),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,_e.isCubeTexture&&_e.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),ve.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),ve.flipEnvMap.value=_e.isCubeTexture&&_e.isRenderTargetTexture===!1?-1:1,ve.reflectivity.value=pe.reflectivity,ve.ior.value=pe.ior,ve.refractionRatio.value=pe.refractionRatio),pe.lightMap&&(ve.lightMap.value=pe.lightMap,ve.lightMapIntensity.value=pe.lightMapIntensity,te(pe.lightMap,ve.lightMapTransform)),pe.aoMap&&(ve.aoMap.value=pe.aoMap,ve.aoMapIntensity.value=pe.aoMapIntensity,te(pe.aoMap,ve.aoMapTransform))}function ae(ve,pe){ve.diffuse.value.copy(pe.color),ve.opacity.value=pe.opacity,pe.map&&(ve.map.value=pe.map,te(pe.map,ve.mapTransform))}function oe(ve,pe){ve.dashSize.value=pe.dashSize,ve.totalSize.value=pe.dashSize+pe.gapSize,ve.scale.value=pe.scale}function le(ve,pe,ye,_e){ve.diffuse.value.copy(pe.color),ve.opacity.value=pe.opacity,ve.size.value=pe.size*ye,ve.scale.value=_e*.5,pe.map&&(ve.map.value=pe.map,te(pe.map,ve.uvTransform)),pe.alphaMap&&(ve.alphaMap.value=pe.alphaMap,te(pe.alphaMap,ve.alphaMapTransform)),pe.alphaTest>0&&(ve.alphaTest.value=pe.alphaTest)}function ce(ve,pe){ve.diffuse.value.copy(pe.color),ve.opacity.value=pe.opacity,ve.rotation.value=pe.rotation,pe.map&&(ve.map.value=pe.map,te(pe.map,ve.mapTransform)),pe.alphaMap&&(ve.alphaMap.value=pe.alphaMap,te(pe.alphaMap,ve.alphaMapTransform)),pe.alphaTest>0&&(ve.alphaTest.value=pe.alphaTest)}function he(ve,pe){ve.specular.value.copy(pe.specular),ve.shininess.value=Math.max(pe.shininess,1e-4)}function fe(ve,pe){pe.gradientMap&&(ve.gradientMap.value=pe.gradientMap)}function ue(ve,pe){ve.metalness.value=pe.metalness,pe.metalnessMap&&(ve.metalnessMap.value=pe.metalnessMap,te(pe.metalnessMap,ve.metalnessMapTransform)),ve.roughness.value=pe.roughness,pe.roughnessMap&&(ve.roughnessMap.value=pe.roughnessMap,te(pe.roughnessMap,ve.roughnessMapTransform)),pe.envMap&&(ve.envMapIntensity.value=pe.envMapIntensity)}function de(ve,pe,ye){ve.ior.value=pe.ior,pe.sheen>0&&(ve.sheenColor.value.copy(pe.sheenColor).multiplyScalar(pe.sheen),ve.sheenRoughness.value=pe.sheenRoughness,pe.sheenColorMap&&(ve.sheenColorMap.value=pe.sheenColorMap,te(pe.sheenColorMap,ve.sheenColorMapTransform)),pe.sheenRoughnessMap&&(ve.sheenRoughnessMap.value=pe.sheenRoughnessMap,te(pe.sheenRoughnessMap,ve.sheenRoughnessMapTransform))),pe.clearcoat>0&&(ve.clearcoat.value=pe.clearcoat,ve.clearcoatRoughness.value=pe.clearcoatRoughness,pe.clearcoatMap&&(ve.clearcoatMap.value=pe.clearcoatMap,te(pe.clearcoatMap,ve.clearcoatMapTransform)),pe.clearcoatRoughnessMap&&(ve.clearcoatRoughnessMap.value=pe.clearcoatRoughnessMap,te(pe.clearcoatRoughnessMap,ve.clearcoatRoughnessMapTransform)),pe.clearcoatNormalMap&&(ve.clearcoatNormalMap.value=pe.clearcoatNormalMap,te(pe.clearcoatNormalMap,ve.clearcoatNormalMapTransform),ve.clearcoatNormalScale.value.copy(pe.clearcoatNormalScale),pe.side===BackSide&&ve.clearcoatNormalScale.value.negate())),pe.dispersion>0&&(ve.dispersion.value=pe.dispersion),pe.iridescence>0&&(ve.iridescence.value=pe.iridescence,ve.iridescenceIOR.value=pe.iridescenceIOR,ve.iridescenceThicknessMinimum.value=pe.iridescenceThicknessRange[0],ve.iridescenceThicknessMaximum.value=pe.iridescenceThicknessRange[1],pe.iridescenceMap&&(ve.iridescenceMap.value=pe.iridescenceMap,te(pe.iridescenceMap,ve.iridescenceMapTransform)),pe.iridescenceThicknessMap&&(ve.iridescenceThicknessMap.value=pe.iridescenceThicknessMap,te(pe.iridescenceThicknessMap,ve.iridescenceThicknessMapTransform))),pe.transmission>0&&(ve.transmission.value=pe.transmission,ve.transmissionSamplerMap.value=ye.texture,ve.transmissionSamplerSize.value.set(ye.width,ye.height),pe.transmissionMap&&(ve.transmissionMap.value=pe.transmissionMap,te(pe.transmissionMap,ve.transmissionMapTransform)),ve.thickness.value=pe.thickness,pe.thicknessMap&&(ve.thicknessMap.value=pe.thicknessMap,te(pe.thicknessMap,ve.thicknessMapTransform)),ve.attenuationDistance.value=pe.attenuationDistance,ve.attenuationColor.value.copy(pe.attenuationColor)),pe.anisotropy>0&&(ve.anisotropyVector.value.set(pe.anisotropy*Math.cos(pe.anisotropyRotation),pe.anisotropy*Math.sin(pe.anisotropyRotation)),pe.anisotropyMap&&(ve.anisotropyMap.value=pe.anisotropyMap,te(pe.anisotropyMap,ve.anisotropyMapTransform))),ve.specularIntensity.value=pe.specularIntensity,ve.specularColor.value.copy(pe.specularColor),pe.specularColorMap&&(ve.specularColorMap.value=pe.specularColorMap,te(pe.specularColorMap,ve.specularColorMapTransform)),pe.specularIntensityMap&&(ve.specularIntensityMap.value=pe.specularIntensityMap,te(pe.specularIntensityMap,ve.specularIntensityMapTransform))}function ge(ve,pe){pe.matcap&&(ve.matcap.value=pe.matcap)}function me(ve,pe){const ye=ee.get(pe).light;ve.referencePosition.value.setFromMatrixPosition(ye.matrixWorld),ve.nearDistance.value=ye.shadow.camera.near,ve.farDistance.value=ye.shadow.camera.far}return{refreshFogUniforms:ne,refreshMaterialUniforms:re}}function WebGLUniformsGroups(ie,ee,te,ne){let re={},se={},ae=[];const oe=ie.getParameter(ie.MAX_UNIFORM_BUFFER_BINDINGS);function le(ye,_e){const xe=_e.program;ne.uniformBlockBinding(ye,xe)}function ce(ye,_e){let xe=re[ye.id];xe===void 0&&(ge(ye),xe=he(ye),re[ye.id]=xe,ye.addEventListener("dispose",ve));const Se=_e.program;ne.updateUBOMapping(ye,Se);const be=ee.render.frame;se[ye.id]!==be&&(ue(ye),se[ye.id]=be)}function he(ye){const _e=fe();ye.__bindingPointIndex=_e;const xe=ie.createBuffer(),Se=ye.__size,be=ye.usage;return ie.bindBuffer(ie.UNIFORM_BUFFER,xe),ie.bufferData(ie.UNIFORM_BUFFER,Se,be),ie.bindBuffer(ie.UNIFORM_BUFFER,null),ie.bindBufferBase(ie.UNIFORM_BUFFER,_e,xe),xe}function fe(){for(let ye=0;ye<oe;ye++)if(ae.indexOf(ye)===-1)return ae.push(ye),ye;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ue(ye){const _e=re[ye.id],xe=ye.uniforms,Se=ye.__cache;ie.bindBuffer(ie.UNIFORM_BUFFER,_e);for(let be=0,Ee=xe.length;be<Ee;be++){const Pe=Array.isArray(xe[be])?xe[be]:[xe[be]];for(let we=0,Me=Pe.length;we<Me;we++){const De=Pe[we];if(de(De,be,we,Se)===!0){const ke=De.__offset,ze=Array.isArray(De.value)?De.value:[De.value];let Ve=0;for(let Ue=0;Ue<ze.length;Ue++){const Ae=ze[Ue],Fe=me(Ae);typeof Ae=="number"||typeof Ae=="boolean"?(De.__data[0]=Ae,ie.bufferSubData(ie.UNIFORM_BUFFER,ke+Ve,De.__data)):Ae.isMatrix3?(De.__data[0]=Ae.elements[0],De.__data[1]=Ae.elements[1],De.__data[2]=Ae.elements[2],De.__data[3]=0,De.__data[4]=Ae.elements[3],De.__data[5]=Ae.elements[4],De.__data[6]=Ae.elements[5],De.__data[7]=0,De.__data[8]=Ae.elements[6],De.__data[9]=Ae.elements[7],De.__data[10]=Ae.elements[8],De.__data[11]=0):(Ae.toArray(De.__data,Ve),Ve+=Fe.storage/Float32Array.BYTES_PER_ELEMENT)}ie.bufferSubData(ie.UNIFORM_BUFFER,ke,De.__data)}}}ie.bindBuffer(ie.UNIFORM_BUFFER,null)}function de(ye,_e,xe,Se){const be=ye.value,Ee=_e+"_"+xe;if(Se[Ee]===void 0)return typeof be=="number"||typeof be=="boolean"?Se[Ee]=be:Se[Ee]=be.clone(),!0;{const Pe=Se[Ee];if(typeof be=="number"||typeof be=="boolean"){if(Pe!==be)return Se[Ee]=be,!0}else if(Pe.equals(be)===!1)return Pe.copy(be),!0}return!1}function ge(ye){const _e=ye.uniforms;let xe=0;const Se=16;for(let Ee=0,Pe=_e.length;Ee<Pe;Ee++){const we=Array.isArray(_e[Ee])?_e[Ee]:[_e[Ee]];for(let Me=0,De=we.length;Me<De;Me++){const ke=we[Me],ze=Array.isArray(ke.value)?ke.value:[ke.value];for(let Ve=0,Ue=ze.length;Ve<Ue;Ve++){const Ae=ze[Ve],Fe=me(Ae),Te=xe%Se,Ce=Te%Fe.boundary,Le=Te+Ce;xe+=Ce,Le!==0&&Se-Le<Fe.storage&&(xe+=Se-Le),ke.__data=new Float32Array(Fe.storage/Float32Array.BYTES_PER_ELEMENT),ke.__offset=xe,xe+=Fe.storage}}}const be=xe%Se;return be>0&&(xe+=Se-be),ye.__size=xe,ye.__cache={},this}function me(ye){const _e={boundary:0,storage:0};return typeof ye=="number"||typeof ye=="boolean"?(_e.boundary=4,_e.storage=4):ye.isVector2?(_e.boundary=8,_e.storage=8):ye.isVector3||ye.isColor?(_e.boundary=16,_e.storage=12):ye.isVector4?(_e.boundary=16,_e.storage=16):ye.isMatrix3?(_e.boundary=48,_e.storage=48):ye.isMatrix4?(_e.boundary=64,_e.storage=64):ye.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ye),_e}function ve(ye){const _e=ye.target;_e.removeEventListener("dispose",ve);const xe=ae.indexOf(_e.__bindingPointIndex);ae.splice(xe,1),ie.deleteBuffer(re[_e.id]),delete re[_e.id],delete se[_e.id]}function pe(){for(const ye in re)ie.deleteBuffer(re[ye]);ae=[],re={},se={}}return{bind:le,update:ce,dispose:pe}}class WebGLRenderer{constructor(ee={}){const{canvas:te=createCanvasElement(),context:ne=null,depth:re=!0,stencil:se=!1,alpha:ae=!1,antialias:oe=!1,premultipliedAlpha:le=!0,preserveDrawingBuffer:ce=!1,powerPreference:he="default",failIfMajorPerformanceCaveat:fe=!1}=ee;this.isWebGLRenderer=!0;let ue;if(ne!==null){if(typeof WebGLRenderingContext<"u"&&ne instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ue=ne.getContextAttributes().alpha}else ue=ae;const de=new Uint32Array(4),ge=new Int32Array(4);let me=null,ve=null;const pe=[],ye=[];this.domElement=te,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const _e=this;let xe=!1,Se=0,be=0,Ee=null,Pe=-1,we=null;const Me=new Vector4,De=new Vector4;let ke=null;const ze=new Color(0);let Ve=0,Ue=te.width,Ae=te.height,Fe=1,Te=null,Ce=null;const Le=new Vector4(0,0,Ue,Ae),Be=new Vector4(0,0,Ue,Ae);let st=!1;const Xe=new Frustum;let Ge=!1,He=!1;const Je=new Matrix4,et=new Vector3,ht=new Vector4,vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let gt=!1;function yt(){return Ee===null?Fe:1}let Oe=ne;function Ze(Ne,je){return te.getContext(Ne,je)}try{const Ne={alpha:!0,depth:re,stencil:se,antialias:oe,premultipliedAlpha:le,preserveDrawingBuffer:ce,powerPreference:he,failIfMajorPerformanceCaveat:fe};if("setAttribute"in te&&te.setAttribute("data-engine",`three.js r${REVISION}`),te.addEventListener("webglcontextlost",nt,!1),te.addEventListener("webglcontextrestored",rt,!1),te.addEventListener("webglcontextcreationerror",pt,!1),Oe===null){const je="webgl2";if(Oe=Ze(je,Ne),Oe===null)throw Ze(je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ne){throw console.error("THREE.WebGLRenderer: "+Ne.message),Ne}let qe,ut,at,We,ft,St,$e,Re,Qe,ct,lt,ot,Et,dt,bt,It,mt,Tt,Nt,zt,Ct,Vt,$t,jt;function Ie(){qe=new WebGLExtensions(Oe),qe.init(),Vt=new WebGLUtils(Oe,qe),ut=new WebGLCapabilities(Oe,qe,ee,Vt),at=new WebGLState(Oe),We=new WebGLInfo(Oe),ft=new WebGLProperties,St=new WebGLTextures(Oe,qe,at,ft,ut,Vt,We),$e=new WebGLCubeMaps(_e),Re=new WebGLCubeUVMaps(_e),Qe=new WebGLAttributes(Oe),$t=new WebGLBindingStates(Oe,Qe),ct=new WebGLGeometries(Oe,Qe,We,$t),lt=new WebGLObjects(Oe,ct,Qe,We),Nt=new WebGLMorphtargets(Oe,ut,St),It=new WebGLClipping(ft),ot=new WebGLPrograms(_e,$e,Re,qe,ut,$t,It),Et=new WebGLMaterials(_e,ft),dt=new WebGLRenderLists,bt=new WebGLRenderStates(qe),Tt=new WebGLBackground(_e,$e,Re,at,lt,ue,le),mt=new WebGLShadowMap(_e,lt,ut),jt=new WebGLUniformsGroups(Oe,We,ut,at),zt=new WebGLBufferRenderer(Oe,qe,We),Ct=new WebGLIndexedBufferRenderer(Oe,qe,We),We.programs=ot.programs,_e.capabilities=ut,_e.extensions=qe,_e.properties=ft,_e.renderLists=dt,_e.shadowMap=mt,_e.state=at,_e.info=We}Ie();const Ye=new WebXRManager(_e,Oe);this.xr=Ye,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){const Ne=qe.get("WEBGL_lose_context");Ne&&Ne.loseContext()},this.forceContextRestore=function(){const Ne=qe.get("WEBGL_lose_context");Ne&&Ne.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(Ne){Ne!==void 0&&(Fe=Ne,this.setSize(Ue,Ae,!1))},this.getSize=function(Ne){return Ne.set(Ue,Ae)},this.setSize=function(Ne,je,it=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ue=Ne,Ae=je,te.width=Math.floor(Ne*Fe),te.height=Math.floor(je*Fe),it===!0&&(te.style.width=Ne+"px",te.style.height=je+"px"),this.setViewport(0,0,Ne,je)},this.getDrawingBufferSize=function(Ne){return Ne.set(Ue*Fe,Ae*Fe).floor()},this.setDrawingBufferSize=function(Ne,je,it){Ue=Ne,Ae=je,Fe=it,te.width=Math.floor(Ne*it),te.height=Math.floor(je*it),this.setViewport(0,0,Ne,je)},this.getCurrentViewport=function(Ne){return Ne.copy(Me)},this.getViewport=function(Ne){return Ne.copy(Le)},this.setViewport=function(Ne,je,it,tt){Ne.isVector4?Le.set(Ne.x,Ne.y,Ne.z,Ne.w):Le.set(Ne,je,it,tt),at.viewport(Me.copy(Le).multiplyScalar(Fe).round())},this.getScissor=function(Ne){return Ne.copy(Be)},this.setScissor=function(Ne,je,it,tt){Ne.isVector4?Be.set(Ne.x,Ne.y,Ne.z,Ne.w):Be.set(Ne,je,it,tt),at.scissor(De.copy(Be).multiplyScalar(Fe).round())},this.getScissorTest=function(){return st},this.setScissorTest=function(Ne){at.setScissorTest(st=Ne)},this.setOpaqueSort=function(Ne){Te=Ne},this.setTransparentSort=function(Ne){Ce=Ne},this.getClearColor=function(Ne){return Ne.copy(Tt.getClearColor())},this.setClearColor=function(){Tt.setClearColor.apply(Tt,arguments)},this.getClearAlpha=function(){return Tt.getClearAlpha()},this.setClearAlpha=function(){Tt.setClearAlpha.apply(Tt,arguments)},this.clear=function(Ne=!0,je=!0,it=!0){let tt=0;if(Ne){let Ke=!1;if(Ee!==null){const _t=Ee.texture.format;Ke=_t===RGBAIntegerFormat||_t===RGIntegerFormat||_t===RedIntegerFormat}if(Ke){const _t=Ee.texture.type,Mt=_t===UnsignedByteType||_t===UnsignedIntType||_t===UnsignedShortType||_t===UnsignedInt248Type||_t===UnsignedShort4444Type||_t===UnsignedShort5551Type,Lt=Tt.getClearColor(),wt=Tt.getClearAlpha(),Rt=Lt.r,Ot=Lt.g,Bt=Lt.b;Mt?(de[0]=Rt,de[1]=Ot,de[2]=Bt,de[3]=wt,Oe.clearBufferuiv(Oe.COLOR,0,de)):(ge[0]=Rt,ge[1]=Ot,ge[2]=Bt,ge[3]=wt,Oe.clearBufferiv(Oe.COLOR,0,ge))}else tt|=Oe.COLOR_BUFFER_BIT}je&&(tt|=Oe.DEPTH_BUFFER_BIT),it&&(tt|=Oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Oe.clear(tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){te.removeEventListener("webglcontextlost",nt,!1),te.removeEventListener("webglcontextrestored",rt,!1),te.removeEventListener("webglcontextcreationerror",pt,!1),dt.dispose(),bt.dispose(),ft.dispose(),$e.dispose(),Re.dispose(),lt.dispose(),$t.dispose(),jt.dispose(),ot.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",Pt),Ye.removeEventListener("sessionend",Wt),xt.stop()};function nt(Ne){Ne.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),xe=!0}function rt(){console.log("THREE.WebGLRenderer: Context Restored."),xe=!1;const Ne=We.autoReset,je=mt.enabled,it=mt.autoUpdate,tt=mt.needsUpdate,Ke=mt.type;Ie(),We.autoReset=Ne,mt.enabled=je,mt.autoUpdate=it,mt.needsUpdate=tt,mt.type=Ke}function pt(Ne){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ne.statusMessage)}function At(Ne){const je=Ne.target;je.removeEventListener("dispose",At),Ut(je)}function Ut(Ne){ti(Ne),ft.remove(Ne)}function ti(Ne){const je=ft.get(Ne).programs;je!==void 0&&(je.forEach(function(it){ot.releaseProgram(it)}),Ne.isShaderMaterial&&ot.releaseShaderCache(Ne))}this.renderBufferDirect=function(Ne,je,it,tt,Ke,_t){je===null&&(je=vt);const Mt=Ke.isMesh&&Ke.matrixWorld.determinant()<0,Lt=ri(Ne,je,it,tt,Ke);at.setMaterial(tt,Mt);let wt=it.index,Rt=1;if(tt.wireframe===!0){if(wt=ct.getWireframeAttribute(it),wt===void 0)return;Rt=2}const Ot=it.drawRange,Bt=it.attributes.position;let Kt=Ot.start*Rt,ii=(Ot.start+Ot.count)*Rt;_t!==null&&(Kt=Math.max(Kt,_t.start*Rt),ii=Math.min(ii,(_t.start+_t.count)*Rt)),wt!==null?(Kt=Math.max(Kt,0),ii=Math.min(ii,wt.count)):Bt!=null&&(Kt=Math.max(Kt,0),ii=Math.min(ii,Bt.count));const Zt=ii-Kt;if(Zt<0||Zt===1/0)return;$t.setup(Ke,tt,Lt,it,wt);let hi,Yt=zt;if(wt!==null&&(hi=Qe.get(wt),Yt=Ct,Yt.setIndex(hi)),Ke.isMesh)tt.wireframe===!0?(at.setLineWidth(tt.wireframeLinewidth*yt()),Yt.setMode(Oe.LINES)):Yt.setMode(Oe.TRIANGLES);else if(Ke.isLine){let Dt=tt.linewidth;Dt===void 0&&(Dt=1),at.setLineWidth(Dt*yt()),Ke.isLineSegments?Yt.setMode(Oe.LINES):Ke.isLineLoop?Yt.setMode(Oe.LINE_LOOP):Yt.setMode(Oe.LINE_STRIP)}else Ke.isPoints?Yt.setMode(Oe.POINTS):Ke.isSprite&&Yt.setMode(Oe.TRIANGLES);if(Ke.isBatchedMesh)if(Ke._multiDrawInstances!==null)Yt.renderMultiDrawInstances(Ke._multiDrawStarts,Ke._multiDrawCounts,Ke._multiDrawCount,Ke._multiDrawInstances);else if(qe.get("WEBGL_multi_draw"))Yt.renderMultiDraw(Ke._multiDrawStarts,Ke._multiDrawCounts,Ke._multiDrawCount);else{const Dt=Ke._multiDrawStarts,fi=Ke._multiDrawCounts,Jt=Ke._multiDrawCount,gi=wt?Qe.get(wt).bytesPerElement:1,yi=ft.get(tt).currentProgram.getUniforms();for(let pi=0;pi<Jt;pi++)yi.setValue(Oe,"_gl_DrawID",pi),Yt.render(Dt[pi]/gi,fi[pi])}else if(Ke.isInstancedMesh)Yt.renderInstances(Kt,Zt,Ke.count);else if(it.isInstancedBufferGeometry){const Dt=it._maxInstanceCount!==void 0?it._maxInstanceCount:1/0,fi=Math.min(it.instanceCount,Dt);Yt.renderInstances(Kt,Zt,fi)}else Yt.render(Kt,Zt)};function Qt(Ne,je,it){Ne.transparent===!0&&Ne.side===DoubleSide&&Ne.forceSinglePass===!1?(Ne.side=BackSide,Ne.needsUpdate=!0,ni(Ne,je,it),Ne.side=FrontSide,Ne.needsUpdate=!0,ni(Ne,je,it),Ne.side=DoubleSide):ni(Ne,je,it)}this.compile=function(Ne,je,it=null){it===null&&(it=Ne),ve=bt.get(it),ve.init(je),ye.push(ve),it.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(je.layers)&&(ve.pushLight(Ke),Ke.castShadow&&ve.pushShadow(Ke))}),Ne!==it&&Ne.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(je.layers)&&(ve.pushLight(Ke),Ke.castShadow&&ve.pushShadow(Ke))}),ve.setupLights();const tt=new Set;return Ne.traverse(function(Ke){const _t=Ke.material;if(_t)if(Array.isArray(_t))for(let Mt=0;Mt<_t.length;Mt++){const Lt=_t[Mt];Qt(Lt,it,Ke),tt.add(Lt)}else Qt(_t,it,Ke),tt.add(_t)}),ye.pop(),ve=null,tt},this.compileAsync=function(Ne,je,it=null){const tt=this.compile(Ne,je,it);return new Promise(Ke=>{function _t(){if(tt.forEach(function(Mt){ft.get(Mt).currentProgram.isReady()&&tt.delete(Mt)}),tt.size===0){Ke(Ne);return}setTimeout(_t,10)}qe.get("KHR_parallel_shader_compile")!==null?_t():setTimeout(_t,10)})};let qt=null;function Ft(Ne){qt&&qt(Ne)}function Pt(){xt.stop()}function Wt(){xt.start()}const xt=new WebGLAnimation;xt.setAnimationLoop(Ft),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(Ne){qt=Ne,Ye.setAnimationLoop(Ne),Ne===null?xt.stop():xt.start()},Ye.addEventListener("sessionstart",Pt),Ye.addEventListener("sessionend",Wt),this.render=function(Ne,je){if(je!==void 0&&je.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(xe===!0)return;if(Ne.matrixWorldAutoUpdate===!0&&Ne.updateMatrixWorld(),je.parent===null&&je.matrixWorldAutoUpdate===!0&&je.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(je),je=Ye.getCamera()),Ne.isScene===!0&&Ne.onBeforeRender(_e,Ne,je,Ee),ve=bt.get(Ne,ye.length),ve.init(je),ye.push(ve),Je.multiplyMatrices(je.projectionMatrix,je.matrixWorldInverse),Xe.setFromProjectionMatrix(Je),He=this.localClippingEnabled,Ge=It.init(this.clippingPlanes,He),me=dt.get(Ne,pe.length),me.init(),pe.push(me),Ye.enabled===!0&&Ye.isPresenting===!0){const _t=_e.xr.getDepthSensingMesh();_t!==null&&Gt(_t,je,-1/0,_e.sortObjects)}Gt(Ne,je,0,_e.sortObjects),me.finish(),_e.sortObjects===!0&&me.sort(Te,Ce),gt=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,gt&&Tt.addToRenderList(me,Ne),this.info.render.frame++,Ge===!0&&It.beginShadows();const it=ve.state.shadowsArray;mt.render(it,Ne,je),Ge===!0&&It.endShadows(),this.info.autoReset===!0&&this.info.reset();const tt=me.opaque,Ke=me.transmissive;if(ve.setupLights(),je.isArrayCamera){const _t=je.cameras;if(Ke.length>0)for(let Mt=0,Lt=_t.length;Mt<Lt;Mt++){const wt=_t[Mt];Ht(tt,Ke,Ne,wt)}gt&&Tt.render(Ne);for(let Mt=0,Lt=_t.length;Mt<Lt;Mt++){const wt=_t[Mt];kt(me,Ne,wt,wt.viewport)}}else Ke.length>0&&Ht(tt,Ke,Ne,je),gt&&Tt.render(Ne),kt(me,Ne,je);Ee!==null&&(St.updateMultisampleRenderTarget(Ee),St.updateRenderTargetMipmap(Ee)),Ne.isScene===!0&&Ne.onAfterRender(_e,Ne,je),$t.resetDefaultState(),Pe=-1,we=null,ye.pop(),ye.length>0?(ve=ye[ye.length-1],Ge===!0&&It.setGlobalState(_e.clippingPlanes,ve.state.camera)):ve=null,pe.pop(),pe.length>0?me=pe[pe.length-1]:me=null};function Gt(Ne,je,it,tt){if(Ne.visible===!1)return;if(Ne.layers.test(je.layers)){if(Ne.isGroup)it=Ne.renderOrder;else if(Ne.isLOD)Ne.autoUpdate===!0&&Ne.update(je);else if(Ne.isLight)ve.pushLight(Ne),Ne.castShadow&&ve.pushShadow(Ne);else if(Ne.isSprite){if(!Ne.frustumCulled||Xe.intersectsSprite(Ne)){tt&&ht.setFromMatrixPosition(Ne.matrixWorld).applyMatrix4(Je);const Mt=lt.update(Ne),Lt=Ne.material;Lt.visible&&me.push(Ne,Mt,Lt,it,ht.z,null)}}else if((Ne.isMesh||Ne.isLine||Ne.isPoints)&&(!Ne.frustumCulled||Xe.intersectsObject(Ne))){const Mt=lt.update(Ne),Lt=Ne.material;if(tt&&(Ne.boundingSphere!==void 0?(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),ht.copy(Ne.boundingSphere.center)):(Mt.boundingSphere===null&&Mt.computeBoundingSphere(),ht.copy(Mt.boundingSphere.center)),ht.applyMatrix4(Ne.matrixWorld).applyMatrix4(Je)),Array.isArray(Lt)){const wt=Mt.groups;for(let Rt=0,Ot=wt.length;Rt<Ot;Rt++){const Bt=wt[Rt],Kt=Lt[Bt.materialIndex];Kt&&Kt.visible&&me.push(Ne,Mt,Kt,it,ht.z,Bt)}}else Lt.visible&&me.push(Ne,Mt,Lt,it,ht.z,null)}}const _t=Ne.children;for(let Mt=0,Lt=_t.length;Mt<Lt;Mt++)Gt(_t[Mt],je,it,tt)}function kt(Ne,je,it,tt){const Ke=Ne.opaque,_t=Ne.transmissive,Mt=Ne.transparent;ve.setupLightsView(it),Ge===!0&&It.setGlobalState(_e.clippingPlanes,it),tt&&at.viewport(Me.copy(tt)),Ke.length>0&&ai(Ke,je,it),_t.length>0&&ai(_t,je,it),Mt.length>0&&ai(Mt,je,it),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function Ht(Ne,je,it,tt){if((it.isScene===!0?it.overrideMaterial:null)!==null)return;ve.state.transmissionRenderTarget[tt.id]===void 0&&(ve.state.transmissionRenderTarget[tt.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:qe.has("EXT_color_buffer_half_float")||qe.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:se,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const _t=ve.state.transmissionRenderTarget[tt.id],Mt=tt.viewport||Me;_t.setSize(Mt.z,Mt.w);const Lt=_e.getRenderTarget();_e.setRenderTarget(_t),_e.getClearColor(ze),Ve=_e.getClearAlpha(),Ve<1&&_e.setClearColor(16777215,.5),_e.clear(),gt&&Tt.render(it);const wt=_e.toneMapping;_e.toneMapping=NoToneMapping;const Rt=tt.viewport;if(tt.viewport!==void 0&&(tt.viewport=void 0),ve.setupLightsView(tt),Ge===!0&&It.setGlobalState(_e.clippingPlanes,tt),ai(Ne,it,tt),St.updateMultisampleRenderTarget(_t),St.updateRenderTargetMipmap(_t),qe.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Bt=0,Kt=je.length;Bt<Kt;Bt++){const ii=je[Bt],Zt=ii.object,hi=ii.geometry,Yt=ii.material,Dt=ii.group;if(Yt.side===DoubleSide&&Zt.layers.test(tt.layers)){const fi=Yt.side;Yt.side=BackSide,Yt.needsUpdate=!0,Xt(Zt,it,tt,hi,Yt,Dt),Yt.side=fi,Yt.needsUpdate=!0,Ot=!0}}Ot===!0&&(St.updateMultisampleRenderTarget(_t),St.updateRenderTargetMipmap(_t))}_e.setRenderTarget(Lt),_e.setClearColor(ze,Ve),Rt!==void 0&&(tt.viewport=Rt),_e.toneMapping=wt}function ai(Ne,je,it){const tt=je.isScene===!0?je.overrideMaterial:null;for(let Ke=0,_t=Ne.length;Ke<_t;Ke++){const Mt=Ne[Ke],Lt=Mt.object,wt=Mt.geometry,Rt=tt===null?Mt.material:tt,Ot=Mt.group;Lt.layers.test(it.layers)&&Xt(Lt,je,it,wt,Rt,Ot)}}function Xt(Ne,je,it,tt,Ke,_t){Ne.onBeforeRender(_e,je,it,tt,Ke,_t),Ne.modelViewMatrix.multiplyMatrices(it.matrixWorldInverse,Ne.matrixWorld),Ne.normalMatrix.getNormalMatrix(Ne.modelViewMatrix),Ke.transparent===!0&&Ke.side===DoubleSide&&Ke.forceSinglePass===!1?(Ke.side=BackSide,Ke.needsUpdate=!0,_e.renderBufferDirect(it,je,tt,Ke,Ne,_t),Ke.side=FrontSide,Ke.needsUpdate=!0,_e.renderBufferDirect(it,je,tt,Ke,Ne,_t),Ke.side=DoubleSide):_e.renderBufferDirect(it,je,tt,Ke,Ne,_t),Ne.onAfterRender(_e,je,it,tt,Ke,_t)}function ni(Ne,je,it){je.isScene!==!0&&(je=vt);const tt=ft.get(Ne),Ke=ve.state.lights,_t=ve.state.shadowsArray,Mt=Ke.state.version,Lt=ot.getParameters(Ne,Ke.state,_t,je,it),wt=ot.getProgramCacheKey(Lt);let Rt=tt.programs;tt.environment=Ne.isMeshStandardMaterial?je.environment:null,tt.fog=je.fog,tt.envMap=(Ne.isMeshStandardMaterial?Re:$e).get(Ne.envMap||tt.environment),tt.envMapRotation=tt.environment!==null&&Ne.envMap===null?je.environmentRotation:Ne.envMapRotation,Rt===void 0&&(Ne.addEventListener("dispose",At),Rt=new Map,tt.programs=Rt);let Ot=Rt.get(wt);if(Ot!==void 0){if(tt.currentProgram===Ot&&tt.lightsStateVersion===Mt)return si(Ne,Lt),Ot}else Lt.uniforms=ot.getUniforms(Ne),Ne.onBeforeCompile(Lt,_e),Ot=ot.acquireProgram(Lt,wt),Rt.set(wt,Ot),tt.uniforms=Lt.uniforms;const Bt=tt.uniforms;return(!Ne.isShaderMaterial&&!Ne.isRawShaderMaterial||Ne.clipping===!0)&&(Bt.clippingPlanes=It.uniform),si(Ne,Lt),tt.needsLights=di(Ne),tt.lightsStateVersion=Mt,tt.needsLights&&(Bt.ambientLightColor.value=Ke.state.ambient,Bt.lightProbe.value=Ke.state.probe,Bt.directionalLights.value=Ke.state.directional,Bt.directionalLightShadows.value=Ke.state.directionalShadow,Bt.spotLights.value=Ke.state.spot,Bt.spotLightShadows.value=Ke.state.spotShadow,Bt.rectAreaLights.value=Ke.state.rectArea,Bt.ltc_1.value=Ke.state.rectAreaLTC1,Bt.ltc_2.value=Ke.state.rectAreaLTC2,Bt.pointLights.value=Ke.state.point,Bt.pointLightShadows.value=Ke.state.pointShadow,Bt.hemisphereLights.value=Ke.state.hemi,Bt.directionalShadowMap.value=Ke.state.directionalShadowMap,Bt.directionalShadowMatrix.value=Ke.state.directionalShadowMatrix,Bt.spotShadowMap.value=Ke.state.spotShadowMap,Bt.spotLightMatrix.value=Ke.state.spotLightMatrix,Bt.spotLightMap.value=Ke.state.spotLightMap,Bt.pointShadowMap.value=Ke.state.pointShadowMap,Bt.pointShadowMatrix.value=Ke.state.pointShadowMatrix),tt.currentProgram=Ot,tt.uniformsList=null,Ot}function ci(Ne){if(Ne.uniformsList===null){const je=Ne.currentProgram.getUniforms();Ne.uniformsList=WebGLUniforms.seqWithValue(je.seq,Ne.uniforms)}return Ne.uniformsList}function si(Ne,je){const it=ft.get(Ne);it.outputColorSpace=je.outputColorSpace,it.batching=je.batching,it.batchingColor=je.batchingColor,it.instancing=je.instancing,it.instancingColor=je.instancingColor,it.instancingMorph=je.instancingMorph,it.skinning=je.skinning,it.morphTargets=je.morphTargets,it.morphNormals=je.morphNormals,it.morphColors=je.morphColors,it.morphTargetsCount=je.morphTargetsCount,it.numClippingPlanes=je.numClippingPlanes,it.numIntersection=je.numClipIntersection,it.vertexAlphas=je.vertexAlphas,it.vertexTangents=je.vertexTangents,it.toneMapping=je.toneMapping}function ri(Ne,je,it,tt,Ke){je.isScene!==!0&&(je=vt),St.resetTextureUnits();const _t=je.fog,Mt=tt.isMeshStandardMaterial?je.environment:null,Lt=Ee===null?_e.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:LinearSRGBColorSpace,wt=(tt.isMeshStandardMaterial?Re:$e).get(tt.envMap||Mt),Rt=tt.vertexColors===!0&&!!it.attributes.color&&it.attributes.color.itemSize===4,Ot=!!it.attributes.tangent&&(!!tt.normalMap||tt.anisotropy>0),Bt=!!it.morphAttributes.position,Kt=!!it.morphAttributes.normal,ii=!!it.morphAttributes.color;let Zt=NoToneMapping;tt.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Zt=_e.toneMapping);const hi=it.morphAttributes.position||it.morphAttributes.normal||it.morphAttributes.color,Yt=hi!==void 0?hi.length:0,Dt=ft.get(tt),fi=ve.state.lights;if(Ge===!0&&(He===!0||Ne!==we)){const mi=Ne===we&&tt.id===Pe;It.setState(tt,Ne,mi)}let Jt=!1;tt.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==fi.state.version||Dt.outputColorSpace!==Lt||Ke.isBatchedMesh&&Dt.batching===!1||!Ke.isBatchedMesh&&Dt.batching===!0||Ke.isBatchedMesh&&Dt.batchingColor===!0&&Ke.colorTexture===null||Ke.isBatchedMesh&&Dt.batchingColor===!1&&Ke.colorTexture!==null||Ke.isInstancedMesh&&Dt.instancing===!1||!Ke.isInstancedMesh&&Dt.instancing===!0||Ke.isSkinnedMesh&&Dt.skinning===!1||!Ke.isSkinnedMesh&&Dt.skinning===!0||Ke.isInstancedMesh&&Dt.instancingColor===!0&&Ke.instanceColor===null||Ke.isInstancedMesh&&Dt.instancingColor===!1&&Ke.instanceColor!==null||Ke.isInstancedMesh&&Dt.instancingMorph===!0&&Ke.morphTexture===null||Ke.isInstancedMesh&&Dt.instancingMorph===!1&&Ke.morphTexture!==null||Dt.envMap!==wt||tt.fog===!0&&Dt.fog!==_t||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==It.numPlanes||Dt.numIntersection!==It.numIntersection)||Dt.vertexAlphas!==Rt||Dt.vertexTangents!==Ot||Dt.morphTargets!==Bt||Dt.morphNormals!==Kt||Dt.morphColors!==ii||Dt.toneMapping!==Zt||Dt.morphTargetsCount!==Yt)&&(Jt=!0):(Jt=!0,Dt.__version=tt.version);let gi=Dt.currentProgram;Jt===!0&&(gi=ni(tt,je,Ke));let yi=!1,pi=!1,xi=!1;const oi=gi.getUniforms(),vi=Dt.uniforms;if(at.useProgram(gi.program)&&(yi=!0,pi=!0,xi=!0),tt.id!==Pe&&(Pe=tt.id,pi=!0),yi||we!==Ne){oi.setValue(Oe,"projectionMatrix",Ne.projectionMatrix),oi.setValue(Oe,"viewMatrix",Ne.matrixWorldInverse);const mi=oi.map.cameraPosition;mi!==void 0&&mi.setValue(Oe,et.setFromMatrixPosition(Ne.matrixWorld)),ut.logarithmicDepthBuffer&&oi.setValue(Oe,"logDepthBufFC",2/(Math.log(Ne.far+1)/Math.LN2)),(tt.isMeshPhongMaterial||tt.isMeshToonMaterial||tt.isMeshLambertMaterial||tt.isMeshBasicMaterial||tt.isMeshStandardMaterial||tt.isShaderMaterial)&&oi.setValue(Oe,"isOrthographic",Ne.isOrthographicCamera===!0),we!==Ne&&(we=Ne,pi=!0,xi=!0)}if(Ke.isSkinnedMesh){oi.setOptional(Oe,Ke,"bindMatrix"),oi.setOptional(Oe,Ke,"bindMatrixInverse");const mi=Ke.skeleton;mi&&(mi.boneTexture===null&&mi.computeBoneTexture(),oi.setValue(Oe,"boneTexture",mi.boneTexture,St))}Ke.isBatchedMesh&&(oi.setOptional(Oe,Ke,"batchingTexture"),oi.setValue(Oe,"batchingTexture",Ke._matricesTexture,St),oi.setOptional(Oe,Ke,"batchingIdTexture"),oi.setValue(Oe,"batchingIdTexture",Ke._indirectTexture,St),oi.setOptional(Oe,Ke,"batchingColorTexture"),Ke._colorsTexture!==null&&oi.setValue(Oe,"batchingColorTexture",Ke._colorsTexture,St));const Si=it.morphAttributes;if((Si.position!==void 0||Si.normal!==void 0||Si.color!==void 0)&&Nt.update(Ke,it,gi),(pi||Dt.receiveShadow!==Ke.receiveShadow)&&(Dt.receiveShadow=Ke.receiveShadow,oi.setValue(Oe,"receiveShadow",Ke.receiveShadow)),tt.isMeshGouraudMaterial&&tt.envMap!==null&&(vi.envMap.value=wt,vi.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),tt.isMeshStandardMaterial&&tt.envMap===null&&je.environment!==null&&(vi.envMapIntensity.value=je.environmentIntensity),pi&&(oi.setValue(Oe,"toneMappingExposure",_e.toneMappingExposure),Dt.needsLights&&ei(vi,xi),_t&&tt.fog===!0&&Et.refreshFogUniforms(vi,_t),Et.refreshMaterialUniforms(vi,tt,Fe,Ae,ve.state.transmissionRenderTarget[Ne.id]),WebGLUniforms.upload(Oe,ci(Dt),vi,St)),tt.isShaderMaterial&&tt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Oe,ci(Dt),vi,St),tt.uniformsNeedUpdate=!1),tt.isSpriteMaterial&&oi.setValue(Oe,"center",Ke.center),oi.setValue(Oe,"modelViewMatrix",Ke.modelViewMatrix),oi.setValue(Oe,"normalMatrix",Ke.normalMatrix),oi.setValue(Oe,"modelMatrix",Ke.matrixWorld),tt.isShaderMaterial||tt.isRawShaderMaterial){const mi=tt.uniformsGroups;for(let bi=0,Ti=mi.length;bi<Ti;bi++){const Ei=mi[bi];jt.update(Ei,gi),jt.bind(Ei,gi)}}return gi}function ei(Ne,je){Ne.ambientLightColor.needsUpdate=je,Ne.lightProbe.needsUpdate=je,Ne.directionalLights.needsUpdate=je,Ne.directionalLightShadows.needsUpdate=je,Ne.pointLights.needsUpdate=je,Ne.pointLightShadows.needsUpdate=je,Ne.spotLights.needsUpdate=je,Ne.spotLightShadows.needsUpdate=je,Ne.rectAreaLights.needsUpdate=je,Ne.hemisphereLights.needsUpdate=je}function di(Ne){return Ne.isMeshLambertMaterial||Ne.isMeshToonMaterial||Ne.isMeshPhongMaterial||Ne.isMeshStandardMaterial||Ne.isShadowMaterial||Ne.isShaderMaterial&&Ne.lights===!0}this.getActiveCubeFace=function(){return Se},this.getActiveMipmapLevel=function(){return be},this.getRenderTarget=function(){return Ee},this.setRenderTargetTextures=function(Ne,je,it){ft.get(Ne.texture).__webglTexture=je,ft.get(Ne.depthTexture).__webglTexture=it;const tt=ft.get(Ne);tt.__hasExternalTextures=!0,tt.__autoAllocateDepthBuffer=it===void 0,tt.__autoAllocateDepthBuffer||qe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),tt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Ne,je){const it=ft.get(Ne);it.__webglFramebuffer=je,it.__useDefaultFramebuffer=je===void 0},this.setRenderTarget=function(Ne,je=0,it=0){Ee=Ne,Se=je,be=it;let tt=!0,Ke=null,_t=!1,Mt=!1;if(Ne){const wt=ft.get(Ne);wt.__useDefaultFramebuffer!==void 0?(at.bindFramebuffer(Oe.FRAMEBUFFER,null),tt=!1):wt.__webglFramebuffer===void 0?St.setupRenderTarget(Ne):wt.__hasExternalTextures&&St.rebindTextures(Ne,ft.get(Ne.texture).__webglTexture,ft.get(Ne.depthTexture).__webglTexture);const Rt=Ne.texture;(Rt.isData3DTexture||Rt.isDataArrayTexture||Rt.isCompressedArrayTexture)&&(Mt=!0);const Ot=ft.get(Ne).__webglFramebuffer;Ne.isWebGLCubeRenderTarget?(Array.isArray(Ot[je])?Ke=Ot[je][it]:Ke=Ot[je],_t=!0):Ne.samples>0&&St.useMultisampledRTT(Ne)===!1?Ke=ft.get(Ne).__webglMultisampledFramebuffer:Array.isArray(Ot)?Ke=Ot[it]:Ke=Ot,Me.copy(Ne.viewport),De.copy(Ne.scissor),ke=Ne.scissorTest}else Me.copy(Le).multiplyScalar(Fe).floor(),De.copy(Be).multiplyScalar(Fe).floor(),ke=st;if(at.bindFramebuffer(Oe.FRAMEBUFFER,Ke)&&tt&&at.drawBuffers(Ne,Ke),at.viewport(Me),at.scissor(De),at.setScissorTest(ke),_t){const wt=ft.get(Ne.texture);Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Oe.TEXTURE_CUBE_MAP_POSITIVE_X+je,wt.__webglTexture,it)}else if(Mt){const wt=ft.get(Ne.texture),Rt=je||0;Oe.framebufferTextureLayer(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,wt.__webglTexture,it||0,Rt)}Pe=-1},this.readRenderTargetPixels=function(Ne,je,it,tt,Ke,_t,Mt){if(!(Ne&&Ne.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Lt=ft.get(Ne).__webglFramebuffer;if(Ne.isWebGLCubeRenderTarget&&Mt!==void 0&&(Lt=Lt[Mt]),Lt){at.bindFramebuffer(Oe.FRAMEBUFFER,Lt);try{const wt=Ne.texture,Rt=wt.format,Ot=wt.type;if(!ut.textureFormatReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}je>=0&&je<=Ne.width-tt&&it>=0&&it<=Ne.height-Ke&&Oe.readPixels(je,it,tt,Ke,Vt.convert(Rt),Vt.convert(Ot),_t)}finally{const wt=Ee!==null?ft.get(Ee).__webglFramebuffer:null;at.bindFramebuffer(Oe.FRAMEBUFFER,wt)}}},this.readRenderTargetPixelsAsync=async function(Ne,je,it,tt,Ke,_t,Mt){if(!(Ne&&Ne.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Lt=ft.get(Ne).__webglFramebuffer;if(Ne.isWebGLCubeRenderTarget&&Mt!==void 0&&(Lt=Lt[Mt]),Lt){at.bindFramebuffer(Oe.FRAMEBUFFER,Lt);try{const wt=Ne.texture,Rt=wt.format,Ot=wt.type;if(!ut.textureFormatReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(je>=0&&je<=Ne.width-tt&&it>=0&&it<=Ne.height-Ke){const Bt=Oe.createBuffer();Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,Bt),Oe.bufferData(Oe.PIXEL_PACK_BUFFER,_t.byteLength,Oe.STREAM_READ),Oe.readPixels(je,it,tt,Ke,Vt.convert(Rt),Vt.convert(Ot),0),Oe.flush();const Kt=Oe.fenceSync(Oe.SYNC_GPU_COMMANDS_COMPLETE,0);await probeAsync(Oe,Kt,4);try{Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,Bt),Oe.getBufferSubData(Oe.PIXEL_PACK_BUFFER,0,_t)}finally{Oe.deleteBuffer(Bt),Oe.deleteSync(Kt)}return _t}}finally{const wt=Ee!==null?ft.get(Ee).__webglFramebuffer:null;at.bindFramebuffer(Oe.FRAMEBUFFER,wt)}}},this.copyFramebufferToTexture=function(Ne,je=null,it=0){Ne.isTexture!==!0&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),je=arguments[0]||null,Ne=arguments[1]);const tt=Math.pow(2,-it),Ke=Math.floor(Ne.image.width*tt),_t=Math.floor(Ne.image.height*tt),Mt=je!==null?je.x:0,Lt=je!==null?je.y:0;St.setTexture2D(Ne,0),Oe.copyTexSubImage2D(Oe.TEXTURE_2D,it,0,0,Mt,Lt,Ke,_t),at.unbindTexture()},this.copyTextureToTexture=function(Ne,je,it=null,tt=null,Ke=0){Ne.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),tt=arguments[0]||null,Ne=arguments[1],je=arguments[2],Ke=arguments[3]||0,it=null);let _t,Mt,Lt,wt,Rt,Ot;it!==null?(_t=it.max.x-it.min.x,Mt=it.max.y-it.min.y,Lt=it.min.x,wt=it.min.y):(_t=Ne.image.width,Mt=Ne.image.height,Lt=0,wt=0),tt!==null?(Rt=tt.x,Ot=tt.y):(Rt=0,Ot=0);const Bt=Vt.convert(je.format),Kt=Vt.convert(je.type);St.setTexture2D(je,0),Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,je.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,je.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,je.unpackAlignment);const ii=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),Zt=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),hi=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),Yt=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),Dt=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES),fi=Ne.isCompressedTexture?Ne.mipmaps[Ke]:Ne.image;Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,fi.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,fi.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,Lt),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,wt),Ne.isDataTexture?Oe.texSubImage2D(Oe.TEXTURE_2D,Ke,Rt,Ot,_t,Mt,Bt,Kt,fi.data):Ne.isCompressedTexture?Oe.compressedTexSubImage2D(Oe.TEXTURE_2D,Ke,Rt,Ot,fi.width,fi.height,Bt,fi.data):Oe.texSubImage2D(Oe.TEXTURE_2D,Ke,Rt,Ot,_t,Mt,Bt,Kt,fi),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,ii),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,Zt),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,hi),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,Yt),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,Dt),Ke===0&&je.generateMipmaps&&Oe.generateMipmap(Oe.TEXTURE_2D),at.unbindTexture()},this.copyTextureToTexture3D=function(Ne,je,it=null,tt=null,Ke=0){Ne.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),it=arguments[0]||null,tt=arguments[1]||null,Ne=arguments[2],je=arguments[3],Ke=arguments[4]||0);let _t,Mt,Lt,wt,Rt,Ot,Bt,Kt,ii;const Zt=Ne.isCompressedTexture?Ne.mipmaps[Ke]:Ne.image;it!==null?(_t=it.max.x-it.min.x,Mt=it.max.y-it.min.y,Lt=it.max.z-it.min.z,wt=it.min.x,Rt=it.min.y,Ot=it.min.z):(_t=Zt.width,Mt=Zt.height,Lt=Zt.depth,wt=0,Rt=0,Ot=0),tt!==null?(Bt=tt.x,Kt=tt.y,ii=tt.z):(Bt=0,Kt=0,ii=0);const hi=Vt.convert(je.format),Yt=Vt.convert(je.type);let Dt;if(je.isData3DTexture)St.setTexture3D(je,0),Dt=Oe.TEXTURE_3D;else if(je.isDataArrayTexture||je.isCompressedArrayTexture)St.setTexture2DArray(je,0),Dt=Oe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,je.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,je.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,je.unpackAlignment);const fi=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),Jt=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),gi=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),yi=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),pi=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES);Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,Zt.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,Zt.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,wt),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,Rt),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,Ot),Ne.isDataTexture||Ne.isData3DTexture?Oe.texSubImage3D(Dt,Ke,Bt,Kt,ii,_t,Mt,Lt,hi,Yt,Zt.data):je.isCompressedArrayTexture?Oe.compressedTexSubImage3D(Dt,Ke,Bt,Kt,ii,_t,Mt,Lt,hi,Zt.data):Oe.texSubImage3D(Dt,Ke,Bt,Kt,ii,_t,Mt,Lt,hi,Yt,Zt),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,fi),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,Jt),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,gi),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,yi),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,pi),Ke===0&&je.generateMipmaps&&Oe.generateMipmap(Dt),at.unbindTexture()},this.initRenderTarget=function(Ne){ft.get(Ne).__webglFramebuffer===void 0&&St.setupRenderTarget(Ne)},this.initTexture=function(Ne){Ne.isCubeTexture?St.setTextureCube(Ne,0):Ne.isData3DTexture?St.setTexture3D(Ne,0):Ne.isDataArrayTexture||Ne.isCompressedArrayTexture?St.setTexture2DArray(Ne,0):St.setTexture2D(Ne,0),at.unbindTexture()},this.resetState=function(){Se=0,be=0,Ee=null,at.reset(),$t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(ee){this._outputColorSpace=ee;const te=this.getContext();te.drawingBufferColorSpace=ee===DisplayP3ColorSpace?"display-p3":"srgb",te.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(ee,te){return super.copy(ee,te),ee.background!==null&&(this.background=ee.background.clone()),ee.environment!==null&&(this.environment=ee.environment.clone()),ee.fog!==null&&(this.fog=ee.fog.clone()),this.backgroundBlurriness=ee.backgroundBlurriness,this.backgroundIntensity=ee.backgroundIntensity,this.backgroundRotation.copy(ee.backgroundRotation),this.environmentIntensity=ee.environmentIntensity,this.environmentRotation.copy(ee.environmentRotation),ee.overrideMaterial!==null&&(this.overrideMaterial=ee.overrideMaterial.clone()),this.matrixAutoUpdate=ee.matrixAutoUpdate,this}toJSON(ee){const te=super.toJSON(ee);return this.fog!==null&&(te.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(te.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(te.object.backgroundIntensity=this.backgroundIntensity),te.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(te.object.environmentIntensity=this.environmentIntensity),te.object.environmentRotation=this.environmentRotation.toArray(),te}}class VideoTexture extends Texture{constructor(ee,te,ne,re,se,ae,oe,le,ce){super(ee,te,ne,re,se,ae,oe,le,ce),this.isVideoTexture=!0,this.minFilter=ae!==void 0?ae:LinearFilter,this.magFilter=se!==void 0?se:LinearFilter,this.generateMipmaps=!1;const he=this;function fe(){he.needsUpdate=!0,ee.requestVideoFrameCallback(fe)}"requestVideoFrameCallback"in ee&&ee.requestVideoFrameCallback(fe)}clone(){return new this.constructor(this.image).copy(this)}update(){const ee=this.image;"requestVideoFrameCallback"in ee===!1&&ee.readyState>=ee.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(ee,te){const ne=this.getUtoTmapping(ee);return this.getPoint(ne,te)}getPoints(ee=5){const te=[];for(let ne=0;ne<=ee;ne++)te.push(this.getPoint(ne/ee));return te}getSpacedPoints(ee=5){const te=[];for(let ne=0;ne<=ee;ne++)te.push(this.getPointAt(ne/ee));return te}getLength(){const ee=this.getLengths();return ee[ee.length-1]}getLengths(ee=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===ee+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const te=[];let ne,re=this.getPoint(0),se=0;te.push(0);for(let ae=1;ae<=ee;ae++)ne=this.getPoint(ae/ee),se+=ne.distanceTo(re),te.push(se),re=ne;return this.cacheArcLengths=te,te}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(ee,te){const ne=this.getLengths();let re=0;const se=ne.length;let ae;te?ae=te:ae=ee*ne[se-1];let oe=0,le=se-1,ce;for(;oe<=le;)if(re=Math.floor(oe+(le-oe)/2),ce=ne[re]-ae,ce<0)oe=re+1;else if(ce>0)le=re-1;else{le=re;break}if(re=le,ne[re]===ae)return re/(se-1);const he=ne[re],ue=ne[re+1]-he,de=(ae-he)/ue;return(re+de)/(se-1)}getTangent(ee,te){let re=ee-1e-4,se=ee+1e-4;re<0&&(re=0),se>1&&(se=1);const ae=this.getPoint(re),oe=this.getPoint(se),le=te||(ae.isVector2?new Vector2:new Vector3);return le.copy(oe).sub(ae).normalize(),le}getTangentAt(ee,te){const ne=this.getUtoTmapping(ee);return this.getTangent(ne,te)}computeFrenetFrames(ee,te){const ne=new Vector3,re=[],se=[],ae=[],oe=new Vector3,le=new Matrix4;for(let de=0;de<=ee;de++){const ge=de/ee;re[de]=this.getTangentAt(ge,new Vector3)}se[0]=new Vector3,ae[0]=new Vector3;let ce=Number.MAX_VALUE;const he=Math.abs(re[0].x),fe=Math.abs(re[0].y),ue=Math.abs(re[0].z);he<=ce&&(ce=he,ne.set(1,0,0)),fe<=ce&&(ce=fe,ne.set(0,1,0)),ue<=ce&&ne.set(0,0,1),oe.crossVectors(re[0],ne).normalize(),se[0].crossVectors(re[0],oe),ae[0].crossVectors(re[0],se[0]);for(let de=1;de<=ee;de++){if(se[de]=se[de-1].clone(),ae[de]=ae[de-1].clone(),oe.crossVectors(re[de-1],re[de]),oe.length()>Number.EPSILON){oe.normalize();const ge=Math.acos(clamp$1(re[de-1].dot(re[de]),-1,1));se[de].applyMatrix4(le.makeRotationAxis(oe,ge))}ae[de].crossVectors(re[de],se[de])}if(te===!0){let de=Math.acos(clamp$1(se[0].dot(se[ee]),-1,1));de/=ee,re[0].dot(oe.crossVectors(se[0],se[ee]))>0&&(de=-de);for(let ge=1;ge<=ee;ge++)se[ge].applyMatrix4(le.makeRotationAxis(re[ge],de*ge)),ae[ge].crossVectors(re[ge],se[ge])}return{tangents:re,normals:se,binormals:ae}}clone(){return new this.constructor().copy(this)}copy(ee){return this.arcLengthDivisions=ee.arcLengthDivisions,this}toJSON(){const ee={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return ee.arcLengthDivisions=this.arcLengthDivisions,ee.type=this.type,ee}fromJSON(ee){return this.arcLengthDivisions=ee.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(ee=0,te=0,ne=1,re=1,se=0,ae=Math.PI*2,oe=!1,le=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=ee,this.aY=te,this.xRadius=ne,this.yRadius=re,this.aStartAngle=se,this.aEndAngle=ae,this.aClockwise=oe,this.aRotation=le}getPoint(ee,te=new Vector2){const ne=te,re=Math.PI*2;let se=this.aEndAngle-this.aStartAngle;const ae=Math.abs(se)<Number.EPSILON;for(;se<0;)se+=re;for(;se>re;)se-=re;se<Number.EPSILON&&(ae?se=0:se=re),this.aClockwise===!0&&!ae&&(se===re?se=-re:se=se-re);const oe=this.aStartAngle+ee*se;let le=this.aX+this.xRadius*Math.cos(oe),ce=this.aY+this.yRadius*Math.sin(oe);if(this.aRotation!==0){const he=Math.cos(this.aRotation),fe=Math.sin(this.aRotation),ue=le-this.aX,de=ce-this.aY;le=ue*he-de*fe+this.aX,ce=ue*fe+de*he+this.aY}return ne.set(le,ce)}copy(ee){return super.copy(ee),this.aX=ee.aX,this.aY=ee.aY,this.xRadius=ee.xRadius,this.yRadius=ee.yRadius,this.aStartAngle=ee.aStartAngle,this.aEndAngle=ee.aEndAngle,this.aClockwise=ee.aClockwise,this.aRotation=ee.aRotation,this}toJSON(){const ee=super.toJSON();return ee.aX=this.aX,ee.aY=this.aY,ee.xRadius=this.xRadius,ee.yRadius=this.yRadius,ee.aStartAngle=this.aStartAngle,ee.aEndAngle=this.aEndAngle,ee.aClockwise=this.aClockwise,ee.aRotation=this.aRotation,ee}fromJSON(ee){return super.fromJSON(ee),this.aX=ee.aX,this.aY=ee.aY,this.xRadius=ee.xRadius,this.yRadius=ee.yRadius,this.aStartAngle=ee.aStartAngle,this.aEndAngle=ee.aEndAngle,this.aClockwise=ee.aClockwise,this.aRotation=ee.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(ee,te,ne,re,se,ae){super(ee,te,ne,ne,re,se,ae),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let ie=0,ee=0,te=0,ne=0;function re(se,ae,oe,le){ie=se,ee=oe,te=-3*se+3*ae-2*oe-le,ne=2*se-2*ae+oe+le}return{initCatmullRom:function(se,ae,oe,le,ce){re(ae,oe,ce*(oe-se),ce*(le-ae))},initNonuniformCatmullRom:function(se,ae,oe,le,ce,he,fe){let ue=(ae-se)/ce-(oe-se)/(ce+he)+(oe-ae)/he,de=(oe-ae)/he-(le-ae)/(he+fe)+(le-oe)/fe;ue*=he,de*=he,re(ae,oe,ue,de)},calc:function(se){const ae=se*se,oe=ae*se;return ie+ee*se+te*ae+ne*oe}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(ee=[],te=!1,ne="centripetal",re=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=ee,this.closed=te,this.curveType=ne,this.tension=re}getPoint(ee,te=new Vector3){const ne=te,re=this.points,se=re.length,ae=(se-(this.closed?0:1))*ee;let oe=Math.floor(ae),le=ae-oe;this.closed?oe+=oe>0?0:(Math.floor(Math.abs(oe)/se)+1)*se:le===0&&oe===se-1&&(oe=se-2,le=1);let ce,he;this.closed||oe>0?ce=re[(oe-1)%se]:(tmp.subVectors(re[0],re[1]).add(re[0]),ce=tmp);const fe=re[oe%se],ue=re[(oe+1)%se];if(this.closed||oe+2<se?he=re[(oe+2)%se]:(tmp.subVectors(re[se-1],re[se-2]).add(re[se-1]),he=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const de=this.curveType==="chordal"?.5:.25;let ge=Math.pow(ce.distanceToSquared(fe),de),me=Math.pow(fe.distanceToSquared(ue),de),ve=Math.pow(ue.distanceToSquared(he),de);me<1e-4&&(me=1),ge<1e-4&&(ge=me),ve<1e-4&&(ve=me),px.initNonuniformCatmullRom(ce.x,fe.x,ue.x,he.x,ge,me,ve),py.initNonuniformCatmullRom(ce.y,fe.y,ue.y,he.y,ge,me,ve),pz.initNonuniformCatmullRom(ce.z,fe.z,ue.z,he.z,ge,me,ve)}else this.curveType==="catmullrom"&&(px.initCatmullRom(ce.x,fe.x,ue.x,he.x,this.tension),py.initCatmullRom(ce.y,fe.y,ue.y,he.y,this.tension),pz.initCatmullRom(ce.z,fe.z,ue.z,he.z,this.tension));return ne.set(px.calc(le),py.calc(le),pz.calc(le)),ne}copy(ee){super.copy(ee),this.points=[];for(let te=0,ne=ee.points.length;te<ne;te++){const re=ee.points[te];this.points.push(re.clone())}return this.closed=ee.closed,this.curveType=ee.curveType,this.tension=ee.tension,this}toJSON(){const ee=super.toJSON();ee.points=[];for(let te=0,ne=this.points.length;te<ne;te++){const re=this.points[te];ee.points.push(re.toArray())}return ee.closed=this.closed,ee.curveType=this.curveType,ee.tension=this.tension,ee}fromJSON(ee){super.fromJSON(ee),this.points=[];for(let te=0,ne=ee.points.length;te<ne;te++){const re=ee.points[te];this.points.push(new Vector3().fromArray(re))}return this.closed=ee.closed,this.curveType=ee.curveType,this.tension=ee.tension,this}}function CatmullRom(ie,ee,te,ne,re){const se=(ne-ee)*.5,ae=(re-te)*.5,oe=ie*ie,le=ie*oe;return(2*te-2*ne+se+ae)*le+(-3*te+3*ne-2*se-ae)*oe+se*ie+te}function QuadraticBezierP0(ie,ee){const te=1-ie;return te*te*ee}function QuadraticBezierP1(ie,ee){return 2*(1-ie)*ie*ee}function QuadraticBezierP2(ie,ee){return ie*ie*ee}function QuadraticBezier(ie,ee,te,ne){return QuadraticBezierP0(ie,ee)+QuadraticBezierP1(ie,te)+QuadraticBezierP2(ie,ne)}function CubicBezierP0(ie,ee){const te=1-ie;return te*te*te*ee}function CubicBezierP1(ie,ee){const te=1-ie;return 3*te*te*ie*ee}function CubicBezierP2(ie,ee){return 3*(1-ie)*ie*ie*ee}function CubicBezierP3(ie,ee){return ie*ie*ie*ee}function CubicBezier(ie,ee,te,ne,re){return CubicBezierP0(ie,ee)+CubicBezierP1(ie,te)+CubicBezierP2(ie,ne)+CubicBezierP3(ie,re)}class CubicBezierCurve extends Curve{constructor(ee=new Vector2,te=new Vector2,ne=new Vector2,re=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=ee,this.v1=te,this.v2=ne,this.v3=re}getPoint(ee,te=new Vector2){const ne=te,re=this.v0,se=this.v1,ae=this.v2,oe=this.v3;return ne.set(CubicBezier(ee,re.x,se.x,ae.x,oe.x),CubicBezier(ee,re.y,se.y,ae.y,oe.y)),ne}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this.v3.copy(ee.v3),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee.v3=this.v3.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this.v3.fromArray(ee.v3),this}}class CubicBezierCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3,ne=new Vector3,re=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=ee,this.v1=te,this.v2=ne,this.v3=re}getPoint(ee,te=new Vector3){const ne=te,re=this.v0,se=this.v1,ae=this.v2,oe=this.v3;return ne.set(CubicBezier(ee,re.x,se.x,ae.x,oe.x),CubicBezier(ee,re.y,se.y,ae.y,oe.y),CubicBezier(ee,re.z,se.z,ae.z,oe.z)),ne}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this.v3.copy(ee.v3),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee.v3=this.v3.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this.v3.fromArray(ee.v3),this}}class LineCurve extends Curve{constructor(ee=new Vector2,te=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=ee,this.v2=te}getPoint(ee,te=new Vector2){const ne=te;return ee===1?ne.copy(this.v2):(ne.copy(this.v2).sub(this.v1),ne.multiplyScalar(ee).add(this.v1)),ne}getPointAt(ee,te){return this.getPoint(ee,te)}getTangent(ee,te=new Vector2){return te.subVectors(this.v2,this.v1).normalize()}getTangentAt(ee,te){return this.getTangent(ee,te)}copy(ee){return super.copy(ee),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}class LineCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=ee,this.v2=te}getPoint(ee,te=new Vector3){const ne=te;return ee===1?ne.copy(this.v2):(ne.copy(this.v2).sub(this.v1),ne.multiplyScalar(ee).add(this.v1)),ne}getPointAt(ee,te){return this.getPoint(ee,te)}getTangent(ee,te=new Vector3){return te.subVectors(this.v2,this.v1).normalize()}getTangentAt(ee,te){return this.getTangent(ee,te)}copy(ee){return super.copy(ee),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}class QuadraticBezierCurve extends Curve{constructor(ee=new Vector2,te=new Vector2,ne=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=ee,this.v1=te,this.v2=ne}getPoint(ee,te=new Vector2){const ne=te,re=this.v0,se=this.v1,ae=this.v2;return ne.set(QuadraticBezier(ee,re.x,se.x,ae.x),QuadraticBezier(ee,re.y,se.y,ae.y)),ne}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3,ne=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=ee,this.v1=te,this.v2=ne}getPoint(ee,te=new Vector3){const ne=te,re=this.v0,se=this.v1,ae=this.v2;return ne.set(QuadraticBezier(ee,re.x,se.x,ae.x),QuadraticBezier(ee,re.y,se.y,ae.y),QuadraticBezier(ee,re.z,se.z,ae.z)),ne}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}class SplineCurve extends Curve{constructor(ee=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=ee}getPoint(ee,te=new Vector2){const ne=te,re=this.points,se=(re.length-1)*ee,ae=Math.floor(se),oe=se-ae,le=re[ae===0?ae:ae-1],ce=re[ae],he=re[ae>re.length-2?re.length-1:ae+1],fe=re[ae>re.length-3?re.length-1:ae+2];return ne.set(CatmullRom(oe,le.x,ce.x,he.x,fe.x),CatmullRom(oe,le.y,ce.y,he.y,fe.y)),ne}copy(ee){super.copy(ee),this.points=[];for(let te=0,ne=ee.points.length;te<ne;te++){const re=ee.points[te];this.points.push(re.clone())}return this}toJSON(){const ee=super.toJSON();ee.points=[];for(let te=0,ne=this.points.length;te<ne;te++){const re=this.points[te];ee.points.push(re.toArray())}return ee}fromJSON(ee){super.fromJSON(ee),this.points=[];for(let te=0,ne=ee.points.length;te<ne;te++){const re=ee.points[te];this.points.push(new Vector2().fromArray(re))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(ee){this.curves.push(ee)}closePath(){const ee=this.curves[0].getPoint(0),te=this.curves[this.curves.length-1].getPoint(1);if(!ee.equals(te)){const ne=ee.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[ne](te,ee))}return this}getPoint(ee,te){const ne=ee*this.getLength(),re=this.getCurveLengths();let se=0;for(;se<re.length;){if(re[se]>=ne){const ae=re[se]-ne,oe=this.curves[se],le=oe.getLength(),ce=le===0?0:1-ae/le;return oe.getPointAt(ce,te)}se++}return null}getLength(){const ee=this.getCurveLengths();return ee[ee.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const ee=[];let te=0;for(let ne=0,re=this.curves.length;ne<re;ne++)te+=this.curves[ne].getLength(),ee.push(te);return this.cacheLengths=ee,ee}getSpacedPoints(ee=40){const te=[];for(let ne=0;ne<=ee;ne++)te.push(this.getPoint(ne/ee));return this.autoClose&&te.push(te[0]),te}getPoints(ee=12){const te=[];let ne;for(let re=0,se=this.curves;re<se.length;re++){const ae=se[re],oe=ae.isEllipseCurve?ee*2:ae.isLineCurve||ae.isLineCurve3?1:ae.isSplineCurve?ee*ae.points.length:ee,le=ae.getPoints(oe);for(let ce=0;ce<le.length;ce++){const he=le[ce];ne&&ne.equals(he)||(te.push(he),ne=he)}}return this.autoClose&&te.length>1&&!te[te.length-1].equals(te[0])&&te.push(te[0]),te}copy(ee){super.copy(ee),this.curves=[];for(let te=0,ne=ee.curves.length;te<ne;te++){const re=ee.curves[te];this.curves.push(re.clone())}return this.autoClose=ee.autoClose,this}toJSON(){const ee=super.toJSON();ee.autoClose=this.autoClose,ee.curves=[];for(let te=0,ne=this.curves.length;te<ne;te++){const re=this.curves[te];ee.curves.push(re.toJSON())}return ee}fromJSON(ee){super.fromJSON(ee),this.autoClose=ee.autoClose,this.curves=[];for(let te=0,ne=ee.curves.length;te<ne;te++){const re=ee.curves[te];this.curves.push(new Curves[re.type]().fromJSON(re))}return this}}class Path extends CurvePath{constructor(ee){super(),this.type="Path",this.currentPoint=new Vector2,ee&&this.setFromPoints(ee)}setFromPoints(ee){this.moveTo(ee[0].x,ee[0].y);for(let te=1,ne=ee.length;te<ne;te++)this.lineTo(ee[te].x,ee[te].y);return this}moveTo(ee,te){return this.currentPoint.set(ee,te),this}lineTo(ee,te){const ne=new LineCurve(this.currentPoint.clone(),new Vector2(ee,te));return this.curves.push(ne),this.currentPoint.set(ee,te),this}quadraticCurveTo(ee,te,ne,re){const se=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(ee,te),new Vector2(ne,re));return this.curves.push(se),this.currentPoint.set(ne,re),this}bezierCurveTo(ee,te,ne,re,se,ae){const oe=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(ee,te),new Vector2(ne,re),new Vector2(se,ae));return this.curves.push(oe),this.currentPoint.set(se,ae),this}splineThru(ee){const te=[this.currentPoint.clone()].concat(ee),ne=new SplineCurve(te);return this.curves.push(ne),this.currentPoint.copy(ee[ee.length-1]),this}arc(ee,te,ne,re,se,ae){const oe=this.currentPoint.x,le=this.currentPoint.y;return this.absarc(ee+oe,te+le,ne,re,se,ae),this}absarc(ee,te,ne,re,se,ae){return this.absellipse(ee,te,ne,ne,re,se,ae),this}ellipse(ee,te,ne,re,se,ae,oe,le){const ce=this.currentPoint.x,he=this.currentPoint.y;return this.absellipse(ee+ce,te+he,ne,re,se,ae,oe,le),this}absellipse(ee,te,ne,re,se,ae,oe,le){const ce=new EllipseCurve(ee,te,ne,re,se,ae,oe,le);if(this.curves.length>0){const fe=ce.getPoint(0);fe.equals(this.currentPoint)||this.lineTo(fe.x,fe.y)}this.curves.push(ce);const he=ce.getPoint(1);return this.currentPoint.copy(he),this}copy(ee){return super.copy(ee),this.currentPoint.copy(ee.currentPoint),this}toJSON(){const ee=super.toJSON();return ee.currentPoint=this.currentPoint.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.currentPoint.fromArray(ee.currentPoint),this}}class Shape extends Path{constructor(ee){super(ee),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(ee){const te=[];for(let ne=0,re=this.holes.length;ne<re;ne++)te[ne]=this.holes[ne].getPoints(ee);return te}extractPoints(ee){return{shape:this.getPoints(ee),holes:this.getPointsHoles(ee)}}copy(ee){super.copy(ee),this.holes=[];for(let te=0,ne=ee.holes.length;te<ne;te++){const re=ee.holes[te];this.holes.push(re.clone())}return this}toJSON(){const ee=super.toJSON();ee.uuid=this.uuid,ee.holes=[];for(let te=0,ne=this.holes.length;te<ne;te++){const re=this.holes[te];ee.holes.push(re.toJSON())}return ee}fromJSON(ee){super.fromJSON(ee),this.uuid=ee.uuid,this.holes=[];for(let te=0,ne=ee.holes.length;te<ne;te++){const re=ee.holes[te];this.holes.push(new Path().fromJSON(re))}return this}}const Earcut={triangulate:function(ie,ee,te=2){const ne=ee&&ee.length,re=ne?ee[0]*te:ie.length;let se=linkedList(ie,0,re,te,!0);const ae=[];if(!se||se.next===se.prev)return ae;let oe,le,ce,he,fe,ue,de;if(ne&&(se=eliminateHoles(ie,ee,se,te)),ie.length>80*te){oe=ce=ie[0],le=he=ie[1];for(let ge=te;ge<re;ge+=te)fe=ie[ge],ue=ie[ge+1],fe<oe&&(oe=fe),ue<le&&(le=ue),fe>ce&&(ce=fe),ue>he&&(he=ue);de=Math.max(ce-oe,he-le),de=de!==0?32767/de:0}return earcutLinked(se,ae,te,oe,le,de,0),ae}};function linkedList(ie,ee,te,ne,re){let se,ae;if(re===signedArea(ie,ee,te,ne)>0)for(se=ee;se<te;se+=ne)ae=insertNode(se,ie[se],ie[se+1],ae);else for(se=te-ne;se>=ee;se-=ne)ae=insertNode(se,ie[se],ie[se+1],ae);return ae&&equals(ae,ae.next)&&(removeNode(ae),ae=ae.next),ae}function filterPoints(ie,ee){if(!ie)return ie;ee||(ee=ie);let te=ie,ne;do if(ne=!1,!te.steiner&&(equals(te,te.next)||area(te.prev,te,te.next)===0)){if(removeNode(te),te=ee=te.prev,te===te.next)break;ne=!0}else te=te.next;while(ne||te!==ee);return ee}function earcutLinked(ie,ee,te,ne,re,se,ae){if(!ie)return;!ae&&se&&indexCurve(ie,ne,re,se);let oe=ie,le,ce;for(;ie.prev!==ie.next;){if(le=ie.prev,ce=ie.next,se?isEarHashed(ie,ne,re,se):isEar(ie)){ee.push(le.i/te|0),ee.push(ie.i/te|0),ee.push(ce.i/te|0),removeNode(ie),ie=ce.next,oe=ce.next;continue}if(ie=ce,ie===oe){ae?ae===1?(ie=cureLocalIntersections(filterPoints(ie),ee,te),earcutLinked(ie,ee,te,ne,re,se,2)):ae===2&&splitEarcut(ie,ee,te,ne,re,se):earcutLinked(filterPoints(ie),ee,te,ne,re,se,1);break}}}function isEar(ie){const ee=ie.prev,te=ie,ne=ie.next;if(area(ee,te,ne)>=0)return!1;const re=ee.x,se=te.x,ae=ne.x,oe=ee.y,le=te.y,ce=ne.y,he=re<se?re<ae?re:ae:se<ae?se:ae,fe=oe<le?oe<ce?oe:ce:le<ce?le:ce,ue=re>se?re>ae?re:ae:se>ae?se:ae,de=oe>le?oe>ce?oe:ce:le>ce?le:ce;let ge=ne.next;for(;ge!==ee;){if(ge.x>=he&&ge.x<=ue&&ge.y>=fe&&ge.y<=de&&pointInTriangle(re,oe,se,le,ae,ce,ge.x,ge.y)&&area(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function isEarHashed(ie,ee,te,ne){const re=ie.prev,se=ie,ae=ie.next;if(area(re,se,ae)>=0)return!1;const oe=re.x,le=se.x,ce=ae.x,he=re.y,fe=se.y,ue=ae.y,de=oe<le?oe<ce?oe:ce:le<ce?le:ce,ge=he<fe?he<ue?he:ue:fe<ue?fe:ue,me=oe>le?oe>ce?oe:ce:le>ce?le:ce,ve=he>fe?he>ue?he:ue:fe>ue?fe:ue,pe=zOrder(de,ge,ee,te,ne),ye=zOrder(me,ve,ee,te,ne);let _e=ie.prevZ,xe=ie.nextZ;for(;_e&&_e.z>=pe&&xe&&xe.z<=ye;){if(_e.x>=de&&_e.x<=me&&_e.y>=ge&&_e.y<=ve&&_e!==re&&_e!==ae&&pointInTriangle(oe,he,le,fe,ce,ue,_e.x,_e.y)&&area(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,xe.x>=de&&xe.x<=me&&xe.y>=ge&&xe.y<=ve&&xe!==re&&xe!==ae&&pointInTriangle(oe,he,le,fe,ce,ue,xe.x,xe.y)&&area(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;_e&&_e.z>=pe;){if(_e.x>=de&&_e.x<=me&&_e.y>=ge&&_e.y<=ve&&_e!==re&&_e!==ae&&pointInTriangle(oe,he,le,fe,ce,ue,_e.x,_e.y)&&area(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;xe&&xe.z<=ye;){if(xe.x>=de&&xe.x<=me&&xe.y>=ge&&xe.y<=ve&&xe!==re&&xe!==ae&&pointInTriangle(oe,he,le,fe,ce,ue,xe.x,xe.y)&&area(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function cureLocalIntersections(ie,ee,te){let ne=ie;do{const re=ne.prev,se=ne.next.next;!equals(re,se)&&intersects(re,ne,ne.next,se)&&locallyInside(re,se)&&locallyInside(se,re)&&(ee.push(re.i/te|0),ee.push(ne.i/te|0),ee.push(se.i/te|0),removeNode(ne),removeNode(ne.next),ne=ie=se),ne=ne.next}while(ne!==ie);return filterPoints(ne)}function splitEarcut(ie,ee,te,ne,re,se){let ae=ie;do{let oe=ae.next.next;for(;oe!==ae.prev;){if(ae.i!==oe.i&&isValidDiagonal(ae,oe)){let le=splitPolygon(ae,oe);ae=filterPoints(ae,ae.next),le=filterPoints(le,le.next),earcutLinked(ae,ee,te,ne,re,se,0),earcutLinked(le,ee,te,ne,re,se,0);return}oe=oe.next}ae=ae.next}while(ae!==ie)}function eliminateHoles(ie,ee,te,ne){const re=[];let se,ae,oe,le,ce;for(se=0,ae=ee.length;se<ae;se++)oe=ee[se]*ne,le=se<ae-1?ee[se+1]*ne:ie.length,ce=linkedList(ie,oe,le,ne,!1),ce===ce.next&&(ce.steiner=!0),re.push(getLeftmost(ce));for(re.sort(compareX),se=0;se<re.length;se++)te=eliminateHole(re[se],te);return te}function compareX(ie,ee){return ie.x-ee.x}function eliminateHole(ie,ee){const te=findHoleBridge(ie,ee);if(!te)return ee;const ne=splitPolygon(te,ie);return filterPoints(ne,ne.next),filterPoints(te,te.next)}function findHoleBridge(ie,ee){let te=ee,ne=-1/0,re;const se=ie.x,ae=ie.y;do{if(ae<=te.y&&ae>=te.next.y&&te.next.y!==te.y){const ue=te.x+(ae-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(ue<=se&&ue>ne&&(ne=ue,re=te.x<te.next.x?te:te.next,ue===se))return re}te=te.next}while(te!==ee);if(!re)return null;const oe=re,le=re.x,ce=re.y;let he=1/0,fe;te=re;do se>=te.x&&te.x>=le&&se!==te.x&&pointInTriangle(ae<ce?se:ne,ae,le,ce,ae<ce?ne:se,ae,te.x,te.y)&&(fe=Math.abs(ae-te.y)/(se-te.x),locallyInside(te,ie)&&(fe<he||fe===he&&(te.x>re.x||te.x===re.x&&sectorContainsSector(re,te)))&&(re=te,he=fe)),te=te.next;while(te!==oe);return re}function sectorContainsSector(ie,ee){return area(ie.prev,ie,ee.prev)<0&&area(ee.next,ie,ie.next)<0}function indexCurve(ie,ee,te,ne){let re=ie;do re.z===0&&(re.z=zOrder(re.x,re.y,ee,te,ne)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==ie);re.prevZ.nextZ=null,re.prevZ=null,sortLinked(re)}function sortLinked(ie){let ee,te,ne,re,se,ae,oe,le,ce=1;do{for(te=ie,ie=null,se=null,ae=0;te;){for(ae++,ne=te,oe=0,ee=0;ee<ce&&(oe++,ne=ne.nextZ,!!ne);ee++);for(le=ce;oe>0||le>0&&ne;)oe!==0&&(le===0||!ne||te.z<=ne.z)?(re=te,te=te.nextZ,oe--):(re=ne,ne=ne.nextZ,le--),se?se.nextZ=re:ie=re,re.prevZ=se,se=re;te=ne}se.nextZ=null,ce*=2}while(ae>1);return ie}function zOrder(ie,ee,te,ne,re){return ie=(ie-te)*re|0,ee=(ee-ne)*re|0,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,ie|ee<<1}function getLeftmost(ie){let ee=ie,te=ie;do(ee.x<te.x||ee.x===te.x&&ee.y<te.y)&&(te=ee),ee=ee.next;while(ee!==ie);return te}function pointInTriangle(ie,ee,te,ne,re,se,ae,oe){return(re-ae)*(ee-oe)>=(ie-ae)*(se-oe)&&(ie-ae)*(ne-oe)>=(te-ae)*(ee-oe)&&(te-ae)*(se-oe)>=(re-ae)*(ne-oe)}function isValidDiagonal(ie,ee){return ie.next.i!==ee.i&&ie.prev.i!==ee.i&&!intersectsPolygon(ie,ee)&&(locallyInside(ie,ee)&&locallyInside(ee,ie)&&middleInside(ie,ee)&&(area(ie.prev,ie,ee.prev)||area(ie,ee.prev,ee))||equals(ie,ee)&&area(ie.prev,ie,ie.next)>0&&area(ee.prev,ee,ee.next)>0)}function area(ie,ee,te){return(ee.y-ie.y)*(te.x-ee.x)-(ee.x-ie.x)*(te.y-ee.y)}function equals(ie,ee){return ie.x===ee.x&&ie.y===ee.y}function intersects(ie,ee,te,ne){const re=sign(area(ie,ee,te)),se=sign(area(ie,ee,ne)),ae=sign(area(te,ne,ie)),oe=sign(area(te,ne,ee));return!!(re!==se&&ae!==oe||re===0&&onSegment(ie,te,ee)||se===0&&onSegment(ie,ne,ee)||ae===0&&onSegment(te,ie,ne)||oe===0&&onSegment(te,ee,ne))}function onSegment(ie,ee,te){return ee.x<=Math.max(ie.x,te.x)&&ee.x>=Math.min(ie.x,te.x)&&ee.y<=Math.max(ie.y,te.y)&&ee.y>=Math.min(ie.y,te.y)}function sign(ie){return ie>0?1:ie<0?-1:0}function intersectsPolygon(ie,ee){let te=ie;do{if(te.i!==ie.i&&te.next.i!==ie.i&&te.i!==ee.i&&te.next.i!==ee.i&&intersects(te,te.next,ie,ee))return!0;te=te.next}while(te!==ie);return!1}function locallyInside(ie,ee){return area(ie.prev,ie,ie.next)<0?area(ie,ee,ie.next)>=0&&area(ie,ie.prev,ee)>=0:area(ie,ee,ie.prev)<0||area(ie,ie.next,ee)<0}function middleInside(ie,ee){let te=ie,ne=!1;const re=(ie.x+ee.x)/2,se=(ie.y+ee.y)/2;do te.y>se!=te.next.y>se&&te.next.y!==te.y&&re<(te.next.x-te.x)*(se-te.y)/(te.next.y-te.y)+te.x&&(ne=!ne),te=te.next;while(te!==ie);return ne}function splitPolygon(ie,ee){const te=new Node(ie.i,ie.x,ie.y),ne=new Node(ee.i,ee.x,ee.y),re=ie.next,se=ee.prev;return ie.next=ee,ee.prev=ie,te.next=re,re.prev=te,ne.next=te,te.prev=ne,se.next=ne,ne.prev=se,ne}function insertNode(ie,ee,te,ne){const re=new Node(ie,ee,te);return ne?(re.next=ne.next,re.prev=ne,ne.next.prev=re,ne.next=re):(re.prev=re,re.next=re),re}function removeNode(ie){ie.next.prev=ie.prev,ie.prev.next=ie.next,ie.prevZ&&(ie.prevZ.nextZ=ie.nextZ),ie.nextZ&&(ie.nextZ.prevZ=ie.prevZ)}function Node(ie,ee,te){this.i=ie,this.x=ee,this.y=te,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ie,ee,te,ne){let re=0;for(let se=ee,ae=te-ne;se<te;se+=ne)re+=(ie[ae]-ie[se])*(ie[se+1]+ie[ae+1]),ae=se;return re}class ShapeUtils{static area(ee){const te=ee.length;let ne=0;for(let re=te-1,se=0;se<te;re=se++)ne+=ee[re].x*ee[se].y-ee[se].x*ee[re].y;return ne*.5}static isClockWise(ee){return ShapeUtils.area(ee)<0}static triangulateShape(ee,te){const ne=[],re=[],se=[];removeDupEndPts(ee),addContour(ne,ee);let ae=ee.length;te.forEach(removeDupEndPts);for(let le=0;le<te.length;le++)re.push(ae),ae+=te[le].length,addContour(ne,te[le]);const oe=Earcut.triangulate(ne,re);for(let le=0;le<oe.length;le+=3)se.push(oe.slice(le,le+3));return se}}function removeDupEndPts(ie){const ee=ie.length;ee>2&&ie[ee-1].equals(ie[0])&&ie.pop()}function addContour(ie,ee){for(let te=0;te<ee.length;te++)ie.push(ee[te].x),ie.push(ee[te].y)}class ExtrudeGeometry extends BufferGeometry{constructor(ee=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),te={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:ee,options:te},ee=Array.isArray(ee)?ee:[ee];const ne=this,re=[],se=[];for(let oe=0,le=ee.length;oe<le;oe++){const ce=ee[oe];ae(ce)}this.setAttribute("position",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2)),this.computeVertexNormals();function ae(oe){const le=[],ce=te.curveSegments!==void 0?te.curveSegments:12,he=te.steps!==void 0?te.steps:1,fe=te.depth!==void 0?te.depth:1;let ue=te.bevelEnabled!==void 0?te.bevelEnabled:!0,de=te.bevelThickness!==void 0?te.bevelThickness:.2,ge=te.bevelSize!==void 0?te.bevelSize:de-.1,me=te.bevelOffset!==void 0?te.bevelOffset:0,ve=te.bevelSegments!==void 0?te.bevelSegments:3;const pe=te.extrudePath,ye=te.UVGenerator!==void 0?te.UVGenerator:WorldUVGenerator;let _e,xe=!1,Se,be,Ee,Pe;pe&&(_e=pe.getSpacedPoints(he),xe=!0,ue=!1,Se=pe.computeFrenetFrames(he,!1),be=new Vector3,Ee=new Vector3,Pe=new Vector3),ue||(ve=0,de=0,ge=0,me=0);const we=oe.extractPoints(ce);let Me=we.shape;const De=we.holes;if(!ShapeUtils.isClockWise(Me)){Me=Me.reverse();for(let Oe=0,Ze=De.length;Oe<Ze;Oe++){const qe=De[Oe];ShapeUtils.isClockWise(qe)&&(De[Oe]=qe.reverse())}}const ze=ShapeUtils.triangulateShape(Me,De),Ve=Me;for(let Oe=0,Ze=De.length;Oe<Ze;Oe++){const qe=De[Oe];Me=Me.concat(qe)}function Ue(Oe,Ze,qe){return Ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),Oe.clone().addScaledVector(Ze,qe)}const Ae=Me.length,Fe=ze.length;function Te(Oe,Ze,qe){let ut,at,We;const ft=Oe.x-Ze.x,St=Oe.y-Ze.y,$e=qe.x-Oe.x,Re=qe.y-Oe.y,Qe=ft*ft+St*St,ct=ft*Re-St*$e;if(Math.abs(ct)>Number.EPSILON){const lt=Math.sqrt(Qe),ot=Math.sqrt($e*$e+Re*Re),Et=Ze.x-St/lt,dt=Ze.y+ft/lt,bt=qe.x-Re/ot,It=qe.y+$e/ot,mt=((bt-Et)*Re-(It-dt)*$e)/(ft*Re-St*$e);ut=Et+ft*mt-Oe.x,at=dt+St*mt-Oe.y;const Tt=ut*ut+at*at;if(Tt<=2)return new Vector2(ut,at);We=Math.sqrt(Tt/2)}else{let lt=!1;ft>Number.EPSILON?$e>Number.EPSILON&&(lt=!0):ft<-Number.EPSILON?$e<-Number.EPSILON&&(lt=!0):Math.sign(St)===Math.sign(Re)&&(lt=!0),lt?(ut=-St,at=ft,We=Math.sqrt(Qe)):(ut=ft,at=St,We=Math.sqrt(Qe/2))}return new Vector2(ut/We,at/We)}const Ce=[];for(let Oe=0,Ze=Ve.length,qe=Ze-1,ut=Oe+1;Oe<Ze;Oe++,qe++,ut++)qe===Ze&&(qe=0),ut===Ze&&(ut=0),Ce[Oe]=Te(Ve[Oe],Ve[qe],Ve[ut]);const Le=[];let Be,st=Ce.concat();for(let Oe=0,Ze=De.length;Oe<Ze;Oe++){const qe=De[Oe];Be=[];for(let ut=0,at=qe.length,We=at-1,ft=ut+1;ut<at;ut++,We++,ft++)We===at&&(We=0),ft===at&&(ft=0),Be[ut]=Te(qe[ut],qe[We],qe[ft]);Le.push(Be),st=st.concat(Be)}for(let Oe=0;Oe<ve;Oe++){const Ze=Oe/ve,qe=de*Math.cos(Ze*Math.PI/2),ut=ge*Math.sin(Ze*Math.PI/2)+me;for(let at=0,We=Ve.length;at<We;at++){const ft=Ue(Ve[at],Ce[at],ut);et(ft.x,ft.y,-qe)}for(let at=0,We=De.length;at<We;at++){const ft=De[at];Be=Le[at];for(let St=0,$e=ft.length;St<$e;St++){const Re=Ue(ft[St],Be[St],ut);et(Re.x,Re.y,-qe)}}}const Xe=ge+me;for(let Oe=0;Oe<Ae;Oe++){const Ze=ue?Ue(Me[Oe],st[Oe],Xe):Me[Oe];xe?(Ee.copy(Se.normals[0]).multiplyScalar(Ze.x),be.copy(Se.binormals[0]).multiplyScalar(Ze.y),Pe.copy(_e[0]).add(Ee).add(be),et(Pe.x,Pe.y,Pe.z)):et(Ze.x,Ze.y,0)}for(let Oe=1;Oe<=he;Oe++)for(let Ze=0;Ze<Ae;Ze++){const qe=ue?Ue(Me[Ze],st[Ze],Xe):Me[Ze];xe?(Ee.copy(Se.normals[Oe]).multiplyScalar(qe.x),be.copy(Se.binormals[Oe]).multiplyScalar(qe.y),Pe.copy(_e[Oe]).add(Ee).add(be),et(Pe.x,Pe.y,Pe.z)):et(qe.x,qe.y,fe/he*Oe)}for(let Oe=ve-1;Oe>=0;Oe--){const Ze=Oe/ve,qe=de*Math.cos(Ze*Math.PI/2),ut=ge*Math.sin(Ze*Math.PI/2)+me;for(let at=0,We=Ve.length;at<We;at++){const ft=Ue(Ve[at],Ce[at],ut);et(ft.x,ft.y,fe+qe)}for(let at=0,We=De.length;at<We;at++){const ft=De[at];Be=Le[at];for(let St=0,$e=ft.length;St<$e;St++){const Re=Ue(ft[St],Be[St],ut);xe?et(Re.x,Re.y+_e[he-1].y,_e[he-1].x+qe):et(Re.x,Re.y,fe+qe)}}}Ge(),He();function Ge(){const Oe=re.length/3;if(ue){let Ze=0,qe=Ae*Ze;for(let ut=0;ut<Fe;ut++){const at=ze[ut];ht(at[2]+qe,at[1]+qe,at[0]+qe)}Ze=he+ve*2,qe=Ae*Ze;for(let ut=0;ut<Fe;ut++){const at=ze[ut];ht(at[0]+qe,at[1]+qe,at[2]+qe)}}else{for(let Ze=0;Ze<Fe;Ze++){const qe=ze[Ze];ht(qe[2],qe[1],qe[0])}for(let Ze=0;Ze<Fe;Ze++){const qe=ze[Ze];ht(qe[0]+Ae*he,qe[1]+Ae*he,qe[2]+Ae*he)}}ne.addGroup(Oe,re.length/3-Oe,0)}function He(){const Oe=re.length/3;let Ze=0;Je(Ve,Ze),Ze+=Ve.length;for(let qe=0,ut=De.length;qe<ut;qe++){const at=De[qe];Je(at,Ze),Ze+=at.length}ne.addGroup(Oe,re.length/3-Oe,1)}function Je(Oe,Ze){let qe=Oe.length;for(;--qe>=0;){const ut=qe;let at=qe-1;at<0&&(at=Oe.length-1);for(let We=0,ft=he+ve*2;We<ft;We++){const St=Ae*We,$e=Ae*(We+1),Re=Ze+ut+St,Qe=Ze+at+St,ct=Ze+at+$e,lt=Ze+ut+$e;vt(Re,Qe,ct,lt)}}}function et(Oe,Ze,qe){le.push(Oe),le.push(Ze),le.push(qe)}function ht(Oe,Ze,qe){gt(Oe),gt(Ze),gt(qe);const ut=re.length/3,at=ye.generateTopUV(ne,re,ut-3,ut-2,ut-1);yt(at[0]),yt(at[1]),yt(at[2])}function vt(Oe,Ze,qe,ut){gt(Oe),gt(Ze),gt(ut),gt(Ze),gt(qe),gt(ut);const at=re.length/3,We=ye.generateSideWallUV(ne,re,at-6,at-3,at-2,at-1);yt(We[0]),yt(We[1]),yt(We[3]),yt(We[1]),yt(We[2]),yt(We[3])}function gt(Oe){re.push(le[Oe*3+0]),re.push(le[Oe*3+1]),re.push(le[Oe*3+2])}function yt(Oe){se.push(Oe.x),se.push(Oe.y)}}}copy(ee){return super.copy(ee),this.parameters=Object.assign({},ee.parameters),this}toJSON(){const ee=super.toJSON(),te=this.parameters.shapes,ne=this.parameters.options;return toJSON$1(te,ne,ee)}static fromJSON(ee,te){const ne=[];for(let se=0,ae=ee.shapes.length;se<ae;se++){const oe=te[ee.shapes[se]];ne.push(oe)}const re=ee.options.extrudePath;return re!==void 0&&(ee.options.extrudePath=new Curves[re.type]().fromJSON(re)),new ExtrudeGeometry(ne,ee.options)}}const WorldUVGenerator={generateTopUV:function(ie,ee,te,ne,re){const se=ee[te*3],ae=ee[te*3+1],oe=ee[ne*3],le=ee[ne*3+1],ce=ee[re*3],he=ee[re*3+1];return[new Vector2(se,ae),new Vector2(oe,le),new Vector2(ce,he)]},generateSideWallUV:function(ie,ee,te,ne,re,se){const ae=ee[te*3],oe=ee[te*3+1],le=ee[te*3+2],ce=ee[ne*3],he=ee[ne*3+1],fe=ee[ne*3+2],ue=ee[re*3],de=ee[re*3+1],ge=ee[re*3+2],me=ee[se*3],ve=ee[se*3+1],pe=ee[se*3+2];return Math.abs(oe-he)<Math.abs(ae-ce)?[new Vector2(ae,1-le),new Vector2(ce,1-fe),new Vector2(ue,1-ge),new Vector2(me,1-pe)]:[new Vector2(oe,1-le),new Vector2(he,1-fe),new Vector2(de,1-ge),new Vector2(ve,1-pe)]}};function toJSON$1(ie,ee,te){if(te.shapes=[],Array.isArray(ie))for(let ne=0,re=ie.length;ne<re;ne++){const se=ie[ne];te.shapes.push(se.uuid)}else te.shapes.push(ie.uuid);return te.options=Object.assign({},ee),ee.extrudePath!==void 0&&(te.options.extrudePath=ee.extrudePath.toJSON()),te}const Cache={enabled:!1,files:{},add:function(ie,ee){this.enabled!==!1&&(this.files[ie]=ee)},get:function(ie){if(this.enabled!==!1)return this.files[ie]},remove:function(ie){delete this.files[ie]},clear:function(){this.files={}}};class LoadingManager{constructor(ee,te,ne){const re=this;let se=!1,ae=0,oe=0,le;const ce=[];this.onStart=void 0,this.onLoad=ee,this.onProgress=te,this.onError=ne,this.itemStart=function(he){oe++,se===!1&&re.onStart!==void 0&&re.onStart(he,ae,oe),se=!0},this.itemEnd=function(he){ae++,re.onProgress!==void 0&&re.onProgress(he,ae,oe),ae===oe&&(se=!1,re.onLoad!==void 0&&re.onLoad())},this.itemError=function(he){re.onError!==void 0&&re.onError(he)},this.resolveURL=function(he){return le?le(he):he},this.setURLModifier=function(he){return le=he,this},this.addHandler=function(he,fe){return ce.push(he,fe),this},this.removeHandler=function(he){const fe=ce.indexOf(he);return fe!==-1&&ce.splice(fe,2),this},this.getHandler=function(he){for(let fe=0,ue=ce.length;fe<ue;fe+=2){const de=ce[fe],ge=ce[fe+1];if(de.global&&(de.lastIndex=0),de.test(he))return ge}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(ee){this.manager=ee!==void 0?ee:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(ee,te){const ne=this;return new Promise(function(re,se){ne.load(ee,re,te,se)})}parse(){}setCrossOrigin(ee){return this.crossOrigin=ee,this}setWithCredentials(ee){return this.withCredentials=ee,this}setPath(ee){return this.path=ee,this}setResourcePath(ee){return this.resourcePath=ee,this}setRequestHeader(ee){return this.requestHeader=ee,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(ee,te){super(ee),this.response=te}}class FileLoader extends Loader{constructor(ee){super(ee)}load(ee,te,ne,re){ee===void 0&&(ee=""),this.path!==void 0&&(ee=this.path+ee),ee=this.manager.resolveURL(ee);const se=Cache.get(ee);if(se!==void 0)return this.manager.itemStart(ee),setTimeout(()=>{te&&te(se),this.manager.itemEnd(ee)},0),se;if(loading[ee]!==void 0){loading[ee].push({onLoad:te,onProgress:ne,onError:re});return}loading[ee]=[],loading[ee].push({onLoad:te,onProgress:ne,onError:re});const ae=new Request(ee,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),oe=this.mimeType,le=this.responseType;fetch(ae).then(ce=>{if(ce.status===200||ce.status===0){if(ce.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||ce.body===void 0||ce.body.getReader===void 0)return ce;const he=loading[ee],fe=ce.body.getReader(),ue=ce.headers.get("X-File-Size")||ce.headers.get("Content-Length"),de=ue?parseInt(ue):0,ge=de!==0;let me=0;const ve=new ReadableStream({start(pe){ye();function ye(){fe.read().then(({done:_e,value:xe})=>{if(_e)pe.close();else{me+=xe.byteLength;const Se=new ProgressEvent("progress",{lengthComputable:ge,loaded:me,total:de});for(let be=0,Ee=he.length;be<Ee;be++){const Pe=he[be];Pe.onProgress&&Pe.onProgress(Se)}pe.enqueue(xe),ye()}},_e=>{pe.error(_e)})}}});return new Response(ve)}else throw new HttpError(`fetch for "${ce.url}" responded with ${ce.status}: ${ce.statusText}`,ce)}).then(ce=>{switch(le){case"arraybuffer":return ce.arrayBuffer();case"blob":return ce.blob();case"document":return ce.text().then(he=>new DOMParser().parseFromString(he,oe));case"json":return ce.json();default:if(oe===void 0)return ce.text();{const fe=/charset="?([^;"\s]*)"?/i.exec(oe),ue=fe&&fe[1]?fe[1].toLowerCase():void 0,de=new TextDecoder(ue);return ce.arrayBuffer().then(ge=>de.decode(ge))}}}).then(ce=>{Cache.add(ee,ce);const he=loading[ee];delete loading[ee];for(let fe=0,ue=he.length;fe<ue;fe++){const de=he[fe];de.onLoad&&de.onLoad(ce)}}).catch(ce=>{const he=loading[ee];if(he===void 0)throw this.manager.itemError(ee),ce;delete loading[ee];for(let fe=0,ue=he.length;fe<ue;fe++){const de=he[fe];de.onError&&de.onError(ce)}this.manager.itemError(ee)}).finally(()=>{this.manager.itemEnd(ee)}),this.manager.itemStart(ee)}setResponseType(ee){return this.responseType=ee,this}setMimeType(ee){return this.mimeType=ee,this}}class ImageLoader extends Loader{constructor(ee){super(ee)}load(ee,te,ne,re){this.path!==void 0&&(ee=this.path+ee),ee=this.manager.resolveURL(ee);const se=this,ae=Cache.get(ee);if(ae!==void 0)return se.manager.itemStart(ee),setTimeout(function(){te&&te(ae),se.manager.itemEnd(ee)},0),ae;const oe=createElementNS("img");function le(){he(),Cache.add(ee,this),te&&te(this),se.manager.itemEnd(ee)}function ce(fe){he(),re&&re(fe),se.manager.itemError(ee),se.manager.itemEnd(ee)}function he(){oe.removeEventListener("load",le,!1),oe.removeEventListener("error",ce,!1)}return oe.addEventListener("load",le,!1),oe.addEventListener("error",ce,!1),ee.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(oe.crossOrigin=this.crossOrigin),se.manager.itemStart(ee),oe.src=ee,oe}}class TextureLoader extends Loader{constructor(ee){super(ee)}load(ee,te,ne,re){const se=new Texture,ae=new ImageLoader(this.manager);return ae.setCrossOrigin(this.crossOrigin),ae.setPath(this.path),ae.load(ee,function(oe){se.image=oe,se.needsUpdate=!0,te!==void 0&&te(se)},ne,re),se}}class Light extends Object3D{constructor(ee,te=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(ee),this.intensity=te}dispose(){}copy(ee,te){return super.copy(ee,te),this.color.copy(ee.color),this.intensity=ee.intensity,this}toJSON(ee){const te=super.toJSON(ee);return te.object.color=this.color.getHex(),te.object.intensity=this.intensity,this.groundColor!==void 0&&(te.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(te.object.distance=this.distance),this.angle!==void 0&&(te.object.angle=this.angle),this.decay!==void 0&&(te.object.decay=this.decay),this.penumbra!==void 0&&(te.object.penumbra=this.penumbra),this.shadow!==void 0&&(te.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(te.object.target=this.target.uuid),te}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(ee){this.camera=ee,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(ee){const te=this.camera,ne=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(ee.matrixWorld),te.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(ee.target.matrixWorld),te.lookAt(_lookTarget$1),te.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),ne.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ne.multiply(_projScreenMatrix$1)}getViewport(ee){return this._viewports[ee]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(ee){return this.camera=ee.camera.clone(),this.intensity=ee.intensity,this.bias=ee.bias,this.radius=ee.radius,this.mapSize.copy(ee.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const ee={};return this.intensity!==1&&(ee.intensity=this.intensity),this.bias!==0&&(ee.bias=this.bias),this.normalBias!==0&&(ee.normalBias=this.normalBias),this.radius!==1&&(ee.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(ee.mapSize=this.mapSize.toArray()),ee.camera=this.camera.toJSON(!1).object,delete ee.camera.matrix,ee}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(ee,te=0){const ne=this.camera,re=this.matrix,se=ee.distance||ne.far;se!==ne.far&&(ne.far=se,ne.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(ee.matrixWorld),ne.position.copy(_lightPositionWorld),_lookTarget.copy(ne.position),_lookTarget.add(this._cubeDirections[te]),ne.up.copy(this._cubeUps[te]),ne.lookAt(_lookTarget),ne.updateMatrixWorld(),re.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(ee,te,ne=0,re=2){super(ee,te),this.isPointLight=!0,this.type="PointLight",this.distance=ne,this.decay=re,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(ee){this.intensity=ee/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(ee,te){return super.copy(ee,te),this.distance=ee.distance,this.decay=ee.decay,this.shadow=ee.shadow.clone(),this}}class AmbientLight extends Light{constructor(ee,te){super(ee,te),this.isAmbientLight=!0,this.type="AmbientLight"}}const _matrix=new Matrix4;class Raycaster{constructor(ee,te,ne=0,re=1/0){this.ray=new Ray(ee,te),this.near=ne,this.far=re,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(ee,te){this.ray.set(ee,te)}setFromCamera(ee,te){te.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(te.matrixWorld),this.ray.direction.set(ee.x,ee.y,.5).unproject(te).sub(this.ray.origin).normalize(),this.camera=te):te.isOrthographicCamera?(this.ray.origin.set(ee.x,ee.y,(te.near+te.far)/(te.near-te.far)).unproject(te),this.ray.direction.set(0,0,-1).transformDirection(te.matrixWorld),this.camera=te):console.error("THREE.Raycaster: Unsupported camera type: "+te.type)}setFromXRController(ee){return _matrix.identity().extractRotation(ee.matrixWorld),this.ray.origin.setFromMatrixPosition(ee.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(ee,te=!0,ne=[]){return intersect(ee,this,ne,te),ne.sort(ascSort),ne}intersectObjects(ee,te=!0,ne=[]){for(let re=0,se=ee.length;re<se;re++)intersect(ee[re],this,ne,te);return ne.sort(ascSort),ne}}function ascSort(ie,ee){return ie.distance-ee.distance}function intersect(ie,ee,te,ne){let re=!0;if(ie.layers.test(ee.layers)&&ie.raycast(ee,te)===!1&&(re=!1),re===!0&&ne===!0){const se=ie.children;for(let ae=0,oe=se.length;ae<oe;ae++)intersect(se[ae],ee,te,!0)}}class Spherical{constructor(ee=1,te=0,ne=0){return this.radius=ee,this.phi=te,this.theta=ne,this}set(ee,te,ne){return this.radius=ee,this.phi=te,this.theta=ne,this}copy(ee){return this.radius=ee.radius,this.phi=ee.phi,this.theta=ee.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(ee){return this.setFromCartesianCoords(ee.x,ee.y,ee.z)}setFromCartesianCoords(ee,te,ne){return this.radius=Math.sqrt(ee*ee+te*te+ne*ne),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(ee,ne),this.phi=Math.acos(clamp$1(te/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(ee,te){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(ee,te),this}lineTo(ee,te){return this.currentPath.lineTo(ee,te),this}quadraticCurveTo(ee,te,ne,re){return this.currentPath.quadraticCurveTo(ee,te,ne,re),this}bezierCurveTo(ee,te,ne,re,se,ae){return this.currentPath.bezierCurveTo(ee,te,ne,re,se,ae),this}splineThru(ee){return this.currentPath.splineThru(ee),this}toShapes(ee){function te(pe){const ye=[];for(let _e=0,xe=pe.length;_e<xe;_e++){const Se=pe[_e],be=new Shape;be.curves=Se.curves,ye.push(be)}return ye}function ne(pe,ye){const _e=ye.length;let xe=!1;for(let Se=_e-1,be=0;be<_e;Se=be++){let Ee=ye[Se],Pe=ye[be],we=Pe.x-Ee.x,Me=Pe.y-Ee.y;if(Math.abs(Me)>Number.EPSILON){if(Me<0&&(Ee=ye[be],we=-we,Pe=ye[Se],Me=-Me),pe.y<Ee.y||pe.y>Pe.y)continue;if(pe.y===Ee.y){if(pe.x===Ee.x)return!0}else{const De=Me*(pe.x-Ee.x)-we*(pe.y-Ee.y);if(De===0)return!0;if(De<0)continue;xe=!xe}}else{if(pe.y!==Ee.y)continue;if(Pe.x<=pe.x&&pe.x<=Ee.x||Ee.x<=pe.x&&pe.x<=Pe.x)return!0}}return xe}const re=ShapeUtils.isClockWise,se=this.subPaths;if(se.length===0)return[];let ae,oe,le;const ce=[];if(se.length===1)return oe=se[0],le=new Shape,le.curves=oe.curves,ce.push(le),ce;let he=!re(se[0].getPoints());he=ee?!he:he;const fe=[],ue=[];let de=[],ge=0,me;ue[ge]=void 0,de[ge]=[];for(let pe=0,ye=se.length;pe<ye;pe++)oe=se[pe],me=oe.getPoints(),ae=re(me),ae=ee?!ae:ae,ae?(!he&&ue[ge]&&ge++,ue[ge]={s:new Shape,p:me},ue[ge].s.curves=oe.curves,he&&ge++,de[ge]=[]):de[ge].push({h:oe,p:me[0]});if(!ue[0])return te(se);if(ue.length>1){let pe=!1,ye=0;for(let _e=0,xe=ue.length;_e<xe;_e++)fe[_e]=[];for(let _e=0,xe=ue.length;_e<xe;_e++){const Se=de[_e];for(let be=0;be<Se.length;be++){const Ee=Se[be];let Pe=!0;for(let we=0;we<ue.length;we++)ne(Ee.p,ue[we].p)&&(_e!==we&&ye++,Pe?(Pe=!1,fe[we].push(Ee)):pe=!0);Pe&&fe[_e].push(Ee)}}ye>0&&pe===!1&&(de=fe)}let ve;for(let pe=0,ye=ue.length;pe<ye;pe++){le=ue[pe].s,ce.push(le),ve=de[pe];for(let _e=0,xe=ve.length;_e<xe;_e++)le.holes.push(ve[_e].h)}return ce}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION),gsapWithCSS.registerPlugin(ScrollTrigger$1);class NotFound{constructor(){this.lenis=new Lenis({smooth:!0,infinite:!0}),this.scene=new Scene,this.camera=new PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new WebGLRenderer({antialias:!0,alpha:!0}),this.imagePlanes=[],this.imageUrls=["https://cdn.shopify.com/s/files/1/0650/2826/0015/files/v2-yg-inked-3103.jpg?v=1719564054","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/MARK2999.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/tiana-theatre-355.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/MARK4505.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/ter-crwn-4165_V1-v2.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/lyric-nas-396.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/farhia-library-0876.jpg?v=1719564053","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/22049-05-053_p_V1-v2.jpg?v=1719564054","https://cdn.shopify.com/s/files/1/0650/2826/0015/files/0424_OTE_BIGSEAN_FINAL_COVERSL.png?v=1719564054"],this.init()}init(){this.setupRenderer(),this.setupCamera(),this.loadImages(),this.setupEventListeners(),this.animate()}setupRenderer(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(0,0),document.querySelector(".canvas-wrapper").appendChild(this.renderer.domElement)}setupCamera(){this.camera.position.set(0,0,30)}loadImages(){Promise.all(this.imageUrls.map(ee=>new Promise(te=>{new TextureLoader().load(ee,ne=>{const re=ne.image.width/ne.image.height;te({texture:ne,aspect:re})})}))).then(ee=>{ee.forEach(({texture:te,aspect:ne},re)=>{const se=new MeshBasicMaterial({map:te,side:DoubleSide,transparent:!0}),ae=window.innerWidth/200,oe=new PlaneGeometry(ae,ae/ne),le=new Mesh(oe,se);le.aspect=ne,te.colorSpace=SRGBColorSpace,te.minFilter=LinearFilter,te.magFilter=LinearFilter,te.format=RGBAFormat,this.scene.add(le),this.imagePlanes.push(le)}),this.setupScrollAnimation()})}setupScrollAnimation(){gsapWithCSS.to(this.imagePlanes,{duration:1,scrollTrigger:{trigger:"body",start:"top top",end:"+=200%",scrub:!0,pin:!0},onUpdate:()=>this.updateImagePositions()})}updateImagePositions(){const ee=window.scrollY/window.innerHeight*Math.PI*2;this.radius=window.innerWidth/100,this.imagePlanes.forEach((te,ne)=>{const re=ne/this.imagePlanes.length*Math.PI*2+ee;te.position.x=this.radius*Math.cos(re),te.position.y=this.radius*Math.sin(re),te.position.z=-10,te.rotation.z=re;const se=(te.position.y+this.radius)/(2*this.radius);te.material.opacity=Math.abs(Math.cos(se*Math.PI))}),this.renderer.render(this.scene,this.camera)}animate(){this.lenis.raf(performance.now()),this.renderer.render(this.scene,this.camera),requestAnimationFrame(()=>this.animate())}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.updateImageScales(),this.updateImagePositions()}updateImageScales(){this.imagePlanes.forEach(ee=>{const te=window.innerWidth/200;ee.geometry=new PlaneGeometry(te,te/ee.aspect)})}setupEventListeners(){window.addEventListener("resize",()=>this.onWindowResize(),!1)}}gsapWithCSS.registerPlugin(ScrollTrigger$1);class Still{constructor(ee){this.container=ee,this.images=ee.querySelectorAll(".image-container"),this.nextLinksContainer=document.querySelectorAll(".next-link"),this.links=Array.from(this.nextLinksContainer).map(te=>te.getAttribute("href")),this.nextLink=this.container.querySelector(".still-next"),this.prevLink=this.container.querySelector(".still-prev"),this.stillNextImgs=this.container.querySelectorAll(".still-img"),this.init()}init(){this.revealImages(),this.setUpNextPrev()}revealImages(){this.images.forEach(ee=>{gsapWithCSS.fromTo(ee,{clipPath:"inset(25% 25% 25% 25%)"},{clipPath:"inset(0% 0% 0% 0%)",scrollTrigger:{trigger:ee,start:"top 80%"},duration:1.5,ease:"expo.out"})}),gsapWithCSS.fromTo(this.stillNextImgs,{clipPath:"inset(100% 0% 0% 0%)"},{clipPath:"inset(0% 0% 0% 0%)",scrollTrigger:{trigger:this.container.querySelector(".still-next"),start:"top 80%"},duration:1.5,ease:"expo.out"}),this.stillNextImgs.forEach(ee=>{const te=gsapWithCSS.timeline({paused:!0});te.to(ee,{scale:1,duration:.75,ease:"expo.out"}),ee.addEventListener("mouseenter",()=>{te.play()}),ee.addEventListener("mouseleave",()=>{te.reverse()})})}findAdjacentLinks(ee,te){const ne=te.indexOf(ee);if(ne===-1)return{previous:null,next:null};const re=ne===0?te[te.length-1]:te[ne-1],se=ne===te.length-1?te[0]:te[ne+1];return{previous:re,next:se}}setUpNextPrev(){const ee=this.findAdjacentLinks(window.location.pathname,this.links);if(ee.next){this.nextLink.href=ee.next;const te=this.nextLinksContainer[this.links.indexOf(ee.next)],ne=te.querySelector("img"),re=te.querySelector(".next-heading");ne&&re&&(this.nextLink.querySelector("img").src=ne.src,this.nextLink.querySelector("h2").textContent=re.textContent)}if(ee.previous){this.prevLink.href=ee.previous;const te=this.nextLinksContainer[this.links.indexOf(ee.previous)],ne=te.querySelector("img"),re=te.querySelector(".next-heading");ne&&re&&(this.prevLink.querySelector("img").src=ne.src,this.prevLink.querySelector("h2").textContent=re.textContent)}}setupImageHoverZoom(){this.images.forEach(ee=>{const te=ee.querySelector("img");if(!te)return;const ne=document.createElement("div");ne.classList.add("zoom-container"),ne.style.position="fixed",ne.style.top="0",ne.style.left="0",ne.style.width="100%",ne.style.height="100%",ne.style.backgroundColor="rgba(0, 0, 0, 0.75)",ne.style.display="none",ne.style.justifyContent="center",ne.style.alignItems="center",ne.style.zIndex="1000",ne.style.pointerEvents="none";const re=document.createElement("img");re.src=te.src,re.style.maxWidth="60vw",re.style.maxHeight="60vh",re.style.objectFit="contain",ne.appendChild(re),document.body.appendChild(ne);const se=le=>{const ce=te.getBoundingClientRect(),he=(le.clientX-ce.left)/ce.width,fe=(le.clientY-ce.top)/ce.height;re.style.objectPosition=`${he*100}% ${fe*100}%`,ne.style.display="flex"},ae=()=>{ne.style.display="none"},oe=le=>{const ce=te.getBoundingClientRect(),he=(le.clientX-ce.left)/ce.width,fe=(le.clientY-ce.top)/ce.height;re.style.objectPosition=`${he*100}% ${fe*100}%`};te.addEventListener("mouseenter",se),te.addEventListener("mousemove",oe),te.addEventListener("mouseleave",ae)})}}let mmNav=gsapWithCSS.matchMedia();class Nav{constructor(ee){this.container=ee,this.navBlocks=this.container.querySelectorAll(".nav-block-wrapper"),this.stillMain=this.container.querySelector(".stills-main-wrapper"),this.stillDropdownItems=this.container.querySelectorAll(".still-dropdown-item-text"),this.mobIcon=this.container.querySelector(".mob-icon"),this.navLinksWrapper=this.container.querySelector(".nav-links-wrapper"),this.navLinks=this.container.querySelectorAll(".nav-link"),this.nav=this.container.querySelector("nav"),this.init()}init(){this.hoverAnimation(),this.mobileReveal(),this.disableRightClick()}hoverAnimation(){this.navBlocks.forEach(te=>{const ne=[...this.navBlocks].filter(re=>re!==te);te.addEventListener("mouseenter",()=>{gsapWithCSS.to(te.querySelector(".nav-block"),{clipPath:"inset(0% 0% 0% 0%)",ease:"expo.out"}),gsapWithCSS.to(te,{opacity:1,duration:.3},"<"),gsapWithCSS.to(ne,{opacity:.5,duration:.3},"<")}),te.addEventListener("mouseleave",()=>{gsapWithCSS.to(te.querySelector(".nav-block"),{clipPath:"inset(50% 50% 50% 50%)",ease:"expo.out"}),gsapWithCSS.to(te,{opacity:1,duration:.3},"<"),gsapWithCSS.to(ne,{opacity:1,duration:.3},"<")})});const ee=gsapWithCSS.timeline({paused:!0});ee.to(".icon-v",{scaleY:0}).to(".stills-list-dropdown-wrapper",{clipPath:"inset(0% 0% 0% 0%)",duration:.5},"<").fromTo(this.stillDropdownItems,{yPercent:110},{yPercent:0,duration:.5,stagger:.1},"<"),this.stillMain.addEventListener("mouseenter",()=>{ee.play()}),this.stillMain.addEventListener("mouseleave",()=>{ee.reverse()})}mobileReveal(){mmNav.add("(max-width: 767px)",()=>{this.navOpen=!1;const ee=gsapWithCSS.timeline({paused:!0});ee.to(this.navLinksWrapper,{clipPath:"inset(0% 0% 0% 0%)",duration:.5}).to(this.mobIcon,{rotate:180,duration:.5},"<").to(this.nav,{color:"#000",duration:.5},"<").fromTo([this.stillDropdownItems,this.navLinks],{yPercent:110},{yPercent:0,duration:.5,stagger:.1},"<"),this.mobIcon.addEventListener("click",()=>{this.navOpen?ee.reverse():ee.play(),this.navOpen=!this.navOpen})})}disableRightClick(){document.querySelectorAll("img").forEach(te=>{te.addEventListener("contextmenu",function(ne){ne.preventDefault();const re=document.createElement("div");re.textContent=`This photo is Copyright © ${new Date().getFullYear()} Mark Clennon Creative, LLC. All rights reserved.`,re.style.position="fixed",re.style.top=`${ne.clientY}px`,re.style.left=`${ne.clientX}px`,re.style.backgroundColor="rgba(128, 128, 128, 0.9)",re.style.color="#fff",re.style.padding="10px",re.style.borderRadius="5px",re.style.zIndex="1000",re.style.pointerEvents="none",re.style.fontFamily="Arial, sans-serif",re.style.fontSize="0.75rem",re.style.maxWidth="28ch",document.body.appendChild(re),setTimeout(()=>{re.remove()},2e3)})})}}/*!
 * ScrollToPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$1,_coreInitted,_window,_docEl,_body$2,_toArray$1,_config,ScrollTrigger,_windowExists=function(){return typeof window<"u"},_getGSAP=function(){return gsap$1||_windowExists()&&(gsap$1=window.gsap)&&gsap$1.registerPlugin&&gsap$1},_isString=function(ee){return typeof ee=="string"},_isFunction=function(ee){return typeof ee=="function"},_max=function(ee,te){var ne=te==="x"?"Width":"Height",re="scroll"+ne,se="client"+ne;return ee===_window||ee===_docEl||ee===_body$2?Math.max(_docEl[re],_body$2[re])-(_window["inner"+ne]||_docEl[se]||_body$2[se]):ee[re]-ee["offset"+ne]},_buildGetter=function(ee,te){var ne="scroll"+(te==="x"?"Left":"Top");return ee===_window&&(ee.pageXOffset!=null?ne="page"+te.toUpperCase()+"Offset":ee=_docEl[ne]!=null?_docEl:_body$2),function(){return ee[ne]}},_clean=function(ee,te,ne,re){if(_isFunction(ee)&&(ee=ee(te,ne,re)),typeof ee!="object")return _isString(ee)&&ee!=="max"&&ee.charAt(1)!=="="?{x:ee,y:ee}:{y:ee};if(ee.nodeType)return{y:ee,x:ee};var se={},ae;for(ae in ee)se[ae]=ae!=="onAutoKill"&&_isFunction(ee[ae])?ee[ae](te,ne,re):ee[ae];return se},_getOffset=function(ee,te){if(ee=_toArray$1(ee)[0],!ee||!ee.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var ne=ee.getBoundingClientRect(),re=!te||te===_window||te===_body$2,se=re?{top:_docEl.clientTop-(_window.pageYOffset||_docEl.scrollTop||_body$2.scrollTop||0),left:_docEl.clientLeft-(_window.pageXOffset||_docEl.scrollLeft||_body$2.scrollLeft||0)}:te.getBoundingClientRect(),ae={x:ne.left-se.left,y:ne.top-se.top};return!re&&te&&(ae.x+=_buildGetter(te,"x")(),ae.y+=_buildGetter(te,"y")()),ae},_parseVal=function(ee,te,ne,re,se){return!isNaN(ee)&&typeof ee!="object"?parseFloat(ee)-se:_isString(ee)&&ee.charAt(1)==="="?parseFloat(ee.substr(2))*(ee.charAt(0)==="-"?-1:1)+re-se:ee==="max"?_max(te,ne)-se:Math.min(_max(te,ne),_getOffset(ee,te)[ne]-se)},_initCore=function(){gsap$1=_getGSAP(),_windowExists()&&gsap$1&&typeof document<"u"&&document.body&&(_window=window,_body$2=document.body,_docEl=document.documentElement,_toArray$1=gsap$1.utils.toArray,gsap$1.config({autoKillThreshold:7}),_config=gsap$1.config(),_coreInitted=1)},ScrollToPlugin={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(ee){gsap$1=ee,_initCore()},init:function(ee,te,ne,re,se){_coreInitted||_initCore();var ae=this,oe=gsap$1.getProperty(ee,"scrollSnapType");ae.isWin=ee===_window,ae.target=ee,ae.tween=ne,te=_clean(te,re,ee,se),ae.vars=te,ae.autoKill=!!te.autoKill,ae.getX=_buildGetter(ee,"x"),ae.getY=_buildGetter(ee,"y"),ae.x=ae.xPrev=ae.getX(),ae.y=ae.yPrev=ae.getY(),ScrollTrigger||(ScrollTrigger=gsap$1.core.globals().ScrollTrigger),gsap$1.getProperty(ee,"scrollBehavior")==="smooth"&&gsap$1.set(ee,{scrollBehavior:"auto"}),oe&&oe!=="none"&&(ae.snap=1,ae.snapInline=ee.style.scrollSnapType,ee.style.scrollSnapType="none"),te.x!=null?(ae.add(ae,"x",ae.x,_parseVal(te.x,ee,"x",ae.x,te.offsetX||0),re,se),ae._props.push("scrollTo_x")):ae.skipX=1,te.y!=null?(ae.add(ae,"y",ae.y,_parseVal(te.y,ee,"y",ae.y,te.offsetY||0),re,se),ae._props.push("scrollTo_y")):ae.skipY=1},render:function(ee,te){for(var ne=te._pt,re=te.target,se=te.tween,ae=te.autoKill,oe=te.xPrev,le=te.yPrev,ce=te.isWin,he=te.snap,fe=te.snapInline,ue,de,ge,me,ve;ne;)ne.r(ee,ne.d),ne=ne._next;ue=ce||!te.skipX?te.getX():oe,de=ce||!te.skipY?te.getY():le,ge=de-le,me=ue-oe,ve=_config.autoKillThreshold,te.x<0&&(te.x=0),te.y<0&&(te.y=0),ae&&(!te.skipX&&(me>ve||me<-ve)&&ue<_max(re,"x")&&(te.skipX=1),!te.skipY&&(ge>ve||ge<-ve)&&de<_max(re,"y")&&(te.skipY=1),te.skipX&&te.skipY&&(se.kill(),te.vars.onAutoKill&&te.vars.onAutoKill.apply(se,te.vars.onAutoKillParams||[]))),ce?_window.scrollTo(te.skipX?ue:te.x,te.skipY?de:te.y):(te.skipY||(re.scrollTop=te.y),te.skipX||(re.scrollLeft=te.x)),he&&(ee===1||ee===0)&&(de=re.scrollTop,ue=re.scrollLeft,fe?re.style.scrollSnapType=fe:re.style.removeProperty("scroll-snap-type"),re.scrollTop=de+1,re.scrollLeft=ue+1,re.scrollTop=de,re.scrollLeft=ue),te.xPrev=te.x,te.yPrev=te.y,ScrollTrigger&&ScrollTrigger.update()},kill:function(ee){var te=ee==="scrollTo",ne=this._props.indexOf(ee);return(te||ee==="scrollTo_x")&&(this.skipX=1),(te||ee==="scrollTo_y")&&(this.skipY=1),ne>-1&&this._props.splice(ne,1),!this._props.length}};ScrollToPlugin.max=_max,ScrollToPlugin.getOffset=_getOffset,ScrollToPlugin.buildGetter=_buildGetter,_getGSAP()&&gsap$1.registerPlugin(ScrollToPlugin),gsapWithCSS.registerPlugin(ScrollTrigger$1,ScrollToPlugin);class StillListing{constructor(ee){this.container=ee,this.scene=null,this.camera=null,this.renderer=null,this.imagePlanes=[],this.items=[...ee.querySelectorAll(".stills-item")],this.itemLinks=[...ee.querySelectorAll(".stills-link")],this.imageUrls=this.items.map(te=>te.querySelector("img").src),this.imageNames=this.items.map(te=>te.querySelector(".s-name").textContent),this.totalItems=this.items.length,this.spacing=3,this.radius=15,this.totalHeight=this.spacing*this.totalItems,this.angle=Math.PI*2.5*(this.totalItems/10),this.xAngle=te=>this.radius*Math.sin(te),this.zAngle=te=>this.radius*Math.cos(te),this.currentMiddleIndex=0,this.loadedImages=0,this.isTouching=!1,this.touchStartX=0,this.touchStartY=0,this.touchStartTime=0,this.isScrolling=!1,this.clickThreshold=10,this.scrollThreshold=50,this.clickTimeout=300,this.init()}init(){this.setupThreeJS(),this.loadImagesSequentially(),this.setupAnimation(),this.setupMouseInteraction(),this.setupTouchInteraction(),this.addEventListeners(),this.updateImagePositions(0),this.updateHTMLPositions()}setupThreeJS(){this.scene=new Scene,this.camera=new PerspectiveCamera(window.innerWidth<768?50:35,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(16777215,0),this.container.querySelector(".main").appendChild(this.renderer.domElement),this.camera.position.set(0,0,1)}updatePositions(ee,te){const ne=document.querySelectorAll(".still-name-item h1"),re=document.querySelectorAll(".still-name-item .still-year"),se=Math.floor(te/2);ne.forEach((ae,oe)=>{let le=oe-ee;le>se&&(le-=te),le<-se&&(le+=te);const ce=le*100;ae.style.transform=`translateY(${ce}%)`,ae.style.transition="transform 0.75s ease-out",ae.style.opacity=oe===ee?1:0}),re.forEach((ae,oe)=>{let le=oe-ee;le>se&&(le-=te),le<-se&&(le+=te);const ce=le*100;ae.style.transform=`translateY(${ce}%)`,ae.style.transition="transform 0.75s ease-out",ae.style.opacity=oe===ee?1:0})}updateHTMLPositions(){setTimeout(()=>{requestAnimationFrame(()=>{window.scrollBy({top:1,left:0,behavior:"smooth"})})},400),this.updatePositions(this.currentMiddleIndex,this.totalItems)}loadImagesSequentially(){const ee=te=>{if(te>=this.imageUrls.length)return;const ne=this.imageUrls[te];new TextureLoader().load(ne,re=>{let se=re.image.width,ae=re.image.height,oe=se/ae;const le=new MeshBasicMaterial({map:re,side:DoubleSide,transparent:!0}),ce=8,he=new PlaneGeometry(ce*oe,ce),fe=new Mesh(he,le);fe.userData.name=this.imageNames[te],re.colorSpace=SRGBColorSpace,re.minFilter=LinearFilter,re.magFilter=LinearFilter,re.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),re.format=RGBAFormat;const ue=te/this.imageUrls.length*this.angle,de=te*(this.spacing+15)-this.totalHeight/2;fe.position.set(this.xAngle(ue),de,this.zAngle(ue)),this.scene.add(fe),this.imagePlanes.push(fe),te===0&&this.camera.position.set(this.xAngle(ue),de+12,this.zAngle(ue)-2),this.loadedImages++,ee(te+1)})};ee(0)}setupAnimation(){ScrollTrigger$1.create({trigger:this.container.querySelector(".main"),start:"top top",end:`+=${this.totalItems*40}%`,scrub:!0,pin:!0,onUpdate:te=>{const ne=te.progress;this.updateImagePositions(ne)}});const ee=()=>{requestAnimationFrame(ee),this.renderer.render(this.scene,this.camera)};ee(),gsapWithCSS.to(".still-name-list, .category-header",{opacity:1,duration:1})}updateImagePositions(ee){const te=ee*this.totalHeight;let ne=null,re=1/0;const se=window.innerHeight/2;this.imagePlanes.forEach((ae,oe)=>{const le=(te+oe*this.spacing+15)%this.totalHeight-this.totalHeight/2;ae.position.y=le;const ce=(le/this.totalHeight+.5)*this.angle;ae.position.x=this.xAngle(ce),ae.position.z=this.zAngle(ce);const fe=ae.position.clone().project(this.camera).y*window.innerHeight/2+window.innerHeight/2,ue=Math.abs(fe-se);ue<re&&(re=ue,ne=oe)}),ne!==this.currentMiddleIndex&&(this.currentMiddleIndex=ne,this.updateHTMLPositions())}setupMouseInteraction(){this.raycaster=new Raycaster,this.mouse=new Vector2,this.renderer.domElement.addEventListener("mousemove",ee=>this.onPointerMove(ee),!1),this.renderer.domElement.addEventListener("click",ee=>this.onPointerClick(ee),!1)}setupTouchInteraction(){this.renderer.domElement.addEventListener("touchstart",ee=>this.onTouchStart(ee),{passive:!0}),this.renderer.domElement.addEventListener("touchmove",ee=>this.onTouchMove(ee),{passive:!0}),this.renderer.domElement.addEventListener("touchend",ee=>this.onTouchEnd(ee),{passive:!0})}onPointerMove(ee){const te=ee.clientX||ee.touches&&ee.touches[0].clientX,ne=ee.clientY||ee.touches&&ee.touches[0].clientY;this.mouse.x=te/window.innerWidth*2-1,this.mouse.y=-(ne/window.innerHeight)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const re=this.raycaster.intersectObjects(this.imagePlanes);if(re.length>0){this.renderer.domElement.style.cursor="pointer";const se=re[0].object;this.hoveredObject&&this.hoveredObject!==se&&gsapWithCSS.to(this.hoveredObject.scale,{x:1,y:1,duration:.5}),gsapWithCSS.to(se.scale,{x:1.2,y:1.2,duration:.5}),this.hoveredObject=se}else this.renderer.domElement.style.cursor="default",this.hoveredObject&&(gsapWithCSS.to(this.hoveredObject.scale,{x:1,y:1,duration:1}),this.hoveredObject=null)}onPointerClick(ee){if(this.isScrolling)return;const te=ee.clientX||ee.changedTouches&&ee.changedTouches[0].clientX,ne=ee.clientY||ee.changedTouches&&ee.changedTouches[0].clientY;this.mouse.x=te/window.innerWidth*2-1,this.mouse.y=-(ne/window.innerHeight)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const re=this.raycaster.intersectObjects(this.imagePlanes);if(re.length>0){const se=this.imagePlanes.indexOf(re[0].object);this.lastClickedImageIndex=se,this.itemLinks[se].click()}}onTouchStart(ee){this.isTouching=!0,this.isScrolling=!1,this.touchStartX=ee.touches[0].clientX,this.touchStartY=ee.touches[0].clientY,this.touchStartTime=Date.now(),this.onPointerMove(ee)}onTouchMove(ee){if(!this.isTouching)return;const te=ee.touches[0].clientX,ne=ee.touches[0].clientY,re=Math.abs(te-this.touchStartX),se=Math.abs(ne-this.touchStartY);!this.isScrolling&&(re>this.scrollThreshold||se>this.scrollThreshold)&&(this.isScrolling=!0),this.onPointerMove(ee)}onTouchEnd(ee){if(!this.isTouching)return;const ne=Date.now()-this.touchStartTime,re=ee.changedTouches[0].clientX,se=ee.changedTouches[0].clientY,ae=Math.abs(re-this.touchStartX),oe=Math.abs(se-this.touchStartY);!this.isScrolling&&ae<this.clickThreshold&&oe<this.clickThreshold&&ne<this.clickTimeout&&this.onPointerClick(ee),this.isTouching=!1,this.isScrolling=!1}addEventListeners(){window.addEventListener("resize",()=>this.onWindowResize(),!1)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}getClickedImageIndex(){return this.lastClickedImageIndex}async prepareForTransition(ee){this.renderer.domElement.style.pointerEvents="none";const te=this.imagePlanes.map((ne,re)=>re!==ee?new Promise(se=>{gsapWithCSS.to(ne.material,{opacity:0,duration:.5,onComplete:se})}):Promise.resolve());gsapWithCSS.to(".still-name-wrapper, .category-header",{opacity:0,duration:.2}),await Promise.all(te),document.body.appendChild(this.renderer.domElement),this.renderer.domElement.style.position="fixed",this.renderer.domElement.style.zIndex="9999"}async transitionToStillsPage(ee,te){const ne=this.imagePlanes[ee],re=this.camera.fov*(Math.PI/180),se=2*Math.tan(re/2)*this.camera.position.z,ae=se*this.camera.aspect,oe=te.width/window.innerWidth*ae/ne.geometry.parameters.width,le=te.height/window.innerHeight*se/ne.geometry.parameters.height,ce=(te.left+te.width/2)/window.innerWidth*ae-ae/2,he=-((te.top+te.height/2)/window.innerHeight)*se+se/2;return new Promise(fe=>{gsapWithCSS.to(ne.position,{x:ce,y:he,z:0,duration:1,ease:"expo.out",onComplete:()=>{ne.visible=!1}}),gsapWithCSS.to(ne.scale,{x:oe,y:le,duration:1,ease:"expo.out",onComplete:fe}),gsapWithCSS.to(this.camera.position,{x:0,y:0,z:this.camera.position.z,duration:1,ease:"expo.out"})})}cleanupAfterTransition(){this.renderer.domElement.remove(),this.scene.traverse(ee=>{ee.geometry&&ee.geometry.dispose(),ee.material&&(Array.isArray(ee.material)?ee.material.forEach(te=>te.dispose()):ee.material.dispose())}),this.renderer.dispose()}}/*!
 * matrix 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _doc,_win,_docElement,_body$1,_divContainer,_svgContainer,_identityMatrix,_gEl,_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_hasOffsetBug,_setDoc=function(ee){var te=ee.ownerDocument||ee;for(!(_transformProp in ee.style)&&("msTransform"in ee.style)&&(_transformProp="msTransform",_transformOriginProp=_transformProp+"Origin");te.parentNode&&(te=te.parentNode););if(_win=window,_identityMatrix=new Matrix2D,te){_doc=te,_docElement=te.documentElement,_body$1=te.body,_gEl=_doc.createElementNS("http://www.w3.org/2000/svg","g"),_gEl.style.transform="none";var ne=te.createElement("div"),re=te.createElement("div"),se=te&&(te.body||te.firstElementChild);se&&se.appendChild&&(se.appendChild(ne),ne.appendChild(re),ne.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),_hasOffsetBug=re.offsetParent!==ne,se.removeChild(ne))}return te},_forceNonZeroScale=function(ee){for(var te,ne;ee&&ee!==_body$1;)ne=ee._gsap,ne&&ne.uncache&&ne.get(ee,"x"),ne&&!ne.scaleX&&!ne.scaleY&&ne.renderTransform&&(ne.scaleX=ne.scaleY=1e-4,ne.renderTransform(1,ne),te?te.push(ne):te=[ne]),ee=ee.parentNode;return te},_svgTemps=[],_divTemps=[],_getDocScrollTop=function(){return _win.pageYOffset||_doc.scrollTop||_docElement.scrollTop||_body$1.scrollTop||0},_getDocScrollLeft=function(){return _win.pageXOffset||_doc.scrollLeft||_docElement.scrollLeft||_body$1.scrollLeft||0},_svgOwner=function(ee){return ee.ownerSVGElement||((ee.tagName+"").toLowerCase()==="svg"?ee:null)},_isFixed=function ie(ee){if(_win.getComputedStyle(ee).position==="fixed")return!0;if(ee=ee.parentNode,ee&&ee.nodeType===1)return ie(ee)},_createSibling=function ie(ee,te){if(ee.parentNode&&(_doc||_setDoc(ee))){var ne=_svgOwner(ee),re=ne?ne.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",se=ne?te?"rect":"g":"div",ae=te!==2?0:100,oe=te===3?100:0,le="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",ce=_doc.createElementNS?_doc.createElementNS(re.replace(/^https/,"http"),se):_doc.createElement(se);return te&&(ne?(_svgContainer||(_svgContainer=ie(ee)),ce.setAttribute("width",.01),ce.setAttribute("height",.01),ce.setAttribute("transform","translate("+ae+","+oe+")"),_svgContainer.appendChild(ce)):(_divContainer||(_divContainer=ie(ee),_divContainer.style.cssText=le),ce.style.cssText=le+"width:0.1px;height:0.1px;top:"+oe+"px;left:"+ae+"px",_divContainer.appendChild(ce))),ce}throw"Need document and parent."},_consolidate=function(ee){for(var te=new Matrix2D,ne=0;ne<ee.numberOfItems;ne++)te.multiply(ee.getItem(ne).matrix);return te},_getCTM=function(ee){var te=ee.getCTM(),ne;return te||(ne=ee.style[_transformProp],ee.style[_transformProp]="none",ee.appendChild(_gEl),te=_gEl.getCTM(),ee.removeChild(_gEl),ne?ee.style[_transformProp]=ne:ee.style.removeProperty(_transformProp.replace(/([A-Z])/g,"-$1").toLowerCase())),te||_identityMatrix.clone()},_placeSiblings=function(ee,te){var ne=_svgOwner(ee),re=ee===ne,se=ne?_svgTemps:_divTemps,ae=ee.parentNode,oe,le,ce,he,fe,ue;if(ee===_win)return ee;if(se.length||se.push(_createSibling(ee,1),_createSibling(ee,2),_createSibling(ee,3)),oe=ne?_svgContainer:_divContainer,ne)re?(ce=_getCTM(ee),he=-ce.e/ce.a,fe=-ce.f/ce.d,le=_identityMatrix):ee.getBBox?(ce=ee.getBBox(),le=ee.transform?ee.transform.baseVal:{},le=le.numberOfItems?le.numberOfItems>1?_consolidate(le):le.getItem(0).matrix:_identityMatrix,he=le.a*ce.x+le.c*ce.y,fe=le.b*ce.x+le.d*ce.y):(le=new Matrix2D,he=fe=0),te&&ee.tagName.toLowerCase()==="g"&&(he=fe=0),(re?ne:ae).appendChild(oe),oe.setAttribute("transform","matrix("+le.a+","+le.b+","+le.c+","+le.d+","+(le.e+he)+","+(le.f+fe)+")");else{if(he=fe=0,_hasOffsetBug)for(le=ee.offsetParent,ce=ee;ce&&(ce=ce.parentNode)&&ce!==le&&ce.parentNode;)(_win.getComputedStyle(ce)[_transformProp]+"").length>4&&(he=ce.offsetLeft,fe=ce.offsetTop,ce=0);if(ue=_win.getComputedStyle(ee),ue.position!=="absolute"&&ue.position!=="fixed")for(le=ee.offsetParent;ae&&ae!==le;)he+=ae.scrollLeft||0,fe+=ae.scrollTop||0,ae=ae.parentNode;ce=oe.style,ce.top=ee.offsetTop-fe+"px",ce.left=ee.offsetLeft-he+"px",ce[_transformProp]=ue[_transformProp],ce[_transformOriginProp]=ue[_transformOriginProp],ce.position=ue.position==="fixed"?"fixed":"absolute",ee.parentNode.appendChild(oe)}return oe},_setMatrix=function(ee,te,ne,re,se,ae,oe){return ee.a=te,ee.b=ne,ee.c=re,ee.d=se,ee.e=ae,ee.f=oe,ee},Matrix2D=function(){function ie(te,ne,re,se,ae,oe){te===void 0&&(te=1),ne===void 0&&(ne=0),re===void 0&&(re=0),se===void 0&&(se=1),ae===void 0&&(ae=0),oe===void 0&&(oe=0),_setMatrix(this,te,ne,re,se,ae,oe)}var ee=ie.prototype;return ee.inverse=function(){var ne=this.a,re=this.b,se=this.c,ae=this.d,oe=this.e,le=this.f,ce=ne*ae-re*se||1e-10;return _setMatrix(this,ae/ce,-re/ce,-se/ce,ne/ce,(se*le-ae*oe)/ce,-(ne*le-re*oe)/ce)},ee.multiply=function(ne){var re=this.a,se=this.b,ae=this.c,oe=this.d,le=this.e,ce=this.f,he=ne.a,fe=ne.c,ue=ne.b,de=ne.d,ge=ne.e,me=ne.f;return _setMatrix(this,he*re+ue*ae,he*se+ue*oe,fe*re+de*ae,fe*se+de*oe,le+ge*re+me*ae,ce+ge*se+me*oe)},ee.clone=function(){return new ie(this.a,this.b,this.c,this.d,this.e,this.f)},ee.equals=function(ne){var re=this.a,se=this.b,ae=this.c,oe=this.d,le=this.e,ce=this.f;return re===ne.a&&se===ne.b&&ae===ne.c&&oe===ne.d&&le===ne.e&&ce===ne.f},ee.apply=function(ne,re){re===void 0&&(re={});var se=ne.x,ae=ne.y,oe=this.a,le=this.b,ce=this.c,he=this.d,fe=this.e,ue=this.f;return re.x=se*oe+ae*ce+fe||0,re.y=se*le+ae*he+ue||0,re},ie}();function getGlobalMatrix(ie,ee,te,ne){if(!ie||!ie.parentNode||(_doc||_setDoc(ie)).documentElement===ie)return new Matrix2D;var re=_forceNonZeroScale(ie),se=_svgOwner(ie),ae=se?_svgTemps:_divTemps,oe=_placeSiblings(ie,te),le=ae[0].getBoundingClientRect(),ce=ae[1].getBoundingClientRect(),he=ae[2].getBoundingClientRect(),fe=oe.parentNode,ue=!ne&&_isFixed(ie),de=new Matrix2D((ce.left-le.left)/100,(ce.top-le.top)/100,(he.left-le.left)/100,(he.top-le.top)/100,le.left+(ue?0:_getDocScrollLeft()),le.top+(ue?0:_getDocScrollTop()));if(fe.removeChild(oe),re)for(le=re.length;le--;)ce=re[le],ce.scaleX=ce.scaleY=0,ce.renderTransform(1,ce);return ee?de.inverse():de}/*!
 * Flip 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _id=1,_toArray,gsap,_batch,_batchAction,_body,_closestTenth,_getStyleSaver,_forEachBatch=function(ee,te){return ee.actions.forEach(function(ne){return ne.vars[te]&&ne.vars[te](ne)})},_batchLookup={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_emptyObj={},_dashedNameLookup={},_memoizedRemoveProps={},_listToArray=function(ee){return typeof ee=="string"?ee.split(" ").join("").split(","):ee},_callbacks=_listToArray("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),_removeProps=_listToArray("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),_getEl=function(ee){return _toArray(ee)[0]||console.warn("Element not found:",ee)},_round=function(ee){return Math.round(ee*1e4)/1e4||0},_toggleClass=function(ee,te,ne){return ee.forEach(function(re){return re.classList[ne](te)})},_reserved={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},_fitReserved={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},_camelToDashed=function(ee){return ee.replace(/([A-Z])/g,"-$1").toLowerCase()},_copy=function(ee,te){var ne={},re;for(re in ee)te[re]||(ne[re]=ee[re]);return ne},_memoizedProps={},_memoizeProps=function(ee){var te=_memoizedProps[ee]=_listToArray(ee);return _memoizedRemoveProps[ee]=te.concat(_removeProps),te},_getInverseGlobalMatrix=function(ee){var te=ee._gsap||gsap.core.getCache(ee);return te.gmCache===gsap.ticker.frame?te.gMatrix:(te.gmCache=gsap.ticker.frame,te.gMatrix=getGlobalMatrix(ee,!0,!1,!0))},_getDOMDepth=function ie(ee,te,ne){ne===void 0&&(ne=0);for(var re=ee.parentNode,se=1e3*Math.pow(10,ne)*(te?-1:1),ae=te?-se*900:0;ee;)ae+=se,ee=ee.previousSibling;return re?ae+ie(re,te,ne+1):ae},_orderByDOMDepth=function(ee,te,ne){return ee.forEach(function(re){return re.d=_getDOMDepth(ne?re.element:re.t,te)}),ee.sort(function(re,se){return re.d-se.d}),ee},_recordInlineStyles=function(ee,te){for(var ne=ee.element.style,re=ee.css=ee.css||[],se=te.length,ae,oe;se--;)ae=te[se],oe=ne[ae]||ne.getPropertyValue(ae),re.push(oe?ae:_dashedNameLookup[ae]||(_dashedNameLookup[ae]=_camelToDashed(ae)),oe);return ne},_applyInlineStyles=function(ee){var te=ee.css,ne=ee.element.style,re=0;for(ee.cache.uncache=1;re<te.length;re+=2)te[re+1]?ne[te[re]]=te[re+1]:ne.removeProperty(te[re]);!te[te.indexOf("transform")+1]&&ne.translate&&(ne.removeProperty("translate"),ne.removeProperty("scale"),ne.removeProperty("rotate"))},_setFinalStates=function(ee,te){ee.forEach(function(ne){return ne.a.cache.uncache=1}),te||ee.finalStates.forEach(_applyInlineStyles)},_absoluteProps="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),_makeAbsolute=function(ee,te,ne){var re=ee.element,se=ee.width,ae=ee.height,oe=ee.uncache,le=ee.getProp,ce=re.style,he=4,fe,ue,de;if(typeof te!="object"&&(te=ee),_batch&&ne!==1)return _batch._abs.push({t:re,b:ee,a:ee,sd:0}),_batch._final.push(function(){return(ee.cache.uncache=1)&&_applyInlineStyles(ee)}),re;for(ue=le("display")==="none",(!ee.isVisible||ue)&&(ue&&(_recordInlineStyles(ee,["display"]).display=te.display),ee.matrix=te.matrix,ee.width=se=ee.width||te.width,ee.height=ae=ee.height||te.height),_recordInlineStyles(ee,_absoluteProps),de=window.getComputedStyle(re);he--;)ce[_absoluteProps[he]]=de[_absoluteProps[he]];if(ce.gridArea="1 / 1 / 1 / 1",ce.transition="none",ce.position="absolute",ce.width=se+"px",ce.height=ae+"px",ce.top||(ce.top="0px"),ce.left||(ce.left="0px"),oe)fe=new ElementState(re);else if(fe=_copy(ee,_emptyObj),fe.position="absolute",ee.simple){var ge=re.getBoundingClientRect();fe.matrix=new Matrix2D(1,0,0,1,ge.left+_getDocScrollLeft(),ge.top+_getDocScrollTop())}else fe.matrix=getGlobalMatrix(re,!1,!1,!0);return fe=_fit(fe,ee,!0),ee.x=_closestTenth(fe.x,.01),ee.y=_closestTenth(fe.y,.01),re},_filterComps=function(ee,te){return te!==!0&&(te=_toArray(te),ee=ee.filter(function(ne){if(te.indexOf((ne.sd<0?ne.b:ne.a).element)!==-1)return!0;ne.t._gsap.renderTransform(1),ne.b.isVisible&&(ne.t.style.width=ne.b.width+"px",ne.t.style.height=ne.b.height+"px")})),ee},_makeCompsAbsolute=function(ee){return _orderByDOMDepth(ee,!0).forEach(function(te){return(te.a.isVisible||te.b.isVisible)&&_makeAbsolute(te.sd<0?te.b:te.a,te.b,1)})},_findElStateInState=function(ee,te){return te&&ee.idLookup[_parseElementState(te).id]||ee.elementStates[0]},_parseElementState=function(ee,te,ne,re){return ee instanceof ElementState?ee:ee instanceof FlipState?_findElStateInState(ee,re):new ElementState(typeof ee=="string"?_getEl(ee)||console.warn(ee+" not found"):ee,te,ne)},_recordProps=function(ee,te){for(var ne=gsap.getProperty(ee.element,null,"native"),re=ee.props={},se=te.length;se--;)re[te[se]]=(ne(te[se])+"").trim();return re.zIndex&&(re.zIndex=parseFloat(re.zIndex)||0),ee},_applyProps=function(ee,te){var ne=ee.style||ee,re;for(re in te)ne[re]=te[re]},_getID=function(ee){var te=ee.getAttribute("data-flip-id");return te||ee.setAttribute("data-flip-id",te="auto-"+_id++),te},_elementsFromElementStates=function(ee){return ee.map(function(te){return te.element})},_handleCallback=function(ee,te,ne){return ee&&te.length&&ne.add(ee(_elementsFromElementStates(te),ne,new FlipState(te,0,!0)),0)},_fit=function(ee,te,ne,re,se,ae){var oe=ee.element,le=ee.cache,ce=ee.parent,he=ee.x,fe=ee.y,ue=te.width,de=te.height,ge=te.scaleX,me=te.scaleY,ve=te.rotation,pe=te.bounds,ye=ae&&_getStyleSaver&&_getStyleSaver(oe,"transform"),_e=ee,xe=te.matrix,Se=xe.e,be=xe.f,Ee=ee.bounds.width!==pe.width||ee.bounds.height!==pe.height||ee.scaleX!==ge||ee.scaleY!==me||ee.rotation!==ve,Pe=!Ee&&ee.simple&&te.simple&&!se,we,Me,De,ke,ze,Ve,Ue;return Pe||!ce?(ge=me=1,ve=we=0):(ze=_getInverseGlobalMatrix(ce),Ve=ze.clone().multiply(te.ctm?te.matrix.clone().multiply(te.ctm):te.matrix),ve=_round(Math.atan2(Ve.b,Ve.a)*_RAD2DEG),we=_round(Math.atan2(Ve.c,Ve.d)*_RAD2DEG+ve)%360,ge=Math.sqrt(Math.pow(Ve.a,2)+Math.pow(Ve.b,2)),me=Math.sqrt(Math.pow(Ve.c,2)+Math.pow(Ve.d,2))*Math.cos(we*_DEG2RAD),se&&(se=_toArray(se)[0],ke=gsap.getProperty(se),Ue=se.getBBox&&typeof se.getBBox=="function"&&se.getBBox(),_e={scaleX:ke("scaleX"),scaleY:ke("scaleY"),width:Ue?Ue.width:Math.ceil(parseFloat(ke("width","px"))),height:Ue?Ue.height:parseFloat(ke("height","px"))}),le.rotation=ve+"deg",le.skewX=we+"deg"),ne?(ge*=ue===_e.width||!_e.width?1:ue/_e.width,me*=de===_e.height||!_e.height?1:de/_e.height,le.scaleX=ge,le.scaleY=me):(ue=_closestTenth(ue*ge/_e.scaleX,0),de=_closestTenth(de*me/_e.scaleY,0),oe.style.width=ue+"px",oe.style.height=de+"px"),re&&_applyProps(oe,te.props),Pe||!ce?(he+=Se-ee.matrix.e,fe+=be-ee.matrix.f):Ee||ce!==te.parent?(le.renderTransform(1,le),Ve=getGlobalMatrix(se||oe,!1,!1,!0),Me=ze.apply({x:Ve.e,y:Ve.f}),De=ze.apply({x:Se,y:be}),he+=De.x-Me.x,fe+=De.y-Me.y):(ze.e=ze.f=0,De=ze.apply({x:Se-ee.matrix.e,y:be-ee.matrix.f}),he+=De.x,fe+=De.y),he=_closestTenth(he,.02),fe=_closestTenth(fe,.02),ae&&!(ae instanceof ElementState)?ye&&ye.revert():(le.x=he+"px",le.y=fe+"px",le.renderTransform(1,le)),ae&&(ae.x=he,ae.y=fe,ae.rotation=ve,ae.skewX=we,ne?(ae.scaleX=ge,ae.scaleY=me):(ae.width=ue,ae.height=de)),ae||le},_parseState=function(ee,te){return ee instanceof FlipState?ee:new FlipState(ee,te)},_getChangingElState=function(ee,te,ne){var re=ee.idLookup[ne],se=ee.alt[ne];return se.isVisible&&(!(te.getElementState(se.element)||se).isVisible||!re.isVisible)?se:re},_bodyMetrics=[],_bodyProps="width,height,overflowX,overflowY".split(","),_bodyLocked,_lockBodyScroll=function(ee){if(ee!==_bodyLocked){var te=_body.style,ne=_body.clientWidth===window.outerWidth,re=_body.clientHeight===window.outerHeight,se=4;if(ee&&(ne||re)){for(;se--;)_bodyMetrics[se]=te[_bodyProps[se]];ne&&(te.width=_body.clientWidth+"px",te.overflowY="hidden"),re&&(te.height=_body.clientHeight+"px",te.overflowX="hidden"),_bodyLocked=ee}else if(_bodyLocked){for(;se--;)_bodyMetrics[se]?te[_bodyProps[se]]=_bodyMetrics[se]:te.removeProperty(_camelToDashed(_bodyProps[se]));_bodyLocked=ee}}},_fromTo=function(ee,te,ne,re){ee instanceof FlipState&&te instanceof FlipState||console.warn("Not a valid state object."),ne=ne||{};var se=ne,ae=se.clearProps,oe=se.onEnter,le=se.onLeave,ce=se.absolute,he=se.absoluteOnLeave,fe=se.custom,ue=se.delay,de=se.paused,ge=se.repeat,me=se.repeatDelay,ve=se.yoyo,pe=se.toggleClass,ye=se.nested,_e=se.zIndex,xe=se.scale,Se=se.fade,be=se.stagger,Ee=se.spin,Pe=se.prune,we=("props"in ne?ne:ee).props,Me=_copy(ne,_reserved),De=gsap.timeline({delay:ue,paused:de,repeat:ge,repeatDelay:me,yoyo:ve,data:"isFlip"}),ke=Me,ze=[],Ve=[],Ue=[],Ae=[],Fe=Ee===!0?1:Ee||0,Te=typeof Ee=="function"?Ee:function(){return Fe},Ce=ee.interrupted||te.interrupted,Le=De[re!==1?"to":"from"],Be,st,Xe,Ge,He,Je,et,ht,vt,gt,yt,Oe,Ze,qe;for(st in te.idLookup)yt=te.alt[st]?_getChangingElState(te,ee,st):te.idLookup[st],He=yt.element,gt=ee.idLookup[st],ee.alt[st]&&He===gt.element&&(ee.alt[st].isVisible||!yt.isVisible)&&(gt=ee.alt[st]),gt?(Je={t:He,b:gt,a:yt,sd:gt.element===He?0:yt.isVisible?1:-1},Ue.push(Je),Je.sd&&(Je.sd<0&&(Je.b=yt,Je.a=gt),Ce&&_recordInlineStyles(Je.b,we?_memoizedRemoveProps[we]:_removeProps),Se&&Ue.push(Je.swap={t:gt.element,b:Je.b,a:Je.a,sd:-Je.sd,swap:Je})),He._flip=gt.element._flip=_batch?_batch.timeline:De):yt.isVisible&&(Ue.push({t:He,b:_copy(yt,{isVisible:1}),a:yt,sd:0,entering:1}),He._flip=_batch?_batch.timeline:De);if(we&&(_memoizedProps[we]||_memoizeProps(we)).forEach(function(We){return Me[We]=function(ft){return Ue[ft].a.props[We]}}),Ue.finalStates=vt=[],Oe=function(){for(_orderByDOMDepth(Ue),_lockBodyScroll(!0),Ge=0;Ge<Ue.length;Ge++)Je=Ue[Ge],Ze=Je.a,qe=Je.b,Pe&&!Ze.isDifferent(qe)&&!Je.entering?Ue.splice(Ge--,1):(He=Je.t,ye&&!(Je.sd<0)&&Ge&&(Ze.matrix=getGlobalMatrix(He,!1,!1,!0)),qe.isVisible&&Ze.isVisible?(Je.sd<0?(et=new ElementState(He,we,ee.simple),_fit(et,Ze,xe,0,0,et),et.matrix=getGlobalMatrix(He,!1,!1,!0),et.css=Je.b.css,Je.a=Ze=et,Se&&(He.style.opacity=Ce?qe.opacity:Ze.opacity),be&&Ae.push(He)):Je.sd>0&&Se&&(He.style.opacity=Ce?Ze.opacity-qe.opacity:"0"),_fit(Ze,qe,xe,we)):qe.isVisible!==Ze.isVisible&&(qe.isVisible?Ze.isVisible||(qe.css=Ze.css,Ve.push(qe),Ue.splice(Ge--,1),ce&&ye&&_fit(Ze,qe,xe,we)):(Ze.isVisible&&ze.push(Ze),Ue.splice(Ge--,1))),xe||(He.style.maxWidth=Math.max(Ze.width,qe.width)+"px",He.style.maxHeight=Math.max(Ze.height,qe.height)+"px",He.style.minWidth=Math.min(Ze.width,qe.width)+"px",He.style.minHeight=Math.min(Ze.height,qe.height)+"px"),ye&&pe&&He.classList.add(pe)),vt.push(Ze);var ft;if(pe&&(ft=vt.map(function(Re){return Re.element}),ye&&ft.forEach(function(Re){return Re.classList.remove(pe)})),_lockBodyScroll(!1),xe?(Me.scaleX=function(Re){return Ue[Re].a.scaleX},Me.scaleY=function(Re){return Ue[Re].a.scaleY}):(Me.width=function(Re){return Ue[Re].a.width+"px"},Me.height=function(Re){return Ue[Re].a.height+"px"},Me.autoRound=ne.autoRound||!1),Me.x=function(Re){return Ue[Re].a.x+"px"},Me.y=function(Re){return Ue[Re].a.y+"px"},Me.rotation=function(Re){return Ue[Re].a.rotation+(Ee?Te(Re,ht[Re],ht)*360:0)},Me.skewX=function(Re){return Ue[Re].a.skewX},ht=Ue.map(function(Re){return Re.t}),(_e||_e===0)&&(Me.modifiers={zIndex:function(){return _e}},Me.zIndex=_e,Me.immediateRender=ne.immediateRender!==!1),Se&&(Me.opacity=function(Re){return Ue[Re].sd<0?0:Ue[Re].sd>0?Ue[Re].a.opacity:"+=0"}),Ae.length){be=gsap.utils.distribute(be);var St=ht.slice(Ae.length);Me.stagger=function(Re,Qe){return be(~Ae.indexOf(Qe)?ht.indexOf(Ue[Re].swap.t):Re,Qe,St)}}if(_callbacks.forEach(function(Re){return ne[Re]&&De.eventCallback(Re,ne[Re],ne[Re+"Params"])}),fe&&ht.length){ke=_copy(Me,_reserved),"scale"in fe&&(fe.scaleX=fe.scaleY=fe.scale,delete fe.scale);for(st in fe)Be=_copy(fe[st],_fitReserved),Be[st]=Me[st],!("duration"in Be)&&"duration"in Me&&(Be.duration=Me.duration),Be.stagger=Me.stagger,Le.call(De,ht,Be,0),delete ke[st]}(ht.length||Ve.length||ze.length)&&(pe&&De.add(function(){return _toggleClass(ft,pe,De._zTime<0?"remove":"add")},0)&&!de&&_toggleClass(ft,pe,"add"),ht.length&&Le.call(De,ht,ke,0)),_handleCallback(oe,ze,De),_handleCallback(le,Ve,De);var $e=_batch&&_batch.timeline;$e&&($e.add(De,0),_batch._final.push(function(){return _setFinalStates(Ue,!ae)})),Xe=De.duration(),De.call(function(){var Re=De.time()>=Xe;Re&&!$e&&_setFinalStates(Ue,!ae),pe&&_toggleClass(ft,pe,Re?"remove":"add")})},he&&(ce=Ue.filter(function(We){return!We.sd&&!We.a.isVisible&&We.b.isVisible}).map(function(We){return We.a.element})),_batch){var ut;ce&&(ut=_batch._abs).push.apply(ut,_filterComps(Ue,ce)),_batch._run.push(Oe)}else ce&&_makeCompsAbsolute(_filterComps(Ue,ce)),Oe();var at=_batch?_batch.timeline:De;return at.revert=function(){return _killFlip(at,1,1)},at},_interrupt=function ie(ee){ee.vars.onInterrupt&&ee.vars.onInterrupt.apply(ee,ee.vars.onInterruptParams||[]),ee.getChildren(!0,!1,!0).forEach(ie)},_killFlip=function(ee,te,ne){if(ee&&ee.progress()<1&&(!ee.paused()||ne))return te&&(_interrupt(ee),te<2&&ee.progress(1),ee.kill()),!0},_createLookup=function(ee){for(var te=ee.idLookup={},ne=ee.alt={},re=ee.elementStates,se=re.length,ae;se--;)ae=re[se],te[ae.id]?ne[ae.id]=ae:te[ae.id]=ae},FlipState=function(){function ie(te,ne,re){if(this.props=ne&&ne.props,this.simple=!!(ne&&ne.simple),re)this.targets=_elementsFromElementStates(te),this.elementStates=te,_createLookup(this);else{this.targets=_toArray(te);var se=ne&&(ne.kill===!1||ne.batch&&!ne.kill);_batch&&!se&&_batch._kill.push(this),this.update(se||!!_batch)}}var ee=ie.prototype;return ee.update=function(ne){var re=this;return this.elementStates=this.targets.map(function(se){return new ElementState(se,re.props,re.simple)}),_createLookup(this),this.interrupt(ne),this.recordInlineStyles(),this},ee.clear=function(){return this.targets.length=this.elementStates.length=0,_createLookup(this),this},ee.fit=function(ne,re,se){for(var ae=_orderByDOMDepth(this.elementStates.slice(0),!1,!0),oe=(ne||this).idLookup,le=0,ce,he;le<ae.length;le++)ce=ae[le],se&&(ce.matrix=getGlobalMatrix(ce.element,!1,!1,!0)),he=oe[ce.id],he&&_fit(ce,he,re,!0,0,ce),ce.matrix=getGlobalMatrix(ce.element,!1,!1,!0);return this},ee.getProperty=function(ne,re){var se=this.getElementState(ne)||_emptyObj;return(re in se?se:se.props||_emptyObj)[re]},ee.add=function(ne){for(var re=ne.targets.length,se=this.idLookup,ae=this.alt,oe,le,ce;re--;)le=ne.elementStates[re],ce=se[le.id],ce&&(le.element===ce.element||ae[le.id]&&ae[le.id].element===le.element)?(oe=this.elementStates.indexOf(le.element===ce.element?ce:ae[le.id]),this.targets.splice(oe,1,ne.targets[re]),this.elementStates.splice(oe,1,le)):(this.targets.push(ne.targets[re]),this.elementStates.push(le));return ne.interrupted&&(this.interrupted=!0),ne.simple||(this.simple=!1),_createLookup(this),this},ee.compare=function(ne){var re=ne.idLookup,se=this.idLookup,ae=[],oe=[],le=[],ce=[],he=[],fe=ne.alt,ue=this.alt,de=function(Pe,we,Me){return(Pe.isVisible!==we.isVisible?Pe.isVisible?le:ce:Pe.isVisible?oe:ae).push(Me)&&he.push(Me)},ge=function(Pe,we,Me){return he.indexOf(Me)<0&&de(Pe,we,Me)},me,ve,pe,ye,_e,xe,Se,be;for(pe in re)_e=fe[pe],xe=ue[pe],me=_e?_getChangingElState(ne,this,pe):re[pe],ye=me.element,ve=se[pe],xe?(be=ve.isVisible||!xe.isVisible&&ye===ve.element?ve:xe,Se=_e&&!me.isVisible&&!_e.isVisible&&be.element===_e.element?_e:me,Se.isVisible&&be.isVisible&&Se.element!==be.element?((Se.isDifferent(be)?oe:ae).push(Se.element,be.element),he.push(Se.element,be.element)):de(Se,be,Se.element),_e&&Se.element===_e.element&&(_e=re[pe]),ge(Se.element!==ve.element&&_e?_e:Se,ve,ve.element),ge(_e&&_e.element===xe.element?_e:Se,xe,xe.element),_e&&ge(_e,xe.element===_e.element?xe:ve,_e.element)):(ve?ve.isDifferent(me)?de(me,ve,ye):ae.push(ye):le.push(ye),_e&&ge(_e,ve,_e.element));for(pe in se)re[pe]||(ce.push(se[pe].element),ue[pe]&&ce.push(ue[pe].element));return{changed:oe,unchanged:ae,enter:le,leave:ce}},ee.recordInlineStyles=function(){for(var ne=_memoizedRemoveProps[this.props]||_removeProps,re=this.elementStates.length;re--;)_recordInlineStyles(this.elementStates[re],ne)},ee.interrupt=function(ne){var re=this,se=[];this.targets.forEach(function(ae){var oe=ae._flip,le=_killFlip(oe,ne?0:1);ne&&le&&se.indexOf(oe)<0&&oe.add(function(){return re.updateVisibility()}),le&&se.push(oe)}),!ne&&se.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!se.length)},ee.updateVisibility=function(){this.elementStates.forEach(function(ne){var re=ne.element.getBoundingClientRect();ne.isVisible=!!(re.width||re.height||re.top||re.left),ne.uncache=1})},ee.getElementState=function(ne){return this.elementStates[this.targets.indexOf(_getEl(ne))]},ee.makeAbsolute=function(){return _orderByDOMDepth(this.elementStates.slice(0),!0,!0).map(_makeAbsolute)},ie}(),ElementState=function(){function ie(te,ne,re){this.element=te,this.update(ne,re)}var ee=ie.prototype;return ee.isDifferent=function(ne){var re=this.bounds,se=ne.bounds;return re.top!==se.top||re.left!==se.left||re.width!==se.width||re.height!==se.height||!this.matrix.equals(ne.matrix)||this.opacity!==ne.opacity||this.props&&ne.props&&JSON.stringify(this.props)!==JSON.stringify(ne.props)},ee.update=function(ne,re){var se=this,ae=se.element,oe=gsap.getProperty(ae),le=gsap.core.getCache(ae),ce=ae.getBoundingClientRect(),he=ae.getBBox&&typeof ae.getBBox=="function"&&ae.nodeName.toLowerCase()!=="svg"&&ae.getBBox(),fe=re?new Matrix2D(1,0,0,1,ce.left+_getDocScrollLeft(),ce.top+_getDocScrollTop()):getGlobalMatrix(ae,!1,!1,!0);se.getProp=oe,se.element=ae,se.id=_getID(ae),se.matrix=fe,se.cache=le,se.bounds=ce,se.isVisible=!!(ce.width||ce.height||ce.left||ce.top),se.display=oe("display"),se.position=oe("position"),se.parent=ae.parentNode,se.x=oe("x"),se.y=oe("y"),se.scaleX=le.scaleX,se.scaleY=le.scaleY,se.rotation=oe("rotation"),se.skewX=oe("skewX"),se.opacity=oe("opacity"),se.width=he?he.width:_closestTenth(oe("width","px"),.04),se.height=he?he.height:_closestTenth(oe("height","px"),.04),ne&&_recordProps(se,_memoizedProps[ne]||_memoizeProps(ne)),se.ctm=ae.getCTM&&ae.nodeName.toLowerCase()==="svg"&&_getCTM(ae).inverse(),se.simple=re||_round(fe.a)===1&&!_round(fe.b)&&!_round(fe.c)&&_round(fe.d)===1,se.uncache=0},ie}(),FlipAction=function(){function ie(te,ne){this.vars=te,this.batch=ne,this.states=[],this.timeline=ne.timeline}var ee=ie.prototype;return ee.getStateById=function(ne){for(var re=this.states.length;re--;)if(this.states[re].idLookup[ne])return this.states[re]},ee.kill=function(){this.batch.remove(this)},ie}(),FlipBatch=function(){function ie(te){this.id=te,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new FlipState,this.timeline=gsap.timeline()}var ee=ie.prototype;return ee.add=function(ne){var re=this.actions.filter(function(se){return se.vars===ne});return re.length?re[0]:(re=new FlipAction(typeof ne=="function"?{animate:ne}:ne,this),this.actions.push(re),re)},ee.remove=function(ne){var re=this.actions.indexOf(ne);return re>=0&&this.actions.splice(re,1),this},ee.getState=function(ne){var re=this,se=_batch,ae=_batchAction;return _batch=this,this.state.clear(),this._kill.length=0,this.actions.forEach(function(oe){oe.vars.getState&&(oe.states.length=0,_batchAction=oe,oe.state=oe.vars.getState(oe)),ne&&oe.states.forEach(function(le){return re.state.add(le)})}),_batchAction=ae,_batch=se,this.killConflicts(),this},ee.animate=function(){var ne=this,re=_batch,se=this.timeline,ae=this.actions.length,oe,le;for(_batch=this,se.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach(function(ce){ce.vars.animate&&ce.vars.animate(ce);var he=ce.vars.onEnter,fe=ce.vars.onLeave,ue=ce.targets,de,ge;ue&&ue.length&&(he||fe)&&(de=new FlipState,ce.states.forEach(function(me){return de.add(me)}),ge=de.compare(Flip.getState(ue)),ge.enter.length&&he&&he(ge.enter),ge.leave.length&&fe&&fe(ge.leave))}),_makeCompsAbsolute(this._abs),this._run.forEach(function(ce){return ce()}),le=se.duration(),oe=this._final.slice(0),se.add(function(){le<=se.time()&&(oe.forEach(function(ce){return ce()}),_forEachBatch(ne,"onComplete"))}),_batch=re;ae--;)this.actions[ae].vars.once&&this.actions[ae].kill();return _forEachBatch(this,"onStart"),se.restart(),this},ee.loadState=function(ne){ne||(ne=function(){return 0});var re=[];return this.actions.forEach(function(se){if(se.vars.loadState){var ae,oe=function le(ce){ce&&(se.targets=ce),ae=re.indexOf(le),~ae&&(re.splice(ae,1),re.length||ne())};re.push(oe),se.vars.loadState(oe)}}),re.length||ne(),this},ee.setState=function(){return this.actions.forEach(function(ne){return ne.targets=ne.vars.setState&&ne.vars.setState(ne)}),this},ee.killConflicts=function(ne){return this.state.interrupt(ne),this._kill.forEach(function(re){return re.interrupt(ne)}),this},ee.run=function(ne,re){var se=this;return this!==_batch&&(ne||this.getState(re),this.loadState(function(){se._killed||(se.setState(),se.animate())})),this},ee.clear=function(ne){this.state.clear(),ne||(this.actions.length=0)},ee.getStateById=function(ne){for(var re=this.actions.length,se;re--;)if(se=this.actions[re].getStateById(ne),se)return se;return this.state.idLookup[ne]&&this.state},ee.kill=function(){this._killed=1,this.clear(),delete _batchLookup[this.id]},ie}(),Flip=function(){function ie(){}return ie.getState=function(te,ne){var re=_parseState(te,ne);return _batchAction&&_batchAction.states.push(re),ne&&ne.batch&&ie.batch(ne.batch).state.add(re),re},ie.from=function(te,ne){return ne=ne||{},"clearProps"in ne||(ne.clearProps=!0),_fromTo(te,_parseState(ne.targets||te.targets,{props:ne.props||te.props,simple:ne.simple,kill:!!ne.kill}),ne,-1)},ie.to=function(te,ne){return _fromTo(te,_parseState(ne.targets||te.targets,{props:ne.props||te.props,simple:ne.simple,kill:!!ne.kill}),ne,1)},ie.fromTo=function(te,ne,re){return _fromTo(te,ne,re)},ie.fit=function(te,ne,re){var se=re?_copy(re,_fitReserved):{},ae=re||se,oe=ae.absolute,le=ae.scale,ce=ae.getVars,he=ae.props,fe=ae.runBackwards,ue=ae.onComplete,de=ae.simple,ge=re&&re.fitChild&&_getEl(re.fitChild),me=_parseElementState(ne,he,de,te),ve=_parseElementState(te,0,de,me),pe=he?_memoizedRemoveProps[he]:_removeProps,ye=gsap.context();return he&&_applyProps(se,me.props),_recordInlineStyles(ve,pe),fe&&("immediateRender"in se||(se.immediateRender=!0),se.onComplete=function(){_applyInlineStyles(ve),ue&&ue.apply(this,arguments)}),oe&&_makeAbsolute(ve,me),se=_fit(ve,me,le||ge,he,ge,se.duration||ce?se:0),ye&&!ce&&ye.add(function(){return function(){return _applyInlineStyles(ve)}}),ce?se:se.duration?gsap.to(ve.element,se):null},ie.makeAbsolute=function(te,ne){return(te instanceof FlipState?te:new FlipState(te,ne)).makeAbsolute()},ie.batch=function(te){return te||(te="default"),_batchLookup[te]||(_batchLookup[te]=new FlipBatch(te))},ie.killFlipsOf=function(te,ne){(te instanceof FlipState?te.targets:_toArray(te)).forEach(function(re){return re&&_killFlip(re._flip,ne!==!1?1:2)})},ie.isFlipping=function(te){var ne=ie.getByTarget(te);return!!ne&&ne.isActive()},ie.getByTarget=function(te){return(_getEl(te)||_emptyObj)._flip},ie.getElementState=function(te,ne){return new ElementState(_getEl(te),ne)},ie.convertCoordinates=function(te,ne,re){var se=getGlobalMatrix(ne,!0,!0).multiply(getGlobalMatrix(te));return re?se.apply(re):se},ie.register=function(te){if(_body=typeof document<"u"&&document.body,_body){gsap=te,_setDoc(_body),_toArray=gsap.utils.toArray,_getStyleSaver=gsap.core.getStyleSaver;var ne=gsap.utils.snap(.1);_closestTenth=function(se,ae){return ne(parseFloat(se)+ae)}}},ie}();Flip.version="3.12.5",typeof window<"u"&&window.gsap&&window.gsap.registerPlugin(Flip);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}var splitting={exports:{}};(function(ie,ee){(function(te,ne){ie.exports=ne()})(commonjsGlobal,function(){var te=document,ne=te.createTextNode.bind(te);function re(Xe,Ge,He){Xe.style.setProperty(Ge,He)}function se(Xe,Ge){return Xe.appendChild(Ge)}function ae(Xe,Ge,He,Je){var et=te.createElement("span");return Ge&&(et.className=Ge),He&&(!Je&&et.setAttribute("data-"+Ge,He),et.textContent=He),Xe&&se(Xe,et)||et}function oe(Xe,Ge){return Xe.getAttribute("data-"+Ge)}function le(Xe,Ge){return!Xe||Xe.length==0?[]:Xe.nodeName?[Xe]:[].slice.call(Xe[0].nodeName?Xe:(Ge||te).querySelectorAll(Xe))}function ce(Xe){for(var Ge=[];Xe--;)Ge[Xe]=[];return Ge}function he(Xe,Ge){Xe&&Xe.some(Ge)}function fe(Xe){return function(Ge){return Xe[Ge]}}function ue(Xe,Ge,He){var Je="--"+Ge,et=Je+"-index";he(He,function(ht,vt){Array.isArray(ht)?he(ht,function(gt){re(gt,et,vt)}):re(ht,et,vt)}),re(Xe,Je+"-total",He.length)}var de={};function ge(Xe,Ge,He){var Je=He.indexOf(Xe);if(Je==-1){He.unshift(Xe);var et=de[Xe];if(!et)throw new Error("plugin not loaded: "+Xe);he(et.depends,function(vt){ge(vt,Xe,He)})}else{var ht=He.indexOf(Ge);He.splice(Je,1),He.splice(ht,0,Xe)}return He}function me(Xe,Ge,He,Je){return{by:Xe,depends:Ge,key:He,split:Je}}function ve(Xe){return ge(Xe,0,[]).map(fe(de))}function pe(Xe){de[Xe.by]=Xe}function ye(Xe,Ge,He,Je,et){Xe.normalize();var ht=[],vt=document.createDocumentFragment();Je&&ht.push(Xe.previousSibling);var gt=[];return le(Xe.childNodes).some(function(yt){if(yt.tagName&&!yt.hasChildNodes()){gt.push(yt);return}if(yt.childNodes&&yt.childNodes.length){gt.push(yt),ht.push.apply(ht,ye(yt,Ge,He,Je,et));return}var Oe=yt.wholeText||"",Ze=Oe.trim();if(Ze.length){Oe[0]===" "&&gt.push(ne(" "));var qe=He===""&&typeof Intl.Segmenter=="function";he(qe?Array.from(new Intl.Segmenter().segment(Ze)).map(function(ut){return ut.segment}):Ze.split(He),function(ut,at){at&&et&&gt.push(ae(vt,"whitespace"," ",et));var We=ae(vt,Ge,ut);ht.push(We),gt.push(We)}),Oe[Oe.length-1]===" "&&gt.push(ne(" "))}}),he(gt,function(yt){se(vt,yt)}),Xe.innerHTML="",se(Xe,vt),ht}var _e=0;function xe(Xe,Ge){for(var He in Ge)Xe[He]=Ge[He];return Xe}var Se="words",be=me(Se,_e,"word",function(Xe){return ye(Xe,"word",/\s+/,0,1)}),Ee="chars",Pe=me(Ee,[Se],"char",function(Xe,Ge,He){var Je=[];return he(He[Se],function(et,ht){Je.push.apply(Je,ye(et,"char","",Ge.whitespace&&ht))}),Je});function we(Xe){Xe=Xe||{};var Ge=Xe.key;return le(Xe.target||"[data-splitting]").map(function(He){var Je=He["🍌"];if(!Xe.force&&Je)return Je;Je=He["🍌"]={el:He};var et=Xe.by||oe(He,"splitting");(!et||et=="true")&&(et=Ee);var ht=ve(et),vt=xe({},Xe);return he(ht,function(gt){if(gt.split){var yt=gt.by,Oe=(Ge?"-"+Ge:"")+gt.key,Ze=gt.split(He,vt,Je);Oe&&ue(He,Oe,Ze),Je[yt]=Ze,He.classList.add(yt)}}),He.classList.add("splitting"),Je})}function Me(Xe){Xe=Xe||{};var Ge=Xe.target=ae();return Ge.innerHTML=Xe.content,we(Xe),Ge.outerHTML}we.html=Me,we.add=pe;function De(Xe,Ge,He){var Je=le(Ge.matching||Xe.children,Xe),et={};return he(Je,function(ht){var vt=Math.round(ht[He]);(et[vt]||(et[vt]=[])).push(ht)}),Object.keys(et).map(Number).sort(ke).map(fe(et))}function ke(Xe,Ge){return Xe-Ge}var ze=me("lines",[Se],"line",function(Xe,Ge,He){return De(Xe,{matching:He[Se]},"offsetTop")}),Ve=me("items",_e,"item",function(Xe,Ge){return le(Ge.matching||Xe.children,Xe)}),Ue=me("rows",_e,"row",function(Xe,Ge){return De(Xe,Ge,"offsetTop")}),Ae=me("cols",_e,"col",function(Xe,Ge){return De(Xe,Ge,"offsetLeft")}),Fe=me("grid",["rows","cols"]),Te="layout",Ce=me(Te,_e,_e,function(Xe,Ge){var He=Ge.rows=+(Ge.rows||oe(Xe,"rows")||1),Je=Ge.columns=+(Ge.columns||oe(Xe,"columns")||1);if(Ge.image=Ge.image||oe(Xe,"image")||Xe.currentSrc||Xe.src,Ge.image){var et=le("img",Xe)[0];Ge.image=et&&(et.currentSrc||et.src)}Ge.image&&re(Xe,"background-image","url("+Ge.image+")");for(var ht=He*Je,vt=[],gt=ae(_e,"cell-grid");ht--;){var yt=ae(gt,"cell");ae(yt,"cell-inner"),vt.push(yt)}return se(Xe,gt),vt}),Le=me("cellRows",[Te],"row",function(Xe,Ge,He){var Je=Ge.rows,et=ce(Je);return he(He[Te],function(ht,vt,gt){et[Math.floor(vt/(gt.length/Je))].push(ht)}),et}),Be=me("cellColumns",[Te],"col",function(Xe,Ge,He){var Je=Ge.columns,et=ce(Je);return he(He[Te],function(ht,vt){et[vt%Je].push(ht)}),et}),st=me("cells",["cellRows","cellColumns"],"cell",function(Xe,Ge,He){return He[Te]});return pe(be),pe(Pe),pe(ze),pe(Ve),pe(Ue),pe(Ae),pe(Fe),pe(Ce),pe(Le),pe(Be),pe(st),we})})(splitting);var splittingExports=splitting.exports;const Splitting=getDefaultExportFromCjs(splittingExports);function _defineProperty$1(ie,ee,te){return(ee=_toPropertyKey(ee))in ie?Object.defineProperty(ie,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):ie[ee]=te,ie}function _toPrimitive(ie,ee){if(typeof ie!="object"||ie===null)return ie;var te=ie[Symbol.toPrimitive];if(te!==void 0){var ne=te.call(ie,ee||"default");if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ee==="string"?String:Number)(ie)}function _toPropertyKey(ie){var ee=_toPrimitive(ie,"string");return typeof ee=="symbol"?ee:String(ee)}function _classCallCheck(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")}function _defineProperties(ie,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ie,ne.key,ne)}}function _createClass(ie,ee,te){return ee&&_defineProperties(ie.prototype,ee),te&&_defineProperties(ie,te),ie}function _defineProperty(ie,ee,te){return ee in ie?Object.defineProperty(ie,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):ie[ee]=te,ie}function ownKeys(ie,ee){var te=Object.keys(ie);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(ie);ee&&(ne=ne.filter(function(re){return Object.getOwnPropertyDescriptor(ie,re).enumerable})),te.push.apply(te,ne)}return te}function _objectSpread2(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys(Object(te),!0).forEach(function(ne){_defineProperty(ie,ne,te[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(te)):ownKeys(Object(te)).forEach(function(ne){Object.defineProperty(ie,ne,Object.getOwnPropertyDescriptor(te,ne))})}return ie}var defaults$1={addCSS:!0,thumbWidth:15,watch:!0};function matches$1(ie,ee){return(function(){return Array.from(document.querySelectorAll(ee)).includes(this)}).call(ie,ee)}function trigger(ie,ee){if(ie&&ee){var te=new Event(ee,{bubbles:!0});ie.dispatchEvent(te)}}var getConstructor$1=function(ie){return ie!=null?ie.constructor:null},instanceOf$1=function(ie,ee){return!!(ie&&ee&&ie instanceof ee)},isNullOrUndefined$1=function(ie){return ie==null},isObject$1=function(ie){return getConstructor$1(ie)===Object},isNumber$1=function(ie){return getConstructor$1(ie)===Number&&!Number.isNaN(ie)},isString$1=function(ie){return getConstructor$1(ie)===String},isBoolean$1=function(ie){return getConstructor$1(ie)===Boolean},isFunction$1=function(ie){return getConstructor$1(ie)===Function},isArray$1=function(ie){return Array.isArray(ie)},isNodeList$1=function(ie){return instanceOf$1(ie,NodeList)},isElement$1=function(ie){return instanceOf$1(ie,Element)},isEvent$1=function(ie){return instanceOf$1(ie,Event)},isEmpty$1=function(ie){return isNullOrUndefined$1(ie)||(isString$1(ie)||isArray$1(ie)||isNodeList$1(ie))&&!ie.length||isObject$1(ie)&&!Object.keys(ie).length},is$1={nullOrUndefined:isNullOrUndefined$1,object:isObject$1,number:isNumber$1,string:isString$1,boolean:isBoolean$1,function:isFunction$1,array:isArray$1,nodeList:isNodeList$1,element:isElement$1,event:isEvent$1,empty:isEmpty$1};function getDecimalPlaces(ie){var ee="".concat(ie).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ee?Math.max(0,(ee[1]?ee[1].length:0)-(ee[2]?+ee[2]:0)):0}function round(ie,ee){if(1>ee){var te=getDecimalPlaces(ee);return parseFloat(ie.toFixed(te))}return Math.round(ie/ee)*ee}var RangeTouch=function(){function ie(ee,te){_classCallCheck(this,ie),is$1.element(ee)?this.element=ee:is$1.string(ee)&&(this.element=document.querySelector(ee)),is$1.element(this.element)&&is$1.empty(this.element.rangeTouch)&&(this.config=_objectSpread2({},defaults$1,{},te),this.init())}return _createClass(ie,[{key:"init",value:function(){ie.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){ie.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(ee){var te=this,ne=ee?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(re){te.element[ne](re,function(se){return te.set(se)},!1)})}},{key:"get",value:function(ee){if(!ie.enabled||!is$1.event(ee))return null;var te,ne=ee.target,re=ee.changedTouches[0],se=parseFloat(ne.getAttribute("min"))||0,ae=parseFloat(ne.getAttribute("max"))||100,oe=parseFloat(ne.getAttribute("step"))||1,le=ne.getBoundingClientRect(),ce=100/le.width*(this.config.thumbWidth/2)/100;return 0>(te=100/le.width*(re.clientX-le.left))?te=0:100<te&&(te=100),50>te?te-=(100-2*te)*ce:50<te&&(te+=2*(te-50)*ce),se+round(te/100*(ae-se),oe)}},{key:"set",value:function(ee){ie.enabled&&is$1.event(ee)&&!ee.target.disabled&&(ee.preventDefault(),ee.target.value=this.get(ee),trigger(ee.target,ee.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(ee){var te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ne=null;if(is$1.empty(ee)||is$1.string(ee)?ne=Array.from(document.querySelectorAll(is$1.string(ee)?ee:'input[type="range"]')):is$1.element(ee)?ne=[ee]:is$1.nodeList(ee)?ne=Array.from(ee):is$1.array(ee)&&(ne=ee.filter(is$1.element)),is$1.empty(ne))return null;var re=_objectSpread2({},defaults$1,{},te);if(is$1.string(ee)&&re.watch){var se=new MutationObserver(function(ae){Array.from(ae).forEach(function(oe){Array.from(oe.addedNodes).forEach(function(le){is$1.element(le)&&matches$1(le,ee)&&new ie(le,re)})})});se.observe(document.body,{childList:!0,subtree:!0})}return ne.map(function(ae){return new ie(ae,te)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),ie}();const getConstructor=ie=>ie!=null?ie.constructor:null,instanceOf=(ie,ee)=>!!(ie&&ee&&ie instanceof ee),isNullOrUndefined=ie=>ie==null,isObject=ie=>getConstructor(ie)===Object,isNumber=ie=>getConstructor(ie)===Number&&!Number.isNaN(ie),isString=ie=>getConstructor(ie)===String,isBoolean=ie=>getConstructor(ie)===Boolean,isFunction=ie=>typeof ie=="function",isArray=ie=>Array.isArray(ie),isWeakMap=ie=>instanceOf(ie,WeakMap),isNodeList=ie=>instanceOf(ie,NodeList),isTextNode=ie=>getConstructor(ie)===Text,isEvent=ie=>instanceOf(ie,Event),isKeyboardEvent=ie=>instanceOf(ie,KeyboardEvent),isCue=ie=>instanceOf(ie,window.TextTrackCue)||instanceOf(ie,window.VTTCue),isTrack=ie=>instanceOf(ie,TextTrack)||!isNullOrUndefined(ie)&&isString(ie.kind),isPromise=ie=>instanceOf(ie,Promise)&&isFunction(ie.then),isElement=ie=>ie!==null&&typeof ie=="object"&&ie.nodeType===1&&typeof ie.style=="object"&&typeof ie.ownerDocument=="object",isEmpty=ie=>isNullOrUndefined(ie)||(isString(ie)||isArray(ie)||isNodeList(ie))&&!ie.length||isObject(ie)&&!Object.keys(ie).length,isUrl=ie=>{if(instanceOf(ie,window.URL))return!0;if(!isString(ie))return!1;let ee=ie;ie.startsWith("http://")&&ie.startsWith("https://")||(ee=`http://${ie}`);try{return!isEmpty(new URL(ee).hostname)}catch{return!1}};var is={nullOrUndefined:isNullOrUndefined,object:isObject,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray,weakMap:isWeakMap,nodeList:isNodeList,element:isElement,textNode:isTextNode,event:isEvent,keyboardEvent:isKeyboardEvent,cue:isCue,track:isTrack,promise:isPromise,url:isUrl,empty:isEmpty};const transitionEndEvent=(()=>{const ie=document.createElement("span"),ee={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},te=Object.keys(ee).find(ne=>ie.style[ne]!==void 0);return!!is.string(te)&&ee[te]})();function repaint(ie,ee){setTimeout(()=>{try{ie.hidden=!0,ie.offsetHeight,ie.hidden=!1}catch{}},ee)}const isIE=!!window.document.documentMode,isEdge=/Edge/g.test(navigator.userAgent),isWebKit="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIos=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var browser={isIE,isEdge,isWebKit,isIPhone,isIPadOS,isIos};function cloneDeep(ie){return JSON.parse(JSON.stringify(ie))}function getDeep(ie,ee){return ee.split(".").reduce((te,ne)=>te&&te[ne],ie)}function extend(ie={},...ee){if(!ee.length)return ie;const te=ee.shift();return is.object(te)?(Object.keys(te).forEach(ne=>{is.object(te[ne])?(Object.keys(ie).includes(ne)||Object.assign(ie,{[ne]:{}}),extend(ie[ne],te[ne])):Object.assign(ie,{[ne]:te[ne]})}),extend(ie,...ee)):ie}function wrap(ie,ee){const te=ie.length?ie:[ie];Array.from(te).reverse().forEach((ne,re)=>{const se=re>0?ee.cloneNode(!0):ee,ae=ne.parentNode,oe=ne.nextSibling;se.appendChild(ne),oe?ae.insertBefore(se,oe):ae.appendChild(se)})}function setAttributes(ie,ee){is.element(ie)&&!is.empty(ee)&&Object.entries(ee).filter(([,te])=>!is.nullOrUndefined(te)).forEach(([te,ne])=>ie.setAttribute(te,ne))}function createElement(ie,ee,te){const ne=document.createElement(ie);return is.object(ee)&&setAttributes(ne,ee),is.string(te)&&(ne.innerText=te),ne}function insertAfter(ie,ee){is.element(ie)&&is.element(ee)&&ee.parentNode.insertBefore(ie,ee.nextSibling)}function insertElement(ie,ee,te,ne){is.element(ee)&&ee.appendChild(createElement(ie,te,ne))}function removeElement(ie){is.nodeList(ie)||is.array(ie)?Array.from(ie).forEach(removeElement):is.element(ie)&&is.element(ie.parentNode)&&ie.parentNode.removeChild(ie)}function emptyElement(ie){if(!is.element(ie))return;let{length:ee}=ie.childNodes;for(;ee>0;)ie.removeChild(ie.lastChild),ee-=1}function replaceElement(ie,ee){return is.element(ee)&&is.element(ee.parentNode)&&is.element(ie)?(ee.parentNode.replaceChild(ie,ee),ie):null}function getAttributesFromSelector(ie,ee){if(!is.string(ie)||is.empty(ie))return{};const te={},ne=extend({},ee);return ie.split(",").forEach(re=>{const se=re.trim(),ae=se.replace(".",""),oe=se.replace(/[[\]]/g,"").split("="),[le]=oe,ce=oe.length>1?oe[1].replace(/["']/g,""):"";switch(se.charAt(0)){case".":is.string(ne.class)?te.class=`${ne.class} ${ae}`:te.class=ae;break;case"#":te.id=se.replace("#","");break;case"[":te[le]=ce}}),extend(ne,te)}function toggleHidden(ie,ee){if(!is.element(ie))return;let te=ee;is.boolean(te)||(te=!ie.hidden),ie.hidden=te}function toggleClass(ie,ee,te){if(is.nodeList(ie))return Array.from(ie).map(ne=>toggleClass(ne,ee,te));if(is.element(ie)){let ne="toggle";return te!==void 0&&(ne=te?"add":"remove"),ie.classList[ne](ee),ie.classList.contains(ee)}return!1}function hasClass(ie,ee){return is.element(ie)&&ie.classList.contains(ee)}function matches(ie,ee){const{prototype:te}=Element;return(te.matches||te.webkitMatchesSelector||te.mozMatchesSelector||te.msMatchesSelector||function(){return Array.from(document.querySelectorAll(ee)).includes(this)}).call(ie,ee)}function closest$1(ie,ee){const{prototype:te}=Element;return(te.closest||function(){let ne=this;do{if(matches.matches(ne,ee))return ne;ne=ne.parentElement||ne.parentNode}while(ne!==null&&ne.nodeType===1);return null}).call(ie,ee)}function getElements(ie){return this.elements.container.querySelectorAll(ie)}function getElement(ie){return this.elements.container.querySelector(ie)}function setFocus(ie=null,ee=!1){is.element(ie)&&ie.focus({preventScroll:!0,focusVisible:ee})}const defaultCodecs={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},support={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(ie,ee){const te=support[ie]||ee!=="html5";return{api:te,ui:te&&support.rangeInput}},pip:!(browser.isIPhone||!is.function(createElement("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||createElement("video").disablePictureInPicture)),airplay:is.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(ie){if(is.empty(ie))return!1;const[ee]=ie.split("/");let te=ie;if(!this.isHTML5||ee!==this.type)return!1;Object.keys(defaultCodecs).includes(te)&&(te+=`; codecs="${defaultCodecs[ie]}"`);try{return!!(te&&this.media.canPlayType(te).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const ie=document.createElement("input");return ie.type="range",ie.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:transitionEndEvent!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},supportsPassiveListeners=(()=>{let ie=!1;try{const ee=Object.defineProperty({},"passive",{get:()=>(ie=!0,null)});window.addEventListener("test",null,ee),window.removeEventListener("test",null,ee)}catch{}return ie})();function toggleListener(ie,ee,te,ne=!1,re=!0,se=!1){if(!ie||!("addEventListener"in ie)||is.empty(ee)||!is.function(te))return;const ae=ee.split(" ");let oe=se;supportsPassiveListeners&&(oe={passive:re,capture:se}),ae.forEach(le=>{this&&this.eventListeners&&ne&&this.eventListeners.push({element:ie,type:le,callback:te,options:oe}),ie[ne?"addEventListener":"removeEventListener"](le,te,oe)})}function on(ie,ee="",te,ne=!0,re=!1){toggleListener.call(this,ie,ee,te,!0,ne,re)}function off(ie,ee="",te,ne=!0,re=!1){toggleListener.call(this,ie,ee,te,!1,ne,re)}function once(ie,ee="",te,ne=!0,re=!1){const se=(...ae)=>{off(ie,ee,se,ne,re),te.apply(this,ae)};toggleListener.call(this,ie,ee,se,!0,ne,re)}function triggerEvent(ie,ee="",te=!1,ne={}){if(!is.element(ie)||is.empty(ee))return;const re=new CustomEvent(ee,{bubbles:te,detail:{...ne,plyr:this}});ie.dispatchEvent(re)}function unbindListeners(){this&&this.eventListeners&&(this.eventListeners.forEach(ie=>{const{element:ee,type:te,callback:ne,options:re}=ie;ee.removeEventListener(te,ne,re)}),this.eventListeners=[])}function ready(){return new Promise(ie=>this.ready?setTimeout(ie,0):on.call(this,this.elements.container,"ready",ie)).then(()=>{})}function silencePromise(ie){is.promise(ie)&&ie.then(null,()=>{})}function dedupe(ie){return is.array(ie)?ie.filter((ee,te)=>ie.indexOf(ee)===te):ie}function closest(ie,ee){return is.array(ie)&&ie.length?ie.reduce((te,ne)=>Math.abs(ne-ee)<Math.abs(te-ee)?ne:te):null}function supportsCSS(ie){return!(!window||!window.CSS)&&window.CSS.supports(ie)}const standardRatios=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((ie,[ee,te])=>({...ie,[ee/te]:[ee,te]}),{});function validateAspectRatio(ie){return is.array(ie)||is.string(ie)&&ie.includes(":")?(is.array(ie)?ie:ie.split(":")).map(Number).every(is.number):!1}function reduceAspectRatio(ie){if(!is.array(ie)||!ie.every(is.number))return null;const[ee,te]=ie,ne=(se,ae)=>ae===0?se:ne(ae,se%ae),re=ne(ee,te);return[ee/re,te/re]}function getAspectRatio(ie){const ee=ne=>validateAspectRatio(ne)?ne.split(":").map(Number):null;let te=ee(ie);if(te===null&&(te=ee(this.config.ratio)),te===null&&!is.empty(this.embed)&&is.array(this.embed.ratio)&&({ratio:te}=this.embed),te===null&&this.isHTML5){const{videoWidth:ne,videoHeight:re}=this.media;te=[ne,re]}return reduceAspectRatio(te)}function setAspectRatio(ie){if(!this.isVideo)return{};const{wrapper:ee}=this.elements,te=getAspectRatio.call(this,ie);if(!is.array(te))return{};const[ne,re]=reduceAspectRatio(te),se=100/ne*re;if(supportsCSS(`aspect-ratio: ${ne}/${re}`)?ee.style.aspectRatio=`${ne}/${re}`:ee.style.paddingBottom=`${se}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const ae=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),oe=(ae-se)/(ae/50);this.fullscreen.active?ee.style.paddingBottom=null:this.media.style.transform=`translateY(-${oe}%)`}else this.isHTML5&&ee.classList.add(this.config.classNames.videoFixedRatio);return{padding:se,ratio:te}}function roundAspectRatio(ie,ee,te=.05){const ne=ie/ee,re=closest(Object.keys(standardRatios),ne);return Math.abs(re-ne)<=te?standardRatios[re]:[ie,ee]}function getViewportSize(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const html5={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(ie=>{const ee=ie.getAttribute("type");return!!is.empty(ee)||support.mime.call(this,ee)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:html5.getSources.call(this).map(ie=>Number(ie.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const ie=this;ie.options.speed=ie.config.speed.options,is.empty(this.config.ratio)||setAspectRatio.call(ie),Object.defineProperty(ie.media,"quality",{get(){const ee=html5.getSources.call(ie).find(te=>te.getAttribute("src")===ie.source);return ee&&Number(ee.getAttribute("size"))},set(ee){if(ie.quality!==ee){if(ie.config.quality.forced&&is.function(ie.config.quality.onChange))ie.config.quality.onChange(ee);else{const te=html5.getSources.call(ie).find(le=>Number(le.getAttribute("size"))===ee);if(!te)return;const{currentTime:ne,paused:re,preload:se,readyState:ae,playbackRate:oe}=ie.media;ie.media.src=te.getAttribute("src"),(se!=="none"||ae)&&(ie.once("loadedmetadata",()=>{ie.speed=oe,ie.currentTime=ne,re||silencePromise(ie.play())}),ie.media.load())}triggerEvent.call(ie,ie.media,"qualitychange",!1,{quality:ee})}}})},cancelRequests(){this.isHTML5&&(removeElement(html5.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function generateId(ie){return`${ie}-${Math.floor(1e4*Math.random())}`}function format(ie,...ee){return is.empty(ie)?ie:ie.toString().replace(/{(\d+)}/g,(te,ne)=>ee[ne].toString())}function getPercentage(ie,ee){return ie===0||ee===0||Number.isNaN(ie)||Number.isNaN(ee)?0:(ie/ee*100).toFixed(2)}const replaceAll=(ie="",ee="",te="")=>ie.replace(new RegExp(ee.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),te.toString()),toTitleCase=(ie="")=>ie.toString().replace(/\w\S*/g,ee=>ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase());function toPascalCase(ie=""){let ee=ie.toString();return ee=replaceAll(ee,"-"," "),ee=replaceAll(ee,"_"," "),ee=toTitleCase(ee),replaceAll(ee," ","")}function toCamelCase(ie=""){let ee=ie.toString();return ee=toPascalCase(ee),ee.charAt(0).toLowerCase()+ee.slice(1)}function stripHTML(ie){const ee=document.createDocumentFragment(),te=document.createElement("div");return ee.appendChild(te),te.innerHTML=ie,ee.firstChild.innerText}function getHTML(ie){const ee=document.createElement("div");return ee.appendChild(ie),ee.innerHTML}const resources={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},i18n={get(ie="",ee={}){if(is.empty(ie)||is.empty(ee))return"";let te=getDeep(ee.i18n,ie);if(is.empty(te))return Object.keys(resources).includes(ie)?resources[ie]:"";const ne={"{seektime}":ee.seekTime,"{title}":ee.title};return Object.entries(ne).forEach(([re,se])=>{te=replaceAll(te,re,se)}),te}};class Storage{constructor(ee){_defineProperty$1(this,"get",te=>{if(!Storage.supported||!this.enabled)return null;const ne=window.localStorage.getItem(this.key);if(is.empty(ne))return null;const re=JSON.parse(ne);return is.string(te)&&te.length?re[te]:re}),_defineProperty$1(this,"set",te=>{if(!Storage.supported||!this.enabled||!is.object(te))return;let ne=this.get();is.empty(ne)&&(ne={}),extend(ne,te);try{window.localStorage.setItem(this.key,JSON.stringify(ne))}catch{}}),this.enabled=ee.config.storage.enabled,this.key=ee.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const ee="___test";return window.localStorage.setItem(ee,ee),window.localStorage.removeItem(ee),!0}catch{return!1}}}function fetch$1(ie,ee="text"){return new Promise((te,ne)=>{try{const re=new XMLHttpRequest;if(!("withCredentials"in re))return;re.addEventListener("load",()=>{if(ee==="text")try{te(JSON.parse(re.responseText))}catch{te(re.responseText)}else te(re.response)}),re.addEventListener("error",()=>{throw new Error(re.status)}),re.open("GET",ie,!0),re.responseType=ee,re.send()}catch(re){ne(re)}})}function loadSprite(ie,ee){if(!is.string(ie))return;const te="cache",ne=is.string(ee);let re=!1;const se=()=>document.getElementById(ee)!==null,ae=(oe,le)=>{oe.innerHTML=le,ne&&se()||document.body.insertAdjacentElement("afterbegin",oe)};if(!ne||!se()){const oe=Storage.supported,le=document.createElement("div");if(le.setAttribute("hidden",""),ne&&le.setAttribute("id",ee),oe){const ce=window.localStorage.getItem(`${te}-${ee}`);if(re=ce!==null,re){const he=JSON.parse(ce);ae(le,he.content)}}fetch$1(ie).then(ce=>{if(!is.empty(ce)){if(oe)try{window.localStorage.setItem(`${te}-${ee}`,JSON.stringify({content:ce}))}catch{}ae(le,ce)}}).catch(()=>{})}}const getHours=ie=>Math.trunc(ie/60/60%60,10),getMinutes=ie=>Math.trunc(ie/60%60,10),getSeconds=ie=>Math.trunc(ie%60,10);function formatTime(ie=0,ee=!1,te=!1){if(!is.number(ie))return formatTime(void 0,ee,te);const ne=oe=>`0${oe}`.slice(-2);let re=getHours(ie);const se=getMinutes(ie),ae=getSeconds(ie);return re=ee||re>0?`${re}:`:"",`${te&&ie>0?"-":""}${re}${ne(se)}:${ne(ae)}`}const controls={getIconUrl(){const ie=new URL(this.config.iconUrl,window.location),ee=window.location.host?window.location.host:window.top.location.host,te=ie.host!==ee||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:te}},findElements(){try{return this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=getElement.call(this,this.config.selectors.progress),this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)},is.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(ie){return this.debug.warn("It looks like there is a problem with your custom controls HTML",ie),this.toggleNativeControls(!0),!1}},createIcon(ie,ee){const te="http://www.w3.org/2000/svg",ne=controls.getIconUrl.call(this),re=`${ne.cors?"":ne.url}#${this.config.iconPrefix}`,se=document.createElementNS(te,"svg");setAttributes(se,extend(ee,{"aria-hidden":"true",focusable:"false"}));const ae=document.createElementNS(te,"use"),oe=`${re}-${ie}`;return"href"in ae&&ae.setAttributeNS("http://www.w3.org/1999/xlink","href",oe),ae.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",oe),se.appendChild(ae),se},createLabel(ie,ee={}){const te=i18n.get(ie,this.config);return createElement("span",{...ee,class:[ee.class,this.config.classNames.hidden].filter(Boolean).join(" ")},te)},createBadge(ie){if(is.empty(ie))return null;const ee=createElement("span",{class:this.config.classNames.menu.value});return ee.appendChild(createElement("span",{class:this.config.classNames.menu.badge},ie)),ee},createButton(ie,ee){const te=extend({},ee);let ne=toCamelCase(ie);const re={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(ae=>{Object.keys(te).includes(ae)&&(re[ae]=te[ae],delete te[ae])}),re.element!=="button"||Object.keys(te).includes("type")||(te.type="button"),Object.keys(te).includes("class")?te.class.split(" ").some(ae=>ae===this.config.classNames.control)||extend(te,{class:`${te.class} ${this.config.classNames.control}`}):te.class=this.config.classNames.control,ie){case"play":re.toggle=!0,re.label="play",re.labelPressed="pause",re.icon="play",re.iconPressed="pause";break;case"mute":re.toggle=!0,re.label="mute",re.labelPressed="unmute",re.icon="volume",re.iconPressed="muted";break;case"captions":re.toggle=!0,re.label="enableCaptions",re.labelPressed="disableCaptions",re.icon="captions-off",re.iconPressed="captions-on";break;case"fullscreen":re.toggle=!0,re.label="enterFullscreen",re.labelPressed="exitFullscreen",re.icon="enter-fullscreen",re.iconPressed="exit-fullscreen";break;case"play-large":te.class+=` ${this.config.classNames.control}--overlaid`,ne="play",re.label="play",re.icon="play";break;default:is.empty(re.label)&&(re.label=ne),is.empty(re.icon)&&(re.icon=ie)}const se=createElement(re.element);return re.toggle?(se.appendChild(controls.createIcon.call(this,re.iconPressed,{class:"icon--pressed"})),se.appendChild(controls.createIcon.call(this,re.icon,{class:"icon--not-pressed"})),se.appendChild(controls.createLabel.call(this,re.labelPressed,{class:"label--pressed"})),se.appendChild(controls.createLabel.call(this,re.label,{class:"label--not-pressed"}))):(se.appendChild(controls.createIcon.call(this,re.icon)),se.appendChild(controls.createLabel.call(this,re.label))),extend(te,getAttributesFromSelector(this.config.selectors.buttons[ne],te)),setAttributes(se,te),ne==="play"?(is.array(this.elements.buttons[ne])||(this.elements.buttons[ne]=[]),this.elements.buttons[ne].push(se)):this.elements.buttons[ne]=se,se},createRange(ie,ee){const te=createElement("input",extend(getAttributesFromSelector(this.config.selectors.inputs[ie]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":i18n.get(ie,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},ee));return this.elements.inputs[ie]=te,controls.updateRangeFill.call(this,te),RangeTouch.setup(te),te},createProgress(ie,ee){const te=createElement("progress",extend(getAttributesFromSelector(this.config.selectors.display[ie]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},ee));if(ie!=="volume"){te.appendChild(createElement("span",null,"0"));const ne={played:"played",buffer:"buffered"}[ie],re=ne?i18n.get(ne,this.config):"";te.innerText=`% ${re.toLowerCase()}`}return this.elements.display[ie]=te,te},createTime(ie,ee){const te=getAttributesFromSelector(this.config.selectors.display[ie],ee),ne=createElement("div",extend(te,{class:`${te.class?te.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":i18n.get(ie,this.config),role:"timer"}),"00:00");return this.elements.display[ie]=ne,ne},bindMenuItemShortcuts(ie,ee){on.call(this,ie,"keydown keyup",te=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(te.key)||(te.preventDefault(),te.stopPropagation(),te.type==="keydown"))return;const ne=matches(ie,'[role="menuitemradio"]');if(!ne&&[" ","ArrowRight"].includes(te.key))controls.showMenuPanel.call(this,ee,!0);else{let re;te.key!==" "&&(te.key==="ArrowDown"||ne&&te.key==="ArrowRight"?(re=ie.nextElementSibling,is.element(re)||(re=ie.parentNode.firstElementChild)):(re=ie.previousElementSibling,is.element(re)||(re=ie.parentNode.lastElementChild)),setFocus.call(this,re,!0))}},!1),on.call(this,ie,"keyup",te=>{te.key==="Return"&&controls.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:ie,list:ee,type:te,title:ne,badge:re=null,checked:se=!1}){const ae=getAttributesFromSelector(this.config.selectors.inputs[te]),oe=createElement("button",extend(ae,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${ae.class?ae.class:""}`.trim(),"aria-checked":se,value:ie})),le=createElement("span");le.innerHTML=ne,is.element(re)&&le.appendChild(re),oe.appendChild(le),Object.defineProperty(oe,"checked",{enumerable:!0,get:()=>oe.getAttribute("aria-checked")==="true",set(ce){ce&&Array.from(oe.parentNode.children).filter(he=>matches(he,'[role="menuitemradio"]')).forEach(he=>he.setAttribute("aria-checked","false")),oe.setAttribute("aria-checked",ce?"true":"false")}}),this.listeners.bind(oe,"click keyup",ce=>{if(!is.keyboardEvent(ce)||ce.key===" "){switch(ce.preventDefault(),ce.stopPropagation(),oe.checked=!0,te){case"language":this.currentTrack=Number(ie);break;case"quality":this.quality=ie;break;case"speed":this.speed=parseFloat(ie)}controls.showMenuPanel.call(this,"home",is.keyboardEvent(ce))}},te,!1),controls.bindMenuItemShortcuts.call(this,oe,te),ee.appendChild(oe)},formatTime(ie=0,ee=!1){return is.number(ie)?formatTime(ie,getHours(this.duration)>0,ee):ie},updateTimeDisplay(ie=null,ee=0,te=!1){is.element(ie)&&is.number(ee)&&(ie.innerText=controls.formatTime(ee,te))},updateVolume(){this.supported.ui&&(is.element(this.elements.inputs.volume)&&controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),is.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(ie,ee=0){is.element(ie)&&(ie.value=ee,controls.updateRangeFill.call(this,ie))},updateProgress(ie){if(!this.supported.ui||!is.event(ie))return;let ee=0;const te=(ne,re)=>{const se=is.number(re)?re:0,ae=is.element(ne)?ne:this.elements.display.buffer;if(is.element(ae)){ae.value=se;const oe=ae.getElementsByTagName("span")[0];is.element(oe)&&(oe.childNodes[0].nodeValue=se)}};if(ie)switch(ie.type){case"timeupdate":case"seeking":case"seeked":ee=getPercentage(this.currentTime,this.duration),ie.type==="timeupdate"&&controls.setRange.call(this,this.elements.inputs.seek,ee);break;case"playing":case"progress":te(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(ie){const ee=is.event(ie)?ie.target:ie;if(is.element(ee)&&ee.getAttribute("type")==="range"){if(matches(ee,this.config.selectors.inputs.seek)){ee.setAttribute("aria-valuenow",this.currentTime);const te=controls.formatTime(this.currentTime),ne=controls.formatTime(this.duration),re=i18n.get("seekLabel",this.config);ee.setAttribute("aria-valuetext",re.replace("{currentTime}",te).replace("{duration}",ne))}else if(matches(ee,this.config.selectors.inputs.volume)){const te=100*ee.value;ee.setAttribute("aria-valuenow",te),ee.setAttribute("aria-valuetext",`${te.toFixed(1)}%`)}else ee.setAttribute("aria-valuenow",ee.value);(browser.isWebKit||browser.isIPadOS)&&ee.style.setProperty("--value",ee.value/ee.max*100+"%")}},updateSeekTooltip(ie){var ee,te;if(!this.config.tooltips.seek||!is.element(this.elements.inputs.seek)||!is.element(this.elements.display.seekTooltip)||this.duration===0)return;const ne=this.elements.display.seekTooltip,re=`${this.config.classNames.tooltip}--visible`,se=he=>toggleClass(ne,re,he);if(this.touch)return void se(!1);let ae=0;const oe=this.elements.progress.getBoundingClientRect();if(is.event(ie))ae=100/oe.width*(ie.pageX-oe.left);else{if(!hasClass(ne,re))return;ae=parseFloat(ne.style.left,10)}ae<0?ae=0:ae>100&&(ae=100);const le=this.duration/100*ae;ne.innerText=controls.formatTime(le);const ce=(ee=this.config.markers)===null||ee===void 0||(te=ee.points)===null||te===void 0?void 0:te.find(({time:he})=>he===Math.round(le));ce&&ne.insertAdjacentHTML("afterbegin",`${ce.label}<br>`),ne.style.left=`${ae}%`,is.event(ie)&&["mouseenter","mouseleave"].includes(ie.type)&&se(ie.type==="mouseenter")},timeUpdate(ie){const ee=!is.element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,ee?this.duration-this.currentTime:this.currentTime,ee),ie&&ie.type==="timeupdate"&&this.media.seeking||controls.updateProgress.call(this,ie)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return toggleHidden(this.elements.display.currentTime,!0),void toggleHidden(this.elements.progress,!0);is.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const ie=is.element(this.elements.display.duration);!ie&&this.config.displayDuration&&this.paused&&controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),ie&&controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&controls.setMarkers.call(this),controls.updateSeekTooltip.call(this)},toggleMenuButton(ie,ee){toggleHidden(this.elements.settings.buttons[ie],!ee)},updateSetting(ie,ee,te){const ne=this.elements.settings.panels[ie];let re=null,se=ee;if(ie==="captions")re=this.currentTrack;else{if(re=is.empty(te)?this[ie]:te,is.empty(re)&&(re=this.config[ie].default),!is.empty(this.options[ie])&&!this.options[ie].includes(re))return void this.debug.warn(`Unsupported value of '${re}' for ${ie}`);if(!this.config[ie].options.includes(re))return void this.debug.warn(`Disabled value of '${re}' for ${ie}`)}if(is.element(se)||(se=ne&&ne.querySelector('[role="menu"]')),!is.element(se))return;this.elements.settings.buttons[ie].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=controls.getLabel.call(this,ie,re);const ae=se&&se.querySelector(`[value="${re}"]`);is.element(ae)&&(ae.checked=!0)},getLabel(ie,ee){switch(ie){case"speed":return ee===1?i18n.get("normal",this.config):`${ee}&times;`;case"quality":if(is.number(ee)){const te=i18n.get(`qualityLabel.${ee}`,this.config);return te.length?te:`${ee}p`}return toTitleCase(ee);case"captions":return captions.getLabel.call(this);default:return null}},setQualityMenu(ie){if(!is.element(this.elements.settings.panels.quality))return;const ee="quality",te=this.elements.settings.panels.quality.querySelector('[role="menu"]');is.array(ie)&&(this.options.quality=dedupe(ie).filter(se=>this.config.quality.options.includes(se)));const ne=!is.empty(this.options.quality)&&this.options.quality.length>1;if(controls.toggleMenuButton.call(this,ee,ne),emptyElement(te),controls.checkMenu.call(this),!ne)return;const re=se=>{const ae=i18n.get(`qualityBadge.${se}`,this.config);return ae.length?controls.createBadge.call(this,ae):null};this.options.quality.sort((se,ae)=>{const oe=this.config.quality.options;return oe.indexOf(se)>oe.indexOf(ae)?1:-1}).forEach(se=>{controls.createMenuItem.call(this,{value:se,list:te,type:ee,title:controls.getLabel.call(this,"quality",se),badge:re(se)})}),controls.updateSetting.call(this,ee,te)},setCaptionsMenu(){if(!is.element(this.elements.settings.panels.captions))return;const ie="captions",ee=this.elements.settings.panels.captions.querySelector('[role="menu"]'),te=captions.getTracks.call(this),ne=!!te.length;if(controls.toggleMenuButton.call(this,ie,ne),emptyElement(ee),controls.checkMenu.call(this),!ne)return;const re=te.map((se,ae)=>({value:ae,checked:this.captions.toggled&&this.currentTrack===ae,title:captions.getLabel.call(this,se),badge:se.language&&controls.createBadge.call(this,se.language.toUpperCase()),list:ee,type:"language"}));re.unshift({value:-1,checked:!this.captions.toggled,title:i18n.get("disabled",this.config),list:ee,type:"language"}),re.forEach(controls.createMenuItem.bind(this)),controls.updateSetting.call(this,ie,ee)},setSpeedMenu(){if(!is.element(this.elements.settings.panels.speed))return;const ie="speed",ee=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(ne=>ne>=this.minimumSpeed&&ne<=this.maximumSpeed);const te=!is.empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,ie,te),emptyElement(ee),controls.checkMenu.call(this),te&&(this.options.speed.forEach(ne=>{controls.createMenuItem.call(this,{value:ne,list:ee,type:ie,title:controls.getLabel.call(this,"speed",ne)})}),controls.updateSetting.call(this,ie,ee))},checkMenu(){const{buttons:ie}=this.elements.settings,ee=!is.empty(ie)&&Object.values(ie).some(te=>!te.hidden);toggleHidden(this.elements.settings.menu,!ee)},focusFirstMenuItem(ie,ee=!1){if(this.elements.settings.popup.hidden)return;let te=ie;is.element(te)||(te=Object.values(this.elements.settings.panels).find(re=>!re.hidden));const ne=te.querySelector('[role^="menuitem"]');setFocus.call(this,ne,ee)},toggleMenu(ie){const{popup:ee}=this.elements.settings,te=this.elements.buttons.settings;if(!is.element(ee)||!is.element(te))return;const{hidden:ne}=ee;let re=ne;if(is.boolean(ie))re=ie;else if(is.keyboardEvent(ie)&&ie.key==="Escape")re=!1;else if(is.event(ie)){const se=is.function(ie.composedPath)?ie.composedPath()[0]:ie.target,ae=ee.contains(se);if(ae||!ae&&ie.target!==te&&re)return}te.setAttribute("aria-expanded",re),toggleHidden(ee,!re),toggleClass(this.elements.container,this.config.classNames.menu.open,re),re&&is.keyboardEvent(ie)?controls.focusFirstMenuItem.call(this,null,!0):re||ne||setFocus.call(this,te,is.keyboardEvent(ie))},getMenuSize(ie){const ee=ie.cloneNode(!0);ee.style.position="absolute",ee.style.opacity=0,ee.removeAttribute("hidden"),ie.parentNode.appendChild(ee);const te=ee.scrollWidth,ne=ee.scrollHeight;return removeElement(ee),{width:te,height:ne}},showMenuPanel(ie="",ee=!1){const te=this.elements.container.querySelector(`#plyr-settings-${this.id}-${ie}`);if(!is.element(te))return;const ne=te.parentNode,re=Array.from(ne.children).find(se=>!se.hidden);if(support.transitions&&!support.reducedMotion){ne.style.width=`${re.scrollWidth}px`,ne.style.height=`${re.scrollHeight}px`;const se=controls.getMenuSize.call(this,te),ae=oe=>{oe.target===ne&&["width","height"].includes(oe.propertyName)&&(ne.style.width="",ne.style.height="",off.call(this,ne,transitionEndEvent,ae))};on.call(this,ne,transitionEndEvent,ae),ne.style.width=`${se.width}px`,ne.style.height=`${se.height}px`}toggleHidden(re,!0),toggleHidden(te,!1),controls.focusFirstMenuItem.call(this,te,ee)},setDownloadUrl(){const ie=this.elements.buttons.download;is.element(ie)&&ie.setAttribute("href",this.download)},create(ie){const{bindMenuItemShortcuts:ee,createButton:te,createProgress:ne,createRange:re,createTime:se,setQualityMenu:ae,setSpeedMenu:oe,showMenuPanel:le}=controls;this.elements.controls=null,is.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(te.call(this,"play-large"));const ce=createElement("div",getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=ce;const he={class:"plyr__controls__item"};return dedupe(is.array(this.config.controls)?this.config.controls:[]).forEach(fe=>{if(fe==="restart"&&ce.appendChild(te.call(this,"restart",he)),fe==="rewind"&&ce.appendChild(te.call(this,"rewind",he)),fe==="play"&&ce.appendChild(te.call(this,"play",he)),fe==="fast-forward"&&ce.appendChild(te.call(this,"fast-forward",he)),fe==="progress"){const ue=createElement("div",{class:`${he.class} plyr__progress__container`}),de=createElement("div",getAttributesFromSelector(this.config.selectors.progress));if(de.appendChild(re.call(this,"seek",{id:`plyr-seek-${ie.id}`})),de.appendChild(ne.call(this,"buffer")),this.config.tooltips.seek){const ge=createElement("span",{class:this.config.classNames.tooltip},"00:00");de.appendChild(ge),this.elements.display.seekTooltip=ge}this.elements.progress=de,ue.appendChild(this.elements.progress),ce.appendChild(ue)}if(fe==="current-time"&&ce.appendChild(se.call(this,"currentTime",he)),fe==="duration"&&ce.appendChild(se.call(this,"duration",he)),fe==="mute"||fe==="volume"){let{volume:ue}=this.elements;if(is.element(ue)&&ce.contains(ue)||(ue=createElement("div",extend({},he,{class:`${he.class} plyr__volume`.trim()})),this.elements.volume=ue,ce.appendChild(ue)),fe==="mute"&&ue.appendChild(te.call(this,"mute")),fe==="volume"&&!browser.isIos&&!browser.isIPadOS){const de={max:1,step:.05,value:this.config.volume};ue.appendChild(re.call(this,"volume",extend(de,{id:`plyr-volume-${ie.id}`})))}}if(fe==="captions"&&ce.appendChild(te.call(this,"captions",he)),fe==="settings"&&!is.empty(this.config.settings)){const ue=createElement("div",extend({},he,{class:`${he.class} plyr__menu`.trim(),hidden:""}));ue.appendChild(te.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${ie.id}`,"aria-expanded":!1}));const de=createElement("div",{class:"plyr__menu__container",id:`plyr-settings-${ie.id}`,hidden:""}),ge=createElement("div"),me=createElement("div",{id:`plyr-settings-${ie.id}-home`}),ve=createElement("div",{role:"menu"});me.appendChild(ve),ge.appendChild(me),this.elements.settings.panels.home=me,this.config.settings.forEach(pe=>{const ye=createElement("button",extend(getAttributesFromSelector(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));ee.call(this,ye,pe),on.call(this,ye,"click",()=>{le.call(this,pe,!1)});const _e=createElement("span",null,i18n.get(pe,this.config)),xe=createElement("span",{class:this.config.classNames.menu.value});xe.innerHTML=ie[pe],_e.appendChild(xe),ye.appendChild(_e),ve.appendChild(ye);const Se=createElement("div",{id:`plyr-settings-${ie.id}-${pe}`,hidden:""}),be=createElement("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});be.appendChild(createElement("span",{"aria-hidden":!0},i18n.get(pe,this.config))),be.appendChild(createElement("span",{class:this.config.classNames.hidden},i18n.get("menuBack",this.config))),on.call(this,Se,"keydown",Ee=>{Ee.key==="ArrowLeft"&&(Ee.preventDefault(),Ee.stopPropagation(),le.call(this,"home",!0))},!1),on.call(this,be,"click",()=>{le.call(this,"home",!1)}),Se.appendChild(be),Se.appendChild(createElement("div",{role:"menu"})),ge.appendChild(Se),this.elements.settings.buttons[pe]=ye,this.elements.settings.panels[pe]=Se}),de.appendChild(ge),ue.appendChild(de),ce.appendChild(ue),this.elements.settings.popup=de,this.elements.settings.menu=ue}if(fe==="pip"&&support.pip&&ce.appendChild(te.call(this,"pip",he)),fe==="airplay"&&support.airplay&&ce.appendChild(te.call(this,"airplay",he)),fe==="download"){const ue=extend({},he,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(ue.download="");const{download:de}=this.config.urls;!is.url(de)&&this.isEmbed&&extend(ue,{icon:`logo-${this.provider}`,label:this.provider}),ce.appendChild(te.call(this,"download",ue))}fe==="fullscreen"&&ce.appendChild(te.call(this,"fullscreen",he))}),this.isHTML5&&ae.call(this,html5.getQualityOptions.call(this)),oe.call(this),ce},inject(){if(this.config.loadSprite){const re=controls.getIconUrl.call(this);re.cors&&loadSprite(re.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let ie=null;this.elements.controls=null;const ee={id:this.id,seektime:this.config.seekTime,title:this.config.title};let te=!0;is.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,ee)),this.config.controls||(this.config.controls=[]),is.element(this.config.controls)||is.string(this.config.controls)?ie=this.config.controls:(ie=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)}),te=!1);let ne;if(te&&is.string(this.config.controls)&&(ie=(re=>{let se=re;return Object.entries(ee).forEach(([ae,oe])=>{se=replaceAll(se,`{${ae}}`,oe)}),se})(ie)),is.string(this.config.selectors.controls.container)&&(ne=document.querySelector(this.config.selectors.controls.container)),is.element(ne)||(ne=this.elements.container),ne[is.element(ie)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",ie),is.element(this.elements.controls)||controls.findElements.call(this),!is.empty(this.elements.buttons)){const re=se=>{const ae=this.config.classNames.controlPressed;se.setAttribute("aria-pressed","false"),Object.defineProperty(se,"pressed",{configurable:!0,enumerable:!0,get:()=>hasClass(se,ae),set(oe=!1){toggleClass(se,ae,oe),se.setAttribute("aria-pressed",oe?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(se=>{is.array(se)||is.nodeList(se)?Array.from(se).filter(Boolean).forEach(re):re(se)})}if(browser.isEdge&&repaint(ne),this.config.tooltips.controls){const{classNames:re,selectors:se}=this.config,ae=`${se.controls.wrapper} ${se.labels} .${re.hidden}`,oe=getElements.call(this,ae);Array.from(oe).forEach(le=>{toggleClass(le,this.config.classNames.hidden,!1),toggleClass(le,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var ie,ee;if(!this.duration||this.elements.markers)return;const te=(ie=this.config.markers)===null||ie===void 0||(ee=ie.points)===null||ee===void 0?void 0:ee.filter(({time:le})=>le>0&&le<this.duration);if(te==null||!te.length)return;const ne=document.createDocumentFragment(),re=document.createDocumentFragment();let se=null;const ae=`${this.config.classNames.tooltip}--visible`,oe=le=>toggleClass(se,ae,le);te.forEach(le=>{const ce=createElement("span",{class:this.config.classNames.marker},""),he=le.time/this.duration*100+"%";se&&(ce.addEventListener("mouseenter",()=>{le.label||(se.style.left=he,se.innerHTML=le.label,oe(!0))}),ce.addEventListener("mouseleave",()=>{oe(!1)})),ce.addEventListener("click",()=>{this.currentTime=le.time}),ce.style.left=he,re.appendChild(ce)}),ne.appendChild(re),this.config.tooltips.seek||(se=createElement("span",{class:this.config.classNames.tooltip},""),ne.appendChild(se)),this.elements.markers={points:re,tip:se},this.elements.progress.appendChild(ne)}};function parseUrl(ie,ee=!0){let te=ie;if(ee){const ne=document.createElement("a");ne.href=te,te=ne.href}try{return new URL(te)}catch{return null}}function buildUrlParams(ie){const ee=new URLSearchParams;return is.object(ie)&&Object.entries(ie).forEach(([te,ne])=>{ee.set(te,ne)}),ee}const captions={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks)return void(is.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this));if(is.element(this.elements.captions)||(this.elements.captions=createElement("div",getAttributesFromSelector(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),insertAfter(this.elements.captions,this.elements.wrapper)),browser.isIE&&window.URL){const ne=this.media.querySelectorAll("track");Array.from(ne).forEach(re=>{const se=re.getAttribute("src"),ae=parseUrl(se);ae!==null&&ae.hostname!==window.location.href.hostname&&["http:","https:"].includes(ae.protocol)&&fetch$1(se,"blob").then(oe=>{re.setAttribute("src",window.URL.createObjectURL(oe))}).catch(()=>{removeElement(re)})})}const ie=dedupe((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(ne=>ne.split("-")[0]));let ee=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();ee==="auto"&&([ee]=ie);let te=this.storage.get("captions");if(is.boolean(te)||({active:te}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:te,language:ee,languages:ie}),this.isHTML5){const ne=this.config.captions.update?"addtrack removetrack":"removetrack";on.call(this,this.media.textTracks,ne,captions.update.bind(this))}setTimeout(captions.update.bind(this),0)},update(){const ie=captions.getTracks.call(this,!0),{active:ee,language:te,meta:ne,currentTrackNode:re}=this.captions,se=!!ie.find(ae=>ae.language===te);this.isHTML5&&this.isVideo&&ie.filter(ae=>!ne.get(ae)).forEach(ae=>{this.debug.log("Track added",ae),ne.set(ae,{default:ae.mode==="showing"}),ae.mode==="showing"&&(ae.mode="hidden"),on.call(this,ae,"cuechange",()=>captions.updateCues.call(this))}),(se&&this.language!==te||!ie.includes(re))&&(captions.setLanguage.call(this,te),captions.toggle.call(this,ee&&se)),this.elements&&toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is.empty(ie)),is.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this)},toggle(ie,ee=!0){if(!this.supported.ui)return;const{toggled:te}=this.captions,ne=this.config.classNames.captions.active,re=is.nullOrUndefined(ie)?!te:ie;if(re!==te){if(ee||(this.captions.active=re,this.storage.set({captions:re})),!this.language&&re&&!ee){const se=captions.getTracks.call(this),ae=captions.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=ae.language,void captions.set.call(this,se.indexOf(ae))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=re),toggleClass(this.elements.container,ne,re),this.captions.toggled=re,controls.updateSetting.call(this,"captions"),triggerEvent.call(this,this.media,re?"captionsenabled":"captionsdisabled")}setTimeout(()=>{re&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(ie,ee=!0){const te=captions.getTracks.call(this);if(ie!==-1)if(is.number(ie))if(ie in te){if(this.captions.currentTrack!==ie){this.captions.currentTrack=ie;const ne=te[ie],{language:re}=ne||{};this.captions.currentTrackNode=ne,controls.updateSetting.call(this,"captions"),ee||(this.captions.language=re,this.storage.set({language:re})),this.isVimeo&&this.embed.enableTextTrack(re),triggerEvent.call(this,this.media,"languagechange")}captions.toggle.call(this,!0,ee),this.isHTML5&&this.isVideo&&captions.updateCues.call(this)}else this.debug.warn("Track not found",ie);else this.debug.warn("Invalid caption argument",ie);else captions.toggle.call(this,!1,ee)},setLanguage(ie,ee=!0){if(!is.string(ie))return void this.debug.warn("Invalid language argument",ie);const te=ie.toLowerCase();this.captions.language=te;const ne=captions.getTracks.call(this),re=captions.findTrack.call(this,[te]);captions.set.call(this,ne.indexOf(re),ee)},getTracks(ie=!1){return Array.from((this.media||{}).textTracks||[]).filter(ee=>!this.isHTML5||ie||this.captions.meta.has(ee)).filter(ee=>["captions","subtitles"].includes(ee.kind))},findTrack(ie,ee=!1){const te=captions.getTracks.call(this),ne=ae=>Number((this.captions.meta.get(ae)||{}).default),re=Array.from(te).sort((ae,oe)=>ne(oe)-ne(ae));let se;return ie.every(ae=>(se=re.find(oe=>oe.language===ae),!se)),se||(ee?re[0]:void 0)},getCurrentTrack(){return captions.getTracks.call(this)[this.currentTrack]},getLabel(ie){let ee=ie;return!is.track(ee)&&support.textTracks&&this.captions.toggled&&(ee=captions.getCurrentTrack.call(this)),is.track(ee)?is.empty(ee.label)?is.empty(ee.language)?i18n.get("enabled",this.config):ie.language.toUpperCase():ee.label:i18n.get("disabled",this.config)},updateCues(ie){if(!this.supported.ui)return;if(!is.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!is.nullOrUndefined(ie)&&!Array.isArray(ie))return void this.debug.warn("updateCues: Invalid input",ie);let ee=ie;if(!ee){const ne=captions.getCurrentTrack.call(this);ee=Array.from((ne||{}).activeCues||[]).map(re=>re.getCueAsHTML()).map(getHTML)}const te=ee.map(ne=>ne.trim()).join(`
`);if(te!==this.elements.captions.innerHTML){emptyElement(this.elements.captions);const ne=createElement("span",getAttributesFromSelector(this.config.selectors.caption));ne.innerHTML=te,this.elements.captions.appendChild(ne),triggerEvent.call(this,this.media,"cuechange")}}},defaults={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},pip={active:"picture-in-picture",inactive:"inline"},providers={html5:"html5",youtube:"youtube",vimeo:"vimeo"},types={audio:"audio",video:"video"};function getProviderByUrl(ie){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(ie)?providers.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(ie)?providers.vimeo:null}const noop=()=>{};class Console{constructor(ee=!1){this.enabled=window.console&&ee,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):noop}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):noop}}class Fullscreen{constructor(ee){_defineProperty$1(this,"onChange",()=>{if(!this.supported)return;const te=this.player.elements.buttons.fullscreen;is.element(te)&&(te.pressed=this.active);const ne=this.target===this.player.media?this.target:this.player.elements.container;triggerEvent.call(this.player,ne,this.active?"enterfullscreen":"exitfullscreen",!0)}),_defineProperty$1(this,"toggleFallback",(te=!1)=>{if(te?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=te?"hidden":"",toggleClass(this.target,this.player.config.classNames.fullscreen.fallback,te),browser.isIos){let ne=document.head.querySelector('meta[name="viewport"]');const re="viewport-fit=cover";ne||(ne=document.createElement("meta"),ne.setAttribute("name","viewport"));const se=is.string(ne.content)&&ne.content.includes(re);te?(this.cleanupViewport=!se,se||(ne.content+=`,${re}`)):this.cleanupViewport&&(ne.content=ne.content.split(",").filter(ae=>ae.trim()!==re).join(","))}this.onChange()}),_defineProperty$1(this,"trapFocus",te=>{if(browser.isIos||browser.isIPadOS||!this.active||te.key!=="Tab")return;const ne=document.activeElement,re=getElements.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[se]=re,ae=re[re.length-1];ne!==ae||te.shiftKey?ne===se&&te.shiftKey&&(ae.focus(),te.preventDefault()):(se.focus(),te.preventDefault())}),_defineProperty$1(this,"update",()=>{if(this.supported){let te;te=this.forceFallback?"Fallback (forced)":Fullscreen.nativeSupported?"Native":"Fallback",this.player.debug.log(`${te} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");toggleClass(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),_defineProperty$1(this,"enter",()=>{this.supported&&(browser.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Fullscreen.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?is.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),_defineProperty$1(this,"exit",()=>{if(this.supported)if(browser.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),silencePromise(this.player.play());else if(!Fullscreen.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!is.empty(this.prefix)){const te=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${te}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),_defineProperty$1(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=ee,this.prefix=Fullscreen.prefix,this.property=Fullscreen.property,this.scrollPosition={x:0,y:0},this.forceFallback=ee.config.fullscreen.fallback==="force",this.player.elements.fullscreen=ee.config.fullscreen.container&&closest$1(this.player.elements.container,ee.config.fullscreen.container),on.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),on.call(this.player,this.player.elements.container,"dblclick",te=>{is.element(this.player.elements.controls)&&this.player.elements.controls.contains(te.target)||this.player.listeners.proxy(te,this.toggle,"fullscreen")}),on.call(this,this.player.elements.container,"keydown",te=>this.trapFocus(te)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Fullscreen.nativeSupported&&!this.forceFallback}static get prefix(){if(is.function(document.exitFullscreen))return"";let ee="";return["webkit","moz","ms"].some(te=>!(!is.function(document[`${te}ExitFullscreen`])&&!is.function(document[`${te}CancelFullScreen`]))&&(ee=te,!0)),ee}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Fullscreen.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Fullscreen.nativeSupported||!browser.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Fullscreen.nativeSupported||this.forceFallback)return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);const ee=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return ee&&ee.shadowRoot?ee===this.target.getRootNode().host:ee===this.target}get target(){return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function loadImage(ie,ee=1){return new Promise((te,ne)=>{const re=new Image,se=()=>{delete re.onload,delete re.onerror,(re.naturalWidth>=ee?te:ne)(re)};Object.assign(re,{onload:se,onerror:se,src:ie})})}const ui={addStyleHook(){toggleClass(this.elements.container,this.config.selectors.container.replace(".",""),!0),toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(ie=!1){ie&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void ui.toggleNativeControls.call(this,!0);is.element(this.elements.controls)||(controls.inject.call(this),this.listeners.controls()),ui.toggleNativeControls.call(this),this.isHTML5&&captions.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,controls.updateVolume.call(this),controls.timeUpdate.call(this),controls.durationUpdate.call(this),ui.checkPlaying.call(this),toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo),toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5),toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{triggerEvent.call(this,this.media,"ready")},0),ui.setTitle.call(this),this.poster&&ui.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&controls.durationUpdate.call(this),this.config.mediaMetadata&&controls.setMediaMetadata.call(this)},setTitle(){let ie=i18n.get("play",this.config);if(is.string(this.config.title)&&!is.empty(this.config.title)&&(ie+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(ee=>{ee.setAttribute("aria-label",ie)}),this.isEmbed){const ee=getElement.call(this,"iframe");if(!is.element(ee))return;const te=is.empty(this.config.title)?"video":this.config.title,ne=i18n.get("frameTitle",this.config);ee.setAttribute("title",ne.replace("{title}",te))}},togglePoster(ie){toggleClass(this.elements.container,this.config.classNames.posterEnabled,ie)},setPoster(ie,ee=!0){return ee&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",ie),this.elements.poster.removeAttribute("hidden"),ready.call(this).then(()=>loadImage(ie)).catch(te=>{throw ie===this.poster&&ui.togglePoster.call(this,!1),te}).then(()=>{if(ie!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${ie}')`,backgroundSize:""}),ui.togglePoster.call(this,!0),ie)))},checkPlaying(ie){toggleClass(this.elements.container,this.config.classNames.playing,this.playing),toggleClass(this.elements.container,this.config.classNames.paused,this.paused),toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(ee=>{Object.assign(ee,{pressed:this.playing}),ee.setAttribute("aria-label",i18n.get(this.playing?"pause":"play",this.config))}),is.event(ie)&&ie.type==="timeupdate"||ui.toggleControls.call(this)},checkLoading(ie){this.loading=["stalled","waiting"].includes(ie.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{toggleClass(this.elements.container,this.config.classNames.loading,this.loading),ui.toggleControls.call(this)},this.loading?250:0)},toggleControls(ie){const{controls:ee}=this.elements;if(ee&&this.config.hideControls){const te=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(ie||this.loading||this.paused||ee.pressed||ee.hover||te))}},migrateStyles(){Object.values({...this.media.style}).filter(ie=>!is.empty(ie)&&is.string(ie)&&ie.startsWith("--plyr")).forEach(ie=>{this.elements.container.style.setProperty(ie,this.media.style.getPropertyValue(ie)),this.media.style.removeProperty(ie)}),is.empty(this.media.style)&&this.media.removeAttribute("style")}};class Listeners{constructor(ee){_defineProperty$1(this,"firstTouch",()=>{const{player:te}=this,{elements:ne}=te;te.touch=!0,toggleClass(ne.container,te.config.classNames.isTouch,!0)}),_defineProperty$1(this,"global",(te=!0)=>{const{player:ne}=this;ne.config.keyboard.global&&toggleListener.call(ne,window,"keydown keyup",this.handleKey,te,!1),toggleListener.call(ne,document.body,"click",this.toggleMenu,te),once.call(ne,document.body,"touchstart",this.firstTouch)}),_defineProperty$1(this,"container",()=>{const{player:te}=this,{config:ne,elements:re,timers:se}=te;!ne.keyboard.global&&ne.keyboard.focused&&on.call(te,re.container,"keydown keyup",this.handleKey,!1),on.call(te,re.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",le=>{const{controls:ce}=re;ce&&le.type==="enterfullscreen"&&(ce.pressed=!1,ce.hover=!1);let he=0;["touchstart","touchmove","mousemove"].includes(le.type)&&(ui.toggleControls.call(te,!0),he=te.touch?3e3:2e3),clearTimeout(se.controls),se.controls=setTimeout(()=>ui.toggleControls.call(te,!1),he)});const ae=()=>{if(!te.isVimeo||te.config.vimeo.premium)return;const le=re.wrapper,{active:ce}=te.fullscreen,[he,fe]=getAspectRatio.call(te),ue=supportsCSS(`aspect-ratio: ${he} / ${fe}`);if(!ce)return void(ue?(le.style.width=null,le.style.height=null):(le.style.maxWidth=null,le.style.margin=null));const[de,ge]=getViewportSize(),me=de/ge>he/fe;ue?(le.style.width=me?"auto":"100%",le.style.height=me?"100%":"auto"):(le.style.maxWidth=me?ge/fe*he+"px":null,le.style.margin=me?"0 auto":null)},oe=()=>{clearTimeout(se.resized),se.resized=setTimeout(ae,50)};on.call(te,re.container,"enterfullscreen exitfullscreen",le=>{const{target:ce}=te.fullscreen;ce===re.container&&(!te.isEmbed&&is.empty(te.config.ratio)||(ae(),(le.type==="enterfullscreen"?on:off).call(te,window,"resize",oe)))})}),_defineProperty$1(this,"media",()=>{const{player:te}=this,{elements:ne}=te;if(on.call(te,te.media,"timeupdate seeking seeked",se=>controls.timeUpdate.call(te,se)),on.call(te,te.media,"durationchange loadeddata loadedmetadata",se=>controls.durationUpdate.call(te,se)),on.call(te,te.media,"ended",()=>{te.isHTML5&&te.isVideo&&te.config.resetOnEnd&&(te.restart(),te.pause())}),on.call(te,te.media,"progress playing seeking seeked",se=>controls.updateProgress.call(te,se)),on.call(te,te.media,"volumechange",se=>controls.updateVolume.call(te,se)),on.call(te,te.media,"playing play pause ended emptied timeupdate",se=>ui.checkPlaying.call(te,se)),on.call(te,te.media,"waiting canplay seeked playing",se=>ui.checkLoading.call(te,se)),te.supported.ui&&te.config.clickToPlay&&!te.isAudio){const se=getElement.call(te,`.${te.config.classNames.video}`);if(!is.element(se))return;on.call(te,ne.container,"click",ae=>{([ne.container,se].includes(ae.target)||se.contains(ae.target))&&(te.touch&&te.config.hideControls||(te.ended?(this.proxy(ae,te.restart,"restart"),this.proxy(ae,()=>{silencePromise(te.play())},"play")):this.proxy(ae,()=>{silencePromise(te.togglePlay())},"play")))})}te.supported.ui&&te.config.disableContextMenu&&on.call(te,ne.wrapper,"contextmenu",se=>{se.preventDefault()},!1),on.call(te,te.media,"volumechange",()=>{te.storage.set({volume:te.volume,muted:te.muted})}),on.call(te,te.media,"ratechange",()=>{controls.updateSetting.call(te,"speed"),te.storage.set({speed:te.speed})}),on.call(te,te.media,"qualitychange",se=>{controls.updateSetting.call(te,"quality",null,se.detail.quality)}),on.call(te,te.media,"ready qualitychange",()=>{controls.setDownloadUrl.call(te)});const re=te.config.events.concat(["keyup","keydown"]).join(" ");on.call(te,te.media,re,se=>{let{detail:ae={}}=se;se.type==="error"&&(ae=te.media.error),triggerEvent.call(te,ne.container,se.type,!0,ae)})}),_defineProperty$1(this,"proxy",(te,ne,re)=>{const{player:se}=this,ae=se.config.listeners[re];let oe=!0;is.function(ae)&&(oe=ae.call(se,te)),oe!==!1&&is.function(ne)&&ne.call(se,te)}),_defineProperty$1(this,"bind",(te,ne,re,se,ae=!0)=>{const{player:oe}=this,le=oe.config.listeners[se],ce=is.function(le);on.call(oe,te,ne,he=>this.proxy(he,re,se),ae&&!ce)}),_defineProperty$1(this,"controls",()=>{const{player:te}=this,{elements:ne}=te,re=browser.isIE?"change":"input";if(ne.buttons.play&&Array.from(ne.buttons.play).forEach(se=>{this.bind(se,"click",()=>{silencePromise(te.togglePlay())},"play")}),this.bind(ne.buttons.restart,"click",te.restart,"restart"),this.bind(ne.buttons.rewind,"click",()=>{te.lastSeekTime=Date.now(),te.rewind()},"rewind"),this.bind(ne.buttons.fastForward,"click",()=>{te.lastSeekTime=Date.now(),te.forward()},"fastForward"),this.bind(ne.buttons.mute,"click",()=>{te.muted=!te.muted},"mute"),this.bind(ne.buttons.captions,"click",()=>te.toggleCaptions()),this.bind(ne.buttons.download,"click",()=>{triggerEvent.call(te,te.media,"download")},"download"),this.bind(ne.buttons.fullscreen,"click",()=>{te.fullscreen.toggle()},"fullscreen"),this.bind(ne.buttons.pip,"click",()=>{te.pip="toggle"},"pip"),this.bind(ne.buttons.airplay,"click",te.airplay,"airplay"),this.bind(ne.buttons.settings,"click",se=>{se.stopPropagation(),se.preventDefault(),controls.toggleMenu.call(te,se)},null,!1),this.bind(ne.buttons.settings,"keyup",se=>{[" ","Enter"].includes(se.key)&&(se.key!=="Enter"?(se.preventDefault(),se.stopPropagation(),controls.toggleMenu.call(te,se)):controls.focusFirstMenuItem.call(te,null,!0))},null,!1),this.bind(ne.settings.menu,"keydown",se=>{se.key==="Escape"&&controls.toggleMenu.call(te,se)}),this.bind(ne.inputs.seek,"mousedown mousemove",se=>{const ae=ne.progress.getBoundingClientRect(),oe=100/ae.width*(se.pageX-ae.left);se.currentTarget.setAttribute("seek-value",oe)}),this.bind(ne.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",se=>{const ae=se.currentTarget,oe="play-on-seeked";if(is.keyboardEvent(se)&&!["ArrowLeft","ArrowRight"].includes(se.key))return;te.lastSeekTime=Date.now();const le=ae.hasAttribute(oe),ce=["mouseup","touchend","keyup"].includes(se.type);le&&ce?(ae.removeAttribute(oe),silencePromise(te.play())):!ce&&te.playing&&(ae.setAttribute(oe,""),te.pause())}),browser.isIos){const se=getElements.call(te,'input[type="range"]');Array.from(se).forEach(ae=>this.bind(ae,re,oe=>repaint(oe.target)))}this.bind(ne.inputs.seek,re,se=>{const ae=se.currentTarget;let oe=ae.getAttribute("seek-value");is.empty(oe)&&(oe=ae.value),ae.removeAttribute("seek-value"),te.currentTime=oe/ae.max*te.duration},"seek"),this.bind(ne.progress,"mouseenter mouseleave mousemove",se=>controls.updateSeekTooltip.call(te,se)),this.bind(ne.progress,"mousemove touchmove",se=>{const{previewThumbnails:ae}=te;ae&&ae.loaded&&ae.startMove(se)}),this.bind(ne.progress,"mouseleave touchend click",()=>{const{previewThumbnails:se}=te;se&&se.loaded&&se.endMove(!1,!0)}),this.bind(ne.progress,"mousedown touchstart",se=>{const{previewThumbnails:ae}=te;ae&&ae.loaded&&ae.startScrubbing(se)}),this.bind(ne.progress,"mouseup touchend",se=>{const{previewThumbnails:ae}=te;ae&&ae.loaded&&ae.endScrubbing(se)}),browser.isWebKit&&Array.from(getElements.call(te,'input[type="range"]')).forEach(se=>{this.bind(se,"input",ae=>controls.updateRangeFill.call(te,ae.target))}),te.config.toggleInvert&&!is.element(ne.display.duration)&&this.bind(ne.display.currentTime,"click",()=>{te.currentTime!==0&&(te.config.invertTime=!te.config.invertTime,controls.timeUpdate.call(te))}),this.bind(ne.inputs.volume,re,se=>{te.volume=se.target.value},"volume"),this.bind(ne.controls,"mouseenter mouseleave",se=>{ne.controls.hover=!te.touch&&se.type==="mouseenter"}),ne.fullscreen&&Array.from(ne.fullscreen.children).filter(se=>!se.contains(ne.container)).forEach(se=>{this.bind(se,"mouseenter mouseleave",ae=>{ne.controls&&(ne.controls.hover=!te.touch&&ae.type==="mouseenter")})}),this.bind(ne.controls,"mousedown mouseup touchstart touchend touchcancel",se=>{ne.controls.pressed=["mousedown","touchstart"].includes(se.type)}),this.bind(ne.controls,"focusin",()=>{const{config:se,timers:ae}=te;toggleClass(ne.controls,se.classNames.noTransition,!0),ui.toggleControls.call(te,!0),setTimeout(()=>{toggleClass(ne.controls,se.classNames.noTransition,!1)},0);const oe=this.touch?3e3:4e3;clearTimeout(ae.controls),ae.controls=setTimeout(()=>ui.toggleControls.call(te,!1),oe)}),this.bind(ne.inputs.volume,"wheel",se=>{const ae=se.webkitDirectionInvertedFromDevice,[oe,le]=[se.deltaX,-se.deltaY].map(fe=>ae?-fe:fe),ce=Math.sign(Math.abs(oe)>Math.abs(le)?oe:le);te.increaseVolume(ce/50);const{volume:he}=te.media;(ce===1&&he<1||ce===-1&&he>0)&&se.preventDefault()},"volume",!1)}),this.player=ee,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(ee){const{player:te}=this,{elements:ne}=te,{key:re,type:se,altKey:ae,ctrlKey:oe,metaKey:le,shiftKey:ce}=ee,he=se==="keydown",fe=he&&re===this.lastKey;if(!(ae||oe||le||ce)&&re){if(he){const de=document.activeElement;if(is.element(de)){const{editable:ge}=te.config.selectors,{seek:me}=ne.inputs;if(de!==me&&matches(de,ge)||ee.key===" "&&matches(de,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(re)&&(ee.preventDefault(),ee.stopPropagation()),re){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":fe||(ue=parseInt(re,10),te.currentTime=te.duration/10*ue);break;case" ":case"k":fe||silencePromise(te.togglePlay());break;case"ArrowUp":te.increaseVolume(.1);break;case"ArrowDown":te.decreaseVolume(.1);break;case"m":fe||(te.muted=!te.muted);break;case"ArrowRight":te.forward();break;case"ArrowLeft":te.rewind();break;case"f":te.fullscreen.toggle();break;case"c":fe||te.toggleCaptions();break;case"l":te.loop=!te.loop}re==="Escape"&&!te.fullscreen.usingNative&&te.fullscreen.active&&te.fullscreen.toggle(),this.lastKey=re}else this.lastKey=null;var ue}}toggleMenu(ee){controls.toggleMenu.call(this.player,ee)}}function createCommonjsModule(ie,ee){return ie(ee={exports:{}},ee.exports),ee.exports}var loadjs_umd=createCommonjsModule(function(ie,ee){ie.exports=function(){var te=function(){},ne={},re={},se={};function ae(ue,de){ue=ue.push?ue:[ue];var ge,me,ve,pe=[],ye=ue.length,_e=ye;for(ge=function(xe,Se){Se.length&&pe.push(xe),--_e||de(pe)};ye--;)me=ue[ye],(ve=re[me])?ge(me,ve):(se[me]=se[me]||[]).push(ge)}function oe(ue,de){if(ue){var ge=se[ue];if(re[ue]=de,ge)for(;ge.length;)ge[0](ue,de),ge.splice(0,1)}}function le(ue,de){ue.call&&(ue={success:ue}),de.length?(ue.error||te)(de):(ue.success||te)(ue)}function ce(ue,de,ge,me){var ve,pe,ye=document,_e=ge.async,xe=(ge.numRetries||0)+1,Se=ge.before||te,be=ue.replace(/[\?|#].*$/,""),Ee=ue.replace(/^(css|img)!/,"");me=me||0,/(^css!|\.css$)/.test(be)?((pe=ye.createElement("link")).rel="stylesheet",pe.href=Ee,(ve="hideFocus"in pe)&&pe.relList&&(ve=0,pe.rel="preload",pe.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(be)?(pe=ye.createElement("img")).src=Ee:((pe=ye.createElement("script")).src=ue,pe.async=_e===void 0||_e),pe.onload=pe.onerror=pe.onbeforeload=function(Pe){var we=Pe.type[0];if(ve)try{pe.sheet.cssText.length||(we="e")}catch(Me){Me.code!=18&&(we="e")}if(we=="e"){if((me+=1)<xe)return ce(ue,de,ge,me)}else if(pe.rel=="preload"&&pe.as=="style")return pe.rel="stylesheet";de(ue,we,Pe.defaultPrevented)},Se(ue,pe)!==!1&&ye.head.appendChild(pe)}function he(ue,de,ge){var me,ve,pe=(ue=ue.push?ue:[ue]).length,ye=pe,_e=[];for(me=function(xe,Se,be){if(Se=="e"&&_e.push(xe),Se=="b"){if(!be)return;_e.push(xe)}--pe||de(_e)},ve=0;ve<ye;ve++)ce(ue[ve],me,ge)}function fe(ue,de,ge){var me,ve;if(de&&de.trim&&(me=de),ve=(me?ge:de)||{},me){if(me in ne)throw"LoadJS";ne[me]=!0}function pe(ye,_e){he(ue,function(xe){le(ve,xe),ye&&le({success:ye,error:_e},xe),oe(me,xe)},ve)}if(ve.returnPromise)return new Promise(pe);pe()}return fe.ready=function(ue,de){return ae(ue,function(ge){le(de,ge)}),fe},fe.done=function(ue){oe(ue,[])},fe.reset=function(){ne={},re={},se={}},fe.isDefined=function(ue){return ue in ne},fe}()});function loadScript(ie){return new Promise((ee,te)=>{loadjs_umd(ie,{success:ee,error:te})})}function parseId$1(ie){return is.empty(ie)?null:is.number(Number(ie))?ie:ie.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:ie}function parseHash(ie){const ee=ie.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return ee&&ee.length===5?ee[4]:null}function assurePlaybackState$1(ie){ie&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===ie&&(this.media.paused=!ie,triggerEvent.call(this,this.media,ie?"play":"pause"))}const vimeo={setup(){const ie=this;toggleClass(ie.elements.wrapper,ie.config.classNames.embed,!0),ie.options.speed=ie.config.speed.options,setAspectRatio.call(ie),is.object(window.Vimeo)?vimeo.ready.call(ie):loadScript(ie.config.urls.vimeo.sdk).then(()=>{vimeo.ready.call(ie)}).catch(ee=>{ie.debug.warn("Vimeo SDK (player.js) failed to load",ee)})},ready(){const ie=this,ee=ie.config.vimeo,{premium:te,referrerPolicy:ne,...re}=ee;let se=ie.media.getAttribute("src"),ae="";is.empty(se)?(se=ie.media.getAttribute(ie.config.attributes.embed.id),ae=ie.media.getAttribute(ie.config.attributes.embed.hash)):ae=parseHash(se);const oe=ae?{h:ae}:{};te&&Object.assign(re,{controls:!1,sidedock:!1});const le=buildUrlParams({loop:ie.config.loop.active,autoplay:ie.autoplay,muted:ie.muted,gesture:"media",playsinline:ie.config.playsinline,...oe,...re}),ce=parseId$1(se),he=createElement("iframe"),fe=format(ie.config.urls.vimeo.iframe,ce,le);if(he.setAttribute("src",fe),he.setAttribute("allowfullscreen",""),he.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),is.empty(ne)||he.setAttribute("referrerPolicy",ne),te||!ee.customControls)he.setAttribute("data-poster",ie.poster),ie.media=replaceElement(he,ie.media);else{const ye=createElement("div",{class:ie.config.classNames.embedContainer,"data-poster":ie.poster});ye.appendChild(he),ie.media=replaceElement(ye,ie.media)}ee.customControls||fetch$1(format(ie.config.urls.vimeo.api,fe)).then(ye=>{!is.empty(ye)&&ye.thumbnail_url&&ui.setPoster.call(ie,ye.thumbnail_url).catch(()=>{})}),ie.embed=new window.Vimeo.Player(he,{autopause:ie.config.autopause,muted:ie.muted}),ie.media.paused=!0,ie.media.currentTime=0,ie.supported.ui&&ie.embed.disableTextTrack(),ie.media.play=()=>(assurePlaybackState$1.call(ie,!0),ie.embed.play()),ie.media.pause=()=>(assurePlaybackState$1.call(ie,!1),ie.embed.pause()),ie.media.stop=()=>{ie.pause(),ie.currentTime=0};let{currentTime:ue}=ie.media;Object.defineProperty(ie.media,"currentTime",{get:()=>ue,set(ye){const{embed:_e,media:xe,paused:Se,volume:be}=ie,Ee=Se&&!_e.hasPlayed;xe.seeking=!0,triggerEvent.call(ie,xe,"seeking"),Promise.resolve(Ee&&_e.setVolume(0)).then(()=>_e.setCurrentTime(ye)).then(()=>Ee&&_e.pause()).then(()=>Ee&&_e.setVolume(be)).catch(()=>{})}});let de=ie.config.speed.selected;Object.defineProperty(ie.media,"playbackRate",{get:()=>de,set(ye){ie.embed.setPlaybackRate(ye).then(()=>{de=ye,triggerEvent.call(ie,ie.media,"ratechange")}).catch(()=>{ie.options.speed=[1]})}});let{volume:ge}=ie.config;Object.defineProperty(ie.media,"volume",{get:()=>ge,set(ye){ie.embed.setVolume(ye).then(()=>{ge=ye,triggerEvent.call(ie,ie.media,"volumechange")})}});let{muted:me}=ie.config;Object.defineProperty(ie.media,"muted",{get:()=>me,set(ye){const _e=!!is.boolean(ye)&&ye;ie.embed.setMuted(!!_e||ie.config.muted).then(()=>{me=_e,triggerEvent.call(ie,ie.media,"volumechange")})}});let ve,{loop:pe}=ie.config;Object.defineProperty(ie.media,"loop",{get:()=>pe,set(ye){const _e=is.boolean(ye)?ye:ie.config.loop.active;ie.embed.setLoop(_e).then(()=>{pe=_e})}}),ie.embed.getVideoUrl().then(ye=>{ve=ye,controls.setDownloadUrl.call(ie)}).catch(ye=>{this.debug.warn(ye)}),Object.defineProperty(ie.media,"currentSrc",{get:()=>ve}),Object.defineProperty(ie.media,"ended",{get:()=>ie.currentTime===ie.duration}),Promise.all([ie.embed.getVideoWidth(),ie.embed.getVideoHeight()]).then(ye=>{const[_e,xe]=ye;ie.embed.ratio=roundAspectRatio(_e,xe),setAspectRatio.call(this)}),ie.embed.setAutopause(ie.config.autopause).then(ye=>{ie.config.autopause=ye}),ie.embed.getVideoTitle().then(ye=>{ie.config.title=ye,ui.setTitle.call(this)}),ie.embed.getCurrentTime().then(ye=>{ue=ye,triggerEvent.call(ie,ie.media,"timeupdate")}),ie.embed.getDuration().then(ye=>{ie.media.duration=ye,triggerEvent.call(ie,ie.media,"durationchange")}),ie.embed.getTextTracks().then(ye=>{ie.media.textTracks=ye,captions.setup.call(ie)}),ie.embed.on("cuechange",({cues:ye=[]})=>{const _e=ye.map(xe=>stripHTML(xe.text));captions.updateCues.call(ie,_e)}),ie.embed.on("loaded",()=>{ie.embed.getPaused().then(ye=>{assurePlaybackState$1.call(ie,!ye),ye||triggerEvent.call(ie,ie.media,"playing")}),is.element(ie.embed.element)&&ie.supported.ui&&ie.embed.element.setAttribute("tabindex",-1)}),ie.embed.on("bufferstart",()=>{triggerEvent.call(ie,ie.media,"waiting")}),ie.embed.on("bufferend",()=>{triggerEvent.call(ie,ie.media,"playing")}),ie.embed.on("play",()=>{assurePlaybackState$1.call(ie,!0),triggerEvent.call(ie,ie.media,"playing")}),ie.embed.on("pause",()=>{assurePlaybackState$1.call(ie,!1)}),ie.embed.on("timeupdate",ye=>{ie.media.seeking=!1,ue=ye.seconds,triggerEvent.call(ie,ie.media,"timeupdate")}),ie.embed.on("progress",ye=>{ie.media.buffered=ye.percent,triggerEvent.call(ie,ie.media,"progress"),parseInt(ye.percent,10)===1&&triggerEvent.call(ie,ie.media,"canplaythrough"),ie.embed.getDuration().then(_e=>{_e!==ie.media.duration&&(ie.media.duration=_e,triggerEvent.call(ie,ie.media,"durationchange"))})}),ie.embed.on("seeked",()=>{ie.media.seeking=!1,triggerEvent.call(ie,ie.media,"seeked")}),ie.embed.on("ended",()=>{ie.media.paused=!0,triggerEvent.call(ie,ie.media,"ended")}),ie.embed.on("error",ye=>{ie.media.error=ye,triggerEvent.call(ie,ie.media,"error")}),ee.customControls&&setTimeout(()=>ui.build.call(ie),0)}};function parseId(ie){return is.empty(ie)?null:ie.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:ie}function assurePlaybackState(ie){ie&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===ie&&(this.media.paused=!ie,triggerEvent.call(this,this.media,ie?"play":"pause"))}function getHost(ie){return ie.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const youtube={setup(){if(toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),is.object(window.YT)&&is.function(window.YT.Player))youtube.ready.call(this);else{const ie=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{is.function(ie)&&ie(),youtube.ready.call(this)},loadScript(this.config.urls.youtube.sdk).catch(ee=>{this.debug.warn("YouTube API failed to load",ee)})}},getTitle(ie){fetch$1(format(this.config.urls.youtube.api,ie)).then(ee=>{if(is.object(ee)){const{title:te,height:ne,width:re}=ee;this.config.title=te,ui.setTitle.call(this),this.embed.ratio=roundAspectRatio(re,ne)}setAspectRatio.call(this)}).catch(()=>{setAspectRatio.call(this)})},ready(){const ie=this,ee=ie.config.youtube,te=ie.media&&ie.media.getAttribute("id");if(!is.empty(te)&&te.startsWith("youtube-"))return;let ne=ie.media.getAttribute("src");is.empty(ne)&&(ne=ie.media.getAttribute(this.config.attributes.embed.id));const re=parseId(ne),se=createElement("div",{id:generateId(ie.provider),"data-poster":ee.customControls?ie.poster:void 0});if(ie.media=replaceElement(se,ie.media),ee.customControls){const ae=oe=>`https://i.ytimg.com/vi/${re}/${oe}default.jpg`;loadImage(ae("maxres"),121).catch(()=>loadImage(ae("sd"),121)).catch(()=>loadImage(ae("hq"))).then(oe=>ui.setPoster.call(ie,oe.src)).then(oe=>{oe.includes("maxres")||(ie.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}ie.embed=new window.YT.Player(ie.media,{videoId:re,host:getHost(ee),playerVars:extend({},{autoplay:ie.config.autoplay?1:0,hl:ie.config.hl,controls:ie.supported.ui&&ee.customControls?0:1,disablekb:1,playsinline:ie.config.playsinline&&!ie.config.fullscreen.iosNative?1:0,cc_load_policy:ie.captions.active?1:0,cc_lang_pref:ie.config.captions.language,widget_referrer:window?window.location.href:null},ee),events:{onError(ae){if(!ie.media.error){const oe=ae.data,le={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[oe]||"An unknown error occurred";ie.media.error={code:oe,message:le},triggerEvent.call(ie,ie.media,"error")}},onPlaybackRateChange(ae){const oe=ae.target;ie.media.playbackRate=oe.getPlaybackRate(),triggerEvent.call(ie,ie.media,"ratechange")},onReady(ae){if(is.function(ie.media.play))return;const oe=ae.target;youtube.getTitle.call(ie,re),ie.media.play=()=>{assurePlaybackState.call(ie,!0),oe.playVideo()},ie.media.pause=()=>{assurePlaybackState.call(ie,!1),oe.pauseVideo()},ie.media.stop=()=>{oe.stopVideo()},ie.media.duration=oe.getDuration(),ie.media.paused=!0,ie.media.currentTime=0,Object.defineProperty(ie.media,"currentTime",{get:()=>Number(oe.getCurrentTime()),set(fe){ie.paused&&!ie.embed.hasPlayed&&ie.embed.mute(),ie.media.seeking=!0,triggerEvent.call(ie,ie.media,"seeking"),oe.seekTo(fe)}}),Object.defineProperty(ie.media,"playbackRate",{get:()=>oe.getPlaybackRate(),set(fe){oe.setPlaybackRate(fe)}});let{volume:le}=ie.config;Object.defineProperty(ie.media,"volume",{get:()=>le,set(fe){le=fe,oe.setVolume(100*le),triggerEvent.call(ie,ie.media,"volumechange")}});let{muted:ce}=ie.config;Object.defineProperty(ie.media,"muted",{get:()=>ce,set(fe){const ue=is.boolean(fe)?fe:ce;ce=ue,oe[ue?"mute":"unMute"](),oe.setVolume(100*le),triggerEvent.call(ie,ie.media,"volumechange")}}),Object.defineProperty(ie.media,"currentSrc",{get:()=>oe.getVideoUrl()}),Object.defineProperty(ie.media,"ended",{get:()=>ie.currentTime===ie.duration});const he=oe.getAvailablePlaybackRates();ie.options.speed=he.filter(fe=>ie.config.speed.options.includes(fe)),ie.supported.ui&&ee.customControls&&ie.media.setAttribute("tabindex",-1),triggerEvent.call(ie,ie.media,"timeupdate"),triggerEvent.call(ie,ie.media,"durationchange"),clearInterval(ie.timers.buffering),ie.timers.buffering=setInterval(()=>{ie.media.buffered=oe.getVideoLoadedFraction(),(ie.media.lastBuffered===null||ie.media.lastBuffered<ie.media.buffered)&&triggerEvent.call(ie,ie.media,"progress"),ie.media.lastBuffered=ie.media.buffered,ie.media.buffered===1&&(clearInterval(ie.timers.buffering),triggerEvent.call(ie,ie.media,"canplaythrough"))},200),ee.customControls&&setTimeout(()=>ui.build.call(ie),50)},onStateChange(ae){const oe=ae.target;switch(clearInterval(ie.timers.playing),ie.media.seeking&&[1,2].includes(ae.data)&&(ie.media.seeking=!1,triggerEvent.call(ie,ie.media,"seeked")),ae.data){case-1:triggerEvent.call(ie,ie.media,"timeupdate"),ie.media.buffered=oe.getVideoLoadedFraction(),triggerEvent.call(ie,ie.media,"progress");break;case 0:assurePlaybackState.call(ie,!1),ie.media.loop?(oe.stopVideo(),oe.playVideo()):triggerEvent.call(ie,ie.media,"ended");break;case 1:ee.customControls&&!ie.config.autoplay&&ie.media.paused&&!ie.embed.hasPlayed?ie.media.pause():(assurePlaybackState.call(ie,!0),triggerEvent.call(ie,ie.media,"playing"),ie.timers.playing=setInterval(()=>{triggerEvent.call(ie,ie.media,"timeupdate")},50),ie.media.duration!==oe.getDuration()&&(ie.media.duration=oe.getDuration(),triggerEvent.call(ie,ie.media,"durationchange")));break;case 2:ie.muted||ie.embed.unMute(),assurePlaybackState.call(ie,!1);break;case 3:triggerEvent.call(ie,ie.media,"waiting")}triggerEvent.call(ie,ie.elements.container,"statechange",!1,{code:ae.data})}}})}},media={setup(){this.media?(toggleClass(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),toggleClass(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&toggleClass(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=createElement("div",{class:this.config.classNames.video}),wrap(this.media,this.elements.wrapper),this.elements.poster=createElement("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?html5.setup.call(this):this.isYouTube?youtube.setup.call(this):this.isVimeo&&vimeo.setup.call(this)):this.debug.warn("No media element found!")}};class Ads{constructor(ee){_defineProperty$1(this,"load",()=>{this.enabled&&(is.object(window.google)&&is.object(window.google.ima)?this.ready():loadScript(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),_defineProperty$1(this,"ready",()=>{var te;this.enabled||((te=this).manager&&te.manager.destroy(),te.elements.displayContainer&&te.elements.displayContainer.destroy(),te.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),_defineProperty$1(this,"setupIMA",()=>{this.elements.container=createElement("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,te=>this.onAdsManagerLoaded(te),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,te=>this.onAdError(te),!1),this.requestAds()}),_defineProperty$1(this,"requestAds",()=>{const{container:te}=this.player.elements;try{const ne=new google.ima.AdsRequest;ne.adTagUrl=this.tagUrl,ne.linearAdSlotWidth=te.offsetWidth,ne.linearAdSlotHeight=te.offsetHeight,ne.nonLinearAdSlotWidth=te.offsetWidth,ne.nonLinearAdSlotHeight=te.offsetHeight,ne.forceNonLinearFullSlot=!1,ne.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(ne)}catch(ne){this.onAdError(ne)}}),_defineProperty$1(this,"pollCountdown",(te=!1)=>{if(!te)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const ne=formatTime(Math.max(this.manager.getRemainingTime(),0)),re=`${i18n.get("advertisement",this.player.config)} - ${ne}`;this.elements.container.setAttribute("data-badge-text",re)},100)}),_defineProperty$1(this,"onAdsManagerLoaded",te=>{if(!this.enabled)return;const ne=new google.ima.AdsRenderingSettings;ne.restoreCustomPlaybackStateOnAdBreakComplete=!0,ne.enablePreloading=!0,this.manager=te.getAdsManager(this.player,ne),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,re=>this.onAdError(re)),Object.keys(google.ima.AdEvent.Type).forEach(re=>{this.manager.addEventListener(google.ima.AdEvent.Type[re],se=>this.onAdEvent(se))}),this.trigger("loaded")}),_defineProperty$1(this,"addCuePoints",()=>{is.empty(this.cuePoints)||this.cuePoints.forEach(te=>{if(te!==0&&te!==-1&&te<this.player.duration){const ne=this.player.elements.progress;if(is.element(ne)){const re=100/this.player.duration*te,se=createElement("span",{class:this.player.config.classNames.cues});se.style.left=`${re.toString()}%`,ne.appendChild(se)}}})}),_defineProperty$1(this,"onAdEvent",te=>{const{container:ne}=this.player.elements,re=te.getAd(),se=te.getAdData();switch((ae=>{triggerEvent.call(this.player,this.player.media,`ads${ae.replace(/_/g,"").toLowerCase()}`)})(te.type),te.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),re.isLinear()||(re.width=ne.offsetWidth,re.height=ne.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:se.adError&&this.player.debug.warn(`Non-fatal ad error: ${se.adError.getMessage()}`)}}),_defineProperty$1(this,"onAdError",te=>{this.cancel(),this.player.debug.warn("Ads error",te)}),_defineProperty$1(this,"listeners",()=>{const{container:te}=this.player.elements;let ne;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{ne=this.player.currentTime}),this.player.on("seeked",()=>{const re=this.player.currentTime;is.empty(this.cuePoints)||this.cuePoints.forEach((se,ae)=>{ne<se&&se<re&&(this.manager.discardAdBreak(),this.cuePoints.splice(ae,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(te.offsetWidth,te.offsetHeight,google.ima.ViewMode.NORMAL)})}),_defineProperty$1(this,"play",()=>{const{container:te}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(te.offsetWidth,te.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(ne){this.onAdError(ne)}}).catch(()=>{})}),_defineProperty$1(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,silencePromise(this.player.media.play())}),_defineProperty$1(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),_defineProperty$1(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),_defineProperty$1(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(te=>{this.on("loaded",te),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),_defineProperty$1(this,"trigger",(te,...ne)=>{const re=this.events[te];is.array(re)&&re.forEach(se=>{is.function(se)&&se.apply(this,ne)})}),_defineProperty$1(this,"on",(te,ne)=>(is.array(this.events[te])||(this.events[te]=[]),this.events[te].push(ne),this)),_defineProperty$1(this,"startSafetyTimer",(te,ne)=>{this.player.debug.log(`Safety timer invoked from: ${ne}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},te)}),_defineProperty$1(this,"clearSafetyTimer",te=>{is.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${te}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=ee,this.config=ee.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((te,ne)=>{this.on("loaded",te),this.on("error",ne)}),this.load()}get enabled(){const{config:ee}=this;return this.player.isHTML5&&this.player.isVideo&&ee.enabled&&(!is.empty(ee.publisherId)||is.url(ee.tagUrl))}get tagUrl(){const{config:ee}=this;return is.url(ee.tagUrl)?ee.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${buildUrlParams({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:ee.publisherId})}`}}function clamp(ie=0,ee=0,te=255){return Math.min(Math.max(ie,ee),te)}const parseVtt=ie=>{const ee=[];return ie.split(/\r\n\r\n|\n\n|\r\r/).forEach(te=>{const ne={};te.split(/\r\n|\n|\r/).forEach(re=>{if(is.number(ne.startTime)){if(!is.empty(re.trim())&&is.empty(ne.text)){const se=re.trim().split("#xywh=");[ne.text]=se,se[1]&&([ne.x,ne.y,ne.w,ne.h]=se[1].split(","))}}else{const se=re.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);se&&(ne.startTime=60*Number(se[1]||0)*60+60*Number(se[2])+Number(se[3])+ +`0.${se[4]}`,ne.endTime=60*Number(se[6]||0)*60+60*Number(se[7])+Number(se[8])+ +`0.${se[9]}`)}}),ne.text&&ee.push(ne)}),ee},fitRatio=(ie,ee)=>{const te={};return ie>ee.width/ee.height?(te.width=ee.width,te.height=1/ie*ee.width):(te.height=ee.height,te.width=ie*ee.height),te};class PreviewThumbnails{constructor(ee){_defineProperty$1(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),_defineProperty$1(this,"getThumbnails",()=>new Promise(te=>{const{src:ne}=this.player.config.previewThumbnails;if(is.empty(ne))throw new Error("Missing previewThumbnails.src config attribute");const re=()=>{this.thumbnails.sort((se,ae)=>se.height-ae.height),this.player.debug.log("Preview thumbnails",this.thumbnails),te()};if(is.function(ne))ne(se=>{this.thumbnails=se,re()});else{const se=(is.string(ne)?[ne]:ne).map(ae=>this.getThumbnail(ae));Promise.all(se).then(re)}})),_defineProperty$1(this,"getThumbnail",te=>new Promise(ne=>{fetch$1(te).then(re=>{const se={frames:parseVtt(re),height:null,urlPrefix:""};se.frames[0].text.startsWith("/")||se.frames[0].text.startsWith("http://")||se.frames[0].text.startsWith("https://")||(se.urlPrefix=te.substring(0,te.lastIndexOf("/")+1));const ae=new Image;ae.onload=()=>{se.height=ae.naturalHeight,se.width=ae.naturalWidth,this.thumbnails.push(se),ne()},ae.src=se.urlPrefix+se.frames[0].text})})),_defineProperty$1(this,"startMove",te=>{if(this.loaded&&is.event(te)&&["touchmove","mousemove"].includes(te.type)&&this.player.media.duration){if(te.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var ne,re;const se=this.player.elements.progress.getBoundingClientRect(),ae=100/se.width*(te.pageX-se.left);this.seekTime=this.player.media.duration*(ae/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=te.pageX,this.elements.thumb.time.innerText=formatTime(this.seekTime);const oe=(ne=this.player.config.markers)===null||ne===void 0||(re=ne.points)===null||re===void 0?void 0:re.find(({time:le})=>le===Math.round(this.seekTime));oe&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${oe.label}<br>`)}this.showImageAtCurrentTime()}}),_defineProperty$1(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),_defineProperty$1(this,"startScrubbing",te=>{(is.nullOrUndefined(te.button)||te.button===!1||te.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),_defineProperty$1(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):once.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),_defineProperty$1(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),_defineProperty$1(this,"render",()=>{this.elements.thumb.container=createElement("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=createElement("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const te=createElement("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=createElement("span",{},"00:00"),te.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(te),is.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=createElement("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),_defineProperty$1(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),_defineProperty$1(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const te=this.thumbnails[0].frames.findIndex(se=>this.seekTime>=se.startTime&&this.seekTime<=se.endTime),ne=te>=0;let re=0;this.mouseDown||this.toggleThumbContainer(ne),ne&&(this.thumbnails.forEach((se,ae)=>{this.loadedImages.includes(se.frames[te].text)&&(re=ae)}),te!==this.showingThumb&&(this.showingThumb=te,this.loadImage(re)))}),_defineProperty$1(this,"loadImage",(te=0)=>{const ne=this.showingThumb,re=this.thumbnails[te],{urlPrefix:se}=re,ae=re.frames[ne],oe=re.frames[ne].text,le=se+oe;if(this.currentImageElement&&this.currentImageElement.dataset.filename===oe)this.showImage(this.currentImageElement,ae,te,ne,oe,!1),this.currentImageElement.dataset.index=ne,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const ce=new Image;ce.src=le,ce.dataset.index=ne,ce.dataset.filename=oe,this.showingThumbFilename=oe,this.player.debug.log(`Loading image: ${le}`),ce.onload=()=>this.showImage(ce,ae,te,ne,oe,!0),this.loadingImage=ce,this.removeOldImages(ce)}}),_defineProperty$1(this,"showImage",(te,ne,re,se,ae,oe=!0)=>{this.player.debug.log(`Showing thumb: ${ae}. num: ${se}. qual: ${re}. newimg: ${oe}`),this.setImageSizeAndOffset(te,ne),oe&&(this.currentImageContainer.appendChild(te),this.currentImageElement=te,this.loadedImages.includes(ae)||this.loadedImages.push(ae)),this.preloadNearby(se,!0).then(this.preloadNearby(se,!1)).then(this.getHigherQuality(re,te,ne,ae))}),_defineProperty$1(this,"removeOldImages",te=>{Array.from(this.currentImageContainer.children).forEach(ne=>{if(ne.tagName.toLowerCase()!=="img")return;const re=this.usingSprites?500:1e3;if(ne.dataset.index!==te.dataset.index&&!ne.dataset.deleting){ne.dataset.deleting=!0;const{currentImageContainer:se}=this;setTimeout(()=>{se.removeChild(ne),this.player.debug.log(`Removing thumb: ${ne.dataset.filename}`)},re)}})}),_defineProperty$1(this,"preloadNearby",(te,ne=!0)=>new Promise(re=>{setTimeout(()=>{const se=this.thumbnails[0].frames[te].text;if(this.showingThumbFilename===se){let ae;ae=ne?this.thumbnails[0].frames.slice(te):this.thumbnails[0].frames.slice(0,te).reverse();let oe=!1;ae.forEach(le=>{const ce=le.text;if(ce!==se&&!this.loadedImages.includes(ce)){oe=!0,this.player.debug.log(`Preloading thumb filename: ${ce}`);const{urlPrefix:he}=this.thumbnails[0],fe=he+ce,ue=new Image;ue.src=fe,ue.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${ce}`),this.loadedImages.includes(ce)||this.loadedImages.push(ce),re()}}}),oe||re()}},300)})),_defineProperty$1(this,"getHigherQuality",(te,ne,re,se)=>{if(te<this.thumbnails.length-1){let ae=ne.naturalHeight;this.usingSprites&&(ae=re.h),ae<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===se&&(this.player.debug.log(`Showing higher quality thumb for: ${se}`),this.loadImage(te+1))},300)}}),_defineProperty$1(this,"toggleThumbContainer",(te=!1,ne=!1)=>{const re=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(re,te),!te&&ne&&(this.showingThumb=null,this.showingThumbFilename=null)}),_defineProperty$1(this,"toggleScrubbingContainer",(te=!1)=>{const ne=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(ne,te),te||(this.showingThumb=null,this.showingThumbFilename=null)}),_defineProperty$1(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),_defineProperty$1(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:te}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(te.clientHeight>20&&te.clientWidth<20){const ne=Math.floor(te.clientHeight*this.thumbAspectRatio);te.style.width=`${ne}px`}else if(te.clientHeight<20&&te.clientWidth>20){const ne=Math.floor(te.clientWidth/this.thumbAspectRatio);te.style.height=`${ne}px`}}else{const ne=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);te.style.height=`${this.thumbContainerHeight}px`,te.style.width=`${ne}px`}this.setThumbContainerPos()}),_defineProperty$1(this,"setThumbContainerPos",()=>{const te=this.player.elements.progress.getBoundingClientRect(),ne=this.player.elements.container.getBoundingClientRect(),{container:re}=this.elements.thumb,se=ne.left-te.left+10,ae=ne.right-te.left-re.clientWidth-10,oe=this.mousePosX-te.left-re.clientWidth/2,le=clamp(oe,se,ae);re.style.left=`${le}px`,re.style.setProperty("--preview-arrow-offset",oe-le+"px")}),_defineProperty$1(this,"setScrubbingContainerSize",()=>{const{width:te,height:ne}=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${te}px`,this.elements.scrubbing.container.style.height=`${ne}px`}),_defineProperty$1(this,"setImageSizeAndOffset",(te,ne)=>{if(!this.usingSprites)return;const re=this.thumbContainerHeight/ne.h;te.style.height=te.naturalHeight*re+"px",te.style.width=te.naturalWidth*re+"px",te.style.left=`-${ne.x*re}px`,te.style.top=`-${ne.y*re}px`}),this.player=ee,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:ee}=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return ee}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(ee){this.mouseDown?this.currentScrubbingImageElement=ee:this.currentThumbnailImageElement=ee}}const source={insertElements(ie,ee){is.string(ee)?insertElement(ie,this.media,{src:ee}):is.array(ee)&&ee.forEach(te=>{insertElement(ie,this.media,te)})},change(ie){getDeep(ie,"sources.length")?(html5.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],removeElement(this.media),this.media=null,is.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:ee,type:te}=ie,[{provider:ne=providers.html5,src:re}]=ee,se=ne==="html5"?te:"div",ae=ne==="html5"?{}:{src:re};Object.assign(this,{provider:ne,type:te,supported:support.check(te,ne,this.config.playsinline),media:createElement(se,ae)}),this.elements.container.appendChild(this.media),is.boolean(ie.autoplay)&&(this.config.autoplay=ie.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),is.empty(ie.poster)||(this.poster=ie.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),ui.addStyleHook.call(this),this.isHTML5&&source.insertElements.call(this,"source",ee),this.config.title=ie.title,media.setup.call(this),this.isHTML5&&Object.keys(ie).includes("tracks")&&source.insertElements.call(this,"track",ie.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui.build.call(this),this.isHTML5&&this.media.load(),is.empty(ie.previewThumbnails)||(Object.assign(this.config.previewThumbnails,ie.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Plyr{constructor(ee,te){if(_defineProperty$1(this,"play",()=>is.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>silencePromise(this.media.play())),this.media.play()):null),_defineProperty$1(this,"pause",()=>this.playing&&is.function(this.media.pause)?this.media.pause():null),_defineProperty$1(this,"togglePlay",oe=>(is.boolean(oe)?oe:!this.playing)?this.play():this.pause()),_defineProperty$1(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):is.function(this.media.stop)&&this.media.stop()}),_defineProperty$1(this,"restart",()=>{this.currentTime=0}),_defineProperty$1(this,"rewind",oe=>{this.currentTime-=is.number(oe)?oe:this.config.seekTime}),_defineProperty$1(this,"forward",oe=>{this.currentTime+=is.number(oe)?oe:this.config.seekTime}),_defineProperty$1(this,"increaseVolume",oe=>{const le=this.media.muted?0:this.volume;this.volume=le+(is.number(oe)?oe:0)}),_defineProperty$1(this,"decreaseVolume",oe=>{this.increaseVolume(-oe)}),_defineProperty$1(this,"airplay",()=>{support.airplay&&this.media.webkitShowPlaybackTargetPicker()}),_defineProperty$1(this,"toggleControls",oe=>{if(this.supported.ui&&!this.isAudio){const le=hasClass(this.elements.container,this.config.classNames.hideControls),ce=oe===void 0?void 0:!oe,he=toggleClass(this.elements.container,this.config.classNames.hideControls,ce);if(he&&is.array(this.config.controls)&&this.config.controls.includes("settings")&&!is.empty(this.config.settings)&&controls.toggleMenu.call(this,!1),he!==le){const fe=he?"controlshidden":"controlsshown";triggerEvent.call(this,this.media,fe)}return!he}return!1}),_defineProperty$1(this,"on",(oe,le)=>{on.call(this,this.elements.container,oe,le)}),_defineProperty$1(this,"once",(oe,le)=>{once.call(this,this.elements.container,oe,le)}),_defineProperty$1(this,"off",(oe,le)=>{off(this.elements.container,oe,le)}),_defineProperty$1(this,"destroy",(oe,le=!1)=>{if(!this.ready)return;const ce=()=>{document.body.style.overflow="",this.embed=null,le?(Object.keys(this.elements).length&&(removeElement(this.elements.buttons.play),removeElement(this.elements.captions),removeElement(this.elements.controls),removeElement(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),is.function(oe)&&oe()):(unbindListeners.call(this),html5.cancelRequests.call(this),replaceElement(this.elements.original,this.elements.container),triggerEvent.call(this,this.elements.original,"destroyed",!0),is.function(oe)&&oe.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(ui.toggleNativeControls.call(this,!0),ce()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&is.function(this.embed.destroy)&&this.embed.destroy(),ce()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(ce),setTimeout(ce,200))}),_defineProperty$1(this,"supports",oe=>support.mime.call(this,oe)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=support.touch,this.media=ee,is.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||is.nodeList(this.media)||is.array(this.media))&&(this.media=this.media[0]),this.config=extend({},defaults,Plyr.defaults,te||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Console(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",support),is.nullOrUndefined(this.media)||!is.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!support.check().api)return void this.debug.error("Setup failed: no support");const ne=this.media.cloneNode(!0);ne.autoplay=!1,this.elements.original=ne;const re=this.media.tagName.toLowerCase();let se=null,ae=null;switch(re){case"div":if(se=this.media.querySelector("iframe"),is.element(se)){if(ae=parseUrl(se.getAttribute("src")),this.provider=getProviderByUrl(ae.toString()),this.elements.container=this.media,this.media=se,this.elements.container.className="",ae.search.length){const oe=["1","true"];oe.includes(ae.searchParams.get("autoplay"))&&(this.config.autoplay=!0),oe.includes(ae.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=oe.includes(ae.searchParams.get("playsinline")),this.config.youtube.hl=ae.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(is.empty(this.provider)||!Object.values(providers).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=types.video;break;case"video":case"audio":this.type=re,this.provider=providers.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=support.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new Listeners(this),this.storage=new Storage(this),this.media.plyr=this,is.element(this.elements.container)||(this.elements.container=createElement("div"),wrap(this.media,this.elements.container)),ui.migrateStyles.call(this),ui.addStyleHook.call(this),media.setup.call(this),this.config.debug&&on.call(this,this.elements.container,this.config.events.join(" "),oe=>{this.debug.log(`event: ${oe.type}`)}),this.fullscreen=new Fullscreen(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Ads(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>silencePromise(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===providers.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===providers.youtube}get isVimeo(){return this.provider===providers.vimeo}get isVideo(){return this.type===types.video}get isAudio(){return this.type===types.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(ee){if(!this.duration)return;const te=is.number(ee)&&ee>0;this.media.currentTime=te?Math.min(ee,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:ee}=this.media;return is.number(ee)?ee:ee&&ee.length&&this.duration>0?ee.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const ee=parseFloat(this.config.duration),te=(this.media||{}).duration,ne=is.number(te)&&te!==1/0?te:0;return ee||ne}set volume(ee){let te=ee;is.string(te)&&(te=Number(te)),is.number(te)||(te=this.storage.get("volume")),is.number(te)||({volume:te}=this.config),te>1&&(te=1),te<0&&(te=0),this.config.volume=te,this.media.volume=te,!is.empty(ee)&&this.muted&&te>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(ee){let te=ee;is.boolean(te)||(te=this.storage.get("muted")),is.boolean(te)||(te=this.config.muted),this.config.muted=te,this.media.muted=te}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(ee){let te=null;is.number(ee)&&(te=ee),is.number(te)||(te=this.storage.get("speed")),is.number(te)||(te=this.config.speed.selected);const{minimumSpeed:ne,maximumSpeed:re}=this;te=clamp(te,ne,re),this.config.speed.selected=te,setTimeout(()=>{this.media&&(this.media.playbackRate=te)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(ee){const te=this.config.quality,ne=this.options.quality;if(!ne.length)return;let re=[!is.empty(ee)&&Number(ee),this.storage.get("quality"),te.selected,te.default].find(is.number),se=!0;if(!ne.includes(re)){const ae=closest(ne,re);this.debug.warn(`Unsupported quality option: ${re}, using ${ae} instead`),re=ae,se=!1}te.selected=re,this.media.quality=re,se&&this.storage.set({quality:re})}get quality(){return this.media.quality}set loop(ee){const te=is.boolean(ee)?ee:this.config.loop.active;this.config.loop.active=te,this.media.loop=te}get loop(){return!!this.media.loop}set source(ee){source.change.call(this,ee)}get source(){return this.media.currentSrc}get download(){const{download:ee}=this.config.urls;return is.url(ee)?ee:this.source}set download(ee){is.url(ee)&&(this.config.urls.download=ee,controls.setDownloadUrl.call(this))}set poster(ee){this.isVideo?ui.setPoster.call(this,ee,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const ee=reduceAspectRatio(getAspectRatio.call(this));return is.array(ee)?ee.join(":"):ee}set ratio(ee){this.isVideo?is.string(ee)&&validateAspectRatio(ee)?(this.config.ratio=reduceAspectRatio(ee),setAspectRatio.call(this)):this.debug.error(`Invalid aspect ratio specified (${ee})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(ee){this.config.autoplay=is.boolean(ee)?ee:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(ee){captions.toggle.call(this,ee,!1)}set currentTrack(ee){captions.set.call(this,ee,!1),captions.setup.call(this)}get currentTrack(){const{toggled:ee,currentTrack:te}=this.captions;return ee?te:-1}set language(ee){captions.setLanguage.call(this,ee,!1)}get language(){return(captions.getCurrentTrack.call(this)||{}).language}set pip(ee){if(!support.pip)return;const te=is.boolean(ee)?ee:!this.pip;is.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(te?pip.active:pip.inactive),is.function(this.media.requestPictureInPicture)&&(!this.pip&&te?this.media.requestPictureInPicture():this.pip&&!te&&document.exitPictureInPicture())}get pip(){return support.pip?is.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===pip.active:null}setPreviewThumbnails(ee){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,ee),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))}static supported(ee,te){return support.check(ee,te)}static loadSprite(ee,te){return loadSprite(ee,te)}static setup(ee,te={}){let ne=null;return is.string(ee)?ne=Array.from(document.querySelectorAll(ee)):is.nodeList(ee)?ne=Array.from(ee):is.array(ee)&&(ne=ee.filter(is.element)),is.empty(ne)?null:ne.map(re=>new Plyr(re,te))}}Plyr.defaults=cloneDeep(defaults),gsapWithCSS.registerPlugin(ScrollTrigger$1,Flip);class Info{constructor(ee){window.scrollTo(0,0),this.container=ee,this.heroWrapper=ee.querySelector(".about-hero-wrapper"),this.heroImg=ee.querySelector(".about-hero-img"),this.introImg=ee.querySelector(".about-intro-img"),this.introGrid=ee.querySelector(".about-intro-grid"),this.selectBoxWrappers=ee.querySelectorAll(".select-box-wrapper"),this.lines=ee.querySelectorAll(".line"),this.pressVisuals=ee.querySelectorAll(".press-media-item"),this.speakingItems=ee.querySelectorAll(".speaking-item"),this.init()}init(){gsapWithCSS.registerPlugin(ScrollTrigger$1,Flip),this.aboutReveal(),this.initSplitting(),this.rotateBoxes(),this.revealPress()}aboutReveal(){let ee=gsapWithCSS.timeline({});ee.set(".main",{opacity:1}),ee.set(".page-wrapper",{backgroundColor:"black"});let te=window.innerWidth>767?"-40vw":"18vw";ee.set(this.introImg,{x:te,width:"30vh"}).fromTo(this.introImg,{clipPath:"inset(100% 0 0 0)"},{clipPath:"inset(0% 0 0 0)",yPercent:-110,duration:1,ease:"expo.out"}).to(this.introImg,{x:0,yPercent:0,width:"17rem",duration:2,ease:"expo.out"}).to(".page-wrapper",{backgroundColor:"#d9d9d9",onComplete:()=>{this.showText()}},"<")}initSplitting(){this.targets=[...document.querySelectorAll("[split-text]")];const ee=Splitting({target:this.targets,by:"chars"});this.chars=ee.map(te=>te.chars).flat(),this.chars.forEach(te=>{let ne=document.createElement("span");ne.classList.add("char-wrap"),te.parentNode.insertBefore(ne,te),ne.appendChild(te)}),gsapWithCSS.set([this.chars],{yPercent:120})}showText(){this.targets.length!==0&&this.targets.forEach(ee=>{if(!ee.hasAttribute("no-instance")){const te=ee.querySelectorAll(".char");gsapWithCSS.fromTo(te,{"will-change":"transform",transformOrigin:"0% 50%",yPercent:120},{duration:2,ease:"expo.out",yPercent:0,scrollTrigger:{trigger:ee,invalidateOnRefresh:!0,start:"top 95%",end:"bottom bottom"}})}}),this.selectBoxWrappers.forEach((ee,te)=>{gsapWithCSS.from(ee.querySelector(".select-box"),{yPercent:120,duration:1,ease:"expo.out",scrollTrigger:{trigger:ee,start:"top 90%"}})}),this.lines.forEach(ee=>{gsapWithCSS.from(ee,{width:"0%",duration:1,ease:"expo.out",scrollTrigger:{trigger:ee,start:"top 90%"}})}),this.pressVisuals.forEach(ee=>{const te=gsapWithCSS.timeline({paused:!0});te.to(ee.querySelector(".play-wrapper"),{opacity:1,duration:1,ease:"expo.out"}).fromTo(ee.querySelector(".circle"),{strokeDasharray:50,strokeDashoffset:50},{strokeDashoffset:0,duration:1,ease:"expo.out"},"<"),ee.addEventListener("mouseenter",()=>{te.play()}),ee.addEventListener("mouseleave",()=>{te.reverse()});const ne=new Plyr(ee.querySelector(".plyr__video-embed"));ee.addEventListener("click",re=>{re.preventDefault(),gsapWithCSS.to(ee.querySelector(".m-video"),{opacity:1}),gsapWithCSS.to([ee.querySelector(".press-media-thumbnail"),ee.querySelector(".press-mask"),ee.querySelector(".play-wrapper")],{display:"none",duration:1,ease:"expo.out",onComplete:()=>{ne.play()}})},{once:!0})}),this.speakingItems.forEach(ee=>{let te=gsapWithCSS.timeline({paused:!0});te.to(ee.querySelector(".line"),{height:"2px"}),ee.addEventListener("mouseenter",()=>{te.play()}),ee.addEventListener("mouseleave",()=>{te.reverse()})})}rotateBoxes(){gsapWithCSS.to(this.selectBoxWrappers,{rotate:720,scrollTrigger:{trigger:this.selectBoxWrappers.parentElement,scrub:1,start:"top top",end:"bottom bottom"}})}revealPress(){this.pressVisuals.forEach(ee=>{gsapWithCSS.from(ee.querySelector(".press-media-grid"),{clipPath:"inset(50% 50% 50% 50%)",rotateX:"10deg",rotateZ:"10deg",duration:3,ease:"expo.out",scrollTrigger:{trigger:ee,start:"top 80%"}})})}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray=new Ray,_plane=new Plane$1,TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD);class OrbitControls extends EventDispatcher{constructor(ee,te){super(),this.object=ee,this.domElement=te,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Vector3,this.cursor=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return oe.phi},this.getAzimuthalAngle=function(){return oe.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ie){Ie.addEventListener("keydown",bt),this._domElementKeyEvents=Ie},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",bt),this._domElementKeyEvents=null},this.saveState=function(){ne.target0.copy(ne.target),ne.position0.copy(ne.object.position),ne.zoom0=ne.object.zoom},this.reset=function(){ne.target.copy(ne.target0),ne.object.position.copy(ne.position0),ne.object.zoom=ne.zoom0,ne.object.updateProjectionMatrix(),ne.dispatchEvent(_changeEvent),ne.update(),se=re.NONE},this.update=function(){const Ie=new Vector3,Ye=new Quaternion().setFromUnitVectors(ee.up,new Vector3(0,1,0)),nt=Ye.clone().invert(),rt=new Vector3,pt=new Quaternion,At=new Vector3,Ut=2*Math.PI;return function(Qt=null){const qt=ne.object.position;Ie.copy(qt).sub(ne.target),Ie.applyQuaternion(Ye),oe.setFromVector3(Ie),ne.autoRotate&&se===re.NONE&&ke(Me(Qt)),ne.enableDamping?(oe.theta+=le.theta*ne.dampingFactor,oe.phi+=le.phi*ne.dampingFactor):(oe.theta+=le.theta,oe.phi+=le.phi);let Ft=ne.minAzimuthAngle,Pt=ne.maxAzimuthAngle;isFinite(Ft)&&isFinite(Pt)&&(Ft<-Math.PI?Ft+=Ut:Ft>Math.PI&&(Ft-=Ut),Pt<-Math.PI?Pt+=Ut:Pt>Math.PI&&(Pt-=Ut),Ft<=Pt?oe.theta=Math.max(Ft,Math.min(Pt,oe.theta)):oe.theta=oe.theta>(Ft+Pt)/2?Math.max(Ft,oe.theta):Math.min(Pt,oe.theta)),oe.phi=Math.max(ne.minPolarAngle,Math.min(ne.maxPolarAngle,oe.phi)),oe.makeSafe(),ne.enableDamping===!0?ne.target.addScaledVector(he,ne.dampingFactor):ne.target.add(he),ne.target.sub(ne.cursor),ne.target.clampLength(ne.minTargetRadius,ne.maxTargetRadius),ne.target.add(ne.cursor);let Wt=!1;if(ne.zoomToCursor&&be||ne.object.isOrthographicCamera)oe.radius=Le(oe.radius);else{const xt=oe.radius;oe.radius=Le(oe.radius*ce),Wt=xt!=oe.radius}if(Ie.setFromSpherical(oe),Ie.applyQuaternion(nt),qt.copy(ne.target).add(Ie),ne.object.lookAt(ne.target),ne.enableDamping===!0?(le.theta*=1-ne.dampingFactor,le.phi*=1-ne.dampingFactor,he.multiplyScalar(1-ne.dampingFactor)):(le.set(0,0,0),he.set(0,0,0)),ne.zoomToCursor&&be){let xt=null;if(ne.object.isPerspectiveCamera){const Gt=Ie.length();xt=Le(Gt*ce);const kt=Gt-xt;ne.object.position.addScaledVector(xe,kt),ne.object.updateMatrixWorld(),Wt=!!kt}else if(ne.object.isOrthographicCamera){const Gt=new Vector3(Se.x,Se.y,0);Gt.unproject(ne.object);const kt=ne.object.zoom;ne.object.zoom=Math.max(ne.minZoom,Math.min(ne.maxZoom,ne.object.zoom/ce)),ne.object.updateProjectionMatrix(),Wt=kt!==ne.object.zoom;const Ht=new Vector3(Se.x,Se.y,0);Ht.unproject(ne.object),ne.object.position.sub(Ht).add(Gt),ne.object.updateMatrixWorld(),xt=Ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),ne.zoomToCursor=!1;xt!==null&&(this.screenSpacePanning?ne.target.set(0,0,-1).transformDirection(ne.object.matrix).multiplyScalar(xt).add(ne.object.position):(_ray.origin.copy(ne.object.position),_ray.direction.set(0,0,-1).transformDirection(ne.object.matrix),Math.abs(ne.object.up.dot(_ray.direction))<TILT_LIMIT?ee.lookAt(ne.target):(_plane.setFromNormalAndCoplanarPoint(ne.object.up,ne.target),_ray.intersectPlane(_plane,ne.target))))}else if(ne.object.isOrthographicCamera){const xt=ne.object.zoom;ne.object.zoom=Math.max(ne.minZoom,Math.min(ne.maxZoom,ne.object.zoom/ce)),xt!==ne.object.zoom&&(ne.object.updateProjectionMatrix(),Wt=!0)}return ce=1,be=!1,Wt||rt.distanceToSquared(ne.object.position)>ae||8*(1-pt.dot(ne.object.quaternion))>ae||At.distanceToSquared(ne.target)>ae?(ne.dispatchEvent(_changeEvent),rt.copy(ne.object.position),pt.copy(ne.object.quaternion),At.copy(ne.target),!0):!1}}(),this.dispose=function(){ne.domElement.removeEventListener("contextmenu",Tt),ne.domElement.removeEventListener("pointerdown",St),ne.domElement.removeEventListener("pointercancel",Re),ne.domElement.removeEventListener("wheel",lt),ne.domElement.removeEventListener("pointermove",$e),ne.domElement.removeEventListener("pointerup",Re),ne.domElement.getRootNode().removeEventListener("keydown",Et,{capture:!0}),ne._domElementKeyEvents!==null&&(ne._domElementKeyEvents.removeEventListener("keydown",bt),ne._domElementKeyEvents=null)};const ne=this,re={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let se=re.NONE;const ae=1e-6,oe=new Spherical,le=new Spherical;let ce=1;const he=new Vector3,fe=new Vector2,ue=new Vector2,de=new Vector2,ge=new Vector2,me=new Vector2,ve=new Vector2,pe=new Vector2,ye=new Vector2,_e=new Vector2,xe=new Vector3,Se=new Vector2;let be=!1;const Ee=[],Pe={};let we=!1;function Me(Ie){return Ie!==null?2*Math.PI/60*ne.autoRotateSpeed*Ie:2*Math.PI/60/60*ne.autoRotateSpeed}function De(Ie){const Ye=Math.abs(Ie*.01);return Math.pow(.95,ne.zoomSpeed*Ye)}function ke(Ie){le.theta-=Ie}function ze(Ie){le.phi-=Ie}const Ve=function(){const Ie=new Vector3;return function(nt,rt){Ie.setFromMatrixColumn(rt,0),Ie.multiplyScalar(-nt),he.add(Ie)}}(),Ue=function(){const Ie=new Vector3;return function(nt,rt){ne.screenSpacePanning===!0?Ie.setFromMatrixColumn(rt,1):(Ie.setFromMatrixColumn(rt,0),Ie.crossVectors(ne.object.up,Ie)),Ie.multiplyScalar(nt),he.add(Ie)}}(),Ae=function(){const Ie=new Vector3;return function(nt,rt){const pt=ne.domElement;if(ne.object.isPerspectiveCamera){const At=ne.object.position;Ie.copy(At).sub(ne.target);let Ut=Ie.length();Ut*=Math.tan(ne.object.fov/2*Math.PI/180),Ve(2*nt*Ut/pt.clientHeight,ne.object.matrix),Ue(2*rt*Ut/pt.clientHeight,ne.object.matrix)}else ne.object.isOrthographicCamera?(Ve(nt*(ne.object.right-ne.object.left)/ne.object.zoom/pt.clientWidth,ne.object.matrix),Ue(rt*(ne.object.top-ne.object.bottom)/ne.object.zoom/pt.clientHeight,ne.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),ne.enablePan=!1)}}();function Fe(Ie){ne.object.isPerspectiveCamera||ne.object.isOrthographicCamera?ce/=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ne.enableZoom=!1)}function Te(Ie){ne.object.isPerspectiveCamera||ne.object.isOrthographicCamera?ce*=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ne.enableZoom=!1)}function Ce(Ie,Ye){if(!ne.zoomToCursor)return;be=!0;const nt=ne.domElement.getBoundingClientRect(),rt=Ie-nt.left,pt=Ye-nt.top,At=nt.width,Ut=nt.height;Se.x=rt/At*2-1,Se.y=-(pt/Ut)*2+1,xe.set(Se.x,Se.y,1).unproject(ne.object).sub(ne.object.position).normalize()}function Le(Ie){return Math.max(ne.minDistance,Math.min(ne.maxDistance,Ie))}function Be(Ie){fe.set(Ie.clientX,Ie.clientY)}function st(Ie){Ce(Ie.clientX,Ie.clientX),pe.set(Ie.clientX,Ie.clientY)}function Xe(Ie){ge.set(Ie.clientX,Ie.clientY)}function Ge(Ie){ue.set(Ie.clientX,Ie.clientY),de.subVectors(ue,fe).multiplyScalar(ne.rotateSpeed);const Ye=ne.domElement;ke(2*Math.PI*de.x/Ye.clientHeight),ze(2*Math.PI*de.y/Ye.clientHeight),fe.copy(ue),ne.update()}function He(Ie){ye.set(Ie.clientX,Ie.clientY),_e.subVectors(ye,pe),_e.y>0?Fe(De(_e.y)):_e.y<0&&Te(De(_e.y)),pe.copy(ye),ne.update()}function Je(Ie){me.set(Ie.clientX,Ie.clientY),ve.subVectors(me,ge).multiplyScalar(ne.panSpeed),Ae(ve.x,ve.y),ge.copy(me),ne.update()}function et(Ie){Ce(Ie.clientX,Ie.clientY),Ie.deltaY<0?Te(De(Ie.deltaY)):Ie.deltaY>0&&Fe(De(Ie.deltaY)),ne.update()}function ht(Ie){let Ye=!1;switch(Ie.code){case ne.keys.UP:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?ze(2*Math.PI*ne.rotateSpeed/ne.domElement.clientHeight):Ae(0,ne.keyPanSpeed),Ye=!0;break;case ne.keys.BOTTOM:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?ze(-2*Math.PI*ne.rotateSpeed/ne.domElement.clientHeight):Ae(0,-ne.keyPanSpeed),Ye=!0;break;case ne.keys.LEFT:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?ke(2*Math.PI*ne.rotateSpeed/ne.domElement.clientHeight):Ae(ne.keyPanSpeed,0),Ye=!0;break;case ne.keys.RIGHT:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?ke(-2*Math.PI*ne.rotateSpeed/ne.domElement.clientHeight):Ae(-ne.keyPanSpeed,0),Ye=!0;break}Ye&&(Ie.preventDefault(),ne.update())}function vt(Ie){if(Ee.length===1)fe.set(Ie.pageX,Ie.pageY);else{const Ye=$t(Ie),nt=.5*(Ie.pageX+Ye.x),rt=.5*(Ie.pageY+Ye.y);fe.set(nt,rt)}}function gt(Ie){if(Ee.length===1)ge.set(Ie.pageX,Ie.pageY);else{const Ye=$t(Ie),nt=.5*(Ie.pageX+Ye.x),rt=.5*(Ie.pageY+Ye.y);ge.set(nt,rt)}}function yt(Ie){const Ye=$t(Ie),nt=Ie.pageX-Ye.x,rt=Ie.pageY-Ye.y,pt=Math.sqrt(nt*nt+rt*rt);pe.set(0,pt)}function Oe(Ie){ne.enableZoom&&yt(Ie),ne.enablePan&&gt(Ie)}function Ze(Ie){ne.enableZoom&&yt(Ie),ne.enableRotate&&vt(Ie)}function qe(Ie){if(Ee.length==1)ue.set(Ie.pageX,Ie.pageY);else{const nt=$t(Ie),rt=.5*(Ie.pageX+nt.x),pt=.5*(Ie.pageY+nt.y);ue.set(rt,pt)}de.subVectors(ue,fe).multiplyScalar(ne.rotateSpeed);const Ye=ne.domElement;ke(2*Math.PI*de.x/Ye.clientHeight),ze(2*Math.PI*de.y/Ye.clientHeight),fe.copy(ue)}function ut(Ie){if(Ee.length===1)me.set(Ie.pageX,Ie.pageY);else{const Ye=$t(Ie),nt=.5*(Ie.pageX+Ye.x),rt=.5*(Ie.pageY+Ye.y);me.set(nt,rt)}ve.subVectors(me,ge).multiplyScalar(ne.panSpeed),Ae(ve.x,ve.y),ge.copy(me)}function at(Ie){const Ye=$t(Ie),nt=Ie.pageX-Ye.x,rt=Ie.pageY-Ye.y,pt=Math.sqrt(nt*nt+rt*rt);ye.set(0,pt),_e.set(0,Math.pow(ye.y/pe.y,ne.zoomSpeed)),Fe(_e.y),pe.copy(ye);const At=(Ie.pageX+Ye.x)*.5,Ut=(Ie.pageY+Ye.y)*.5;Ce(At,Ut)}function We(Ie){ne.enableZoom&&at(Ie),ne.enablePan&&ut(Ie)}function ft(Ie){ne.enableZoom&&at(Ie),ne.enableRotate&&qe(Ie)}function St(Ie){ne.enabled!==!1&&(Ee.length===0&&(ne.domElement.setPointerCapture(Ie.pointerId),ne.domElement.addEventListener("pointermove",$e),ne.domElement.addEventListener("pointerup",Re)),!Ct(Ie)&&(Nt(Ie),Ie.pointerType==="touch"?It(Ie):Qe(Ie)))}function $e(Ie){ne.enabled!==!1&&(Ie.pointerType==="touch"?mt(Ie):ct(Ie))}function Re(Ie){switch(zt(Ie),Ee.length){case 0:ne.domElement.releasePointerCapture(Ie.pointerId),ne.domElement.removeEventListener("pointermove",$e),ne.domElement.removeEventListener("pointerup",Re),ne.dispatchEvent(_endEvent),se=re.NONE;break;case 1:const Ye=Ee[0],nt=Pe[Ye];It({pointerId:Ye,pageX:nt.x,pageY:nt.y});break}}function Qe(Ie){let Ye;switch(Ie.button){case 0:Ye=ne.mouseButtons.LEFT;break;case 1:Ye=ne.mouseButtons.MIDDLE;break;case 2:Ye=ne.mouseButtons.RIGHT;break;default:Ye=-1}switch(Ye){case MOUSE.DOLLY:if(ne.enableZoom===!1)return;st(Ie),se=re.DOLLY;break;case MOUSE.ROTATE:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(ne.enablePan===!1)return;Xe(Ie),se=re.PAN}else{if(ne.enableRotate===!1)return;Be(Ie),se=re.ROTATE}break;case MOUSE.PAN:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(ne.enableRotate===!1)return;Be(Ie),se=re.ROTATE}else{if(ne.enablePan===!1)return;Xe(Ie),se=re.PAN}break;default:se=re.NONE}se!==re.NONE&&ne.dispatchEvent(_startEvent)}function ct(Ie){switch(se){case re.ROTATE:if(ne.enableRotate===!1)return;Ge(Ie);break;case re.DOLLY:if(ne.enableZoom===!1)return;He(Ie);break;case re.PAN:if(ne.enablePan===!1)return;Je(Ie);break}}function lt(Ie){ne.enabled===!1||ne.enableZoom===!1||se!==re.NONE||(Ie.preventDefault(),ne.dispatchEvent(_startEvent),et(ot(Ie)),ne.dispatchEvent(_endEvent))}function ot(Ie){const Ye=Ie.deltaMode,nt={clientX:Ie.clientX,clientY:Ie.clientY,deltaY:Ie.deltaY};switch(Ye){case 1:nt.deltaY*=16;break;case 2:nt.deltaY*=100;break}return Ie.ctrlKey&&!we&&(nt.deltaY*=10),nt}function Et(Ie){Ie.key==="Control"&&(we=!0,ne.domElement.getRootNode().addEventListener("keyup",dt,{passive:!0,capture:!0}))}function dt(Ie){Ie.key==="Control"&&(we=!1,ne.domElement.getRootNode().removeEventListener("keyup",dt,{passive:!0,capture:!0}))}function bt(Ie){ne.enabled===!1||ne.enablePan===!1||ht(Ie)}function It(Ie){switch(Vt(Ie),Ee.length){case 1:switch(ne.touches.ONE){case TOUCH.ROTATE:if(ne.enableRotate===!1)return;vt(Ie),se=re.TOUCH_ROTATE;break;case TOUCH.PAN:if(ne.enablePan===!1)return;gt(Ie),se=re.TOUCH_PAN;break;default:se=re.NONE}break;case 2:switch(ne.touches.TWO){case TOUCH.DOLLY_PAN:if(ne.enableZoom===!1&&ne.enablePan===!1)return;Oe(Ie),se=re.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(ne.enableZoom===!1&&ne.enableRotate===!1)return;Ze(Ie),se=re.TOUCH_DOLLY_ROTATE;break;default:se=re.NONE}break;default:se=re.NONE}se!==re.NONE&&ne.dispatchEvent(_startEvent)}function mt(Ie){switch(Vt(Ie),se){case re.TOUCH_ROTATE:if(ne.enableRotate===!1)return;qe(Ie),ne.update();break;case re.TOUCH_PAN:if(ne.enablePan===!1)return;ut(Ie),ne.update();break;case re.TOUCH_DOLLY_PAN:if(ne.enableZoom===!1&&ne.enablePan===!1)return;We(Ie),ne.update();break;case re.TOUCH_DOLLY_ROTATE:if(ne.enableZoom===!1&&ne.enableRotate===!1)return;ft(Ie),ne.update();break;default:se=re.NONE}}function Tt(Ie){ne.enabled!==!1&&Ie.preventDefault()}function Nt(Ie){Ee.push(Ie.pointerId)}function zt(Ie){delete Pe[Ie.pointerId];for(let Ye=0;Ye<Ee.length;Ye++)if(Ee[Ye]==Ie.pointerId){Ee.splice(Ye,1);return}}function Ct(Ie){for(let Ye=0;Ye<Ee.length;Ye++)if(Ee[Ye]==Ie.pointerId)return!0;return!1}function Vt(Ie){let Ye=Pe[Ie.pointerId];Ye===void 0&&(Ye=new Vector2,Pe[Ie.pointerId]=Ye),Ye.set(Ie.pageX,Ie.pageY)}function $t(Ie){const Ye=Ie.pointerId===Ee[0]?Ee[1]:Ee[0];return Pe[Ye]}ne.domElement.addEventListener("contextmenu",Tt),ne.domElement.addEventListener("pointerdown",St),ne.domElement.addEventListener("pointercancel",Re),ne.domElement.addEventListener("wheel",lt,{passive:!1}),ne.domElement.getRootNode().addEventListener("keydown",Et,{passive:!0,capture:!0}),this.update()}}class Diary{constructor(ee){this.container=ee,this.items=Array.from(ee.querySelectorAll(".stills-item")),this.imageUrls=this.items.map(te=>te.querySelector("img").src),this.scene=new Scene,this.camera=new PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new WebGLRenderer({antialias:!0,alpha:!0}),this.controls=null,this.raycaster=new Raycaster,this.mouse=new Vector2,this.images=[],this.hoveredImage=null,this.currentlyFocused=null,this.originalFOV=75,this.zoomedFOV=40,this.gridSize={width:12,height:8},this.depthRange=10,this.cameraBounds={minX:0,maxX:0,minY:0,maxY:0,minZ:0,maxZ:0},this.viewMode="3D",this.isDragging=!1,this.previousMousePosition={x:0,y:0},this.floatingAnimations=[],this.init()}init(){this.initSplitting(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.container.appendChild(this.renderer.domElement),this.camera.position.set(0,0,20)}initSplitting(){this.targets=[...document.querySelectorAll(".diary-text")];const ee=Splitting({target:this.targets,by:"chars"});this.chars=ee.map(te=>te.chars).flat(),this.chars.forEach(te=>{let ne=document.createElement("span");ne.classList.add("char-wrap"),te.parentNode.insertBefore(ne,te),ne.appendChild(te)}),gsapWithCSS.set(".diary-text-wrapper",{opacity:1}),this.initScene(),this.addViewSwitchButton()}initScene(){this.setupControls(),this.setupLights(),this.loadImages(),this.addEventListeners(),this.animate()}setupControls(){this.controls=new OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.screenSpacePanning=!1,this.controls.minDistance=5,this.controls.maxDistance=50}setupLights(){const ee=new AmbientLight(16777215,.5);this.scene.add(ee);const te=new PointLight(16777215,.5);te.position.set(10,10,10),this.scene.add(te)}loadImages(){const ee=new TextureLoader,te=20,ne=5,re=se=>{const ae=Math.min(se+ne,this.imageUrls.length);for(let oe=se;oe<ae;oe++)this.loadSingleImage(ee,te,oe);ae<this.imageUrls.length&&setTimeout(()=>re(ae),100)};re(0)}loadSingleImage(ee,te,ne){ee.load(this.imageUrls[ne],re=>{const se=re.image.width,ae=re.image.height,oe=8e-4,le=new PlaneGeometry(se*oe,ae*oe),ce=new MeshBasicMaterial({map:re,side:DoubleSide,transparent:!0,opacity:1}),he=new Mesh(le,ce);if(re.colorSpace=SRGBColorSpace,re.minFilter=LinearFilter,re.magFilter=LinearFilter,re.format=RGBAFormat,this.viewMode==="3D"){const fe=Math.acos(-1+2*ne/this.imageUrls.length),ue=Math.sqrt(this.imageUrls.length*Math.PI)*fe;he.position.setFromSphericalCoords(te,fe,ue),he.lookAt(0,0,0)}else this.positionImageIn2DGrid(he,ne);this.scene.add(he),this.images.push(he),gsapWithCSS.from(he.scale,{x:0,y:0,z:0,duration:1,ease:"back.out(1.7)",delay:ne*.1})})}positionImageIn2DGrid(ee,te){const{width:ne,height:re}=this.gridSize,se=ne*re,ae=Math.ceil(this.imageUrls.length/se),oe=te%se,le=Math.floor(te/se),ce=oe%ne,he=Math.floor(oe/ne),fe=ee.geometry.parameters.width,ue=ee.geometry.parameters.height,de=(ce-(ne-1)/2)*(fe+1),ge=((re-1)/2-he)*(ue+1),me=le*(this.depthRange/ae);ee.position.set(de,ge,me),ee.rotation.set(0,0,0),this.viewMode,ee.material.opacity=this.viewMode==="2D"?1:.8,this.updateCameraBounds(ee),this.viewMode==="2D"&&this.initFloatingAnimation(ee)}initFloatingAnimation(ee){const te=3+Math.random()*2,ne=.15+Math.random()*.15,re=.02+Math.random()*.02,se=gsapWithCSS.timeline({repeat:-1,yoyo:!0});se.to(ee.position,{y:ee.position.y+ne,duration:te,ease:"sine.inOut"}),se.to(ee.rotation,{x:re,y:re,duration:te,ease:"sine.inOut"},0),this.floatingAnimations.push(se)}updateCameraBounds(ee){this.cameraBounds.minX=Math.min(this.cameraBounds.minX,ee.position.x),this.cameraBounds.maxX=Math.max(this.cameraBounds.maxX,ee.position.x),this.cameraBounds.minY=Math.min(this.cameraBounds.minY,ee.position.y),this.cameraBounds.maxY=Math.max(this.cameraBounds.maxY,ee.position.y),this.cameraBounds.minZ=Math.min(this.cameraBounds.minZ,ee.position.z),this.cameraBounds.maxZ=Math.max(this.cameraBounds.maxZ,ee.position.z)}switchViewMode(){const ee=this.viewMode;this.viewMode=this.viewMode==="3D"?"2D":"3D";const te=20;if(this.cameraBounds={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0,minZ:1/0,maxZ:-1/0},this.floatingAnimations.forEach(ne=>ne.kill()),this.floatingAnimations=[],this.images.forEach((ne,re)=>{if(this.viewMode==="3D"){const se=Math.acos(-1+2*re/this.imageUrls.length),ae=Math.sqrt(this.imageUrls.length*Math.PI)*se;gsapWithCSS.to(ne.position,{x:te*Math.sin(se)*Math.cos(ae),y:te*Math.sin(se)*Math.sin(ae),z:te*Math.cos(se),duration:1.5,ease:"power2.out",onUpdate:()=>ne.lookAt(0,0,0)}),gsapWithCSS.to(ne.rotation,{x:0,y:0,z:0,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(ne.scale,{x:ne.scale.x/2,y:ne.scale.y/2,z:ne.scale.z/2,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(ne.material,{opacity:.8,duration:1.5})}else this.positionImageIn2DGrid(ne,re),gsapWithCSS.to(ne.position,{x:ne.position.x,y:ne.position.y,z:ne.position.z,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(ne.rotation,{x:0,y:0,z:0,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(ne.scale,{x:ne.scale.x*2,y:ne.scale.y*2,z:ne.scale.z*2,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(ne.material,{opacity:1,duration:1.5})}),this.viewMode==="3D")gsapWithCSS.to(this.camera.position,{x:0,y:0,z:20,duration:1.5,ease:"power2.out"}),this.controls.enabled=!0;else{const ne=this.cameraBounds.maxZ+5;gsapWithCSS.to(this.camera.position,{x:0,y:0,z:ne,duration:1.5,ease:"power2.out"}),this.controls.enabled=!1,this.setupCustomPanControls()}gsapWithCSS.to(this.controls.target,{x:0,y:0,z:0,duration:1.5,ease:"power2.out"}),this.camera.updateProjectionMatrix(),this.viewMode==="2D"&&ee==="3D"&&setTimeout(()=>{this.images.forEach(ne=>this.initFloatingAnimation(ne))},1500)}setupCustomPanControls(){this.container.style.cursor="grab",this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),this.container.addEventListener("mousemove",this.onMouseMove.bind(this)),this.container.addEventListener("mouseup",this.onMouseUp.bind(this)),this.container.addEventListener("mouseleave",this.onMouseUp.bind(this)),this.container.addEventListener("wheel",this.onWheel.bind(this)),this.controls.dispose()}setupConstrainedControls(){this.controls.enabled=!0,this.controls.minDistance=0,this.controls.maxDistance=this.cameraBounds.maxZ-this.cameraBounds.minZ;const ee=2;this.controls.minAzimuthAngle=-Math.PI/4,this.controls.maxAzimuthAngle=Math.PI/4,this.controls.minPolarAngle=Math.PI/4,this.controls.maxPolarAngle=Math.PI*3/4,this.controls.addEventListener("change",()=>{const te=this.camera.position;te.x=Math.max(this.cameraBounds.minX-ee,Math.min(this.cameraBounds.maxX+ee,te.x)),te.y=Math.max(this.cameraBounds.minY-ee,Math.min(this.cameraBounds.maxY+ee,te.y)),te.z=Math.max(this.cameraBounds.minZ-1,Math.min(this.cameraBounds.maxZ,te.z))})}addViewSwitchButton(){const ee=document.createElement("button");ee.textContent="Switch View",ee.style.position="absolute",ee.style.top="50px",ee.style.right="50px",ee.style.zIndex="1000",ee.addEventListener("click",()=>this.switchViewMode()),this.container.appendChild(ee)}addEventListeners(){window.addEventListener("resize",()=>this.onWindowResize(),!1),this.renderer.domElement.addEventListener("mousemove",ee=>this.onMouseMove(ee),!1),this.renderer.domElement.addEventListener("click",ee=>this.onClick(ee),!1)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}onMouseDown(ee){this.isDragging=!0,this.container.style.cursor="grabbing",this.previousMousePosition={x:ee.clientX,y:ee.clientY}}onMouseMove(ee){if(!this.isDragging)return;const te={x:ee.clientX-this.previousMousePosition.x,y:ee.clientY-this.previousMousePosition.y},ne=.01;this.camera.position.x-=te.x*ne,this.camera.position.y+=te.y*ne,this.clampCameraPosition(),this.previousMousePosition={x:ee.clientX,y:ee.clientY}}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onWheel(ee){ee.preventDefault();const te=.1;this.camera.position.z+=ee.deltaY*te,this.clampCameraPosition()}clampCameraPosition(){this.camera.position.x=Math.max(this.cameraBounds.minX-5,Math.min(this.cameraBounds.maxX+5,this.camera.position.x)),this.camera.position.y=Math.max(this.cameraBounds.minY-5,Math.min(this.cameraBounds.maxY+5,this.camera.position.y)),this.camera.position.z=Math.max(this.cameraBounds.minZ-1,Math.min(this.cameraBounds.maxZ,this.camera.position.z))}onClick(){this.raycaster.setFromCamera(this.mouse,this.camera);const ee=this.raycaster.intersectObjects(this.images);if(ee.length>0){const te=ee[0].object;this.focusOnImage(te)}else this.resetCamera()}focusOnImage(ee){if(this.currentlyFocused===ee)return;this.currentlyFocused=ee;const te=ee.position.clone(),ne=te.clone().sub(this.camera.position).normalize(),re=ee.scale.x*1.25,se=te.clone().sub(ne.multiplyScalar(re));gsapWithCSS.to(this.camera.position,{x:se.x,y:se.y,z:se.z,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(this.camera,{fov:this.zoomedFOV,duration:1.5,ease:"power2.out",onUpdate:()=>this.camera.updateProjectionMatrix()}),gsapWithCSS.to(this.controls.target,{x:te.x,y:te.y,z:te.z,duration:1.5,ease:"power2.out",onUpdate:()=>this.controls.update()}),gsapWithCSS.to(ee.scale,{x:ee.scale.x*1.2,y:ee.scale.y*1.2,duration:.5}),this.images.forEach(ae=>{ae!==ee?gsapWithCSS.to(ae.material,{opacity:.1,duration:.5}):gsapWithCSS.to(ae.material,{opacity:1,duration:.5})}),this.controls.enabled=!1,setTimeout(()=>{this.controls.enabled=!0},1500)}resetCamera(){this.currentlyFocused&&(gsapWithCSS.to(this.camera.position,{x:0,y:0,z:20,duration:1.5,ease:"power2.out"}),gsapWithCSS.to(this.camera,{fov:this.originalFOV,duration:1.5,ease:"power2.out",onUpdate:()=>this.camera.updateProjectionMatrix()}),gsapWithCSS.to(this.controls.target,{x:0,y:0,z:0,duration:1.5,ease:"power2.out",onUpdate:()=>this.controls.update()}),gsapWithCSS.to(this.currentlyFocused.scale,{x:this.currentlyFocused.scale.x/1.2,y:this.currentlyFocused.scale.y/1.2,duration:.5}),this.images.forEach(ee=>{gsapWithCSS.to(ee.material,{opacity:.8,duration:.5})}),this.currentlyFocused=null,this.controls.enabled=!1,setTimeout(()=>{this.controls.enabled=!0},1500))}hoverEffect(ee){ee!==this.currentlyFocused&&(gsapWithCSS.to(ee.scale,{x:ee.scale.x*1.1,y:ee.scale.y*1.1,duration:.3}),gsapWithCSS.to(ee.material,{opacity:1,duration:.3}))}resetImageScale(ee){ee!==this.currentlyFocused&&(gsapWithCSS.to(ee.scale,{x:ee.scale.x/1.1,y:ee.scale.y/1.1,duration:.3}),gsapWithCSS.to(ee.material,{opacity:.8,duration:.3}))}animate(){requestAnimationFrame(()=>this.animate()),this.viewMode==="3D"&&this.controls.update(),this.renderer.render(this.scene,this.camera)}}var virtualscroll={exports:{}};(function(ie,ee){(function(te,ne){ie.exports=ne()})(commonjsGlobal,function(){var te=0;function ne(me){return"__private_"+te+++"_"+me}function re(me,ve){if(!Object.prototype.hasOwnProperty.call(me,ve))throw new TypeError("attempted to use private field on non-instance");return me}function se(){}se.prototype={on:function(me,ve,pe){var ye=this.e||(this.e={});return(ye[me]||(ye[me]=[])).push({fn:ve,ctx:pe}),this},once:function(me,ve,pe){var ye=this;function _e(){ye.off(me,_e),ve.apply(pe,arguments)}return _e._=ve,this.on(me,_e,pe)},emit:function(me){for(var ve=[].slice.call(arguments,1),pe=((this.e||(this.e={}))[me]||[]).slice(),ye=0,_e=pe.length;ye<_e;ye++)pe[ye].fn.apply(pe[ye].ctx,ve);return this},off:function(me,ve){var pe=this.e||(this.e={}),ye=pe[me],_e=[];if(ye&&ve)for(var xe=0,Se=ye.length;xe<Se;xe++)ye[xe].fn!==ve&&ye[xe].fn._!==ve&&_e.push(ye[xe]);return _e.length?pe[me]=_e:delete pe[me],this}};var ae=se;ae.TinyEmitter=se;var oe,le="virtualscroll",ce=ne("options"),he=ne("el"),fe=ne("emitter"),ue=ne("event"),de=ne("touchStart"),ge=ne("bodyTouchAction");return function(){function me(pe){var ye=this;Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),this._onWheel=function(_e){var xe=re(ye,ce)[ce],Se=re(ye,ue)[ue];Se.deltaX=_e.wheelDeltaX||-1*_e.deltaX,Se.deltaY=_e.wheelDeltaY||-1*_e.deltaY,oe.isFirefox&&_e.deltaMode===1&&(Se.deltaX*=xe.firefoxMultiplier,Se.deltaY*=xe.firefoxMultiplier),Se.deltaX*=xe.mouseMultiplier,Se.deltaY*=xe.mouseMultiplier,ye._notify(_e)},this._onMouseWheel=function(_e){var xe=re(ye,ue)[ue];xe.deltaX=_e.wheelDeltaX?_e.wheelDeltaX:0,xe.deltaY=_e.wheelDeltaY?_e.wheelDeltaY:_e.wheelDelta,ye._notify(_e)},this._onTouchStart=function(_e){var xe=_e.targetTouches?_e.targetTouches[0]:_e;re(ye,de)[de].x=xe.pageX,re(ye,de)[de].y=xe.pageY},this._onTouchMove=function(_e){var xe=re(ye,ce)[ce];xe.preventTouch&&!_e.target.classList.contains(xe.unpreventTouchClass)&&_e.preventDefault();var Se=re(ye,ue)[ue],be=_e.targetTouches?_e.targetTouches[0]:_e;Se.deltaX=(be.pageX-re(ye,de)[de].x)*xe.touchMultiplier,Se.deltaY=(be.pageY-re(ye,de)[de].y)*xe.touchMultiplier,re(ye,de)[de].x=be.pageX,re(ye,de)[de].y=be.pageY,ye._notify(_e)},this._onKeyDown=function(_e){var xe=re(ye,ue)[ue];xe.deltaX=xe.deltaY=0;var Se=window.innerHeight-40;switch(_e.keyCode){case 37:case 38:xe.deltaY=re(ye,ce)[ce].keyStep;break;case 39:case 40:xe.deltaY=-re(ye,ce)[ce].keyStep;break;case 32:xe.deltaY=Se*(_e.shiftKey?1:-1);break;default:return}ye._notify(_e)},re(this,he)[he]=window,pe&&pe.el&&(re(this,he)[he]=pe.el,delete pe.el),oe||(oe={hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in document,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}),re(this,ce)[ce]=Object.assign({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",useKeyboard:!0,useTouch:!0},pe),re(this,fe)[fe]=new ae,re(this,ue)[ue]={y:0,x:0,deltaX:0,deltaY:0},re(this,de)[de]={x:null,y:null},re(this,ge)[ge]=null,re(this,ce)[ce].passive!==void 0&&(this.listenerOptions={passive:re(this,ce)[ce].passive})}var ve=me.prototype;return ve._notify=function(pe){var ye=re(this,ue)[ue];ye.x+=ye.deltaX,ye.y+=ye.deltaY,re(this,fe)[fe].emit(le,{x:ye.x,y:ye.y,deltaX:ye.deltaX,deltaY:ye.deltaY,originalEvent:pe})},ve._bind=function(){oe.hasWheelEvent&&re(this,he)[he].addEventListener("wheel",this._onWheel,this.listenerOptions),oe.hasMouseWheelEvent&&re(this,he)[he].addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),oe.hasTouch&&re(this,ce)[ce].useTouch&&(re(this,he)[he].addEventListener("touchstart",this._onTouchStart,this.listenerOptions),re(this,he)[he].addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),oe.hasPointer&&oe.hasTouchWin&&(re(this,ge)[ge]=document.body.style.msTouchAction,document.body.style.msTouchAction="none",re(this,he)[he].addEventListener("MSPointerDown",this._onTouchStart,!0),re(this,he)[he].addEventListener("MSPointerMove",this._onTouchMove,!0)),oe.hasKeyDown&&re(this,ce)[ce].useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},ve._unbind=function(){oe.hasWheelEvent&&re(this,he)[he].removeEventListener("wheel",this._onWheel),oe.hasMouseWheelEvent&&re(this,he)[he].removeEventListener("mousewheel",this._onMouseWheel),oe.hasTouch&&(re(this,he)[he].removeEventListener("touchstart",this._onTouchStart),re(this,he)[he].removeEventListener("touchmove",this._onTouchMove)),oe.hasPointer&&oe.hasTouchWin&&(document.body.style.msTouchAction=re(this,ge)[ge],re(this,he)[he].removeEventListener("MSPointerDown",this._onTouchStart,!0),re(this,he)[he].removeEventListener("MSPointerMove",this._onTouchMove,!0)),oe.hasKeyDown&&re(this,ce)[ce].useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},ve.on=function(pe,ye){re(this,fe)[fe].on(le,pe,ye);var _e=re(this,fe)[fe].e;_e&&_e[le]&&_e[le].length===1&&this._bind()},ve.off=function(pe,ye){re(this,fe)[fe].off(le,pe,ye);var _e=re(this,fe)[fe].e;(!_e[le]||_e[le].length<=0)&&this._unbind()},ve.destroy=function(){re(this,fe)[fe].off(),this._unbind()},me}()})})(virtualscroll);var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(ie,ee){module.exports=ee()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(ee){_useWebWorker=!!ee},getWebWorker=function(){return _useWebWorker},setLocationHref=function(ee){locationHref=ee},getLocationHref=function(){return locationHref};function createTag(ie){return document.createElement(ie)}function extendPrototype(ie,ee){var te,ne=ie.length,re;for(te=0;te<ne;te+=1){re=ie[te].prototype;for(var se in re)Object.prototype.hasOwnProperty.call(re,se)&&(ee.prototype[se]=re[se])}}function getDescriptor(ie,ee){return Object.getOwnPropertyDescriptor(ie,ee)}function createProxyFunction(ie){function ee(){}return ee.prototype=ie,ee}var audioControllerFactory=function(){function ie(ee){this.audios=[],this.audioFactory=ee,this._volume=1,this._isMuted=!1}return ie.prototype={addAudio:function(te){this.audios.push(te)},pause:function(){var te,ne=this.audios.length;for(te=0;te<ne;te+=1)this.audios[te].pause()},resume:function(){var te,ne=this.audios.length;for(te=0;te<ne;te+=1)this.audios[te].resume()},setRate:function(te){var ne,re=this.audios.length;for(ne=0;ne<re;ne+=1)this.audios[ne].setRate(te)},createAudio:function(te){return this.audioFactory?this.audioFactory(te):window.Howl?new window.Howl({src:[te]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(te){this.audioFactory=te},setVolume:function(te){this._volume=te,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var te,ne=this.audios.length;for(te=0;te<ne;te+=1)this.audios[te].volume(this._volume*(this._isMuted?0:1))}},function(){return new ie}}(),createTypedArray=function(){function ie(te,ne){var re=0,se=[],ae;switch(te){case"int16":case"uint8c":ae=1;break;default:ae=1.1;break}for(re=0;re<ne;re+=1)se.push(ae);return se}function ee(te,ne){return te==="float32"?new Float32Array(ne):te==="int16"?new Int16Array(ne):te==="uint8c"?new Uint8ClampedArray(ne):ie(te,ne)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?ee:ie}();function createSizedArray(ie){return Array.apply(null,{length:ie})}function _typeof$6(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(te){return typeof te}:_typeof$6=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$6(ie)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var ie=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],ee,te=ie.length;for(ee=0;ee<te;ee+=1)BMMath[ie[ee]]=Math[ie[ee]]})(),BMMath.random=Math.random,BMMath.abs=function(ie){var ee=_typeof$6(ie);if(ee==="object"&&ie.length){var te=createSizedArray(ie.length),ne,re=ie.length;for(ne=0;ne<re;ne+=1)te[ne]=Math.abs(ie[ne]);return te}return Math.abs(ie)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(ie){ie.style.position="absolute",ie.style.top=0,ie.style.left=0,ie.style.display="block",ie.style.transformOrigin="0 0",ie.style.webkitTransformOrigin="0 0",ie.style.backfaceVisibility="visible",ie.style.webkitBackfaceVisibility="visible",ie.style.transformStyle="preserve-3d",ie.style.webkitTransformStyle="preserve-3d",ie.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(ie,ee,te,ne){this.type=ie,this.currentTime=ee,this.totalTime=te,this.direction=ne<0?-1:1}function BMCompleteEvent(ie,ee){this.type=ie,this.direction=ee<0?-1:1}function BMCompleteLoopEvent(ie,ee,te,ne){this.type=ie,this.currentLoop=te,this.totalLoops=ee,this.direction=ne<0?-1:1}function BMSegmentStartEvent(ie,ee,te){this.type=ie,this.firstFrame=ee,this.totalFrames=te}function BMDestroyEvent(ie,ee){this.type=ie,this.target=ee}function BMRenderFrameErrorEvent(ie,ee){this.type="renderFrameError",this.nativeError=ie,this.currentTime=ee}function BMConfigErrorEvent(ie){this.type="configError",this.nativeError=ie}var createElementID=function(){var ie=0;return function(){return ie+=1,idPrefix$1+"__lottie_element_"+ie}}();function HSVtoRGB(ie,ee,te){var ne,re,se,ae,oe,le,ce,he;switch(ae=Math.floor(ie*6),oe=ie*6-ae,le=te*(1-ee),ce=te*(1-oe*ee),he=te*(1-(1-oe)*ee),ae%6){case 0:ne=te,re=he,se=le;break;case 1:ne=ce,re=te,se=le;break;case 2:ne=le,re=te,se=he;break;case 3:ne=le,re=ce,se=te;break;case 4:ne=he,re=le,se=te;break;case 5:ne=te,re=le,se=ce;break}return[ne,re,se]}function RGBtoHSV(ie,ee,te){var ne=Math.max(ie,ee,te),re=Math.min(ie,ee,te),se=ne-re,ae,oe=ne===0?0:se/ne,le=ne/255;switch(ne){case re:ae=0;break;case ie:ae=ee-te+se*(ee<te?6:0),ae/=6*se;break;case ee:ae=te-ie+se*2,ae/=6*se;break;case te:ae=ie-ee+se*4,ae/=6*se;break}return[ae,oe,le]}function addSaturationToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[1]+=ee,te[1]>1?te[1]=1:te[1]<=0&&(te[1]=0),HSVtoRGB(te[0],te[1],te[2])}function addBrightnessToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[2]+=ee,te[2]>1?te[2]=1:te[2]<0&&(te[2]=0),HSVtoRGB(te[0],te[1],te[2])}function addHueToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[0]+=ee/360,te[0]>1?te[0]-=1:te[0]<0&&(te[0]+=1),HSVtoRGB(te[0],te[1],te[2])}var rgbToHex=function(){var ie=[],ee,te;for(ee=0;ee<256;ee+=1)te=ee.toString(16),ie[ee]=te.length===1?"0"+te:te;return function(ne,re,se){return ne<0&&(ne=0),re<0&&(re=0),se<0&&(se=0),"#"+ie[ne]+ie[re]+ie[se]}}(),setSubframeEnabled=function(ee){subframeEnabled=!!ee},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(ee){expressionsPlugin=ee},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(ee){expressionsInterfaces=ee},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(ee){defaultCurveSegments=ee},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(ee){idPrefix$1=ee};function createNS(ie){return document.createElementNS(svgNS,ie)}function _typeof$5(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(te){return typeof te}:_typeof$5=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$5(ie)}var dataManager=function(){var ie=1,ee=[],te,ne,re={onmessage:function(){},postMessage:function(de){te({data:de})}},se={postMessage:function(de){re.onmessage({data:de})}};function ae(ue){if(window.Worker&&window.Blob&&getWebWorker()){var de=new Blob(["var _workerSelf = self; self.onmessage = ",ue.toString()],{type:"text/javascript"}),ge=URL.createObjectURL(de);return new Worker(ge)}return te=ue,re}function oe(){ne||(ne=ae(function(de){function ge(){function ve(Ue,Ae){var Fe,Te,Ce=Ue.length,Le,Be,st,Xe;for(Te=0;Te<Ce;Te+=1)if(Fe=Ue[Te],"ks"in Fe&&!Fe.completed){if(Fe.completed=!0,Fe.hasMask){var Ge=Fe.masksProperties;for(Be=Ge.length,Le=0;Le<Be;Le+=1)if(Ge[Le].pt.k.i)Se(Ge[Le].pt.k);else for(Xe=Ge[Le].pt.k.length,st=0;st<Xe;st+=1)Ge[Le].pt.k[st].s&&Se(Ge[Le].pt.k[st].s[0]),Ge[Le].pt.k[st].e&&Se(Ge[Le].pt.k[st].e[0])}Fe.ty===0?(Fe.layers=_e(Fe.refId,Ae),ve(Fe.layers,Ae)):Fe.ty===4?xe(Fe.shapes):Fe.ty===5&&ze(Fe)}}function pe(Ue,Ae){if(Ue){var Fe=0,Te=Ue.length;for(Fe=0;Fe<Te;Fe+=1)Ue[Fe].t===1&&(Ue[Fe].data.layers=_e(Ue[Fe].data.refId,Ae),ve(Ue[Fe].data.layers,Ae))}}function ye(Ue,Ae){for(var Fe=0,Te=Ae.length;Fe<Te;){if(Ae[Fe].id===Ue)return Ae[Fe];Fe+=1}return null}function _e(Ue,Ae){var Fe=ye(Ue,Ae);return Fe?Fe.layers.__used?JSON.parse(JSON.stringify(Fe.layers)):(Fe.layers.__used=!0,Fe.layers):null}function xe(Ue){var Ae,Fe=Ue.length,Te,Ce;for(Ae=Fe-1;Ae>=0;Ae-=1)if(Ue[Ae].ty==="sh")if(Ue[Ae].ks.k.i)Se(Ue[Ae].ks.k);else for(Ce=Ue[Ae].ks.k.length,Te=0;Te<Ce;Te+=1)Ue[Ae].ks.k[Te].s&&Se(Ue[Ae].ks.k[Te].s[0]),Ue[Ae].ks.k[Te].e&&Se(Ue[Ae].ks.k[Te].e[0]);else Ue[Ae].ty==="gr"&&xe(Ue[Ae].it)}function Se(Ue){var Ae,Fe=Ue.i.length;for(Ae=0;Ae<Fe;Ae+=1)Ue.i[Ae][0]+=Ue.v[Ae][0],Ue.i[Ae][1]+=Ue.v[Ae][1],Ue.o[Ae][0]+=Ue.v[Ae][0],Ue.o[Ae][1]+=Ue.v[Ae][1]}function be(Ue,Ae){var Fe=Ae?Ae.split("."):[100,100,100];return Ue[0]>Fe[0]?!0:Fe[0]>Ue[0]?!1:Ue[1]>Fe[1]?!0:Fe[1]>Ue[1]?!1:Ue[2]>Fe[2]?!0:Fe[2]>Ue[2]?!1:null}var Ee=function(){var Ue=[4,4,14];function Ae(Te){var Ce=Te.t.d;Te.t.d={k:[{s:Ce,t:0}]}}function Fe(Te){var Ce,Le=Te.length;for(Ce=0;Ce<Le;Ce+=1)Te[Ce].ty===5&&Ae(Te[Ce])}return function(Te){if(be(Ue,Te.v)&&(Fe(Te.layers),Te.assets)){var Ce,Le=Te.assets.length;for(Ce=0;Ce<Le;Ce+=1)Te.assets[Ce].layers&&Fe(Te.assets[Ce].layers)}}}(),Pe=function(){var Ue=[4,7,99];return function(Ae){if(Ae.chars&&!be(Ue,Ae.v)){var Fe,Te=Ae.chars.length;for(Fe=0;Fe<Te;Fe+=1){var Ce=Ae.chars[Fe];Ce.data&&Ce.data.shapes&&(xe(Ce.data.shapes),Ce.data.ip=0,Ce.data.op=99999,Ce.data.st=0,Ce.data.sr=1,Ce.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ae.chars[Fe].t||(Ce.data.shapes.push({ty:"no"}),Ce.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),we=function(){var Ue=[5,7,15];function Ae(Te){var Ce=Te.t.p;typeof Ce.a=="number"&&(Ce.a={a:0,k:Ce.a}),typeof Ce.p=="number"&&(Ce.p={a:0,k:Ce.p}),typeof Ce.r=="number"&&(Ce.r={a:0,k:Ce.r})}function Fe(Te){var Ce,Le=Te.length;for(Ce=0;Ce<Le;Ce+=1)Te[Ce].ty===5&&Ae(Te[Ce])}return function(Te){if(be(Ue,Te.v)&&(Fe(Te.layers),Te.assets)){var Ce,Le=Te.assets.length;for(Ce=0;Ce<Le;Ce+=1)Te.assets[Ce].layers&&Fe(Te.assets[Ce].layers)}}}(),Me=function(){var Ue=[4,1,9];function Ae(Te){var Ce,Le=Te.length,Be,st;for(Ce=0;Ce<Le;Ce+=1)if(Te[Ce].ty==="gr")Ae(Te[Ce].it);else if(Te[Ce].ty==="fl"||Te[Ce].ty==="st")if(Te[Ce].c.k&&Te[Ce].c.k[0].i)for(st=Te[Ce].c.k.length,Be=0;Be<st;Be+=1)Te[Ce].c.k[Be].s&&(Te[Ce].c.k[Be].s[0]/=255,Te[Ce].c.k[Be].s[1]/=255,Te[Ce].c.k[Be].s[2]/=255,Te[Ce].c.k[Be].s[3]/=255),Te[Ce].c.k[Be].e&&(Te[Ce].c.k[Be].e[0]/=255,Te[Ce].c.k[Be].e[1]/=255,Te[Ce].c.k[Be].e[2]/=255,Te[Ce].c.k[Be].e[3]/=255);else Te[Ce].c.k[0]/=255,Te[Ce].c.k[1]/=255,Te[Ce].c.k[2]/=255,Te[Ce].c.k[3]/=255}function Fe(Te){var Ce,Le=Te.length;for(Ce=0;Ce<Le;Ce+=1)Te[Ce].ty===4&&Ae(Te[Ce].shapes)}return function(Te){if(be(Ue,Te.v)&&(Fe(Te.layers),Te.assets)){var Ce,Le=Te.assets.length;for(Ce=0;Ce<Le;Ce+=1)Te.assets[Ce].layers&&Fe(Te.assets[Ce].layers)}}}(),De=function(){var Ue=[4,4,18];function Ae(Te){var Ce,Le=Te.length,Be,st;for(Ce=Le-1;Ce>=0;Ce-=1)if(Te[Ce].ty==="sh")if(Te[Ce].ks.k.i)Te[Ce].ks.k.c=Te[Ce].closed;else for(st=Te[Ce].ks.k.length,Be=0;Be<st;Be+=1)Te[Ce].ks.k[Be].s&&(Te[Ce].ks.k[Be].s[0].c=Te[Ce].closed),Te[Ce].ks.k[Be].e&&(Te[Ce].ks.k[Be].e[0].c=Te[Ce].closed);else Te[Ce].ty==="gr"&&Ae(Te[Ce].it)}function Fe(Te){var Ce,Le,Be=Te.length,st,Xe,Ge,He;for(Le=0;Le<Be;Le+=1){if(Ce=Te[Le],Ce.hasMask){var Je=Ce.masksProperties;for(Xe=Je.length,st=0;st<Xe;st+=1)if(Je[st].pt.k.i)Je[st].pt.k.c=Je[st].cl;else for(He=Je[st].pt.k.length,Ge=0;Ge<He;Ge+=1)Je[st].pt.k[Ge].s&&(Je[st].pt.k[Ge].s[0].c=Je[st].cl),Je[st].pt.k[Ge].e&&(Je[st].pt.k[Ge].e[0].c=Je[st].cl)}Ce.ty===4&&Ae(Ce.shapes)}}return function(Te){if(be(Ue,Te.v)&&(Fe(Te.layers),Te.assets)){var Ce,Le=Te.assets.length;for(Ce=0;Ce<Le;Ce+=1)Te.assets[Ce].layers&&Fe(Te.assets[Ce].layers)}}}();function ke(Ue){Ue.__complete||(Me(Ue),Ee(Ue),Pe(Ue),we(Ue),De(Ue),ve(Ue.layers,Ue.assets),pe(Ue.chars,Ue.assets),Ue.__complete=!0)}function ze(Ue){Ue.t.a.length===0&&"m"in Ue.t.p}var Ve={};return Ve.completeData=ke,Ve.checkColors=Me,Ve.checkChars=Pe,Ve.checkPathProperties=we,Ve.checkShapes=De,Ve.completeLayers=ve,Ve}if(se.dataManager||(se.dataManager=ge()),se.assetLoader||(se.assetLoader=function(){function ve(ye){var _e=ye.getResponseHeader("content-type");return _e&&ye.responseType==="json"&&_e.indexOf("json")!==-1||ye.response&&_typeof$5(ye.response)==="object"?ye.response:ye.response&&typeof ye.response=="string"?JSON.parse(ye.response):ye.responseText?JSON.parse(ye.responseText):null}function pe(ye,_e,xe,Se){var be,Ee=new XMLHttpRequest;try{Ee.responseType="json"}catch{}Ee.onreadystatechange=function(){if(Ee.readyState===4)if(Ee.status===200)be=ve(Ee),xe(be);else try{be=ve(Ee),xe(be)}catch(Pe){Se&&Se(Pe)}};try{Ee.open(["G","E","T"].join(""),ye,!0)}catch{Ee.open(["G","E","T"].join(""),_e+"/"+ye,!0)}Ee.send()}return{load:pe}}()),de.data.type==="loadAnimation")se.assetLoader.load(de.data.path,de.data.fullPath,function(ve){se.dataManager.completeData(ve),se.postMessage({id:de.data.id,payload:ve,status:"success"})},function(){se.postMessage({id:de.data.id,status:"error"})});else if(de.data.type==="complete"){var me=de.data.animation;se.dataManager.completeData(me),se.postMessage({id:de.data.id,payload:me,status:"success"})}else de.data.type==="loadData"&&se.assetLoader.load(de.data.path,de.data.fullPath,function(ve){se.postMessage({id:de.data.id,payload:ve,status:"success"})},function(){se.postMessage({id:de.data.id,status:"error"})})}),ne.onmessage=function(ue){var de=ue.data,ge=de.id,me=ee[ge];ee[ge]=null,de.status==="success"?me.onComplete(de.payload):me.onError&&me.onError()})}function le(ue,de){ie+=1;var ge="processId_"+ie;return ee[ge]={onComplete:ue,onError:de},ge}function ce(ue,de,ge){oe();var me=le(de,ge);ne.postMessage({type:"loadAnimation",path:ue,fullPath:window.location.origin+window.location.pathname,id:me})}function he(ue,de,ge){oe();var me=le(de,ge);ne.postMessage({type:"loadData",path:ue,fullPath:window.location.origin+window.location.pathname,id:me})}function fe(ue,de,ge){oe();var me=le(de,ge);ne.postMessage({type:"complete",animation:ue,id:me})}return{loadAnimation:ce,loadData:he,completeAnimation:fe}}(),ImagePreloader=function(){var ie=function(){var pe=createTag("canvas");pe.width=1,pe.height=1;var ye=pe.getContext("2d");return ye.fillStyle="rgba(0,0,0,0)",ye.fillRect(0,0,1,1),pe}();function ee(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function te(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ne(pe,ye,_e){var xe="";if(pe.e)xe=pe.p;else if(ye){var Se=pe.p;Se.indexOf("images/")!==-1&&(Se=Se.split("/")[1]),xe=ye+Se}else xe=_e,xe+=pe.u?pe.u:"",xe+=pe.p;return xe}function re(pe){var ye=0,_e=setInterval((function(){var xe=pe.getBBox();(xe.width||ye>500)&&(this._imageLoaded(),clearInterval(_e)),ye+=1}).bind(this),50)}function se(pe){var ye=ne(pe,this.assetsPath,this.path),_e=createNS("image");isSafari?this.testImageLoaded(_e):_e.addEventListener("load",this._imageLoaded,!1),_e.addEventListener("error",(function(){xe.img=ie,this._imageLoaded()}).bind(this),!1),_e.setAttributeNS("http://www.w3.org/1999/xlink","href",ye),this._elementHelper.append?this._elementHelper.append(_e):this._elementHelper.appendChild(_e);var xe={img:_e,assetData:pe};return xe}function ae(pe){var ye=ne(pe,this.assetsPath,this.path),_e=createTag("img");_e.crossOrigin="anonymous",_e.addEventListener("load",this._imageLoaded,!1),_e.addEventListener("error",(function(){xe.img=ie,this._imageLoaded()}).bind(this),!1),_e.src=ye;var xe={img:_e,assetData:pe};return xe}function oe(pe){var ye={assetData:pe},_e=ne(pe,this.assetsPath,this.path);return dataManager.loadData(_e,(function(xe){ye.img=xe,this._footageLoaded()}).bind(this),(function(){ye.img={},this._footageLoaded()}).bind(this)),ye}function le(pe,ye){this.imagesLoadedCb=ye;var _e,xe=pe.length;for(_e=0;_e<xe;_e+=1)pe[_e].layers||(!pe[_e].t||pe[_e].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(pe[_e]))):pe[_e].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(pe[_e]))))}function ce(pe){this.path=pe||""}function he(pe){this.assetsPath=pe||""}function fe(pe){for(var ye=0,_e=this.images.length;ye<_e;){if(this.images[ye].assetData===pe)return this.images[ye].img;ye+=1}return null}function ue(){this.imagesLoadedCb=null,this.images.length=0}function de(){return this.totalImages===this.loadedAssets}function ge(){return this.totalFootages===this.loadedFootagesCount}function me(pe,ye){pe==="svg"?(this._elementHelper=ye,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function ve(){this._imageLoaded=ee.bind(this),this._footageLoaded=te.bind(this),this.testImageLoaded=re.bind(this),this.createFootageData=oe.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return ve.prototype={loadAssets:le,setAssetsPath:he,setPath:ce,loadedImages:de,loadedFootages:ge,destroy:ue,getAsset:fe,createImgData:ae,createImageData:se,imageLoaded:ee,footageLoaded:te,setCacheType:me},ve}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(ee,te){if(this._cbs[ee])for(var ne=this._cbs[ee],re=0;re<ne.length;re+=1)ne[re](te)},addEventListener:function(ee,te){return this._cbs[ee]||(this._cbs[ee]=[]),this._cbs[ee].push(te),(function(){this.removeEventListener(ee,te)}).bind(this)},removeEventListener:function(ee,te){if(!te)this._cbs[ee]=null;else if(this._cbs[ee]){for(var ne=0,re=this._cbs[ee].length;ne<re;)this._cbs[ee][ne]===te&&(this._cbs[ee].splice(ne,1),ne-=1,re-=1),ne+=1;this._cbs[ee].length||(this._cbs[ee]=null)}}};var markerParser=function(){function ie(ee){for(var te=ee.split(`\r
`),ne={},re,se=0,ae=0;ae<te.length;ae+=1)re=te[ae].split(":"),re.length===2&&(ne[re[0]]=re[1].trim(),se+=1);if(se===0)throw new Error;return ne}return function(ee){for(var te=[],ne=0;ne<ee.length;ne+=1){var re=ee[ne],se={time:re.tm,duration:re.dr};try{se.payload=JSON.parse(ee[ne].cm)}catch{try{se.payload=ie(ee[ne].cm)}catch{se.payload={name:ee[ne].cm}}}te.push(se)}return te}}(),ProjectInterface=function(){function ie(ee){this.compositions.push(ee)}return function(){function ee(te){for(var ne=0,re=this.compositions.length;ne<re;){if(this.compositions[ne].data&&this.compositions[ne].data.nm===te)return this.compositions[ne].prepareFrame&&this.compositions[ne].data.xt&&this.compositions[ne].prepareFrame(this.currentFrame),this.compositions[ne].compInterface;ne+=1}return null}return ee.compositions=[],ee.currentFrame=0,ee.registerComposition=ie,ee}}(),renderers={},registerRenderer=function(ee,te){renderers[ee]=te};function getRenderer(ie){return renderers[ie]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var ie in renderers)if(renderers[ie])return ie;return""}function _typeof$4(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(te){return typeof te}:_typeof$4=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$4(ie)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(ie){(ie.wrapper||ie.container)&&(this.wrapper=ie.wrapper||ie.container);var ee="svg";ie.animType?ee=ie.animType:ie.renderer&&(ee=ie.renderer);var te=getRenderer(ee);this.renderer=new te(this,ie.rendererSettings),this.imagePreloader.setCacheType(ee,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=ee,ie.loop===""||ie.loop===null||ie.loop===void 0||ie.loop===!0?this.loop=!0:ie.loop===!1?this.loop=!1:this.loop=parseInt(ie.loop,10),this.autoplay="autoplay"in ie?ie.autoplay:!0,this.name=ie.name?ie.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(ie,"autoloadSegments")?ie.autoloadSegments:!0,this.assetsPath=ie.assetsPath,this.initialSegment=ie.initialSegment,ie.audioFactory&&this.audioController.setAudioFactory(ie.audioFactory),ie.animationData?this.setupAnimation(ie.animationData):ie.path&&(ie.path.lastIndexOf("\\")!==-1?this.path=ie.path.substr(0,ie.path.lastIndexOf("\\")+1):this.path=ie.path.substr(0,ie.path.lastIndexOf("/")+1),this.fileName=ie.path.substr(ie.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(ie.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(ie){dataManager.completeAnimation(ie,this.configAnimation)},AnimationItem.prototype.setData=function(ie,ee){ee&&_typeof$4(ee)!=="object"&&(ee=JSON.parse(ee));var te={wrapper:ie,animationData:ee},ne=ie.attributes;te.path=ne.getNamedItem("data-animation-path")?ne.getNamedItem("data-animation-path").value:ne.getNamedItem("data-bm-path")?ne.getNamedItem("data-bm-path").value:ne.getNamedItem("bm-path")?ne.getNamedItem("bm-path").value:"",te.animType=ne.getNamedItem("data-anim-type")?ne.getNamedItem("data-anim-type").value:ne.getNamedItem("data-bm-type")?ne.getNamedItem("data-bm-type").value:ne.getNamedItem("bm-type")?ne.getNamedItem("bm-type").value:ne.getNamedItem("data-bm-renderer")?ne.getNamedItem("data-bm-renderer").value:ne.getNamedItem("bm-renderer")?ne.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var re=ne.getNamedItem("data-anim-loop")?ne.getNamedItem("data-anim-loop").value:ne.getNamedItem("data-bm-loop")?ne.getNamedItem("data-bm-loop").value:ne.getNamedItem("bm-loop")?ne.getNamedItem("bm-loop").value:"";re==="false"?te.loop=!1:re==="true"?te.loop=!0:re!==""&&(te.loop=parseInt(re,10));var se=ne.getNamedItem("data-anim-autoplay")?ne.getNamedItem("data-anim-autoplay").value:ne.getNamedItem("data-bm-autoplay")?ne.getNamedItem("data-bm-autoplay").value:ne.getNamedItem("bm-autoplay")?ne.getNamedItem("bm-autoplay").value:!0;te.autoplay=se!=="false",te.name=ne.getNamedItem("data-name")?ne.getNamedItem("data-name").value:ne.getNamedItem("data-bm-name")?ne.getNamedItem("data-bm-name").value:ne.getNamedItem("bm-name")?ne.getNamedItem("bm-name").value:"";var ae=ne.getNamedItem("data-anim-prerender")?ne.getNamedItem("data-anim-prerender").value:ne.getNamedItem("data-bm-prerender")?ne.getNamedItem("data-bm-prerender").value:ne.getNamedItem("bm-prerender")?ne.getNamedItem("bm-prerender").value:"";ae==="false"&&(te.prerender=!1),te.path?this.setParams(te):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(ie){ie.op>this.animationData.op&&(this.animationData.op=ie.op,this.totalFrames=Math.floor(ie.op-this.animationData.ip));var ee=this.animationData.layers,te,ne=ee.length,re=ie.layers,se,ae=re.length;for(se=0;se<ae;se+=1)for(te=0;te<ne;){if(ee[te].id===re[se].id){ee[te]=re[se];break}te+=1}if((ie.chars||ie.fonts)&&(this.renderer.globalData.fontManager.addChars(ie.chars),this.renderer.globalData.fontManager.addFonts(ie.fonts,this.renderer.globalData.defs)),ie.assets)for(ne=ie.assets.length,te=0;te<ne;te+=1)this.animationData.assets.push(ie.assets[te]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(ie){this.animationData=ie;var ee=getExpressionsPlugin();ee&&ee.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var ie=this.animationData.segments;if(!ie||ie.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var ee=ie.shift();this.timeCompleted=ee.time*this.frameRate;var te=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(te,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var ie=this.animationData.segments;ie||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(ie){if(this.renderer)try{this.animationData=ie,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(ie),ie.assets||(ie.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(ie.assets),this.markers=markerParser(ie.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(ee){this.triggerConfigError(ee)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var ie=getExpressionsPlugin();ie&&ie.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(ie,ee){var te=typeof ie=="number"?ie:void 0,ne=typeof ee=="number"?ee:void 0;this.renderer.updateContainerSize(te,ne)},AnimationItem.prototype.setSubframe=function(ie){this.isSubframeEnabled=!!ie},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(ie){this.triggerRenderFrameError(ie)}},AnimationItem.prototype.play=function(ie){ie&&this.name!==ie||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(ie){ie&&this.name!==ie||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(ie){ie&&this.name!==ie||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(ie){ie&&this.name!==ie||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(ie){for(var ee,te=0;te<this.markers.length;te+=1)if(ee=this.markers[te],ee.payload&&ee.payload.name===ie)return ee;return null},AnimationItem.prototype.goToAndStop=function(ie,ee,te){if(!(te&&this.name!==te)){var ne=Number(ie);if(isNaN(ne)){var re=this.getMarkerData(ie);re&&this.goToAndStop(re.time,!0)}else ee?this.setCurrentRawFrameValue(ie):this.setCurrentRawFrameValue(ie*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(ie,ee,te){if(!(te&&this.name!==te)){var ne=Number(ie);if(isNaN(ne)){var re=this.getMarkerData(ie);re&&(re.duration?this.playSegments([re.time,re.time+re.duration],!0):this.goToAndStop(re.time,!0))}else this.goToAndStop(ne,ee,te);this.play()}},AnimationItem.prototype.advanceTime=function(ie){if(!(this.isPaused===!0||this.isLoaded===!1)){var ee=this.currentRawFrame+ie*this.frameModifier,te=!1;ee>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(ee>this.totalFrames?ee%this.totalFrames:0)||(te=!0,ee=this.totalFrames-1):ee>=this.totalFrames?(this.playCount+=1,this.checkSegments(ee%this.totalFrames)||(this.setCurrentRawFrameValue(ee%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(ee):ee<0?this.checkSegments(ee%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+ee%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(te=!0,ee=0)):this.setCurrentRawFrameValue(ee),te&&(this.setCurrentRawFrameValue(ee),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(ie,ee){this.playCount=0,ie[1]<ie[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=ie[0]-ie[1],this.timeCompleted=this.totalFrames,this.firstFrame=ie[1],this.setCurrentRawFrameValue(this.totalFrames-.001-ee)):ie[1]>ie[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=ie[1]-ie[0],this.timeCompleted=this.totalFrames,this.firstFrame=ie[0],this.setCurrentRawFrameValue(.001+ee)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(ie,ee){var te=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<ie?te=ie:this.currentRawFrame+this.firstFrame>ee&&(te=ee-ie)),this.firstFrame=ie,this.totalFrames=ee-ie,this.timeCompleted=this.totalFrames,te!==-1&&this.goToAndStop(te,!0)},AnimationItem.prototype.playSegments=function(ie,ee){if(ee&&(this.segments.length=0),_typeof$4(ie[0])==="object"){var te,ne=ie.length;for(te=0;te<ne;te+=1)this.segments.push(ie[te])}else this.segments.push(ie);this.segments.length&&ee&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(ie){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),ie&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(ie){return this.segments.length?(this.adjustSegment(this.segments.shift(),ie),!0):!1},AnimationItem.prototype.destroy=function(ie){ie&&this.name!==ie||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(ie){this.currentRawFrame=ie,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(ie){this.playSpeed=ie,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(ie){this.playDirection=ie<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(ie){this.loop=ie},AnimationItem.prototype.setVolume=function(ie,ee){ee&&this.name!==ee||this.audioController.setVolume(ie)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(ie){ie&&this.name!==ie||this.audioController.mute()},AnimationItem.prototype.unmute=function(ie){ie&&this.name!==ie||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(ie){var ee="";if(ie.e)ee=ie.p;else if(this.assetsPath){var te=ie.p;te.indexOf("images/")!==-1&&(te=te.split("/")[1]),ee=this.assetsPath+te}else ee=this.path,ee+=ie.u?ie.u:"",ee+=ie.p;return ee},AnimationItem.prototype.getAssetData=function(ie){for(var ee=0,te=this.assets.length;ee<te;){if(ie===this.assets[ee].id)return this.assets[ee];ee+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(ie){return ie?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(ie,ee,te){try{var ne=this.renderer.getElementByPath(ie);ne.updateDocumentData(ee,te)}catch{}},AnimationItem.prototype.trigger=function(ie){if(this._cbs&&this._cbs[ie])switch(ie){case"enterFrame":this.triggerEvent(ie,new BMEnterFrameEvent(ie,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(ie,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(ie,new BMCompleteLoopEvent(ie,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(ie,new BMCompleteEvent(ie,this.frameMult));break;case"segmentStart":this.triggerEvent(ie,new BMSegmentStartEvent(ie,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(ie,new BMDestroyEvent(ie,this));break;default:this.triggerEvent(ie)}ie==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(ie,this.currentFrame,this.totalFrames,this.frameMult)),ie==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(ie,this.loop,this.playCount,this.frameMult)),ie==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(ie,this.frameMult)),ie==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(ie,this.firstFrame,this.totalFrames)),ie==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(ie,this))},AnimationItem.prototype.triggerRenderFrameError=function(ie){var ee=new BMRenderFrameErrorEvent(ie,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)},AnimationItem.prototype.triggerConfigError=function(ie){var ee=new BMConfigErrorEvent(ie,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)};var animationManager=function(){var ie={},ee=[],te=0,ne=0,re=0,se=!0,ae=!1;function oe(Ae){for(var Fe=0,Te=Ae.target;Fe<ne;)ee[Fe].animation===Te&&(ee.splice(Fe,1),Fe-=1,ne-=1,Te.isPaused||fe()),Fe+=1}function le(Ae,Fe){if(!Ae)return null;for(var Te=0;Te<ne;){if(ee[Te].elem===Ae&&ee[Te].elem!==null)return ee[Te].animation;Te+=1}var Ce=new AnimationItem;return ue(Ce,Ae),Ce.setData(Ae,Fe),Ce}function ce(){var Ae,Fe=ee.length,Te=[];for(Ae=0;Ae<Fe;Ae+=1)Te.push(ee[Ae].animation);return Te}function he(){re+=1,Me()}function fe(){re-=1}function ue(Ae,Fe){Ae.addEventListener("destroy",oe),Ae.addEventListener("_active",he),Ae.addEventListener("_idle",fe),ee.push({elem:Fe,animation:Ae}),ne+=1}function de(Ae){var Fe=new AnimationItem;return ue(Fe,null),Fe.setParams(Ae),Fe}function ge(Ae,Fe){var Te;for(Te=0;Te<ne;Te+=1)ee[Te].animation.setSpeed(Ae,Fe)}function me(Ae,Fe){var Te;for(Te=0;Te<ne;Te+=1)ee[Te].animation.setDirection(Ae,Fe)}function ve(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.play(Ae)}function pe(Ae){var Fe=Ae-te,Te;for(Te=0;Te<ne;Te+=1)ee[Te].animation.advanceTime(Fe);te=Ae,re&&!ae?window.requestAnimationFrame(pe):se=!0}function ye(Ae){te=Ae,window.requestAnimationFrame(pe)}function _e(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.pause(Ae)}function xe(Ae,Fe,Te){var Ce;for(Ce=0;Ce<ne;Ce+=1)ee[Ce].animation.goToAndStop(Ae,Fe,Te)}function Se(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.stop(Ae)}function be(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.togglePause(Ae)}function Ee(Ae){var Fe;for(Fe=ne-1;Fe>=0;Fe-=1)ee[Fe].animation.destroy(Ae)}function Pe(Ae,Fe,Te){var Ce=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Le,Be=Ce.length;for(Le=0;Le<Be;Le+=1)Te&&Ce[Le].setAttribute("data-bm-type",Te),le(Ce[Le],Ae);if(Fe&&Be===0){Te||(Te="svg");var st=document.getElementsByTagName("body")[0];st.innerText="";var Xe=createTag("div");Xe.style.width="100%",Xe.style.height="100%",Xe.setAttribute("data-bm-type",Te),st.appendChild(Xe),le(Xe,Ae)}}function we(){var Ae;for(Ae=0;Ae<ne;Ae+=1)ee[Ae].animation.resize()}function Me(){!ae&&re&&se&&(window.requestAnimationFrame(ye),se=!1)}function De(){ae=!0}function ke(){ae=!1,Me()}function ze(Ae,Fe){var Te;for(Te=0;Te<ne;Te+=1)ee[Te].animation.setVolume(Ae,Fe)}function Ve(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.mute(Ae)}function Ue(Ae){var Fe;for(Fe=0;Fe<ne;Fe+=1)ee[Fe].animation.unmute(Ae)}return ie.registerAnimation=le,ie.loadAnimation=de,ie.setSpeed=ge,ie.setDirection=me,ie.play=ve,ie.pause=_e,ie.stop=Se,ie.togglePause=be,ie.searchAnimations=Pe,ie.resize=we,ie.goToAndStop=xe,ie.destroy=Ee,ie.freeze=De,ie.unfreeze=ke,ie.setVolume=ze,ie.mute=Ve,ie.unmute=Ue,ie.getRegisteredAnimations=ce,ie}(),BezierFactory=function(){var ie={};ie.getBezierEasing=te;var ee={};function te(ye,_e,xe,Se,be){var Ee=be||("bez_"+ye+"_"+_e+"_"+xe+"_"+Se).replace(/\./g,"p");if(ee[Ee])return ee[Ee];var Pe=new pe([ye,_e,xe,Se]);return ee[Ee]=Pe,Pe}var ne=4,re=.001,se=1e-7,ae=10,oe=11,le=1/(oe-1),ce=typeof Float32Array=="function";function he(ye,_e){return 1-3*_e+3*ye}function fe(ye,_e){return 3*_e-6*ye}function ue(ye){return 3*ye}function de(ye,_e,xe){return((he(_e,xe)*ye+fe(_e,xe))*ye+ue(_e))*ye}function ge(ye,_e,xe){return 3*he(_e,xe)*ye*ye+2*fe(_e,xe)*ye+ue(_e)}function me(ye,_e,xe,Se,be){var Ee,Pe,we=0;do Pe=_e+(xe-_e)/2,Ee=de(Pe,Se,be)-ye,Ee>0?xe=Pe:_e=Pe;while(Math.abs(Ee)>se&&++we<ae);return Pe}function ve(ye,_e,xe,Se){for(var be=0;be<ne;++be){var Ee=ge(_e,xe,Se);if(Ee===0)return _e;var Pe=de(_e,xe,Se)-ye;_e-=Pe/Ee}return _e}function pe(ye){this._p=ye,this._mSampleValues=ce?new Float32Array(oe):new Array(oe),this._precomputed=!1,this.get=this.get.bind(this)}return pe.prototype={get:function(_e){var xe=this._p[0],Se=this._p[1],be=this._p[2],Ee=this._p[3];return this._precomputed||this._precompute(),xe===Se&&be===Ee?_e:_e===0?0:_e===1?1:de(this._getTForX(_e),Se,Ee)},_precompute:function(){var _e=this._p[0],xe=this._p[1],Se=this._p[2],be=this._p[3];this._precomputed=!0,(_e!==xe||Se!==be)&&this._calcSampleValues()},_calcSampleValues:function(){for(var _e=this._p[0],xe=this._p[2],Se=0;Se<oe;++Se)this._mSampleValues[Se]=de(Se*le,_e,xe)},_getTForX:function(_e){for(var xe=this._p[0],Se=this._p[2],be=this._mSampleValues,Ee=0,Pe=1,we=oe-1;Pe!==we&&be[Pe]<=_e;++Pe)Ee+=le;--Pe;var Me=(_e-be[Pe])/(be[Pe+1]-be[Pe]),De=Ee+Me*le,ke=ge(De,xe,Se);return ke>=re?ve(_e,De,xe,Se):ke===0?De:me(_e,Ee,Ee+le,xe,Se)}},ie}(),pooling=function(){function ie(ee){return ee.concat(createSizedArray(ee.length))}return{double:ie}}(),poolFactory=function(){return function(ie,ee,te){var ne=0,re=ie,se=createSizedArray(re),ae={newElement:oe,release:le};function oe(){var ce;return ne?(ne-=1,ce=se[ne]):ce=ee(),ce}function le(ce){ne===re&&(se=pooling.double(se),re*=2),te&&te(ce),se[ne]=ce,ne+=1}return ae}}(),bezierLengthPool=function(){function ie(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,ie)}(),segmentsLengthPool=function(){function ie(){return{lengths:[],totalLength:0}}function ee(te){var ne,re=te.lengths.length;for(ne=0;ne<re;ne+=1)bezierLengthPool.release(te.lengths[ne]);te.lengths.length=0}return poolFactory(8,ie,ee)}();function bezFunction(){var ie=Math;function ee(ue,de,ge,me,ve,pe){var ye=ue*me+de*ve+ge*pe-ve*me-pe*ue-ge*de;return ye>-.001&&ye<.001}function te(ue,de,ge,me,ve,pe,ye,_e,xe){if(ge===0&&pe===0&&xe===0)return ee(ue,de,me,ve,ye,_e);var Se=ie.sqrt(ie.pow(me-ue,2)+ie.pow(ve-de,2)+ie.pow(pe-ge,2)),be=ie.sqrt(ie.pow(ye-ue,2)+ie.pow(_e-de,2)+ie.pow(xe-ge,2)),Ee=ie.sqrt(ie.pow(ye-me,2)+ie.pow(_e-ve,2)+ie.pow(xe-pe,2)),Pe;return Se>be?Se>Ee?Pe=Se-be-Ee:Pe=Ee-be-Se:Ee>be?Pe=Ee-be-Se:Pe=be-Se-Ee,Pe>-1e-4&&Pe<1e-4}var ne=function(){return function(ue,de,ge,me){var ve=getDefaultCurveSegments(),pe,ye,_e,xe,Se,be=0,Ee,Pe=[],we=[],Me=bezierLengthPool.newElement();for(_e=ge.length,pe=0;pe<ve;pe+=1){for(Se=pe/(ve-1),Ee=0,ye=0;ye<_e;ye+=1)xe=bmPow(1-Se,3)*ue[ye]+3*bmPow(1-Se,2)*Se*ge[ye]+3*(1-Se)*bmPow(Se,2)*me[ye]+bmPow(Se,3)*de[ye],Pe[ye]=xe,we[ye]!==null&&(Ee+=bmPow(Pe[ye]-we[ye],2)),we[ye]=Pe[ye];Ee&&(Ee=bmSqrt(Ee),be+=Ee),Me.percents[pe]=Se,Me.lengths[pe]=be}return Me.addedLength=be,Me}}();function re(ue){var de=segmentsLengthPool.newElement(),ge=ue.c,me=ue.v,ve=ue.o,pe=ue.i,ye,_e=ue._length,xe=de.lengths,Se=0;for(ye=0;ye<_e-1;ye+=1)xe[ye]=ne(me[ye],me[ye+1],ve[ye],pe[ye+1]),Se+=xe[ye].addedLength;return ge&&_e&&(xe[ye]=ne(me[ye],me[0],ve[ye],pe[0]),Se+=xe[ye].addedLength),de.totalLength=Se,de}function se(ue){this.segmentLength=0,this.points=new Array(ue)}function ae(ue,de){this.partialLength=ue,this.point=de}var oe=function(){var ue={};return function(de,ge,me,ve){var pe=(de[0]+"_"+de[1]+"_"+ge[0]+"_"+ge[1]+"_"+me[0]+"_"+me[1]+"_"+ve[0]+"_"+ve[1]).replace(/\./g,"p");if(!ue[pe]){var ye=getDefaultCurveSegments(),_e,xe,Se,be,Ee,Pe=0,we,Me,De=null;de.length===2&&(de[0]!==ge[0]||de[1]!==ge[1])&&ee(de[0],de[1],ge[0],ge[1],de[0]+me[0],de[1]+me[1])&&ee(de[0],de[1],ge[0],ge[1],ge[0]+ve[0],ge[1]+ve[1])&&(ye=2);var ke=new se(ye);for(Se=me.length,_e=0;_e<ye;_e+=1){for(Me=createSizedArray(Se),Ee=_e/(ye-1),we=0,xe=0;xe<Se;xe+=1)be=bmPow(1-Ee,3)*de[xe]+3*bmPow(1-Ee,2)*Ee*(de[xe]+me[xe])+3*(1-Ee)*bmPow(Ee,2)*(ge[xe]+ve[xe])+bmPow(Ee,3)*ge[xe],Me[xe]=be,De!==null&&(we+=bmPow(Me[xe]-De[xe],2));we=bmSqrt(we),Pe+=we,ke.points[_e]=new ae(we,Me),De=Me}ke.segmentLength=Pe,ue[pe]=ke}return ue[pe]}}();function le(ue,de){var ge=de.percents,me=de.lengths,ve=ge.length,pe=bmFloor((ve-1)*ue),ye=ue*de.addedLength,_e=0;if(pe===ve-1||pe===0||ye===me[pe])return ge[pe];for(var xe=me[pe]>ye?-1:1,Se=!0;Se;)if(me[pe]<=ye&&me[pe+1]>ye?(_e=(ye-me[pe])/(me[pe+1]-me[pe]),Se=!1):pe+=xe,pe<0||pe>=ve-1){if(pe===ve-1)return ge[pe];Se=!1}return ge[pe]+(ge[pe+1]-ge[pe])*_e}function ce(ue,de,ge,me,ve,pe){var ye=le(ve,pe),_e=1-ye,xe=ie.round((_e*_e*_e*ue[0]+(ye*_e*_e+_e*ye*_e+_e*_e*ye)*ge[0]+(ye*ye*_e+_e*ye*ye+ye*_e*ye)*me[0]+ye*ye*ye*de[0])*1e3)/1e3,Se=ie.round((_e*_e*_e*ue[1]+(ye*_e*_e+_e*ye*_e+_e*_e*ye)*ge[1]+(ye*ye*_e+_e*ye*ye+ye*_e*ye)*me[1]+ye*ye*ye*de[1])*1e3)/1e3;return[xe,Se]}var he=createTypedArray("float32",8);function fe(ue,de,ge,me,ve,pe,ye){ve<0?ve=0:ve>1&&(ve=1);var _e=le(ve,ye);pe=pe>1?1:pe;var xe=le(pe,ye),Se,be=ue.length,Ee=1-_e,Pe=1-xe,we=Ee*Ee*Ee,Me=_e*Ee*Ee*3,De=_e*_e*Ee*3,ke=_e*_e*_e,ze=Ee*Ee*Pe,Ve=_e*Ee*Pe+Ee*_e*Pe+Ee*Ee*xe,Ue=_e*_e*Pe+Ee*_e*xe+_e*Ee*xe,Ae=_e*_e*xe,Fe=Ee*Pe*Pe,Te=_e*Pe*Pe+Ee*xe*Pe+Ee*Pe*xe,Ce=_e*xe*Pe+Ee*xe*xe+_e*Pe*xe,Le=_e*xe*xe,Be=Pe*Pe*Pe,st=xe*Pe*Pe+Pe*xe*Pe+Pe*Pe*xe,Xe=xe*xe*Pe+Pe*xe*xe+xe*Pe*xe,Ge=xe*xe*xe;for(Se=0;Se<be;Se+=1)he[Se*4]=ie.round((we*ue[Se]+Me*ge[Se]+De*me[Se]+ke*de[Se])*1e3)/1e3,he[Se*4+1]=ie.round((ze*ue[Se]+Ve*ge[Se]+Ue*me[Se]+Ae*de[Se])*1e3)/1e3,he[Se*4+2]=ie.round((Fe*ue[Se]+Te*ge[Se]+Ce*me[Se]+Le*de[Se])*1e3)/1e3,he[Se*4+3]=ie.round((Be*ue[Se]+st*ge[Se]+Xe*me[Se]+Ge*de[Se])*1e3)/1e3;return he}return{getSegmentsLength:re,getNewSegment:fe,getPointInSegment:ce,buildBezierData:oe,pointOnLine2D:ee,pointOnLine3D:te}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(ie,ee){var te=this.offsetTime,ne;this.propType==="multidimensional"&&(ne=createTypedArray("float32",this.pv.length));for(var re=ee.lastIndex,se=re,ae=this.keyframes.length-1,oe=!0,le,ce,he;oe;){if(le=this.keyframes[se],ce=this.keyframes[se+1],se===ae-1&&ie>=ce.t-te){le.h&&(le=ce),re=0;break}if(ce.t-te>ie){re=se;break}se<ae-1?se+=1:(re=0,oe=!1)}he=this.keyframesMetadata[se]||{};var fe,ue,de,ge,me,ve,pe=ce.t-te,ye=le.t-te,_e;if(le.to){he.bezierData||(he.bezierData=bez.buildBezierData(le.s,ce.s||le.e,le.to,le.ti));var xe=he.bezierData;if(ie>=pe||ie<ye){var Se=ie>=pe?xe.points.length-1:0;for(ue=xe.points[Se].point.length,fe=0;fe<ue;fe+=1)ne[fe]=xe.points[Se].point[fe]}else{he.__fnct?ve=he.__fnct:(ve=BezierFactory.getBezierEasing(le.o.x,le.o.y,le.i.x,le.i.y,le.n).get,he.__fnct=ve),de=ve((ie-ye)/(pe-ye));var be=xe.segmentLength*de,Ee,Pe=ee.lastFrame<ie&&ee._lastKeyframeIndex===se?ee._lastAddedLength:0;for(me=ee.lastFrame<ie&&ee._lastKeyframeIndex===se?ee._lastPoint:0,oe=!0,ge=xe.points.length;oe;){if(Pe+=xe.points[me].partialLength,be===0||de===0||me===xe.points.length-1){for(ue=xe.points[me].point.length,fe=0;fe<ue;fe+=1)ne[fe]=xe.points[me].point[fe];break}else if(be>=Pe&&be<Pe+xe.points[me+1].partialLength){for(Ee=(be-Pe)/xe.points[me+1].partialLength,ue=xe.points[me].point.length,fe=0;fe<ue;fe+=1)ne[fe]=xe.points[me].point[fe]+(xe.points[me+1].point[fe]-xe.points[me].point[fe])*Ee;break}me<ge-1?me+=1:oe=!1}ee._lastPoint=me,ee._lastAddedLength=Pe-xe.points[me].partialLength,ee._lastKeyframeIndex=se}}else{var we,Me,De,ke,ze;if(ae=le.s.length,_e=ce.s||le.e,this.sh&&le.h!==1)if(ie>=pe)ne[0]=_e[0],ne[1]=_e[1],ne[2]=_e[2];else if(ie<=ye)ne[0]=le.s[0],ne[1]=le.s[1],ne[2]=le.s[2];else{var Ve=createQuaternion(le.s),Ue=createQuaternion(_e),Ae=(ie-ye)/(pe-ye);quaternionToEuler(ne,slerp(Ve,Ue,Ae))}else for(se=0;se<ae;se+=1)le.h!==1&&(ie>=pe?de=1:ie<ye?de=0:(le.o.x.constructor===Array?(he.__fnct||(he.__fnct=[]),he.__fnct[se]?ve=he.__fnct[se]:(we=le.o.x[se]===void 0?le.o.x[0]:le.o.x[se],Me=le.o.y[se]===void 0?le.o.y[0]:le.o.y[se],De=le.i.x[se]===void 0?le.i.x[0]:le.i.x[se],ke=le.i.y[se]===void 0?le.i.y[0]:le.i.y[se],ve=BezierFactory.getBezierEasing(we,Me,De,ke).get,he.__fnct[se]=ve)):he.__fnct?ve=he.__fnct:(we=le.o.x,Me=le.o.y,De=le.i.x,ke=le.i.y,ve=BezierFactory.getBezierEasing(we,Me,De,ke).get,le.keyframeMetadata=ve),de=ve((ie-ye)/(pe-ye)))),_e=ce.s||le.e,ze=le.h===1?le.s[se]:le.s[se]+(_e[se]-le.s[se])*de,this.propType==="multidimensional"?ne[se]=ze:ne=ze}return ee.lastIndex=re,ne}function slerp(ie,ee,te){var ne=[],re=ie[0],se=ie[1],ae=ie[2],oe=ie[3],le=ee[0],ce=ee[1],he=ee[2],fe=ee[3],ue,de,ge,me,ve;return de=re*le+se*ce+ae*he+oe*fe,de<0&&(de=-de,le=-le,ce=-ce,he=-he,fe=-fe),1-de>1e-6?(ue=Math.acos(de),ge=Math.sin(ue),me=Math.sin((1-te)*ue)/ge,ve=Math.sin(te*ue)/ge):(me=1-te,ve=te),ne[0]=me*re+ve*le,ne[1]=me*se+ve*ce,ne[2]=me*ae+ve*he,ne[3]=me*oe+ve*fe,ne}function quaternionToEuler(ie,ee){var te=ee[0],ne=ee[1],re=ee[2],se=ee[3],ae=Math.atan2(2*ne*se-2*te*re,1-2*ne*ne-2*re*re),oe=Math.asin(2*te*ne+2*re*se),le=Math.atan2(2*te*se-2*ne*re,1-2*te*te-2*re*re);ie[0]=ae/degToRads,ie[1]=oe/degToRads,ie[2]=le/degToRads}function createQuaternion(ie){var ee=ie[0]*degToRads,te=ie[1]*degToRads,ne=ie[2]*degToRads,re=Math.cos(ee/2),se=Math.cos(te/2),ae=Math.cos(ne/2),oe=Math.sin(ee/2),le=Math.sin(te/2),ce=Math.sin(ne/2),he=re*se*ae-oe*le*ce,fe=oe*le*ae+re*se*ce,ue=oe*se*ae+re*le*ce,de=re*le*ae-oe*se*ce;return[fe,ue,de,he]}function getValueAtCurrentTime(){var ie=this.comp.renderedFrame-this.offsetTime,ee=this.keyframes[0].t-this.offsetTime,te=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(ie===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=te&&ie>=te||this._caching.lastFrame<ee&&ie<ee))){this._caching.lastFrame>=ie&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ne=this.interpolateValue(ie,this._caching);this.pv=ne}return this._caching.lastFrame=ie,this.pv}function setVValue(ie){var ee;if(this.propType==="unidimensional")ee=ie*this.mult,mathAbs(this.v-ee)>1e-5&&(this.v=ee,this._mdf=!0);else for(var te=0,ne=this.v.length;te<ne;)ee=ie[te]*this.mult,mathAbs(this.v[te]-ee)>1e-5&&(this.v[te]=ee,this._mdf=!0),te+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var ie,ee=this.effectsSequence.length,te=this.kf?this.pv:this.data.k;for(ie=0;ie<ee;ie+=1)te=this.effectsSequence[ie](te);this.setVValue(te),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(ie){this.effectsSequence.push(ie),this.container.addDynamicProperty(this)}function ValueProperty(ie,ee,te,ne){this.propType="unidimensional",this.mult=te||1,this.data=ee,this.v=te?ee.k*te:ee.k,this.pv=ee.k,this._mdf=!1,this.elem=ie,this.container=ne,this.comp=ie.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(ie,ee,te,ne){this.propType="multidimensional",this.mult=te||1,this.data=ee,this._mdf=!1,this.elem=ie,this.container=ne,this.comp=ie.comp,this.k=!1,this.kf=!1,this.frameId=-1;var re,se=ee.k.length;for(this.v=createTypedArray("float32",se),this.pv=createTypedArray("float32",se),this.vel=createTypedArray("float32",se),re=0;re<se;re+=1)this.v[re]=ee.k[re]*this.mult,this.pv[re]=ee.k[re];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(ie,ee,te,ne){this.propType="unidimensional",this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=ie.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=ee,this.mult=te||1,this.elem=ie,this.container=ne,this.comp=ie.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(ie,ee,te,ne){this.propType="multidimensional";var re,se=ee.k.length,ae,oe,le,ce;for(re=0;re<se-1;re+=1)ee.k[re].to&&ee.k[re].s&&ee.k[re+1]&&ee.k[re+1].s&&(ae=ee.k[re].s,oe=ee.k[re+1].s,le=ee.k[re].to,ce=ee.k[re].ti,(ae.length===2&&!(ae[0]===oe[0]&&ae[1]===oe[1])&&bez.pointOnLine2D(ae[0],ae[1],oe[0],oe[1],ae[0]+le[0],ae[1]+le[1])&&bez.pointOnLine2D(ae[0],ae[1],oe[0],oe[1],oe[0]+ce[0],oe[1]+ce[1])||ae.length===3&&!(ae[0]===oe[0]&&ae[1]===oe[1]&&ae[2]===oe[2])&&bez.pointOnLine3D(ae[0],ae[1],ae[2],oe[0],oe[1],oe[2],ae[0]+le[0],ae[1]+le[1],ae[2]+le[2])&&bez.pointOnLine3D(ae[0],ae[1],ae[2],oe[0],oe[1],oe[2],oe[0]+ce[0],oe[1]+ce[1],oe[2]+ce[2]))&&(ee.k[re].to=null,ee.k[re].ti=null),ae[0]===oe[0]&&ae[1]===oe[1]&&le[0]===0&&le[1]===0&&ce[0]===0&&ce[1]===0&&(ae.length===2||ae[2]===oe[2]&&le[2]===0&&ce[2]===0)&&(ee.k[re].to=null,ee.k[re].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=ee,this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=ie.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=te||1,this.elem=ie,this.container=ne,this.comp=ie.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var he=ee.k[0].s.length;for(this.v=createTypedArray("float32",he),this.pv=createTypedArray("float32",he),re=0;re<he;re+=1)this.v[re]=initFrame,this.pv[re]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",he)},this.addEffect=addEffect}var PropertyFactory=function(){function ie(te,ne,re,se,ae){ne.sid&&(ne=te.globalData.slotManager.getProp(ne));var oe;if(!ne.k.length)oe=new ValueProperty(te,ne,se,ae);else if(typeof ne.k[0]=="number")oe=new MultiDimensionalProperty(te,ne,se,ae);else switch(re){case 0:oe=new KeyframedValueProperty(te,ne,se,ae);break;case 1:oe=new KeyframedMultidimensionalProperty(te,ne,se,ae);break}return oe.effectsSequence.length&&ae.addDynamicProperty(oe),oe}var ee={getProp:ie};return ee}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&(this.dynamicProperties.push(ee),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var ee,te=this.dynamicProperties.length;for(ee=0;ee<te;ee+=1)this.dynamicProperties[ee].getValue(),this.dynamicProperties[ee]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(ee){this.container=ee,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function ie(){return createTypedArray("float32",2)}return poolFactory(8,ie)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(ie,ee){this.c=ie,this.setLength(ee);for(var te=0;te<ee;)this.v[te]=pointPool.newElement(),this.o[te]=pointPool.newElement(),this.i[te]=pointPool.newElement(),te+=1},ShapePath.prototype.setLength=function(ie){for(;this._maxLength<ie;)this.doubleArrayLength();this._length=ie},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(ie,ee,te,ne,re){var se;switch(this._length=Math.max(this._length,ne+1),this._length>=this._maxLength&&this.doubleArrayLength(),te){case"v":se=this.v;break;case"i":se=this.i;break;case"o":se=this.o;break;default:se=[];break}(!se[ne]||se[ne]&&!re)&&(se[ne]=pointPool.newElement()),se[ne][0]=ie,se[ne][1]=ee},ShapePath.prototype.setTripleAt=function(ie,ee,te,ne,re,se,ae,oe){this.setXYAt(ie,ee,"v",ae,oe),this.setXYAt(te,ne,"o",ae,oe),this.setXYAt(re,se,"i",ae,oe)},ShapePath.prototype.reverse=function(){var ie=new ShapePath;ie.setPathData(this.c,this._length);var ee=this.v,te=this.o,ne=this.i,re=0;this.c&&(ie.setTripleAt(ee[0][0],ee[0][1],ne[0][0],ne[0][1],te[0][0],te[0][1],0,!1),re=1);var se=this._length-1,ae=this._length,oe;for(oe=re;oe<ae;oe+=1)ie.setTripleAt(ee[se][0],ee[se][1],ne[se][0],ne[se][1],te[se][0],te[se][1],oe,!1),se-=1;return ie},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function ie(){return new ShapePath}function ee(re){var se=re._length,ae;for(ae=0;ae<se;ae+=1)pointPool.release(re.v[ae]),pointPool.release(re.i[ae]),pointPool.release(re.o[ae]),re.v[ae]=null,re.i[ae]=null,re.o[ae]=null;re._length=0,re.c=!1}function te(re){var se=ne.newElement(),ae,oe=re._length===void 0?re.v.length:re._length;for(se.setLength(oe),se.c=re.c,ae=0;ae<oe;ae+=1)se.setTripleAt(re.v[ae][0],re.v[ae][1],re.o[ae][0],re.o[ae][1],re.i[ae][0],re.i[ae][1],ae);return se}var ne=poolFactory(4,ie,ee);return ne.clone=te,ne}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(ie){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=ie,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var ie;for(ie=0;ie<this._length;ie+=1)shapePool.release(this.shapes[ie]);this._length=0};var shapeCollectionPool=function(){var ie={newShapeCollection:re,release:se},ee=0,te=4,ne=createSizedArray(te);function re(){var ae;return ee?(ee-=1,ae=ne[ee]):ae=new ShapeCollection,ae}function se(ae){var oe,le=ae._length;for(oe=0;oe<le;oe+=1)shapePool.release(ae.shapes[oe]);ae._length=0,ee===te&&(ne=pooling.double(ne),te*=2),ne[ee]=ae,ee+=1}return ie}(),ShapePropertyFactory=function(){var ie=-999999;function ee(pe,ye,_e){var xe=_e.lastIndex,Se,be,Ee,Pe,we,Me,De,ke,ze,Ve=this.keyframes;if(pe<Ve[0].t-this.offsetTime)Se=Ve[0].s[0],Ee=!0,xe=0;else if(pe>=Ve[Ve.length-1].t-this.offsetTime)Se=Ve[Ve.length-1].s?Ve[Ve.length-1].s[0]:Ve[Ve.length-2].e[0],Ee=!0;else{for(var Ue=xe,Ae=Ve.length-1,Fe=!0,Te,Ce,Le;Fe&&(Te=Ve[Ue],Ce=Ve[Ue+1],!(Ce.t-this.offsetTime>pe));)Ue<Ae-1?Ue+=1:Fe=!1;if(Le=this.keyframesMetadata[Ue]||{},Ee=Te.h===1,xe=Ue,!Ee){if(pe>=Ce.t-this.offsetTime)ke=1;else if(pe<Te.t-this.offsetTime)ke=0;else{var Be;Le.__fnct?Be=Le.__fnct:(Be=BezierFactory.getBezierEasing(Te.o.x,Te.o.y,Te.i.x,Te.i.y).get,Le.__fnct=Be),ke=Be((pe-(Te.t-this.offsetTime))/(Ce.t-this.offsetTime-(Te.t-this.offsetTime)))}be=Ce.s?Ce.s[0]:Te.e[0]}Se=Te.s[0]}for(Me=ye._length,De=Se.i[0].length,_e.lastIndex=xe,Pe=0;Pe<Me;Pe+=1)for(we=0;we<De;we+=1)ze=Ee?Se.i[Pe][we]:Se.i[Pe][we]+(be.i[Pe][we]-Se.i[Pe][we])*ke,ye.i[Pe][we]=ze,ze=Ee?Se.o[Pe][we]:Se.o[Pe][we]+(be.o[Pe][we]-Se.o[Pe][we])*ke,ye.o[Pe][we]=ze,ze=Ee?Se.v[Pe][we]:Se.v[Pe][we]+(be.v[Pe][we]-Se.v[Pe][we])*ke,ye.v[Pe][we]=ze}function te(){var pe=this.comp.renderedFrame-this.offsetTime,ye=this.keyframes[0].t-this.offsetTime,_e=this.keyframes[this.keyframes.length-1].t-this.offsetTime,xe=this._caching.lastFrame;return xe!==ie&&(xe<ye&&pe<ye||xe>_e&&pe>_e)||(this._caching.lastIndex=xe<pe?this._caching.lastIndex:0,this.interpolateShape(pe,this.pv,this._caching)),this._caching.lastFrame=pe,this.pv}function ne(){this.paths=this.localShapeCollection}function re(pe,ye){if(pe._length!==ye._length||pe.c!==ye.c)return!1;var _e,xe=pe._length;for(_e=0;_e<xe;_e+=1)if(pe.v[_e][0]!==ye.v[_e][0]||pe.v[_e][1]!==ye.v[_e][1]||pe.o[_e][0]!==ye.o[_e][0]||pe.o[_e][1]!==ye.o[_e][1]||pe.i[_e][0]!==ye.i[_e][0]||pe.i[_e][1]!==ye.i[_e][1])return!1;return!0}function se(pe){re(this.v,pe)||(this.v=shapePool.clone(pe),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ae(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var pe;this.kf?pe=this.pv:this.data.ks?pe=this.data.ks.k:pe=this.data.pt.k;var ye,_e=this.effectsSequence.length;for(ye=0;ye<_e;ye+=1)pe=this.effectsSequence[ye](pe);this.setVValue(pe),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function oe(pe,ye,_e){this.propType="shape",this.comp=pe.comp,this.container=pe,this.elem=pe,this.data=ye,this.k=!1,this.kf=!1,this._mdf=!1;var xe=_e===3?ye.pt.k:ye.ks.k;this.v=shapePool.clone(xe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ne,this.effectsSequence=[]}function le(pe){this.effectsSequence.push(pe),this.container.addDynamicProperty(this)}oe.prototype.interpolateShape=ee,oe.prototype.getValue=ae,oe.prototype.setVValue=se,oe.prototype.addEffect=le;function ce(pe,ye,_e){this.propType="shape",this.comp=pe.comp,this.elem=pe,this.container=pe,this.offsetTime=pe.data.st,this.keyframes=_e===3?ye.pt.k:ye.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var xe=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,xe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=ie,this.reset=ne,this._caching={lastFrame:ie,lastIndex:0},this.effectsSequence=[te.bind(this)]}ce.prototype.getValue=ae,ce.prototype.interpolateShape=ee,ce.prototype.setVValue=se,ce.prototype.addEffect=le;var he=function(){var pe=roundCorner;function ye(_e,xe){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=xe.d,this.elem=_e,this.comp=_e.comp,this.frameId=-1,this.initDynamicPropertyContainer(_e),this.p=PropertyFactory.getProp(_e,xe.p,1,0,this),this.s=PropertyFactory.getProp(_e,xe.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ye.prototype={reset:ne,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var xe=this.p.v[0],Se=this.p.v[1],be=this.s.v[0]/2,Ee=this.s.v[1]/2,Pe=this.d!==3,we=this.v;we.v[0][0]=xe,we.v[0][1]=Se-Ee,we.v[1][0]=Pe?xe+be:xe-be,we.v[1][1]=Se,we.v[2][0]=xe,we.v[2][1]=Se+Ee,we.v[3][0]=Pe?xe-be:xe+be,we.v[3][1]=Se,we.i[0][0]=Pe?xe-be*pe:xe+be*pe,we.i[0][1]=Se-Ee,we.i[1][0]=Pe?xe+be:xe-be,we.i[1][1]=Se-Ee*pe,we.i[2][0]=Pe?xe+be*pe:xe-be*pe,we.i[2][1]=Se+Ee,we.i[3][0]=Pe?xe-be:xe+be,we.i[3][1]=Se+Ee*pe,we.o[0][0]=Pe?xe+be*pe:xe-be*pe,we.o[0][1]=Se-Ee,we.o[1][0]=Pe?xe+be:xe-be,we.o[1][1]=Se+Ee*pe,we.o[2][0]=Pe?xe-be*pe:xe+be*pe,we.o[2][1]=Se+Ee,we.o[3][0]=Pe?xe-be:xe+be,we.o[3][1]=Se-Ee*pe}},extendPrototype([DynamicPropertyContainer],ye),ye}(),fe=function(){function pe(ye,_e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ye,this.comp=ye.comp,this.data=_e,this.frameId=-1,this.d=_e.d,this.initDynamicPropertyContainer(ye),_e.sy===1?(this.ir=PropertyFactory.getProp(ye,_e.ir,0,0,this),this.is=PropertyFactory.getProp(ye,_e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ye,_e.pt,0,0,this),this.p=PropertyFactory.getProp(ye,_e.p,1,0,this),this.r=PropertyFactory.getProp(ye,_e.r,0,degToRads,this),this.or=PropertyFactory.getProp(ye,_e.or,0,0,this),this.os=PropertyFactory.getProp(ye,_e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return pe.prototype={reset:ne,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var _e=Math.floor(this.pt.v)*2,xe=Math.PI*2/_e,Se=!0,be=this.or.v,Ee=this.ir.v,Pe=this.os.v,we=this.is.v,Me=2*Math.PI*be/(_e*2),De=2*Math.PI*Ee/(_e*2),ke,ze,Ve,Ue,Ae=-Math.PI/2;Ae+=this.r.v;var Fe=this.data.d===3?-1:1;for(this.v._length=0,ke=0;ke<_e;ke+=1){ze=Se?be:Ee,Ve=Se?Pe:we,Ue=Se?Me:De;var Te=ze*Math.cos(Ae),Ce=ze*Math.sin(Ae),Le=Te===0&&Ce===0?0:Ce/Math.sqrt(Te*Te+Ce*Ce),Be=Te===0&&Ce===0?0:-Te/Math.sqrt(Te*Te+Ce*Ce);Te+=+this.p.v[0],Ce+=+this.p.v[1],this.v.setTripleAt(Te,Ce,Te-Le*Ue*Ve*Fe,Ce-Be*Ue*Ve*Fe,Te+Le*Ue*Ve*Fe,Ce+Be*Ue*Ve*Fe,ke,!0),Se=!Se,Ae+=xe*Fe}},convertPolygonToPath:function(){var _e=Math.floor(this.pt.v),xe=Math.PI*2/_e,Se=this.or.v,be=this.os.v,Ee=2*Math.PI*Se/(_e*4),Pe,we=-Math.PI*.5,Me=this.data.d===3?-1:1;for(we+=this.r.v,this.v._length=0,Pe=0;Pe<_e;Pe+=1){var De=Se*Math.cos(we),ke=Se*Math.sin(we),ze=De===0&&ke===0?0:ke/Math.sqrt(De*De+ke*ke),Ve=De===0&&ke===0?0:-De/Math.sqrt(De*De+ke*ke);De+=+this.p.v[0],ke+=+this.p.v[1],this.v.setTripleAt(De,ke,De-ze*Ee*be*Me,ke-Ve*Ee*be*Me,De+ze*Ee*be*Me,ke+Ve*Ee*be*Me,Pe,!0),we+=xe*Me}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],pe),pe}(),ue=function(){function pe(ye,_e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ye,this.comp=ye.comp,this.frameId=-1,this.d=_e.d,this.initDynamicPropertyContainer(ye),this.p=PropertyFactory.getProp(ye,_e.p,1,0,this),this.s=PropertyFactory.getProp(ye,_e.s,1,0,this),this.r=PropertyFactory.getProp(ye,_e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return pe.prototype={convertRectToPath:function(){var _e=this.p.v[0],xe=this.p.v[1],Se=this.s.v[0]/2,be=this.s.v[1]/2,Ee=bmMin(Se,be,this.r.v),Pe=Ee*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(_e+Se,xe-be+Ee,_e+Se,xe-be+Ee,_e+Se,xe-be+Pe,0,!0),this.v.setTripleAt(_e+Se,xe+be-Ee,_e+Se,xe+be-Pe,_e+Se,xe+be-Ee,1,!0),Ee!==0?(this.v.setTripleAt(_e+Se-Ee,xe+be,_e+Se-Ee,xe+be,_e+Se-Pe,xe+be,2,!0),this.v.setTripleAt(_e-Se+Ee,xe+be,_e-Se+Pe,xe+be,_e-Se+Ee,xe+be,3,!0),this.v.setTripleAt(_e-Se,xe+be-Ee,_e-Se,xe+be-Ee,_e-Se,xe+be-Pe,4,!0),this.v.setTripleAt(_e-Se,xe-be+Ee,_e-Se,xe-be+Pe,_e-Se,xe-be+Ee,5,!0),this.v.setTripleAt(_e-Se+Ee,xe-be,_e-Se+Ee,xe-be,_e-Se+Pe,xe-be,6,!0),this.v.setTripleAt(_e+Se-Ee,xe-be,_e+Se-Pe,xe-be,_e+Se-Ee,xe-be,7,!0)):(this.v.setTripleAt(_e-Se,xe+be,_e-Se+Pe,xe+be,_e-Se,xe+be,2),this.v.setTripleAt(_e-Se,xe-be,_e-Se,xe-be+Pe,_e-Se,xe-be,3))):(this.v.setTripleAt(_e+Se,xe-be+Ee,_e+Se,xe-be+Pe,_e+Se,xe-be+Ee,0,!0),Ee!==0?(this.v.setTripleAt(_e+Se-Ee,xe-be,_e+Se-Ee,xe-be,_e+Se-Pe,xe-be,1,!0),this.v.setTripleAt(_e-Se+Ee,xe-be,_e-Se+Pe,xe-be,_e-Se+Ee,xe-be,2,!0),this.v.setTripleAt(_e-Se,xe-be+Ee,_e-Se,xe-be+Ee,_e-Se,xe-be+Pe,3,!0),this.v.setTripleAt(_e-Se,xe+be-Ee,_e-Se,xe+be-Pe,_e-Se,xe+be-Ee,4,!0),this.v.setTripleAt(_e-Se+Ee,xe+be,_e-Se+Ee,xe+be,_e-Se+Pe,xe+be,5,!0),this.v.setTripleAt(_e+Se-Ee,xe+be,_e+Se-Pe,xe+be,_e+Se-Ee,xe+be,6,!0),this.v.setTripleAt(_e+Se,xe+be-Ee,_e+Se,xe+be-Ee,_e+Se,xe+be-Pe,7,!0)):(this.v.setTripleAt(_e-Se,xe-be,_e-Se+Pe,xe-be,_e-Se,xe-be,1,!0),this.v.setTripleAt(_e-Se,xe+be,_e-Se,xe+be-Pe,_e-Se,xe+be,2,!0),this.v.setTripleAt(_e+Se,xe+be,_e+Se-Pe,xe+be,_e+Se,xe+be,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ne},extendPrototype([DynamicPropertyContainer],pe),pe}();function de(pe,ye,_e){var xe;if(_e===3||_e===4){var Se=_e===3?ye.pt:ye.ks,be=Se.k;be.length?xe=new ce(pe,ye,_e):xe=new oe(pe,ye,_e)}else _e===5?xe=new ue(pe,ye):_e===6?xe=new he(pe,ye):_e===7&&(xe=new fe(pe,ye));return xe.k&&pe.addDynamicProperty(xe),xe}function ge(){return oe}function me(){return ce}var ve={};return ve.getShapeProp=de,ve.getConstructorFunction=ge,ve.getKeyframedConstructorFunction=me,ve}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var ie=Math.cos,ee=Math.sin,te=Math.tan,ne=Math.round;function re(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function se(Te){if(Te===0)return this;var Ce=ie(Te),Le=ee(Te);return this._t(Ce,-Le,0,0,Le,Ce,0,0,0,0,1,0,0,0,0,1)}function ae(Te){if(Te===0)return this;var Ce=ie(Te),Le=ee(Te);return this._t(1,0,0,0,0,Ce,-Le,0,0,Le,Ce,0,0,0,0,1)}function oe(Te){if(Te===0)return this;var Ce=ie(Te),Le=ee(Te);return this._t(Ce,0,Le,0,0,1,0,0,-Le,0,Ce,0,0,0,0,1)}function le(Te){if(Te===0)return this;var Ce=ie(Te),Le=ee(Te);return this._t(Ce,-Le,0,0,Le,Ce,0,0,0,0,1,0,0,0,0,1)}function ce(Te,Ce){return this._t(1,Ce,Te,1,0,0)}function he(Te,Ce){return this.shear(te(Te),te(Ce))}function fe(Te,Ce){var Le=ie(Ce),Be=ee(Ce);return this._t(Le,Be,0,0,-Be,Le,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,te(Te),1,0,0,0,0,1,0,0,0,0,1)._t(Le,-Be,0,0,Be,Le,0,0,0,0,1,0,0,0,0,1)}function ue(Te,Ce,Le){return!Le&&Le!==0&&(Le=1),Te===1&&Ce===1&&Le===1?this:this._t(Te,0,0,0,0,Ce,0,0,0,0,Le,0,0,0,0,1)}function de(Te,Ce,Le,Be,st,Xe,Ge,He,Je,et,ht,vt,gt,yt,Oe,Ze){return this.props[0]=Te,this.props[1]=Ce,this.props[2]=Le,this.props[3]=Be,this.props[4]=st,this.props[5]=Xe,this.props[6]=Ge,this.props[7]=He,this.props[8]=Je,this.props[9]=et,this.props[10]=ht,this.props[11]=vt,this.props[12]=gt,this.props[13]=yt,this.props[14]=Oe,this.props[15]=Ze,this}function ge(Te,Ce,Le){return Le=Le||0,Te!==0||Ce!==0||Le!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Te,Ce,Le,1):this}function me(Te,Ce,Le,Be,st,Xe,Ge,He,Je,et,ht,vt,gt,yt,Oe,Ze){var qe=this.props;if(Te===1&&Ce===0&&Le===0&&Be===0&&st===0&&Xe===1&&Ge===0&&He===0&&Je===0&&et===0&&ht===1&&vt===0)return qe[12]=qe[12]*Te+qe[15]*gt,qe[13]=qe[13]*Xe+qe[15]*yt,qe[14]=qe[14]*ht+qe[15]*Oe,qe[15]*=Ze,this._identityCalculated=!1,this;var ut=qe[0],at=qe[1],We=qe[2],ft=qe[3],St=qe[4],$e=qe[5],Re=qe[6],Qe=qe[7],ct=qe[8],lt=qe[9],ot=qe[10],Et=qe[11],dt=qe[12],bt=qe[13],It=qe[14],mt=qe[15];return qe[0]=ut*Te+at*st+We*Je+ft*gt,qe[1]=ut*Ce+at*Xe+We*et+ft*yt,qe[2]=ut*Le+at*Ge+We*ht+ft*Oe,qe[3]=ut*Be+at*He+We*vt+ft*Ze,qe[4]=St*Te+$e*st+Re*Je+Qe*gt,qe[5]=St*Ce+$e*Xe+Re*et+Qe*yt,qe[6]=St*Le+$e*Ge+Re*ht+Qe*Oe,qe[7]=St*Be+$e*He+Re*vt+Qe*Ze,qe[8]=ct*Te+lt*st+ot*Je+Et*gt,qe[9]=ct*Ce+lt*Xe+ot*et+Et*yt,qe[10]=ct*Le+lt*Ge+ot*ht+Et*Oe,qe[11]=ct*Be+lt*He+ot*vt+Et*Ze,qe[12]=dt*Te+bt*st+It*Je+mt*gt,qe[13]=dt*Ce+bt*Xe+It*et+mt*yt,qe[14]=dt*Le+bt*Ge+It*ht+mt*Oe,qe[15]=dt*Be+bt*He+It*vt+mt*Ze,this._identityCalculated=!1,this}function ve(Te){var Ce=Te.props;return this.transform(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6],Ce[7],Ce[8],Ce[9],Ce[10],Ce[11],Ce[12],Ce[13],Ce[14],Ce[15])}function pe(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ye(Te){for(var Ce=0;Ce<16;){if(Te.props[Ce]!==this.props[Ce])return!1;Ce+=1}return!0}function _e(Te){var Ce;for(Ce=0;Ce<16;Ce+=1)Te.props[Ce]=this.props[Ce];return Te}function xe(Te){var Ce;for(Ce=0;Ce<16;Ce+=1)this.props[Ce]=Te[Ce]}function Se(Te,Ce,Le){return{x:Te*this.props[0]+Ce*this.props[4]+Le*this.props[8]+this.props[12],y:Te*this.props[1]+Ce*this.props[5]+Le*this.props[9]+this.props[13],z:Te*this.props[2]+Ce*this.props[6]+Le*this.props[10]+this.props[14]}}function be(Te,Ce,Le){return Te*this.props[0]+Ce*this.props[4]+Le*this.props[8]+this.props[12]}function Ee(Te,Ce,Le){return Te*this.props[1]+Ce*this.props[5]+Le*this.props[9]+this.props[13]}function Pe(Te,Ce,Le){return Te*this.props[2]+Ce*this.props[6]+Le*this.props[10]+this.props[14]}function we(){var Te=this.props[0]*this.props[5]-this.props[1]*this.props[4],Ce=this.props[5]/Te,Le=-this.props[1]/Te,Be=-this.props[4]/Te,st=this.props[0]/Te,Xe=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Te,Ge=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Te,He=new Matrix;return He.props[0]=Ce,He.props[1]=Le,He.props[4]=Be,He.props[5]=st,He.props[12]=Xe,He.props[13]=Ge,He}function Me(Te){var Ce=this.getInverseMatrix();return Ce.applyToPointArray(Te[0],Te[1],Te[2]||0)}function De(Te){var Ce,Le=Te.length,Be=[];for(Ce=0;Ce<Le;Ce+=1)Be[Ce]=Me(Te[Ce]);return Be}function ke(Te,Ce,Le){var Be=createTypedArray("float32",6);if(this.isIdentity())Be[0]=Te[0],Be[1]=Te[1],Be[2]=Ce[0],Be[3]=Ce[1],Be[4]=Le[0],Be[5]=Le[1];else{var st=this.props[0],Xe=this.props[1],Ge=this.props[4],He=this.props[5],Je=this.props[12],et=this.props[13];Be[0]=Te[0]*st+Te[1]*Ge+Je,Be[1]=Te[0]*Xe+Te[1]*He+et,Be[2]=Ce[0]*st+Ce[1]*Ge+Je,Be[3]=Ce[0]*Xe+Ce[1]*He+et,Be[4]=Le[0]*st+Le[1]*Ge+Je,Be[5]=Le[0]*Xe+Le[1]*He+et}return Be}function ze(Te,Ce,Le){var Be;return this.isIdentity()?Be=[Te,Ce,Le]:Be=[Te*this.props[0]+Ce*this.props[4]+Le*this.props[8]+this.props[12],Te*this.props[1]+Ce*this.props[5]+Le*this.props[9]+this.props[13],Te*this.props[2]+Ce*this.props[6]+Le*this.props[10]+this.props[14]],Be}function Ve(Te,Ce){if(this.isIdentity())return Te+","+Ce;var Le=this.props;return Math.round((Te*Le[0]+Ce*Le[4]+Le[12])*100)/100+","+Math.round((Te*Le[1]+Ce*Le[5]+Le[13])*100)/100}function Ue(){for(var Te=0,Ce=this.props,Le="matrix3d(",Be=1e4;Te<16;)Le+=ne(Ce[Te]*Be)/Be,Le+=Te===15?")":",",Te+=1;return Le}function Ae(Te){var Ce=1e4;return Te<1e-6&&Te>0||Te>-1e-6&&Te<0?ne(Te*Ce)/Ce:Te}function Fe(){var Te=this.props,Ce=Ae(Te[0]),Le=Ae(Te[1]),Be=Ae(Te[4]),st=Ae(Te[5]),Xe=Ae(Te[12]),Ge=Ae(Te[13]);return"matrix("+Ce+","+Le+","+Be+","+st+","+Xe+","+Ge+")"}return function(){this.reset=re,this.rotate=se,this.rotateX=ae,this.rotateY=oe,this.rotateZ=le,this.skew=he,this.skewFromAxis=fe,this.shear=ce,this.scale=ue,this.setTransform=de,this.translate=ge,this.transform=me,this.multiply=ve,this.applyToPoint=Se,this.applyToX=be,this.applyToY=Ee,this.applyToZ=Pe,this.applyToPointArray=ze,this.applyToTriplePoints=ke,this.applyToPointStringified=Ve,this.toCSS=Ue,this.to2dCSS=Fe,this.clone=_e,this.cloneFromProps=xe,this.equals=ye,this.inversePoints=De,this.inversePoint=Me,this.getInverseMatrix=we,this._t=this.transform,this.isIdentity=pe,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(te){return typeof te}:_typeof$3=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$3(ie)}var lottie={};function setLocation(ie){setLocationHref(ie)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(ie){setSubframeEnabled(ie)}function setPrefix(ie){setIdPrefix(ie)}function loadAnimation(ie){return animationManager.loadAnimation(ie)}function setQuality(ie){if(typeof ie=="string")switch(ie){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(ie)&&ie>1&&setDefaultCurveSegments(ie)}function inBrowser(){return typeof navigator<"u"}function installPlugin(ie,ee){ie==="expressions"&&setExpressionsPlugin(ee)}function getFactory(ie){switch(ie){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(ie){for(var ee=queryString.split("&"),te=0;te<ee.length;te+=1){var ne=ee[te].split("=");if(decodeURIComponent(ne[0])==ie)return decodeURIComponent(ne[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(ie){}var ShapeModifiers=function(){var ie={},ee={};ie.registerModifier=te,ie.getModifier=ne;function te(re,se){ee[re]||(ee[re]=se)}function ne(re,se,ae){return new ee[re](se,ae)}return ie}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(ie){if(!this.closed){ie.sh.container.addDynamicProperty(ie.sh);var ee={shape:ie.sh,data:ie,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(ee),this.addShapeToModifier(ee),this._isAnimated&&ie.setAsAnimated()}},ShapeModifier.prototype.init=function(ie,ee){this.shapes=[],this.elem=ie,this.initDynamicPropertyContainer(ie),this.initModifierProperties(ie,ee),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(ie,ee){this.s=PropertyFactory.getProp(ie,ee.s,0,.01,this),this.e=PropertyFactory.getProp(ie,ee.e,0,.01,this),this.o=PropertyFactory.getProp(ie,ee.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=ee.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(ie){ie.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(ie,ee,te,ne,re){var se=[];ee<=1?se.push({s:ie,e:ee}):ie>=1?se.push({s:ie-1,e:ee-1}):(se.push({s:ie,e:1}),se.push({s:0,e:ee-1}));var ae=[],oe,le=se.length,ce;for(oe=0;oe<le;oe+=1)if(ce=se[oe],!(ce.e*re<ne||ce.s*re>ne+te)){var he,fe;ce.s*re<=ne?he=0:he=(ce.s*re-ne)/te,ce.e*re>=ne+te?fe=1:fe=(ce.e*re-ne)/te,ae.push([he,fe])}return ae.length||ae.push([0,0]),ae},TrimModifier.prototype.releasePathsData=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)segmentsLengthPool.release(ie[ee]);return ie.length=0,ie},TrimModifier.prototype.processShapes=function(ie){var ee,te;if(this._mdf||ie){var ne=this.o.v%360/360;if(ne<0&&(ne+=1),this.s.v>1?ee=1+ne:this.s.v<0?ee=0+ne:ee=this.s.v+ne,this.e.v>1?te=1+ne:this.e.v<0?te=0+ne:te=this.e.v+ne,ee>te){var re=ee;ee=te,te=re}ee=Math.round(ee*1e4)*1e-4,te=Math.round(te*1e4)*1e-4,this.sValue=ee,this.eValue=te}else ee=this.sValue,te=this.eValue;var se,ae,oe=this.shapes.length,le,ce,he,fe,ue,de=0;if(te===ee)for(ae=0;ae<oe;ae+=1)this.shapes[ae].localShapeCollection.releaseShapes(),this.shapes[ae].shape._mdf=!0,this.shapes[ae].shape.paths=this.shapes[ae].localShapeCollection,this._mdf&&(this.shapes[ae].pathsData.length=0);else if(te===1&&ee===0||te===0&&ee===1){if(this._mdf)for(ae=0;ae<oe;ae+=1)this.shapes[ae].pathsData.length=0,this.shapes[ae].shape._mdf=!0}else{var ge=[],me,ve;for(ae=0;ae<oe;ae+=1)if(me=this.shapes[ae],!me.shape._mdf&&!this._mdf&&!ie&&this.m!==2)me.shape.paths=me.localShapeCollection;else{if(se=me.shape.paths,ce=se._length,ue=0,!me.shape._mdf&&me.pathsData.length)ue=me.totalShapeLength;else{for(he=this.releasePathsData(me.pathsData),le=0;le<ce;le+=1)fe=bez.getSegmentsLength(se.shapes[le]),he.push(fe),ue+=fe.totalLength;me.totalShapeLength=ue,me.pathsData=he}de+=ue,me.shape._mdf=!0}var pe=ee,ye=te,_e=0,xe;for(ae=oe-1;ae>=0;ae-=1)if(me=this.shapes[ae],me.shape._mdf){for(ve=me.localShapeCollection,ve.releaseShapes(),this.m===2&&oe>1?(xe=this.calculateShapeEdges(ee,te,me.totalShapeLength,_e,de),_e+=me.totalShapeLength):xe=[[pe,ye]],ce=xe.length,le=0;le<ce;le+=1){pe=xe[le][0],ye=xe[le][1],ge.length=0,ye<=1?ge.push({s:me.totalShapeLength*pe,e:me.totalShapeLength*ye}):pe>=1?ge.push({s:me.totalShapeLength*(pe-1),e:me.totalShapeLength*(ye-1)}):(ge.push({s:me.totalShapeLength*pe,e:me.totalShapeLength}),ge.push({s:0,e:me.totalShapeLength*(ye-1)}));var Se=this.addShapes(me,ge[0]);if(ge[0].s!==ge[0].e){if(ge.length>1){var be=me.shape.paths.shapes[me.shape.paths._length-1];if(be.c){var Ee=Se.pop();this.addPaths(Se,ve),Se=this.addShapes(me,ge[1],Ee)}else this.addPaths(Se,ve),Se=this.addShapes(me,ge[1])}this.addPaths(Se,ve)}}me.shape.paths=ve}}},TrimModifier.prototype.addPaths=function(ie,ee){var te,ne=ie.length;for(te=0;te<ne;te+=1)ee.addShape(ie[te])},TrimModifier.prototype.addSegment=function(ie,ee,te,ne,re,se,ae){re.setXYAt(ee[0],ee[1],"o",se),re.setXYAt(te[0],te[1],"i",se+1),ae&&re.setXYAt(ie[0],ie[1],"v",se),re.setXYAt(ne[0],ne[1],"v",se+1)},TrimModifier.prototype.addSegmentFromArray=function(ie,ee,te,ne){ee.setXYAt(ie[1],ie[5],"o",te),ee.setXYAt(ie[2],ie[6],"i",te+1),ne&&ee.setXYAt(ie[0],ie[4],"v",te),ee.setXYAt(ie[3],ie[7],"v",te+1)},TrimModifier.prototype.addShapes=function(ie,ee,te){var ne=ie.pathsData,re=ie.shape.paths.shapes,se,ae=ie.shape.paths._length,oe,le,ce=0,he,fe,ue,de,ge=[],me,ve=!0;for(te?(fe=te._length,me=te._length):(te=shapePool.newElement(),fe=0,me=0),ge.push(te),se=0;se<ae;se+=1){for(ue=ne[se].lengths,te.c=re[se].c,le=re[se].c?ue.length:ue.length+1,oe=1;oe<le;oe+=1)if(he=ue[oe-1],ce+he.addedLength<ee.s)ce+=he.addedLength,te.c=!1;else if(ce>ee.e){te.c=!1;break}else ee.s<=ce&&ee.e>=ce+he.addedLength?(this.addSegment(re[se].v[oe-1],re[se].o[oe-1],re[se].i[oe],re[se].v[oe],te,fe,ve),ve=!1):(de=bez.getNewSegment(re[se].v[oe-1],re[se].v[oe],re[se].o[oe-1],re[se].i[oe],(ee.s-ce)/he.addedLength,(ee.e-ce)/he.addedLength,ue[oe-1]),this.addSegmentFromArray(de,te,fe,ve),ve=!1,te.c=!1),ce+=he.addedLength,fe+=1;if(re[se].c&&ue.length){if(he=ue[oe-1],ce<=ee.e){var pe=ue[oe-1].addedLength;ee.s<=ce&&ee.e>=ce+pe?(this.addSegment(re[se].v[oe-1],re[se].o[oe-1],re[se].i[0],re[se].v[0],te,fe,ve),ve=!1):(de=bez.getNewSegment(re[se].v[oe-1],re[se].v[0],re[se].o[oe-1],re[se].i[0],(ee.s-ce)/pe,(ee.e-ce)/pe,ue[oe-1]),this.addSegmentFromArray(de,te,fe,ve),ve=!1,te.c=!1)}else te.c=!1;ce+=he.addedLength,fe+=1}if(te._length&&(te.setXYAt(te.v[me][0],te.v[me][1],"i",me),te.setXYAt(te.v[te._length-1][0],te.v[te._length-1][1],"o",te._length-1)),ce>ee.e)break;se<ae-1&&(te=shapePool.newElement(),ve=!0,ge.push(te),fe=0)}return ge};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(ie,ee.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(ie,ee){var te=ee/100,ne=[0,0],re=ie._length,se=0;for(se=0;se<re;se+=1)ne[0]+=ie.v[se][0],ne[1]+=ie.v[se][1];ne[0]/=re,ne[1]/=re;var ae=shapePool.newElement();ae.c=ie.c;var oe,le,ce,he,fe,ue;for(se=0;se<re;se+=1)oe=ie.v[se][0]+(ne[0]-ie.v[se][0])*te,le=ie.v[se][1]+(ne[1]-ie.v[se][1])*te,ce=ie.o[se][0]+(ne[0]-ie.o[se][0])*-te,he=ie.o[se][1]+(ne[1]-ie.o[se][1])*-te,fe=ie.i[se][0]+(ne[0]-ie.i[se][0])*-te,ue=ie.i[se][1]+(ne[1]-ie.i[se][1])*-te,ae.setTripleAt(oe,le,ce,he,fe,ue,se);return ae},PuckerAndBloatModifier.prototype.processShapes=function(ie){var ee,te,ne=this.shapes.length,re,se,ae=this.amount.v;if(ae!==0){var oe,le;for(te=0;te<ne;te+=1){if(oe=this.shapes[te],le=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!ie))for(le.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,se=oe.shape.paths._length,re=0;re<se;re+=1)le.addShape(this.processPath(ee[re],ae));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var ie=[0,0];function ee(le){var ce=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||ce,this.a&&le.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&le.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&le.skewFromAxis(-this.sk.v,this.sa.v),this.r?le.rotate(-this.r.v):le.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?le.translate(this.px.v,this.py.v,-this.pz.v):le.translate(this.px.v,this.py.v,0):le.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function te(le){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||le){var ce;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var he,fe;if(ce=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(he=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/ce,0),fe=this.p.getValueAtTime(this.p.keyframes[0].t/ce,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(he=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/ce,0),fe=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/ce,0)):(he=this.p.pv,fe=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/ce,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){he=[],fe=[];var ue=this.px,de=this.py;ue._caching.lastFrame+ue.offsetTime<=ue.keyframes[0].t?(he[0]=ue.getValueAtTime((ue.keyframes[0].t+.01)/ce,0),he[1]=de.getValueAtTime((de.keyframes[0].t+.01)/ce,0),fe[0]=ue.getValueAtTime(ue.keyframes[0].t/ce,0),fe[1]=de.getValueAtTime(de.keyframes[0].t/ce,0)):ue._caching.lastFrame+ue.offsetTime>=ue.keyframes[ue.keyframes.length-1].t?(he[0]=ue.getValueAtTime(ue.keyframes[ue.keyframes.length-1].t/ce,0),he[1]=de.getValueAtTime(de.keyframes[de.keyframes.length-1].t/ce,0),fe[0]=ue.getValueAtTime((ue.keyframes[ue.keyframes.length-1].t-.01)/ce,0),fe[1]=de.getValueAtTime((de.keyframes[de.keyframes.length-1].t-.01)/ce,0)):(he=[ue.pv,de.pv],fe[0]=ue.getValueAtTime((ue._caching.lastFrame+ue.offsetTime-.01)/ce,ue.offsetTime),fe[1]=de.getValueAtTime((de._caching.lastFrame+de.offsetTime-.01)/ce,de.offsetTime))}else fe=ie,he=fe;this.v.rotate(-Math.atan2(he[1]-fe[1],he[0]-fe[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ne(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function re(){}function se(le){this._addDynamicProperty(le),this.elem.addDynamicProperty(le),this._isDirty=!0}function ae(le,ce,he){if(this.elem=le,this.frameId=-1,this.propType="transform",this.data=ce,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(he||le),ce.p&&ce.p.s?(this.px=PropertyFactory.getProp(le,ce.p.x,0,0,this),this.py=PropertyFactory.getProp(le,ce.p.y,0,0,this),ce.p.z&&(this.pz=PropertyFactory.getProp(le,ce.p.z,0,0,this))):this.p=PropertyFactory.getProp(le,ce.p||{k:[0,0,0]},1,0,this),ce.rx){if(this.rx=PropertyFactory.getProp(le,ce.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(le,ce.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(le,ce.rz,0,degToRads,this),ce.or.k[0].ti){var fe,ue=ce.or.k.length;for(fe=0;fe<ue;fe+=1)ce.or.k[fe].to=null,ce.or.k[fe].ti=null}this.or=PropertyFactory.getProp(le,ce.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(le,ce.r||{k:0},0,degToRads,this);ce.sk&&(this.sk=PropertyFactory.getProp(le,ce.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(le,ce.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(le,ce.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(le,ce.s||{k:[100,100,100]},1,.01,this),ce.o?this.o=PropertyFactory.getProp(le,ce.o,0,.01,le):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}ae.prototype={applyToMatrix:ee,getValue:te,precalculateMatrix:ne,autoOrient:re},extendPrototype([DynamicPropertyContainer],ae),ae.prototype.addDynamicProperty=se,ae.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function oe(le,ce,he){return new ae(le,ce,he)}return{getTransformProperty:oe}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(ie,ee.c,0,null,this),this.o=PropertyFactory.getProp(ie,ee.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(ie,ee.tr,this),this.so=PropertyFactory.getProp(ie,ee.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(ie,ee.tr.eo,0,.01,this),this.data=ee,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(ie,ee,te,ne,re,se){var ae=se?-1:1,oe=ne.s.v[0]+(1-ne.s.v[0])*(1-re),le=ne.s.v[1]+(1-ne.s.v[1])*(1-re);ie.translate(ne.p.v[0]*ae*re,ne.p.v[1]*ae*re,ne.p.v[2]),ee.translate(-ne.a.v[0],-ne.a.v[1],ne.a.v[2]),ee.rotate(-ne.r.v*ae*re),ee.translate(ne.a.v[0],ne.a.v[1],ne.a.v[2]),te.translate(-ne.a.v[0],-ne.a.v[1],ne.a.v[2]),te.scale(se?1/oe:oe,se?1/le:le),te.translate(ne.a.v[0],ne.a.v[1],ne.a.v[2])},RepeaterModifier.prototype.init=function(ie,ee,te,ne){for(this.elem=ie,this.arr=ee,this.pos=te,this.elemsData=ne,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(ie),this.initModifierProperties(ie,ee[te]);te>0;)te-=1,this._elements.unshift(ee[te]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee]._processed=!1,ie[ee].ty==="gr"&&this.resetElements(ie[ee].it)},RepeaterModifier.prototype.cloneElements=function(ie){var ee=JSON.parse(JSON.stringify(ie));return this.resetElements(ee),ee},RepeaterModifier.prototype.changeGroupRender=function(ie,ee){var te,ne=ie.length;for(te=0;te<ne;te+=1)ie[te]._render=ee,ie[te].ty==="gr"&&this.changeGroupRender(ie[te].it,ee)},RepeaterModifier.prototype.processShapes=function(ie){var ee,te,ne,re,se,ae=!1;if(this._mdf||ie){var oe=Math.ceil(this.c.v);if(this._groups.length<oe){for(;this._groups.length<oe;){var le={it:this.cloneElements(this._elements),ty:"gr"};le.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,le),this._groups.splice(0,0,le),this._currentCopies+=1}this.elem.reloadShapes(),ae=!0}se=0;var ce;for(ne=0;ne<=this._groups.length-1;ne+=1){if(ce=se<oe,this._groups[ne]._render=ce,this.changeGroupRender(this._groups[ne].it,ce),!ce){var he=this.elemsData[ne].it,fe=he[he.length-1];fe.transform.op.v!==0?(fe.transform.op._mdf=!0,fe.transform.op.v=0):fe.transform.op._mdf=!1}se+=1}this._currentCopies=oe;var ue=this.o.v,de=ue%1,ge=ue>0?Math.floor(ue):Math.ceil(ue),me=this.pMatrix.props,ve=this.rMatrix.props,pe=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ye=0;if(ue>0){for(;ye<ge;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ye+=1;de&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,de,!1),ye+=de)}else if(ue<0){for(;ye>ge;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ye-=1;de&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-de,!0),ye-=de)}ne=this.data.m===1?0:this._currentCopies-1,re=this.data.m===1?1:-1,se=this._currentCopies;for(var _e,xe;se;){if(ee=this.elemsData[ne].it,te=ee[ee.length-1].transform.mProps.v.props,xe=te.length,ee[ee.length-1].transform.mProps._mdf=!0,ee[ee.length-1].transform.op._mdf=!0,ee[ee.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ne/(this._currentCopies-1)),ye!==0){for((ne!==0&&re===1||ne!==this._currentCopies-1&&re===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5],ve[6],ve[7],ve[8],ve[9],ve[10],ve[11],ve[12],ve[13],ve[14],ve[15]),this.matrix.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],pe[7],pe[8],pe[9],pe[10],pe[11],pe[12],pe[13],pe[14],pe[15]),this.matrix.transform(me[0],me[1],me[2],me[3],me[4],me[5],me[6],me[7],me[8],me[9],me[10],me[11],me[12],me[13],me[14],me[15]),_e=0;_e<xe;_e+=1)te[_e]=this.matrix.props[_e];this.matrix.reset()}else for(this.matrix.reset(),_e=0;_e<xe;_e+=1)te[_e]=this.matrix.props[_e];ye+=1,se-=1,ne+=re}}else for(se=this._currentCopies,ne=0,re=1;se;)ee=this.elemsData[ne].it,te=ee[ee.length-1].transform.mProps.v.props,ee[ee.length-1].transform.mProps._mdf=!1,ee[ee.length-1].transform.op._mdf=!1,se-=1,ne+=re;return ae},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(ie,ee.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(ie,ee){var te=shapePool.newElement();te.c=ie.c;var ne,re=ie._length,se,ae,oe,le,ce,he,fe=0,ue,de,ge,me,ve,pe;for(ne=0;ne<re;ne+=1)se=ie.v[ne],oe=ie.o[ne],ae=ie.i[ne],se[0]===oe[0]&&se[1]===oe[1]&&se[0]===ae[0]&&se[1]===ae[1]?(ne===0||ne===re-1)&&!ie.c?(te.setTripleAt(se[0],se[1],oe[0],oe[1],ae[0],ae[1],fe),fe+=1):(ne===0?le=ie.v[re-1]:le=ie.v[ne-1],ce=Math.sqrt(Math.pow(se[0]-le[0],2)+Math.pow(se[1]-le[1],2)),he=ce?Math.min(ce/2,ee)/ce:0,ve=se[0]+(le[0]-se[0])*he,ue=ve,pe=se[1]-(se[1]-le[1])*he,de=pe,ge=ue-(ue-se[0])*roundCorner,me=de-(de-se[1])*roundCorner,te.setTripleAt(ue,de,ge,me,ve,pe,fe),fe+=1,ne===re-1?le=ie.v[0]:le=ie.v[ne+1],ce=Math.sqrt(Math.pow(se[0]-le[0],2)+Math.pow(se[1]-le[1],2)),he=ce?Math.min(ce/2,ee)/ce:0,ge=se[0]+(le[0]-se[0])*he,ue=ge,me=se[1]+(le[1]-se[1])*he,de=me,ve=ue-(ue-se[0])*roundCorner,pe=de-(de-se[1])*roundCorner,te.setTripleAt(ue,de,ge,me,ve,pe,fe),fe+=1):(te.setTripleAt(ie.v[ne][0],ie.v[ne][1],ie.o[ne][0],ie.o[ne][1],ie.i[ne][0],ie.i[ne][1],fe),fe+=1);return te},RoundCornersModifier.prototype.processShapes=function(ie){var ee,te,ne=this.shapes.length,re,se,ae=this.rd.v;if(ae!==0){var oe,le;for(te=0;te<ne;te+=1){if(oe=this.shapes[te],le=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!ie))for(le.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,se=oe.shape.paths._length,re=0;re<se;re+=1)le.addShape(this.processPath(ee[re],ae));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(ie,ee){return Math.abs(ie-ee)*1e5<=Math.min(Math.abs(ie),Math.abs(ee))}function floatZero(ie){return Math.abs(ie)<=1e-5}function lerp(ie,ee,te){return ie*(1-te)+ee*te}function lerpPoint(ie,ee,te){return[lerp(ie[0],ee[0],te),lerp(ie[1],ee[1],te)]}function quadRoots(ie,ee,te){if(ie===0)return[];var ne=ee*ee-4*ie*te;if(ne<0)return[];var re=-ee/(2*ie);if(ne===0)return[re];var se=Math.sqrt(ne)/(2*ie);return[re-se,re+se]}function polynomialCoefficients(ie,ee,te,ne){return[-ie+3*ee-3*te+ne,3*ie-6*ee+3*te,-3*ie+3*ee,ie]}function singlePoint(ie){return new PolynomialBezier(ie,ie,ie,ie,!1)}function PolynomialBezier(ie,ee,te,ne,re){re&&pointEqual(ie,ee)&&(ee=lerpPoint(ie,ne,1/3)),re&&pointEqual(te,ne)&&(te=lerpPoint(ie,ne,2/3));var se=polynomialCoefficients(ie[0],ee[0],te[0],ne[0]),ae=polynomialCoefficients(ie[1],ee[1],te[1],ne[1]);this.a=[se[0],ae[0]],this.b=[se[1],ae[1]],this.c=[se[2],ae[2]],this.d=[se[3],ae[3]],this.points=[ie,ee,te,ne]}PolynomialBezier.prototype.point=function(ie){return[((this.a[0]*ie+this.b[0])*ie+this.c[0])*ie+this.d[0],((this.a[1]*ie+this.b[1])*ie+this.c[1])*ie+this.d[1]]},PolynomialBezier.prototype.derivative=function(ie){return[(3*ie*this.a[0]+2*this.b[0])*ie+this.c[0],(3*ie*this.a[1]+2*this.b[1])*ie+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(ie){var ee=this.derivative(ie);return Math.atan2(ee[1],ee[0])},PolynomialBezier.prototype.normalAngle=function(ie){var ee=this.derivative(ie);return Math.atan2(ee[0],ee[1])},PolynomialBezier.prototype.inflectionPoints=function(){var ie=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(ie))return[];var ee=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/ie,te=ee*ee-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/ie;if(te<0)return[];var ne=Math.sqrt(te);return floatZero(ne)?ne>0&&ne<1?[ee]:[]:[ee-ne,ee+ne].filter(function(re){return re>0&&re<1})},PolynomialBezier.prototype.split=function(ie){if(ie<=0)return[singlePoint(this.points[0]),this];if(ie>=1)return[this,singlePoint(this.points[this.points.length-1])];var ee=lerpPoint(this.points[0],this.points[1],ie),te=lerpPoint(this.points[1],this.points[2],ie),ne=lerpPoint(this.points[2],this.points[3],ie),re=lerpPoint(ee,te,ie),se=lerpPoint(te,ne,ie),ae=lerpPoint(re,se,ie);return[new PolynomialBezier(this.points[0],ee,re,ae,!0),new PolynomialBezier(ae,se,ne,this.points[3],!0)]};function extrema(ie,ee){var te=ie.points[0][ee],ne=ie.points[ie.points.length-1][ee];if(te>ne){var re=ne;ne=te,te=re}for(var se=quadRoots(3*ie.a[ee],2*ie.b[ee],ie.c[ee]),ae=0;ae<se.length;ae+=1)if(se[ae]>0&&se[ae]<1){var oe=ie.point(se[ae])[ee];oe<te?te=oe:oe>ne&&(ne=oe)}return{min:te,max:ne}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var ie=this.bounds();return{left:ie.x.min,right:ie.x.max,top:ie.y.min,bottom:ie.y.max,width:ie.x.max-ie.x.min,height:ie.y.max-ie.y.min,cx:(ie.x.max+ie.x.min)/2,cy:(ie.y.max+ie.y.min)/2}};function intersectData(ie,ee,te){var ne=ie.boundingBox();return{cx:ne.cx,cy:ne.cy,width:ne.width,height:ne.height,bez:ie,t:(ee+te)/2,t1:ee,t2:te}}function splitData(ie){var ee=ie.bez.split(.5);return[intersectData(ee[0],ie.t1,ie.t),intersectData(ee[1],ie.t,ie.t2)]}function boxIntersect(ie,ee){return Math.abs(ie.cx-ee.cx)*2<ie.width+ee.width&&Math.abs(ie.cy-ee.cy)*2<ie.height+ee.height}function intersectsImpl(ie,ee,te,ne,re,se){if(boxIntersect(ie,ee)){if(te>=se||ie.width<=ne&&ie.height<=ne&&ee.width<=ne&&ee.height<=ne){re.push([ie.t,ee.t]);return}var ae=splitData(ie),oe=splitData(ee);intersectsImpl(ae[0],oe[0],te+1,ne,re,se),intersectsImpl(ae[0],oe[1],te+1,ne,re,se),intersectsImpl(ae[1],oe[0],te+1,ne,re,se),intersectsImpl(ae[1],oe[1],te+1,ne,re,se)}}PolynomialBezier.prototype.intersections=function(ie,ee,te){ee===void 0&&(ee=2),te===void 0&&(te=7);var ne=[];return intersectsImpl(intersectData(this,0,1),intersectData(ie,0,1),0,ee,ne,te),ne},PolynomialBezier.shapeSegment=function(ie,ee){var te=(ee+1)%ie.length();return new PolynomialBezier(ie.v[ee],ie.o[ee],ie.i[te],ie.v[te],!0)},PolynomialBezier.shapeSegmentInverted=function(ie,ee){var te=(ee+1)%ie.length();return new PolynomialBezier(ie.v[te],ie.i[te],ie.o[ee],ie.v[ee],!0)};function crossProduct(ie,ee){return[ie[1]*ee[2]-ie[2]*ee[1],ie[2]*ee[0]-ie[0]*ee[2],ie[0]*ee[1]-ie[1]*ee[0]]}function lineIntersection(ie,ee,te,ne){var re=[ie[0],ie[1],1],se=[ee[0],ee[1],1],ae=[te[0],te[1],1],oe=[ne[0],ne[1],1],le=crossProduct(crossProduct(re,se),crossProduct(ae,oe));return floatZero(le[2])?null:[le[0]/le[2],le[1]/le[2]]}function polarOffset(ie,ee,te){return[ie[0]+Math.cos(ee)*te,ie[1]-Math.sin(ee)*te]}function pointDistance(ie,ee){return Math.hypot(ie[0]-ee[0],ie[1]-ee[1])}function pointEqual(ie,ee){return floatEqual(ie[0],ee[0])&&floatEqual(ie[1],ee[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(ie,ee.s,0,null,this),this.frequency=PropertyFactory.getProp(ie,ee.r,0,null,this),this.pointsType=PropertyFactory.getProp(ie,ee.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(ie,ee,te,ne,re,se,ae){var oe=te-Math.PI/2,le=te+Math.PI/2,ce=ee[0]+Math.cos(te)*ne*re,he=ee[1]-Math.sin(te)*ne*re;ie.setTripleAt(ce,he,ce+Math.cos(oe)*se,he-Math.sin(oe)*se,ce+Math.cos(le)*ae,he-Math.sin(le)*ae,ie.length())}function getPerpendicularVector(ie,ee){var te=[ee[0]-ie[0],ee[1]-ie[1]],ne=-Math.PI*.5,re=[Math.cos(ne)*te[0]-Math.sin(ne)*te[1],Math.sin(ne)*te[0]+Math.cos(ne)*te[1]];return re}function getProjectingAngle(ie,ee){var te=ee===0?ie.length()-1:ee-1,ne=(ee+1)%ie.length(),re=ie.v[te],se=ie.v[ne],ae=getPerpendicularVector(re,se);return Math.atan2(0,1)-Math.atan2(ae[1],ae[0])}function zigZagCorner(ie,ee,te,ne,re,se,ae){var oe=getProjectingAngle(ee,te),le=ee.v[te%ee._length],ce=ee.v[te===0?ee._length-1:te-1],he=ee.v[(te+1)%ee._length],fe=se===2?Math.sqrt(Math.pow(le[0]-ce[0],2)+Math.pow(le[1]-ce[1],2)):0,ue=se===2?Math.sqrt(Math.pow(le[0]-he[0],2)+Math.pow(le[1]-he[1],2)):0;setPoint(ie,ee.v[te%ee._length],oe,ae,ne,ue/((re+1)*2),fe/((re+1)*2))}function zigZagSegment(ie,ee,te,ne,re,se){for(var ae=0;ae<ne;ae+=1){var oe=(ae+1)/(ne+1),le=re===2?Math.sqrt(Math.pow(ee.points[3][0]-ee.points[0][0],2)+Math.pow(ee.points[3][1]-ee.points[0][1],2)):0,ce=ee.normalAngle(oe),he=ee.point(oe);setPoint(ie,he,ce,se,te,le/((ne+1)*2),le/((ne+1)*2)),se=-se}return se}ZigZagModifier.prototype.processPath=function(ie,ee,te,ne){var re=ie._length,se=shapePool.newElement();if(se.c=ie.c,ie.c||(re-=1),re===0)return se;var ae=-1,oe=PolynomialBezier.shapeSegment(ie,0);zigZagCorner(se,ie,0,ee,te,ne,ae);for(var le=0;le<re;le+=1)ae=zigZagSegment(se,oe,ee,te,ne,-ae),le===re-1&&!ie.c?oe=null:oe=PolynomialBezier.shapeSegment(ie,(le+1)%re),zigZagCorner(se,ie,le+1,ee,te,ne,ae);return se},ZigZagModifier.prototype.processShapes=function(ie){var ee,te,ne=this.shapes.length,re,se,ae=this.amplitude.v,oe=Math.max(0,Math.round(this.frequency.v)),le=this.pointsType.v;if(ae!==0){var ce,he;for(te=0;te<ne;te+=1){if(ce=this.shapes[te],he=ce.localShapeCollection,!(!ce.shape._mdf&&!this._mdf&&!ie))for(he.releaseShapes(),ce.shape._mdf=!0,ee=ce.shape.paths.shapes,se=ce.shape.paths._length,re=0;re<se;re+=1)he.addShape(this.processPath(ee[re],ae,oe,le));ce.shape.paths=ce.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(ie,ee,te){var ne=Math.atan2(ee[0]-ie[0],ee[1]-ie[1]);return[polarOffset(ie,ne,te),polarOffset(ee,ne,te)]}function offsetSegment(ie,ee){var te,ne,re,se,ae,oe,le;le=linearOffset(ie.points[0],ie.points[1],ee),te=le[0],ne=le[1],le=linearOffset(ie.points[1],ie.points[2],ee),re=le[0],se=le[1],le=linearOffset(ie.points[2],ie.points[3],ee),ae=le[0],oe=le[1];var ce=lineIntersection(te,ne,re,se);ce===null&&(ce=ne);var he=lineIntersection(ae,oe,re,se);return he===null&&(he=ae),new PolynomialBezier(te,ce,he,oe)}function joinLines(ie,ee,te,ne,re){var se=ee.points[3],ae=te.points[0];if(ne===3||pointEqual(se,ae))return se;if(ne===2){var oe=-ee.tangentAngle(1),le=-te.tangentAngle(0)+Math.PI,ce=lineIntersection(se,polarOffset(se,oe+Math.PI/2,100),ae,polarOffset(ae,oe+Math.PI/2,100)),he=ce?pointDistance(ce,se):pointDistance(se,ae)/2,fe=polarOffset(se,oe,2*he*roundCorner);return ie.setXYAt(fe[0],fe[1],"o",ie.length()-1),fe=polarOffset(ae,le,2*he*roundCorner),ie.setTripleAt(ae[0],ae[1],ae[0],ae[1],fe[0],fe[1],ie.length()),ae}var ue=pointEqual(se,ee.points[2])?ee.points[0]:ee.points[2],de=pointEqual(ae,te.points[1])?te.points[3]:te.points[1],ge=lineIntersection(ue,se,ae,de);return ge&&pointDistance(ge,se)<re?(ie.setTripleAt(ge[0],ge[1],ge[0],ge[1],ge[0],ge[1],ie.length()),ge):se}function getIntersection(ie,ee){var te=ie.intersections(ee);return te.length&&floatEqual(te[0][0],1)&&te.shift(),te.length?te[0]:null}function pruneSegmentIntersection(ie,ee){var te=ie.slice(),ne=ee.slice(),re=getIntersection(ie[ie.length-1],ee[0]);return re&&(te[ie.length-1]=ie[ie.length-1].split(re[0])[0],ne[0]=ee[0].split(re[1])[1]),ie.length>1&&ee.length>1&&(re=getIntersection(ie[0],ee[ee.length-1]),re)?[[ie[0].split(re[0])[0]],[ee[ee.length-1].split(re[1])[1]]]:[te,ne]}function pruneIntersections(ie){for(var ee,te=1;te<ie.length;te+=1)ee=pruneSegmentIntersection(ie[te-1],ie[te]),ie[te-1]=ee[0],ie[te]=ee[1];return ie.length>1&&(ee=pruneSegmentIntersection(ie[ie.length-1],ie[0]),ie[ie.length-1]=ee[0],ie[0]=ee[1]),ie}function offsetSegmentSplit(ie,ee){var te=ie.inflectionPoints(),ne,re,se,ae;if(te.length===0)return[offsetSegment(ie,ee)];if(te.length===1||floatEqual(te[1],1))return se=ie.split(te[0]),ne=se[0],re=se[1],[offsetSegment(ne,ee),offsetSegment(re,ee)];se=ie.split(te[0]),ne=se[0];var oe=(te[1]-te[0])/(1-te[0]);return se=se[1].split(oe),ae=se[0],re=se[1],[offsetSegment(ne,ee),offsetSegment(ae,ee),offsetSegment(re,ee)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(ie,ee.a,0,null,this),this.miterLimit=PropertyFactory.getProp(ie,ee.ml,0,null,this),this.lineJoin=ee.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(ie,ee,te,ne){var re=shapePool.newElement();re.c=ie.c;var se=ie.length();ie.c||(se-=1);var ae,oe,le,ce=[];for(ae=0;ae<se;ae+=1)le=PolynomialBezier.shapeSegment(ie,ae),ce.push(offsetSegmentSplit(le,ee));if(!ie.c)for(ae=se-1;ae>=0;ae-=1)le=PolynomialBezier.shapeSegmentInverted(ie,ae),ce.push(offsetSegmentSplit(le,ee));ce=pruneIntersections(ce);var he=null,fe=null;for(ae=0;ae<ce.length;ae+=1){var ue=ce[ae];for(fe&&(he=joinLines(re,fe,ue[0],te,ne)),fe=ue[ue.length-1],oe=0;oe<ue.length;oe+=1)le=ue[oe],he&&pointEqual(le.points[0],he)?re.setXYAt(le.points[1][0],le.points[1][1],"o",re.length()-1):re.setTripleAt(le.points[0][0],le.points[0][1],le.points[1][0],le.points[1][1],le.points[0][0],le.points[0][1],re.length()),re.setTripleAt(le.points[3][0],le.points[3][1],le.points[3][0],le.points[3][1],le.points[2][0],le.points[2][1],re.length()),he=le.points[3]}return ce.length&&joinLines(re,fe,ce[0][0],te,ne),re},OffsetPathModifier.prototype.processShapes=function(ie){var ee,te,ne=this.shapes.length,re,se,ae=this.amount.v,oe=this.miterLimit.v,le=this.lineJoin;if(ae!==0){var ce,he;for(te=0;te<ne;te+=1){if(ce=this.shapes[te],he=ce.localShapeCollection,!(!ce.shape._mdf&&!this._mdf&&!ie))for(he.releaseShapes(),ce.shape._mdf=!0,ee=ce.shape.paths.shapes,se=ce.shape.paths._length,re=0;re<se;re+=1)he.addShape(this.processPath(ee[re],ae,le,oe));ce.shape.paths=ce.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(ie){for(var ee=ie.fStyle?ie.fStyle.split(" "):[],te="normal",ne="normal",re=ee.length,se,ae=0;ae<re;ae+=1)switch(se=ee[ae].toLowerCase(),se){case"italic":ne="italic";break;case"bold":te="700";break;case"black":te="900";break;case"medium":te="500";break;case"regular":case"normal":te="400";break;case"light":case"thin":te="200";break}return{style:ne,weight:ie.fWeight||te}}var FontManager=function(){var ie=5e3,ee={w:0,size:0,shapes:[],data:{shapes:[]}},te=[];te=te.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ne=127988,re=917631,se=917601,ae=917626,oe=65039,le=8205,ce=127462,he=127487,fe=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function ue(Ae){var Fe=Ae.split(","),Te,Ce=Fe.length,Le=[];for(Te=0;Te<Ce;Te+=1)Fe[Te]!=="sans-serif"&&Fe[Te]!=="monospace"&&Le.push(Fe[Te]);return Le.join(",")}function de(Ae,Fe){var Te=createTag("span");Te.setAttribute("aria-hidden",!0),Te.style.fontFamily=Fe;var Ce=createTag("span");Ce.innerText="giItT1WQy@!-/#",Te.style.position="absolute",Te.style.left="-10000px",Te.style.top="-10000px",Te.style.fontSize="300px",Te.style.fontVariant="normal",Te.style.fontStyle="normal",Te.style.fontWeight="normal",Te.style.letterSpacing="0",Te.appendChild(Ce),document.body.appendChild(Te);var Le=Ce.offsetWidth;return Ce.style.fontFamily=ue(Ae)+", "+Fe,{node:Ce,w:Le,parent:Te}}function ge(){var Ae,Fe=this.fonts.length,Te,Ce,Le=Fe;for(Ae=0;Ae<Fe;Ae+=1)this.fonts[Ae].loaded?Le-=1:this.fonts[Ae].fOrigin==="n"||this.fonts[Ae].origin===0?this.fonts[Ae].loaded=!0:(Te=this.fonts[Ae].monoCase.node,Ce=this.fonts[Ae].monoCase.w,Te.offsetWidth!==Ce?(Le-=1,this.fonts[Ae].loaded=!0):(Te=this.fonts[Ae].sansCase.node,Ce=this.fonts[Ae].sansCase.w,Te.offsetWidth!==Ce&&(Le-=1,this.fonts[Ae].loaded=!0)),this.fonts[Ae].loaded&&(this.fonts[Ae].sansCase.parent.parentNode.removeChild(this.fonts[Ae].sansCase.parent),this.fonts[Ae].monoCase.parent.parentNode.removeChild(this.fonts[Ae].monoCase.parent)));Le!==0&&Date.now()-this.initTime<ie?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function me(Ae,Fe){var Te=document.body&&Fe?"svg":"canvas",Ce,Le=getFontProperties(Ae);if(Te==="svg"){var Be=createNS("text");Be.style.fontSize="100px",Be.setAttribute("font-family",Ae.fFamily),Be.setAttribute("font-style",Le.style),Be.setAttribute("font-weight",Le.weight),Be.textContent="1",Ae.fClass?(Be.style.fontFamily="inherit",Be.setAttribute("class",Ae.fClass)):Be.style.fontFamily=Ae.fFamily,Fe.appendChild(Be),Ce=Be}else{var st=new OffscreenCanvas(500,500).getContext("2d");st.font=Le.style+" "+Le.weight+" 100px "+Ae.fFamily,Ce=st}function Xe(Ge){return Te==="svg"?(Ce.textContent=Ge,Ce.getComputedTextLength()):Ce.measureText(Ge).width}return{measureText:Xe}}function ve(Ae,Fe){if(!Ae){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Ae.list;return}if(!document.body){this.isLoaded=!0,Ae.list.forEach(function(ht){ht.helper=me(ht),ht.cache={}}),this.fonts=Ae.list;return}var Te=Ae.list,Ce,Le=Te.length,Be=Le;for(Ce=0;Ce<Le;Ce+=1){var st=!0,Xe,Ge;if(Te[Ce].loaded=!1,Te[Ce].monoCase=de(Te[Ce].fFamily,"monospace"),Te[Ce].sansCase=de(Te[Ce].fFamily,"sans-serif"),!Te[Ce].fPath)Te[Ce].loaded=!0,Be-=1;else if(Te[Ce].fOrigin==="p"||Te[Ce].origin===3){if(Xe=document.querySelectorAll('style[f-forigin="p"][f-family="'+Te[Ce].fFamily+'"], style[f-origin="3"][f-family="'+Te[Ce].fFamily+'"]'),Xe.length>0&&(st=!1),st){var He=createTag("style");He.setAttribute("f-forigin",Te[Ce].fOrigin),He.setAttribute("f-origin",Te[Ce].origin),He.setAttribute("f-family",Te[Ce].fFamily),He.type="text/css",He.innerText="@font-face {font-family: "+Te[Ce].fFamily+"; font-style: normal; src: url('"+Te[Ce].fPath+"');}",Fe.appendChild(He)}}else if(Te[Ce].fOrigin==="g"||Te[Ce].origin===1){for(Xe=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Ge=0;Ge<Xe.length;Ge+=1)Xe[Ge].href.indexOf(Te[Ce].fPath)!==-1&&(st=!1);if(st){var Je=createTag("link");Je.setAttribute("f-forigin",Te[Ce].fOrigin),Je.setAttribute("f-origin",Te[Ce].origin),Je.type="text/css",Je.rel="stylesheet",Je.href=Te[Ce].fPath,document.body.appendChild(Je)}}else if(Te[Ce].fOrigin==="t"||Te[Ce].origin===2){for(Xe=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Ge=0;Ge<Xe.length;Ge+=1)Te[Ce].fPath===Xe[Ge].src&&(st=!1);if(st){var et=createTag("link");et.setAttribute("f-forigin",Te[Ce].fOrigin),et.setAttribute("f-origin",Te[Ce].origin),et.setAttribute("rel","stylesheet"),et.setAttribute("href",Te[Ce].fPath),Fe.appendChild(et)}}Te[Ce].helper=me(Te[Ce],Fe),Te[Ce].cache={},this.fonts.push(Te[Ce])}Be===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function pe(Ae){if(Ae){this.chars||(this.chars=[]);var Fe,Te=Ae.length,Ce,Le=this.chars.length,Be;for(Fe=0;Fe<Te;Fe+=1){for(Ce=0,Be=!1;Ce<Le;)this.chars[Ce].style===Ae[Fe].style&&this.chars[Ce].fFamily===Ae[Fe].fFamily&&this.chars[Ce].ch===Ae[Fe].ch&&(Be=!0),Ce+=1;Be||(this.chars.push(Ae[Fe]),Le+=1)}}}function ye(Ae,Fe,Te){for(var Ce=0,Le=this.chars.length;Ce<Le;){if(this.chars[Ce].ch===Ae&&this.chars[Ce].style===Fe&&this.chars[Ce].fFamily===Te)return this.chars[Ce];Ce+=1}return(typeof Ae=="string"&&Ae.charCodeAt(0)!==13||!Ae)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Ae,Fe,Te)),ee}function _e(Ae,Fe,Te){var Ce=this.getFontByName(Fe),Le=Ae;if(!Ce.cache[Le]){var Be=Ce.helper;if(Ae===" "){var st=Be.measureText("|"+Ae+"|"),Xe=Be.measureText("||");Ce.cache[Le]=(st-Xe)/100}else Ce.cache[Le]=Be.measureText(Ae)/100}return Ce.cache[Le]*Te}function xe(Ae){for(var Fe=0,Te=this.fonts.length;Fe<Te;){if(this.fonts[Fe].fName===Ae)return this.fonts[Fe];Fe+=1}return this.fonts[0]}function Se(Ae){var Fe=0,Te=Ae.charCodeAt(0);if(Te>=55296&&Te<=56319){var Ce=Ae.charCodeAt(1);Ce>=56320&&Ce<=57343&&(Fe=(Te-55296)*1024+Ce-56320+65536)}return Fe}function be(Ae,Fe){var Te=Ae.toString(16)+Fe.toString(16);return fe.indexOf(Te)!==-1}function Ee(Ae){return Ae===le}function Pe(Ae){return Ae===oe}function we(Ae){var Fe=Se(Ae);return Fe>=ce&&Fe<=he}function Me(Ae){return we(Ae.substr(0,2))&&we(Ae.substr(2,2))}function De(Ae){return te.indexOf(Ae)!==-1}function ke(Ae,Fe){var Te=Se(Ae.substr(Fe,2));if(Te!==ne)return!1;var Ce=0;for(Fe+=2;Ce<5;){if(Te=Se(Ae.substr(Fe,2)),Te<se||Te>ae)return!1;Ce+=1,Fe+=2}return Se(Ae.substr(Fe,2))===re}function ze(){this.isLoaded=!0}var Ve=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Ve.isModifier=be,Ve.isZeroWidthJoiner=Ee,Ve.isFlagEmoji=Me,Ve.isRegionalCode=we,Ve.isCombinedCharacter=De,Ve.isRegionalFlag=ke,Ve.isVariationSelector=Pe,Ve.BLACK_FLAG_CODE_POINT=ne;var Ue={addChars:pe,addFonts:ve,getCharData:ye,getFontByName:xe,measureText:_e,checkLoadedFonts:ge,setIsLoaded:ze};return Ve.prototype=Ue,Ve}();function SlotManager(ie){this.animationData=ie}SlotManager.prototype.getProp=function(ie){return this.animationData.slots&&this.animationData.slots[ie.sid]?Object.assign(ie,this.animationData.slots[ie.sid].p):ie};function slotFactory(ie){return new SlotManager(ie)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)===-1&&this.renderableComponents.push(ee)},removeRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(ee),1)},prepareRenderableFrame:function(ee){this.checkLayerLimits(ee)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(ee){this.data.ip-this.data.st<=ee&&this.data.op-this.data.st>ee?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var ee,te=this.renderableComponents.length;for(ee=0;ee<te;ee+=1)this.renderableComponents[ee].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var ie={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(ee){return ie[ee]||""}}();function SliderEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function AngleEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function ColorEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,1,0,te)}function PointEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,1,0,te)}function LayerIndexEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function MaskIndexEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function CheckboxEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function NoValueEffect(){this.p={}}function EffectsManager(ie,ee){var te=ie.ef||[];this.effectElements=[];var ne,re=te.length,se;for(ne=0;ne<re;ne+=1)se=new GroupEffect(te[ne],ee),this.effectElements.push(se)}function GroupEffect(ie,ee){this.init(ie,ee)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(ie,ee){this.data=ie,this.effectElements=[],this.initDynamicPropertyContainer(ee);var te,ne=this.data.ef.length,re,se=this.data.ef;for(te=0;te<ne;te+=1){switch(re=null,se[te].ty){case 0:re=new SliderEffect(se[te],ee,this);break;case 1:re=new AngleEffect(se[te],ee,this);break;case 2:re=new ColorEffect(se[te],ee,this);break;case 3:re=new PointEffect(se[te],ee,this);break;case 4:case 7:re=new CheckboxEffect(se[te],ee,this);break;case 10:re=new LayerIndexEffect(se[te],ee,this);break;case 11:re=new MaskIndexEffect(se[te],ee,this);break;case 5:re=new EffectsManager(se[te],ee);break;default:re=new NoValueEffect(se[te]);break}re&&this.effectElements.push(re)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var ee=0,te=this.data.masksProperties.length;ee<te;){if(this.data.masksProperties[ee].mode!=="n"&&this.data.masksProperties[ee].cl!==!1)return!0;ee+=1}return!1},initExpressions:function(){var ee=getExpressionInterfaces();if(ee){var te=ee("layer"),ne=ee("effects"),re=ee("shape"),se=ee("text"),ae=ee("comp");this.layerInterface=te(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var oe=ne.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(oe),this.data.ty===0||this.data.xt?this.compInterface=ae(this):this.data.ty===4?(this.layerInterface.shapeInterface=re(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=se(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var ee=getBlendMode(this.data.bm),te=this.baseElement||this.layerElement;te.style["mix-blend-mode"]=ee},initBaseData:function(ee,te,ne){this.globalData=te,this.comp=ne,this.data=ee,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(ee,te){var ne,re=this.dynamicProperties.length;for(ne=0;ne<re;ne+=1)(te||this._isParent&&this.dynamicProperties[ne].propType==="transform")&&(this.dynamicProperties[ne].getValue(),this.dynamicProperties[ne]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&this.dynamicProperties.push(ee)}};function FootageElement(ie,ee,te){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(ie.refId),this.footageData=ee.imageLoader.getAsset(this.assetData),this.initBaseData(ie,ee,te)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var ie=getExpressionInterfaces();if(ie){var ee=ie("footage");this.layerInterface=ee(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(ie,ee,te){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(ie.refId),this.initBaseData(ie,ee,te),this._isPlaying=!1,this._canPlay=!1;var ne=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ne),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,ie.au&&ie.au.lv?ie.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(ie){if(this.prepareRenderableFrame(ie,!0),this.prepareProperties(ie,!0),this.tm._placeholder)this._currentTime=ie/this.data.sr;else{var ee=this.tm.v;this._currentTime=ee}this._volume=this.lv.v[0];var te=this._volume*this._volumeMultiplier;this._previousVolume!==te&&(this._previousVolume=te,this.audio.volume(te))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(ie){this.audio.rate(ie)},AudioElement.prototype.volume=function(ie){this._volumeMultiplier=ie,this._previousVolume=ie*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(ie){var ee,te=this.layers.length,ne;for(this.completeLayers=!0,ee=te-1;ee>=0;ee-=1)this.elements[ee]||(ne=this.layers[ee],ne.ip-ne.st<=ie-this.layers[ee].st&&ne.op-ne.st>ie-this.layers[ee].st&&this.buildItem(ee)),this.completeLayers=this.elements[ee]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(ie){switch(ie.ty){case 2:return this.createImage(ie);case 0:return this.createComp(ie);case 1:return this.createSolid(ie);case 3:return this.createNull(ie);case 4:return this.createShape(ie);case 5:return this.createText(ie);case 6:return this.createAudio(ie);case 13:return this.createCamera(ie);case 15:return this.createFootage(ie);default:return this.createNull(ie)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(ie){return new AudioElement(ie,this.globalData,this)},BaseRenderer.prototype.createFootage=function(ie){return new FootageElement(ie,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)this.buildItem(ie);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(ie){this.completeLayers=!1;var ee,te=ie.length,ne,re=this.layers.length;for(ee=0;ee<te;ee+=1)for(ne=0;ne<re;){if(this.layers[ne].id===ie[ee].id){this.layers[ne]=ie[ee];break}ne+=1}},BaseRenderer.prototype.setProjectInterface=function(ie){this.globalData.projectInterface=ie},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(ie,ee,te){for(var ne=this.elements,re=this.layers,se=0,ae=re.length;se<ae;)re[se].ind==ee&&(!ne[se]||ne[se]===!0?(this.buildItem(se),this.addPendingElement(ie)):(te.push(ne[se]),ne[se].setAsParent(),re[se].parent!==void 0?this.buildElementParenting(ie,re[se].parent,te):ie.setHierarchy(te))),se+=1},BaseRenderer.prototype.addPendingElement=function(ie){this.pendingElements.push(ie)},BaseRenderer.prototype.searchExtraCompositions=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)if(ie[ee].xt){var ne=this.createComp(ie[ee]);ne.initExpressions(),this.globalData.projectInterface.registerComposition(ne)}},BaseRenderer.prototype.getElementById=function(ie){var ee,te=this.elements.length;for(ee=0;ee<te;ee+=1)if(this.elements[ee].data.ind===ie)return this.elements[ee];return null},BaseRenderer.prototype.getElementByPath=function(ie){var ee=ie.shift(),te;if(typeof ee=="number")te=this.elements[ee];else{var ne,re=this.elements.length;for(ne=0;ne<re;ne+=1)if(this.elements[ne].data.nm===ee){te=this.elements[ne];break}}return ie.length===0?te:te.getElementByPath(ie)},BaseRenderer.prototype.setupGlobalData=function(ie,ee){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(ie),this.globalData.fontManager.addChars(ie.chars),this.globalData.fontManager.addFonts(ie.fonts,ee),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=ie.fr,this.globalData.nm=ie.nm,this.globalData.compSize={w:ie.w,h:ie.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var ee=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:ee,localMat:ee,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var ee,te=this.finalTransform.mat,ne=0,re=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ne<re;){if(this.hierarchy[ne].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ne+=1}if(this.finalTransform._matMdf)for(ee=this.finalTransform.mProp.v.props,te.cloneFromProps(ee),ne=0;ne<re;ne+=1)te.multiply(this.hierarchy[ne].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var ee=0,te=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;ee<te;)this.localTransforms[ee]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[ee]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),ee+=1;if(this.finalTransform._localMatMdf){var ne=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ne),ee=1;ee<te;ee+=1){var re=this.localTransforms[ee].matrix;ne.multiply(re)}ne.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var se=this.finalTransform.localOpacity;for(ee=0;ee<te;ee+=1)se*=this.localTransforms[ee].opacity*.01;this.finalTransform.localOpacity=se}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var ee=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(ee.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var te=0,ne=ee.length;for(te=0;te<ne;te+=1)this.localTransforms.push(ee[te])}}},globalToLocal:function(ee){var te=[];te.push(this.finalTransform);for(var ne=!0,re=this.comp;ne;)re.finalTransform?(re.data.hasMask&&te.splice(0,0,re.finalTransform),re=re.comp):ne=!1;var se,ae=te.length,oe;for(se=0;se<ae;se+=1)oe=te[se].mat.applyToPointArray(0,0,0),ee=[ee[0]-oe[0],ee[1]-oe[1],0];return ee},mHelper:new Matrix};function MaskElement(ie,ee,te){this.data=ie,this.element=ee,this.globalData=te,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ne=this.globalData.defs,re,se=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(se),this.solidPath="";var ae,oe=this.masksProperties,le=0,ce=[],he,fe,ue=createElementID(),de,ge,me,ve,pe="clipPath",ye="clip-path";for(re=0;re<se;re+=1)if((oe[re].mode!=="a"&&oe[re].mode!=="n"||oe[re].inv||oe[re].o.k!==100||oe[re].o.x)&&(pe="mask",ye="mask"),(oe[re].mode==="s"||oe[re].mode==="i")&&le===0?(de=createNS("rect"),de.setAttribute("fill","#ffffff"),de.setAttribute("width",this.element.comp.data.w||0),de.setAttribute("height",this.element.comp.data.h||0),ce.push(de)):de=null,ae=createNS("path"),oe[re].mode==="n")this.viewData[re]={op:PropertyFactory.getProp(this.element,oe[re].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[re],3),elem:ae,lastPath:""},ne.appendChild(ae);else{le+=1,ae.setAttribute("fill",oe[re].mode==="s"?"#000000":"#ffffff"),ae.setAttribute("clip-rule","nonzero");var _e;if(oe[re].x.k!==0?(pe="mask",ye="mask",ve=PropertyFactory.getProp(this.element,oe[re].x,0,null,this.element),_e=createElementID(),ge=createNS("filter"),ge.setAttribute("id",_e),me=createNS("feMorphology"),me.setAttribute("operator","erode"),me.setAttribute("in","SourceGraphic"),me.setAttribute("radius","0"),ge.appendChild(me),ne.appendChild(ge),ae.setAttribute("stroke",oe[re].mode==="s"?"#000000":"#ffffff")):(me=null,ve=null),this.storedData[re]={elem:ae,x:ve,expan:me,lastPath:"",lastOperator:"",filterId:_e,lastRadius:0},oe[re].mode==="i"){fe=ce.length;var xe=createNS("g");for(he=0;he<fe;he+=1)xe.appendChild(ce[he]);var Se=createNS("mask");Se.setAttribute("mask-type","alpha"),Se.setAttribute("id",ue+"_"+le),Se.appendChild(ae),ne.appendChild(Se),xe.setAttribute("mask","url("+getLocationHref()+"#"+ue+"_"+le+")"),ce.length=0,ce.push(xe)}else ce.push(ae);oe[re].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[re]={elem:ae,lastPath:"",op:PropertyFactory.getProp(this.element,oe[re].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[re],3),invRect:de},this.viewData[re].prop.k||this.drawPath(oe[re],this.viewData[re].prop.v,this.viewData[re])}for(this.maskElement=createNS(pe),se=ce.length,re=0;re<se;re+=1)this.maskElement.appendChild(ce[re]);le>0&&(this.maskElement.setAttribute("id",ue),this.element.maskedElement.setAttribute(ye,"url("+getLocationHref()+"#"+ue+")"),ne.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(ie){return this.viewData[ie].prop},MaskElement.prototype.renderFrame=function(ie){var ee=this.element.finalTransform.mat,te,ne=this.masksProperties.length;for(te=0;te<ne;te+=1)if((this.viewData[te].prop._mdf||ie)&&this.drawPath(this.masksProperties[te],this.viewData[te].prop.v,this.viewData[te]),(this.viewData[te].op._mdf||ie)&&this.viewData[te].elem.setAttribute("fill-opacity",this.viewData[te].op.v),this.masksProperties[te].mode!=="n"&&(this.viewData[te].invRect&&(this.element.finalTransform.mProp._mdf||ie)&&this.viewData[te].invRect.setAttribute("transform",ee.getInverseMatrix().to2dCSS()),this.storedData[te].x&&(this.storedData[te].x._mdf||ie))){var re=this.storedData[te].expan;this.storedData[te].x.v<0?(this.storedData[te].lastOperator!=="erode"&&(this.storedData[te].lastOperator="erode",this.storedData[te].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[te].filterId+")")),re.setAttribute("radius",-this.storedData[te].x.v)):(this.storedData[te].lastOperator!=="dilate"&&(this.storedData[te].lastOperator="dilate",this.storedData[te].elem.setAttribute("filter",null)),this.storedData[te].elem.setAttribute("stroke-width",this.storedData[te].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var ie="M0,0 ";return ie+=" h"+this.globalData.compSize.w,ie+=" v"+this.globalData.compSize.h,ie+=" h-"+this.globalData.compSize.w,ie+=" v-"+this.globalData.compSize.h+" ",ie},MaskElement.prototype.drawPath=function(ie,ee,te){var ne=" M"+ee.v[0][0]+","+ee.v[0][1],re,se;for(se=ee._length,re=1;re<se;re+=1)ne+=" C"+ee.o[re-1][0]+","+ee.o[re-1][1]+" "+ee.i[re][0]+","+ee.i[re][1]+" "+ee.v[re][0]+","+ee.v[re][1];if(ee.c&&se>1&&(ne+=" C"+ee.o[re-1][0]+","+ee.o[re-1][1]+" "+ee.i[0][0]+","+ee.i[0][1]+" "+ee.v[0][0]+","+ee.v[0][1]),te.lastPath!==ne){var ae="";te.elem&&(ee.c&&(ae=ie.inv?this.solidPath+ne:ne),te.elem.setAttribute("d",ae)),te.lastPath=ne}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var ie={};ie.createFilter=ee,ie.createAlphaToLuminanceFilter=te;function ee(ne,re){var se=createNS("filter");return se.setAttribute("id",ne),re!==!0&&(se.setAttribute("filterUnits","objectBoundingBox"),se.setAttribute("x","0%"),se.setAttribute("y","0%"),se.setAttribute("width","100%"),se.setAttribute("height","100%")),se}function te(){var ne=createNS("feColorMatrix");return ne.setAttribute("type","matrix"),ne.setAttribute("color-interpolation-filters","sRGB"),ne.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ne}return ie}(),featureSupport=function(){var ie={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(ie.maskType=!1),/firefox/i.test(navigator.userAgent)&&(ie.svgLumaHidden=!1),ie}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(ie){var ee,te="SourceGraphic",ne=ie.data.ef?ie.data.ef.length:0,re=createElementID(),se=filtersFactory.createFilter(re,!0),ae=0;this.filters=[];var oe;for(ee=0;ee<ne;ee+=1){oe=null;var le=ie.data.ef[ee].ty;if(registeredEffects$1[le]){var ce=registeredEffects$1[le].effect;oe=new ce(se,ie.effectsManager.effectElements[ee],ie,idPrefix+ae,te),te=idPrefix+ae,registeredEffects$1[le].countsAsEffect&&(ae+=1)}oe&&this.filters.push(oe)}ae&&(ie.globalData.defs.appendChild(se),ie.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+re+")")),this.filters.length&&ie.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(ie){var ee,te=this.filters.length;for(ee=0;ee<te;ee+=1)this.filters[ee].renderFrame(ie)},SVGEffects.prototype.getEffects=function(ie){var ee,te=this.filters.length,ne=[];for(ee=0;ee<te;ee+=1)this.filters[ee].type===ie&&ne.push(this.filters[ee]);return ne};function registerEffect$1(ie,ee,te){registeredEffects$1[ie]={effect:ee,countsAsEffect:te}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var ee=null;if(this.data.td){this.matteMasks={};var te=createNS("g");te.setAttribute("id",this.layerId),te.appendChild(this.layerElement),ee=te,this.globalData.defs.appendChild(te)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),ee=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ne=createNS("clipPath"),re=createNS("path");re.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var se=createElementID();if(ne.setAttribute("id",se),ne.appendChild(re),this.globalData.defs.appendChild(ne),this.checkMasks()){var ae=createNS("g");ae.setAttribute("clip-path","url("+getLocationHref()+"#"+se+")"),ae.appendChild(this.layerElement),this.transformedElement=ae,ee?ee.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+se+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(ee){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[ee]){var te=this.layerId+"_"+ee,ne,re,se,ae;if(ee===1||ee===3){var oe=createNS("mask");oe.setAttribute("id",te),oe.setAttribute("mask-type",ee===3?"luminance":"alpha"),se=createNS("use"),se.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),oe.appendChild(se),this.globalData.defs.appendChild(oe),!featureSupport.maskType&&ee===1&&(oe.setAttribute("mask-type","luminance"),ne=createElementID(),re=filtersFactory.createFilter(ne),this.globalData.defs.appendChild(re),re.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ae=createNS("g"),ae.appendChild(se),oe.appendChild(ae),ae.setAttribute("filter","url("+getLocationHref()+"#"+ne+")"))}else if(ee===2){var le=createNS("mask");le.setAttribute("id",te),le.setAttribute("mask-type","alpha");var ce=createNS("g");le.appendChild(ce),ne=createElementID(),re=filtersFactory.createFilter(ne);var he=createNS("feComponentTransfer");he.setAttribute("in","SourceGraphic"),re.appendChild(he);var fe=createNS("feFuncA");fe.setAttribute("type","table"),fe.setAttribute("tableValues","1.0 0.0"),he.appendChild(fe),this.globalData.defs.appendChild(re);var ue=createNS("rect");ue.setAttribute("width",this.comp.data.w),ue.setAttribute("height",this.comp.data.h),ue.setAttribute("x","0"),ue.setAttribute("y","0"),ue.setAttribute("fill","#ffffff"),ue.setAttribute("opacity","0"),ce.setAttribute("filter","url("+getLocationHref()+"#"+ne+")"),ce.appendChild(ue),se=createNS("use"),se.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ce.appendChild(se),featureSupport.maskType||(le.setAttribute("mask-type","luminance"),re.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ae=createNS("g"),ce.appendChild(ue),ae.appendChild(this.layerElement),ce.appendChild(ae)),this.globalData.defs.appendChild(le)}this.matteMasks[ee]=te}return this.matteMasks[ee]},setMatte:function(ee){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+ee+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(ee){this.hierarchy=ee},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var ie={initElement:function(te,ne,re){this.initFrame(),this.initBaseData(te,ne,re),this.initTransform(te,ne,re),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var te=this.baseElement||this.layerElement;te.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var te=this.baseElement||this.layerElement;te.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(te){this._mdf=!1,this.prepareRenderableFrame(te),this.prepareProperties(te,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(ie)],RenderableDOMElement)})();function IImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.assetData&&this.assetData.sid&&(this.assetData=ee.slotManager.getProp(this.assetData)),this.initElement(ie,ee,te),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var ie=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",ie),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(ie,ee){this.elem=ie,this.pos=ee}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(ee){var te,ne=this.shapeModifiers.length;for(te=0;te<ne;te+=1)this.shapeModifiers[te].addShape(ee)},isShapeInAnimatedModifiers:function(ee){for(var te=0,ne=this.shapeModifiers.length;te<ne;)if(this.shapeModifiers[te].isAnimatedWithShape(ee))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var ee,te=this.shapes.length;for(ee=0;ee<te;ee+=1)this.shapes[ee].sh.reset();te=this.shapeModifiers.length;var ne;for(ee=te-1;ee>=0&&(ne=this.shapeModifiers[ee].processShapes(this._isFirstFrame),!ne);ee-=1);}},searchProcessedElement:function(ee){for(var te=this.processedElements,ne=0,re=te.length;ne<re;){if(te[ne].elem===ee)return te[ne].pos;ne+=1}return 0},addProcessedElement:function(ee,te){for(var ne=this.processedElements,re=ne.length;re;)if(re-=1,ne[re].elem===ee){ne[re].pos=te;return}ne.push(new ProcessedElement(ee,te))},prepareFrame:function(ee){this.prepareRenderableFrame(ee),this.prepareProperties(ee,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(ie,ee,te){this.caches=[],this.styles=[],this.transformers=ie,this.lStr="",this.sh=te,this.lvl=ee,this._isAnimated=!!te.k;for(var ne=0,re=ie.length;ne<re;){if(ie[ne].mProps.dynamicProperties.length){this._isAnimated=!0;break}ne+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(ie,ee){this.data=ie,this.type=ie.ty,this.d="",this.lvl=ee,this._mdf=!1,this.closed=ie.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(ie,ee,te,ne){this.elem=ie,this.frameId=-1,this.dataProps=createSizedArray(ee.length),this.renderer=te,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",ee.length?ee.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ne);var re,se=ee.length||0,ae;for(re=0;re<se;re+=1)ae=PropertyFactory.getProp(ie,ee[re].v,0,0,this),this.k=ae.k||this.k,this.dataProps[re]={n:ee[re].n,p:ae};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(ie){if(!(this.elem.globalData.frameId===this.frameId&&!ie)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||ie,this._mdf)){var ee=0,te=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),ee=0;ee<te;ee+=1)this.dataProps[ee].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[ee].p.v:this.dashArray[ee]=this.dataProps[ee].p.v:this.dashoffset[0]=this.dataProps[ee].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.w=PropertyFactory.getProp(ie,ee.w,0,null,this),this.d=new DashProperty(ie,ee.d||{},"svg",this),this.c=PropertyFactory.getProp(ie,ee.c,1,255,this),this.style=te,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.c=PropertyFactory.getProp(ie,ee.c,1,255,this),this.style=te}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.style=te}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(ie,ee,te){this.data=ee,this.c=createTypedArray("uint8c",ee.p*4);var ne=ee.k.k[0].s?ee.k.k[0].s.length-ee.p*4:ee.k.k.length-ee.p*4;this.o=createTypedArray("float32",ne),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ne,this.initDynamicPropertyContainer(te),this.prop=PropertyFactory.getProp(ie,ee.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(ie,ee){for(var te=0,ne=this.o.length/2,re;te<ne;){if(re=Math.abs(ie[te*4]-ie[ee*4+te*2]),re>.01)return!1;te+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var ie=0,ee=this.data.k.k.length;ie<ee;){if(!this.comparePoints(this.data.k.k[ie].s,this.data.p))return!1;ie+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(ie){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||ie){var ee,te=this.data.p*4,ne,re;for(ee=0;ee<te;ee+=1)ne=ee%4===0?100:255,re=Math.round(this.prop.v[ee]*ne),this.c[ee]!==re&&(this.c[ee]=re,this._cmdf=!ie);if(this.o.length)for(te=this.prop.v.length,ee=this.data.p*4;ee<te;ee+=1)ne=ee%2===0?100:1,re=ee%2===0?Math.round(this.prop.v[ee]*100):this.prop.v[ee],this.o[ee-this.data.p*4]!==re&&(this.o[ee-this.data.p*4]=re,this._omdf=!ie);this._mdf=!ie}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.initGradientData(ie,ee,te)}SVGGradientFillStyleData.prototype.initGradientData=function(ie,ee,te){this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.s=PropertyFactory.getProp(ie,ee.s,1,null,this),this.e=PropertyFactory.getProp(ie,ee.e,1,null,this),this.h=PropertyFactory.getProp(ie,ee.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(ie,ee.a||{k:0},0,degToRads,this),this.g=new GradientProperty(ie,ee.g,this),this.style=te,this.stops=[],this.setGradientData(te.pElem,ee),this.setGradientOpacity(ee,te),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(ie,ee){var te=createElementID(),ne=createNS(ee.t===1?"linearGradient":"radialGradient");ne.setAttribute("id",te),ne.setAttribute("spreadMethod","pad"),ne.setAttribute("gradientUnits","userSpaceOnUse");var re=[],se,ae,oe;for(oe=ee.g.p*4,ae=0;ae<oe;ae+=4)se=createNS("stop"),ne.appendChild(se),re.push(se);ie.setAttribute(ee.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+te+")"),this.gf=ne,this.cst=re},SVGGradientFillStyleData.prototype.setGradientOpacity=function(ie,ee){if(this.g._hasOpacity&&!this.g._collapsable){var te,ne,re,se=createNS("mask"),ae=createNS("path");se.appendChild(ae);var oe=createElementID(),le=createElementID();se.setAttribute("id",le);var ce=createNS(ie.t===1?"linearGradient":"radialGradient");ce.setAttribute("id",oe),ce.setAttribute("spreadMethod","pad"),ce.setAttribute("gradientUnits","userSpaceOnUse"),re=ie.g.k.k[0].s?ie.g.k.k[0].s.length:ie.g.k.k.length;var he=this.stops;for(ne=ie.g.p*4;ne<re;ne+=2)te=createNS("stop"),te.setAttribute("stop-color","rgb(255,255,255)"),ce.appendChild(te),he.push(te);ae.setAttribute(ie.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+oe+")"),ie.ty==="gs"&&(ae.setAttribute("stroke-linecap",lineCapEnum[ie.lc||2]),ae.setAttribute("stroke-linejoin",lineJoinEnum[ie.lj||2]),ie.lj===1&&ae.setAttribute("stroke-miterlimit",ie.ml)),this.of=ce,this.ms=se,this.ost=he,this.maskId=le,ee.msElem=ae}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(ie,ee.w,0,null,this),this.d=new DashProperty(ie,ee.d||{},"svg",this),this.initGradientData(ie,ee,te),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(ie,ee,te){this.transform={mProps:ie,op:ee,container:te},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(ee,te,ne,re){if(te===0)return"";var se=ee.o,ae=ee.i,oe=ee.v,le,ce=" M"+re.applyToPointStringified(oe[0][0],oe[0][1]);for(le=1;le<te;le+=1)ce+=" C"+re.applyToPointStringified(se[le-1][0],se[le-1][1])+" "+re.applyToPointStringified(ae[le][0],ae[le][1])+" "+re.applyToPointStringified(oe[le][0],oe[le][1]);return ne&&te&&(ce+=" C"+re.applyToPointStringified(se[le-1][0],se[le-1][1])+" "+re.applyToPointStringified(ae[0][0],ae[0][1])+" "+re.applyToPointStringified(oe[0][0],oe[0][1]),ce+="z"),ce},SVGElementsRenderer=function(){var ie=new Matrix,ee=new Matrix,te={createRenderFunction:ne};function ne(fe){switch(fe.ty){case"fl":return oe;case"gf":return ce;case"gs":return le;case"st":return he;case"sh":case"el":case"rc":case"sr":return ae;case"tr":return re;case"no":return se;default:return null}}function re(fe,ue,de){(de||ue.transform.op._mdf)&&ue.transform.container.setAttribute("opacity",ue.transform.op.v),(de||ue.transform.mProps._mdf)&&ue.transform.container.setAttribute("transform",ue.transform.mProps.v.to2dCSS())}function se(){}function ae(fe,ue,de){var ge,me,ve,pe,ye,_e,xe=ue.styles.length,Se=ue.lvl,be,Ee,Pe,we;for(_e=0;_e<xe;_e+=1){if(pe=ue.sh._mdf||de,ue.styles[_e].lvl<Se){for(Ee=ee.reset(),Pe=Se-ue.styles[_e].lvl,we=ue.transformers.length-1;!pe&&Pe>0;)pe=ue.transformers[we].mProps._mdf||pe,Pe-=1,we-=1;if(pe)for(Pe=Se-ue.styles[_e].lvl,we=ue.transformers.length-1;Pe>0;)Ee.multiply(ue.transformers[we].mProps.v),Pe-=1,we-=1}else Ee=ie;if(be=ue.sh.paths,me=be._length,pe){for(ve="",ge=0;ge<me;ge+=1)ye=be.shapes[ge],ye&&ye._length&&(ve+=buildShapeString(ye,ye._length,ye.c,Ee));ue.caches[_e]=ve}else ve=ue.caches[_e];ue.styles[_e].d+=fe.hd===!0?"":ve,ue.styles[_e]._mdf=pe||ue.styles[_e]._mdf}}function oe(fe,ue,de){var ge=ue.style;(ue.c._mdf||de)&&ge.pElem.setAttribute("fill","rgb("+bmFloor(ue.c.v[0])+","+bmFloor(ue.c.v[1])+","+bmFloor(ue.c.v[2])+")"),(ue.o._mdf||de)&&ge.pElem.setAttribute("fill-opacity",ue.o.v)}function le(fe,ue,de){ce(fe,ue,de),he(fe,ue,de)}function ce(fe,ue,de){var ge=ue.gf,me=ue.g._hasOpacity,ve=ue.s.v,pe=ue.e.v;if(ue.o._mdf||de){var ye=fe.ty==="gf"?"fill-opacity":"stroke-opacity";ue.style.pElem.setAttribute(ye,ue.o.v)}if(ue.s._mdf||de){var _e=fe.t===1?"x1":"cx",xe=_e==="x1"?"y1":"cy";ge.setAttribute(_e,ve[0]),ge.setAttribute(xe,ve[1]),me&&!ue.g._collapsable&&(ue.of.setAttribute(_e,ve[0]),ue.of.setAttribute(xe,ve[1]))}var Se,be,Ee,Pe;if(ue.g._cmdf||de){Se=ue.cst;var we=ue.g.c;for(Ee=Se.length,be=0;be<Ee;be+=1)Pe=Se[be],Pe.setAttribute("offset",we[be*4]+"%"),Pe.setAttribute("stop-color","rgb("+we[be*4+1]+","+we[be*4+2]+","+we[be*4+3]+")")}if(me&&(ue.g._omdf||de)){var Me=ue.g.o;for(ue.g._collapsable?Se=ue.cst:Se=ue.ost,Ee=Se.length,be=0;be<Ee;be+=1)Pe=Se[be],ue.g._collapsable||Pe.setAttribute("offset",Me[be*2]+"%"),Pe.setAttribute("stop-opacity",Me[be*2+1])}if(fe.t===1)(ue.e._mdf||de)&&(ge.setAttribute("x2",pe[0]),ge.setAttribute("y2",pe[1]),me&&!ue.g._collapsable&&(ue.of.setAttribute("x2",pe[0]),ue.of.setAttribute("y2",pe[1])));else{var De;if((ue.s._mdf||ue.e._mdf||de)&&(De=Math.sqrt(Math.pow(ve[0]-pe[0],2)+Math.pow(ve[1]-pe[1],2)),ge.setAttribute("r",De),me&&!ue.g._collapsable&&ue.of.setAttribute("r",De)),ue.e._mdf||ue.h._mdf||ue.a._mdf||de){De||(De=Math.sqrt(Math.pow(ve[0]-pe[0],2)+Math.pow(ve[1]-pe[1],2)));var ke=Math.atan2(pe[1]-ve[1],pe[0]-ve[0]),ze=ue.h.v;ze>=1?ze=.99:ze<=-1&&(ze=-.99);var Ve=De*ze,Ue=Math.cos(ke+ue.a.v)*Ve+ve[0],Ae=Math.sin(ke+ue.a.v)*Ve+ve[1];ge.setAttribute("fx",Ue),ge.setAttribute("fy",Ae),me&&!ue.g._collapsable&&(ue.of.setAttribute("fx",Ue),ue.of.setAttribute("fy",Ae))}}}function he(fe,ue,de){var ge=ue.style,me=ue.d;me&&(me._mdf||de)&&me.dashStr&&(ge.pElem.setAttribute("stroke-dasharray",me.dashStr),ge.pElem.setAttribute("stroke-dashoffset",me.dashoffset[0])),ue.c&&(ue.c._mdf||de)&&ge.pElem.setAttribute("stroke","rgb("+bmFloor(ue.c.v[0])+","+bmFloor(ue.c.v[1])+","+bmFloor(ue.c.v[2])+")"),(ue.o._mdf||de)&&ge.pElem.setAttribute("stroke-opacity",ue.o.v),(ue.w._mdf||de)&&(ge.pElem.setAttribute("stroke-width",ue.w.v),ge.msElem&&ge.msElem.setAttribute("stroke-width",ue.w.v))}return te}();function SVGShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(ie,ee,te),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var ie,ee=this.shapes.length,te,ne,re=this.stylesList.length,se,ae=[],oe=!1;for(ne=0;ne<re;ne+=1){for(se=this.stylesList[ne],oe=!1,ae.length=0,ie=0;ie<ee;ie+=1)te=this.shapes[ie],te.styles.indexOf(se)!==-1&&(ae.push(te),oe=te._isAnimated||oe);ae.length>1&&oe&&this.setShapesAsAnimated(ae)}},SVGShapeElement.prototype.setShapesAsAnimated=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(ie,ee){var te,ne=new SVGStyleData(ie,ee),re=ne.pElem;if(ie.ty==="st")te=new SVGStrokeStyleData(this,ie,ne);else if(ie.ty==="fl")te=new SVGFillStyleData(this,ie,ne);else if(ie.ty==="gf"||ie.ty==="gs"){var se=ie.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;te=new se(this,ie,ne),this.globalData.defs.appendChild(te.gf),te.maskId&&(this.globalData.defs.appendChild(te.ms),this.globalData.defs.appendChild(te.of),re.setAttribute("mask","url("+getLocationHref()+"#"+te.maskId+")"))}else ie.ty==="no"&&(te=new SVGNoStyleData(this,ie,ne));return(ie.ty==="st"||ie.ty==="gs")&&(re.setAttribute("stroke-linecap",lineCapEnum[ie.lc||2]),re.setAttribute("stroke-linejoin",lineJoinEnum[ie.lj||2]),re.setAttribute("fill-opacity","0"),ie.lj===1&&re.setAttribute("stroke-miterlimit",ie.ml)),ie.r===2&&re.setAttribute("fill-rule","evenodd"),ie.ln&&re.setAttribute("id",ie.ln),ie.cl&&re.setAttribute("class",ie.cl),ie.bm&&(re.style["mix-blend-mode"]=getBlendMode(ie.bm)),this.stylesList.push(ne),this.addToAnimatedContents(ie,te),te},SVGShapeElement.prototype.createGroupElement=function(ie){var ee=new ShapeGroupData;return ie.ln&&ee.gr.setAttribute("id",ie.ln),ie.cl&&ee.gr.setAttribute("class",ie.cl),ie.bm&&(ee.gr.style["mix-blend-mode"]=getBlendMode(ie.bm)),ee},SVGShapeElement.prototype.createTransformElement=function(ie,ee){var te=TransformPropertyFactory.getTransformProperty(this,ie,this),ne=new SVGTransformData(te,te.o,ee);return this.addToAnimatedContents(ie,ne),ne},SVGShapeElement.prototype.createShapeElement=function(ie,ee,te){var ne=4;ie.ty==="rc"?ne=5:ie.ty==="el"?ne=6:ie.ty==="sr"&&(ne=7);var re=ShapePropertyFactory.getShapeProp(this,ie,ne,this),se=new SVGShapeData(ee,te,re);return this.shapes.push(se),this.addShapeToModifiers(se),this.addToAnimatedContents(ie,se),se},SVGShapeElement.prototype.addToAnimatedContents=function(ie,ee){for(var te=0,ne=this.animatedContents.length;te<ne;){if(this.animatedContents[te].element===ee)return;te+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(ie),element:ee,data:ie})},SVGShapeElement.prototype.setElementStyles=function(ie){var ee=ie.styles,te,ne=this.stylesList.length;for(te=0;te<ne;te+=1)this.stylesList[te].closed||ee.push(this.stylesList[te])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var ie,ee=this.itemsData.length;for(ie=0;ie<ee;ie+=1)this.prevViewData[ie]=this.itemsData[ie];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),ee=this.dynamicProperties.length,ie=0;ie<ee;ie+=1)this.dynamicProperties[ie].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(ie,ee,te,ne,re,se,ae){var oe=[].concat(se),le,ce=ie.length-1,he,fe,ue=[],de=[],ge,me,ve;for(le=ce;le>=0;le-=1){if(ve=this.searchProcessedElement(ie[le]),ve?ee[le]=te[ve-1]:ie[le]._render=ae,ie[le].ty==="fl"||ie[le].ty==="st"||ie[le].ty==="gf"||ie[le].ty==="gs"||ie[le].ty==="no")ve?ee[le].style.closed=!1:ee[le]=this.createStyleElement(ie[le],re),ie[le]._render&&ee[le].style.pElem.parentNode!==ne&&ne.appendChild(ee[le].style.pElem),ue.push(ee[le].style);else if(ie[le].ty==="gr"){if(!ve)ee[le]=this.createGroupElement(ie[le]);else for(fe=ee[le].it.length,he=0;he<fe;he+=1)ee[le].prevViewData[he]=ee[le].it[he];this.searchShapes(ie[le].it,ee[le].it,ee[le].prevViewData,ee[le].gr,re+1,oe,ae),ie[le]._render&&ee[le].gr.parentNode!==ne&&ne.appendChild(ee[le].gr)}else ie[le].ty==="tr"?(ve||(ee[le]=this.createTransformElement(ie[le],ne)),ge=ee[le].transform,oe.push(ge)):ie[le].ty==="sh"||ie[le].ty==="rc"||ie[le].ty==="el"||ie[le].ty==="sr"?(ve||(ee[le]=this.createShapeElement(ie[le],oe,re)),this.setElementStyles(ee[le])):ie[le].ty==="tm"||ie[le].ty==="rd"||ie[le].ty==="ms"||ie[le].ty==="pb"||ie[le].ty==="zz"||ie[le].ty==="op"?(ve?(me=ee[le],me.closed=!1):(me=ShapeModifiers.getModifier(ie[le].ty),me.init(this,ie[le]),ee[le]=me,this.shapeModifiers.push(me)),de.push(me)):ie[le].ty==="rp"&&(ve?(me=ee[le],me.closed=!0):(me=ShapeModifiers.getModifier(ie[le].ty),ee[le]=me,me.init(this,ie,le,ee),this.shapeModifiers.push(me),ae=!1),de.push(me));this.addProcessedElement(ie[le],le+1)}for(ce=ue.length,le=0;le<ce;le+=1)ue[le].closed=!0;for(ce=de.length,le=0;le<ce;le+=1)de[le].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var ie,ee=this.stylesList.length;for(ie=0;ie<ee;ie+=1)this.stylesList[ie].reset();for(this.renderShape(),ie=0;ie<ee;ie+=1)(this.stylesList[ie]._mdf||this._isFirstFrame)&&(this.stylesList[ie].msElem&&(this.stylesList[ie].msElem.setAttribute("d",this.stylesList[ie].d),this.stylesList[ie].d="M0 0"+this.stylesList[ie].d),this.stylesList[ie].pElem.setAttribute("d",this.stylesList[ie].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var ie,ee=this.animatedContents.length,te;for(ie=0;ie<ee;ie+=1)te=this.animatedContents[ie],(this._isFirstFrame||te.element._isAnimated)&&te.data!==!0&&te.fn(te.data,te.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(ie,ee,te,ne,re,se){this.o=ie,this.sw=ee,this.sc=te,this.fc=ne,this.m=re,this.p=se,this._mdf={o:!0,sw:!!ee,sc:!!te,fc:!!ne,m:!0,p:!0}}LetterProps.prototype.update=function(ie,ee,te,ne,re,se){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var ae=!1;return this.o!==ie&&(this.o=ie,this._mdf.o=!0,ae=!0),this.sw!==ee&&(this.sw=ee,this._mdf.sw=!0,ae=!0),this.sc!==te&&(this.sc=te,this._mdf.sc=!0,ae=!0),this.fc!==ne&&(this.fc=ne,this._mdf.fc=!0,ae=!0),this.m!==re&&(this.m=re,this._mdf.m=!0,ae=!0),se.length&&(this.p[0]!==se[0]||this.p[1]!==se[1]||this.p[4]!==se[4]||this.p[5]!==se[5]||this.p[12]!==se[12]||this.p[13]!==se[13])&&(this.p=se,this._mdf.p=!0,ae=!0),ae};function TextProperty(ie,ee){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,ee.d&&ee.d.sid&&(ee.d=ie.globalData.slotManager.getProp(ee.d)),this.data=ee,this.elem=ie,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(ie,ee){for(var te in ee)Object.prototype.hasOwnProperty.call(ee,te)&&(ie[te]=ee[te]);return ie},TextProperty.prototype.setCurrentData=function(ie){ie.__complete||this.completeTextData(ie),this.currentData=ie,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(ie){this.effectsSequence.push(ie),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(ie){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!ie)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var ee=this.currentData,te=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ne,re=this.effectsSequence.length,se=ie||this.data.d.k[this.keysIndex].s;for(ne=0;ne<re;ne+=1)te!==this.keysIndex?se=this.effectsSequence[ne](se,se.t):se=this.effectsSequence[ne](this.currentData,se.t);ee!==se&&this.setCurrentData(se),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var ie=this.data.d.k,ee=this.elem.comp.renderedFrame,te=0,ne=ie.length;te<=ne-1&&!(te===ne-1||ie[te+1].t>ee);)te+=1;return this.keysIndex!==te&&(this.keysIndex=te),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(ie){for(var ee=[],te=0,ne=ie.length,re,se,ae=!1,oe=!1,le="";te<ne;)ae=oe,oe=!1,re=ie.charCodeAt(te),le=ie.charAt(te),FontManager.isCombinedCharacter(re)?ae=!0:re>=55296&&re<=56319?FontManager.isRegionalFlag(ie,te)?le=ie.substr(te,14):(se=ie.charCodeAt(te+1),se>=56320&&se<=57343&&(FontManager.isModifier(re,se)?(le=ie.substr(te,2),ae=!0):FontManager.isFlagEmoji(ie.substr(te,4))?le=ie.substr(te,4):le=ie.substr(te,2))):re>56319?(se=ie.charCodeAt(te+1),FontManager.isVariationSelector(re)&&(ae=!0)):FontManager.isZeroWidthJoiner(re)&&(ae=!0,oe=!0),ae?(ee[ee.length-1]+=le,ae=!1):ee.push(le),te+=le.length;return ee},TextProperty.prototype.completeTextData=function(ie){ie.__complete=!0;var ee=this.elem.globalData.fontManager,te=this.data,ne=[],re,se,ae,oe=0,le,ce=te.m.g,he=0,fe=0,ue=0,de=[],ge=0,me=0,ve,pe,ye=ee.getFontByName(ie.f),_e,xe=0,Se=getFontProperties(ye);ie.fWeight=Se.weight,ie.fStyle=Se.style,ie.finalSize=ie.s,ie.finalText=this.buildFinalText(ie.t),se=ie.finalText.length,ie.finalLineHeight=ie.lh;var be=ie.tr/1e3*ie.finalSize,Ee;if(ie.sz)for(var Pe=!0,we=ie.sz[0],Me=ie.sz[1],De,ke;Pe;){ke=this.buildFinalText(ie.t),De=0,ge=0,se=ke.length,be=ie.tr/1e3*ie.finalSize;var ze=-1;for(re=0;re<se;re+=1)Ee=ke[re].charCodeAt(0),ae=!1,ke[re]===" "?ze=re:(Ee===13||Ee===3)&&(ge=0,ae=!0,De+=ie.finalLineHeight||ie.finalSize*1.2),ee.chars?(_e=ee.getCharData(ke[re],ye.fStyle,ye.fFamily),xe=ae?0:_e.w*ie.finalSize/100):xe=ee.measureText(ke[re],ie.f,ie.finalSize),ge+xe>we&&ke[re]!==" "?(ze===-1?se+=1:re=ze,De+=ie.finalLineHeight||ie.finalSize*1.2,ke.splice(re,ze===re?1:0,"\r"),ze=-1,ge=0):(ge+=xe,ge+=be);De+=ye.ascent*ie.finalSize/100,this.canResize&&ie.finalSize>this.minimumFontSize&&Me<De?(ie.finalSize-=1,ie.finalLineHeight=ie.finalSize*ie.lh/ie.s):(ie.finalText=ke,se=ie.finalText.length,Pe=!1)}ge=-be,xe=0;var Ve=0,Ue;for(re=0;re<se;re+=1)if(ae=!1,Ue=ie.finalText[re],Ee=Ue.charCodeAt(0),Ee===13||Ee===3?(Ve=0,de.push(ge),me=ge>me?ge:me,ge=-2*be,le="",ae=!0,ue+=1):le=Ue,ee.chars?(_e=ee.getCharData(Ue,ye.fStyle,ee.getFontByName(ie.f).fFamily),xe=ae?0:_e.w*ie.finalSize/100):xe=ee.measureText(le,ie.f,ie.finalSize),Ue===" "?Ve+=xe+be:(ge+=xe+be+Ve,Ve=0),ne.push({l:xe,an:xe,add:he,n:ae,anIndexes:[],val:le,line:ue,animatorJustifyOffset:0}),ce==2){if(he+=xe,le===""||le===" "||re===se-1){for((le===""||le===" ")&&(he-=xe);fe<=re;)ne[fe].an=he,ne[fe].ind=oe,ne[fe].extra=xe,fe+=1;oe+=1,he=0}}else if(ce==3){if(he+=xe,le===""||re===se-1){for(le===""&&(he-=xe);fe<=re;)ne[fe].an=he,ne[fe].ind=oe,ne[fe].extra=xe,fe+=1;he=0,oe+=1}}else ne[oe].ind=oe,ne[oe].extra=0,oe+=1;if(ie.l=ne,me=ge>me?ge:me,de.push(ge),ie.sz)ie.boxWidth=ie.sz[0],ie.justifyOffset=0;else switch(ie.boxWidth=me,ie.j){case 1:ie.justifyOffset=-ie.boxWidth;break;case 2:ie.justifyOffset=-ie.boxWidth/2;break;default:ie.justifyOffset=0}ie.lineWidths=de;var Ae=te.a,Fe,Te;pe=Ae.length;var Ce,Le,Be=[];for(ve=0;ve<pe;ve+=1){for(Fe=Ae[ve],Fe.a.sc&&(ie.strokeColorAnim=!0),Fe.a.sw&&(ie.strokeWidthAnim=!0),(Fe.a.fc||Fe.a.fh||Fe.a.fs||Fe.a.fb)&&(ie.fillColorAnim=!0),Le=0,Ce=Fe.s.b,re=0;re<se;re+=1)Te=ne[re],Te.anIndexes[ve]=Le,(Ce==1&&Te.val!==""||Ce==2&&Te.val!==""&&Te.val!==" "||Ce==3&&(Te.n||Te.val==" "||re==se-1)||Ce==4&&(Te.n||re==se-1))&&(Fe.s.rn===1&&Be.push(Le),Le+=1);te.a[ve].s.totalChars=Le;var st=-1,Xe;if(Fe.s.rn===1)for(re=0;re<se;re+=1)Te=ne[re],st!=Te.anIndexes[ve]&&(st=Te.anIndexes[ve],Xe=Be.splice(Math.floor(Math.random()*Be.length),1)[0]),Te.anIndexes[ve]=Xe}ie.yOffset=ie.finalLineHeight||ie.finalSize*1.2,ie.ls=ie.ls||0,ie.ascent=ye.ascent*ie.finalSize/100},TextProperty.prototype.updateDocumentData=function(ie,ee){ee=ee===void 0?this.keysIndex:ee;var te=this.copyData({},this.data.d.k[ee].s);te=this.copyData(te,ie),this.data.d.k[ee].s=te,this.recalculate(ee),this.setCurrentData(te),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(ie){var ee=this.data.d.k[ie].s;ee.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(ee)},TextProperty.prototype.canResizeFont=function(ie){this.canResize=ie,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(ie){this.minimumFontSize=Math.floor(ie)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var ie=Math.max,ee=Math.min,te=Math.floor;function ne(se,ae){this._currentTextLength=-1,this.k=!1,this.data=ae,this.elem=se,this.comp=se.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(se),this.s=PropertyFactory.getProp(se,ae.s||{k:0},0,0,this),"e"in ae?this.e=PropertyFactory.getProp(se,ae.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(se,ae.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(se,ae.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(se,ae.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(se,ae.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(se,ae.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ne.prototype={getMult:function(ae){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var oe=0,le=0,ce=1,he=1;this.ne.v>0?oe=this.ne.v/100:le=-this.ne.v/100,this.xe.v>0?ce=1-this.xe.v/100:he=1+this.xe.v/100;var fe=BezierFactory.getBezierEasing(oe,le,ce,he).get,ue=0,de=this.finalS,ge=this.finalE,me=this.data.sh;if(me===2)ge===de?ue=ae>=ge?1:0:ue=ie(0,ee(.5/(ge-de)+(ae-de)/(ge-de),1)),ue=fe(ue);else if(me===3)ge===de?ue=ae>=ge?0:1:ue=1-ie(0,ee(.5/(ge-de)+(ae-de)/(ge-de),1)),ue=fe(ue);else if(me===4)ge===de?ue=0:(ue=ie(0,ee(.5/(ge-de)+(ae-de)/(ge-de),1)),ue<.5?ue*=2:ue=1-2*(ue-.5)),ue=fe(ue);else if(me===5){if(ge===de)ue=0;else{var ve=ge-de;ae=ee(ie(0,ae+.5-de),ge-de);var pe=-ve/2+ae,ye=ve/2;ue=Math.sqrt(1-pe*pe/(ye*ye))}ue=fe(ue)}else me===6?(ge===de?ue=0:(ae=ee(ie(0,ae+.5-de),ge-de),ue=(1+Math.cos(Math.PI+Math.PI*2*ae/(ge-de)))/2),ue=fe(ue)):(ae>=te(de)&&(ae-de<0?ue=ie(0,ee(ee(ge,1)-(de-ae),1)):ue=ie(0,ee(ge-ae,1))),ue=fe(ue));if(this.sm.v!==100){var _e=this.sm.v*.01;_e===0&&(_e=1e-8);var xe=.5-_e*.5;ue<xe?ue=0:(ue=(ue-xe)/_e,ue>1&&(ue=1))}return ue*this.a.v},getValue:function(ae){this.iterateDynamicProperties(),this._mdf=ae||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,ae&&this.data.r===2&&(this.e.v=this._currentTextLength);var oe=this.data.r===2?1:100/this.data.totalChars,le=this.o.v/oe,ce=this.s.v/oe+le,he=this.e.v/oe+le;if(ce>he){var fe=ce;ce=he,he=fe}this.finalS=ce,this.finalE=he}},extendPrototype([DynamicPropertyContainer],ne);function re(se,ae,oe){return new ne(se,ae)}return{getTextSelectorProp:re}}();function TextAnimatorDataProperty(ie,ee,te){var ne={propType:!1},re=PropertyFactory.getProp,se=ee.a;this.a={r:se.r?re(ie,se.r,0,degToRads,te):ne,rx:se.rx?re(ie,se.rx,0,degToRads,te):ne,ry:se.ry?re(ie,se.ry,0,degToRads,te):ne,sk:se.sk?re(ie,se.sk,0,degToRads,te):ne,sa:se.sa?re(ie,se.sa,0,degToRads,te):ne,s:se.s?re(ie,se.s,1,.01,te):ne,a:se.a?re(ie,se.a,1,0,te):ne,o:se.o?re(ie,se.o,0,.01,te):ne,p:se.p?re(ie,se.p,1,0,te):ne,sw:se.sw?re(ie,se.sw,0,0,te):ne,sc:se.sc?re(ie,se.sc,1,0,te):ne,fc:se.fc?re(ie,se.fc,1,0,te):ne,fh:se.fh?re(ie,se.fh,0,0,te):ne,fs:se.fs?re(ie,se.fs,0,.01,te):ne,fb:se.fb?re(ie,se.fb,0,.01,te):ne,t:se.t?re(ie,se.t,0,0,te):ne},this.s=TextSelectorProp.getTextSelectorProp(ie,ee.s,te),this.s.t=ee.s.t}function TextAnimatorProperty(ie,ee,te){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=ie,this._renderType=ee,this._elem=te,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(te)}TextAnimatorProperty.prototype.searchProperties=function(){var ie,ee=this._textData.a.length,te,ne=PropertyFactory.getProp;for(ie=0;ie<ee;ie+=1)te=this._textData.a[ie],this._animatorsData[ie]=new TextAnimatorDataProperty(this._elem,te,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ne(this._elem,this._textData.p.a,0,0,this),f:ne(this._elem,this._textData.p.f,0,0,this),l:ne(this._elem,this._textData.p.l,0,0,this),r:ne(this._elem,this._textData.p.r,0,0,this),p:ne(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ne(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(ie,ee){if(this.lettersChangedFlag=ee,!(!this._mdf&&!this._isFirstFrame&&!ee&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var te=this._moreOptions.alignment.v,ne=this._animatorsData,re=this._textData,se=this.mHelper,ae=this._renderType,oe=this.renderedLetters.length,le,ce,he,fe,ue=ie.l,de,ge,me,ve,pe,ye,_e,xe,Se,be,Ee,Pe,we,Me,De;if(this._hasMaskedPath){if(De=this._pathData.m,!this._pathData.n||this._pathData._mdf){var ke=De.v;this._pathData.r.v&&(ke=ke.reverse()),de={tLength:0,segments:[]},fe=ke._length-1;var ze;for(Pe=0,he=0;he<fe;he+=1)ze=bez.buildBezierData(ke.v[he],ke.v[he+1],[ke.o[he][0]-ke.v[he][0],ke.o[he][1]-ke.v[he][1]],[ke.i[he+1][0]-ke.v[he+1][0],ke.i[he+1][1]-ke.v[he+1][1]]),de.tLength+=ze.segmentLength,de.segments.push(ze),Pe+=ze.segmentLength;he=fe,De.v.c&&(ze=bez.buildBezierData(ke.v[he],ke.v[0],[ke.o[he][0]-ke.v[he][0],ke.o[he][1]-ke.v[he][1]],[ke.i[0][0]-ke.v[0][0],ke.i[0][1]-ke.v[0][1]]),de.tLength+=ze.segmentLength,de.segments.push(ze),Pe+=ze.segmentLength),this._pathData.pi=de}if(de=this._pathData.pi,ge=this._pathData.f.v,_e=0,ye=1,ve=0,pe=!0,be=de.segments,ge<0&&De.v.c)for(de.tLength<Math.abs(ge)&&(ge=-Math.abs(ge)%de.tLength),_e=be.length-1,Se=be[_e].points,ye=Se.length-1;ge<0;)ge+=Se[ye].partialLength,ye-=1,ye<0&&(_e-=1,Se=be[_e].points,ye=Se.length-1);Se=be[_e].points,xe=Se[ye-1],me=Se[ye],Ee=me.partialLength}fe=ue.length,le=0,ce=0;var Ve=ie.finalSize*1.2*.714,Ue=!0,Ae,Fe,Te,Ce,Le;Ce=ne.length;var Be,st=-1,Xe,Ge,He,Je=ge,et=_e,ht=ye,vt=-1,gt,yt,Oe,Ze,qe,ut,at,We,ft="",St=this.defaultPropsArray,$e;if(ie.j===2||ie.j===1){var Re=0,Qe=0,ct=ie.j===2?-.5:-1,lt=0,ot=!0;for(he=0;he<fe;he+=1)if(ue[he].n){for(Re&&(Re+=Qe);lt<he;)ue[lt].animatorJustifyOffset=Re,lt+=1;Re=0,ot=!0}else{for(Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.t.propType&&(ot&&ie.j===2&&(Qe+=Ae.t.v*ct),Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Be.length?Re+=Ae.t.v*Be[0]*ct:Re+=Ae.t.v*Be*ct);ot=!1}for(Re&&(Re+=Qe);lt<he;)ue[lt].animatorJustifyOffset=Re,lt+=1}for(he=0;he<fe;he+=1){if(se.reset(),gt=1,ue[he].n)le=0,ce+=ie.yOffset,ce+=Ue?1:0,ge=Je,Ue=!1,this._hasMaskedPath&&(_e=et,ye=ht,Se=be[_e].points,xe=Se[ye-1],me=Se[ye],Ee=me.partialLength,ve=0),ft="",We="",ut="",$e="",St=this.defaultPropsArray;else{if(this._hasMaskedPath){if(vt!==ue[he].line){switch(ie.j){case 1:ge+=Pe-ie.lineWidths[ue[he].line];break;case 2:ge+=(Pe-ie.lineWidths[ue[he].line])/2;break}vt=ue[he].line}st!==ue[he].ind&&(ue[st]&&(ge+=ue[st].extra),ge+=ue[he].an/2,st=ue[he].ind),ge+=te[0]*ue[he].an*.005;var Et=0;for(Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.p.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Be.length?Et+=Ae.p.v[0]*Be[0]:Et+=Ae.p.v[0]*Be),Ae.a.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Be.length?Et+=Ae.a.v[0]*Be[0]:Et+=Ae.a.v[0]*Be);for(pe=!0,this._pathData.a.v&&(ge=ue[0].an*.5+(Pe-this._pathData.f.v-ue[0].an*.5-ue[ue.length-1].an*.5)*st/(fe-1),ge+=this._pathData.f.v);pe;)ve+Ee>=ge+Et||!Se?(we=(ge+Et-ve)/me.partialLength,Ge=xe.point[0]+(me.point[0]-xe.point[0])*we,He=xe.point[1]+(me.point[1]-xe.point[1])*we,se.translate(-te[0]*ue[he].an*.005,-(te[1]*Ve)*.01),pe=!1):Se&&(ve+=me.partialLength,ye+=1,ye>=Se.length&&(ye=0,_e+=1,be[_e]?Se=be[_e].points:De.v.c?(ye=0,_e=0,Se=be[_e].points):(ve-=me.partialLength,Se=null)),Se&&(xe=me,me=Se[ye],Ee=me.partialLength));Xe=ue[he].an/2-ue[he].add,se.translate(-Xe,0,0)}else Xe=ue[he].an/2-ue[he].add,se.translate(-Xe,0,0),se.translate(-te[0]*ue[he].an*.005,-te[1]*Ve*.01,0);for(Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.t.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),(le!==0||ie.j!==0)&&(this._hasMaskedPath?Be.length?ge+=Ae.t.v*Be[0]:ge+=Ae.t.v*Be:Be.length?le+=Ae.t.v*Be[0]:le+=Ae.t.v*Be));for(ie.strokeWidthAnim&&(Oe=ie.sw||0),ie.strokeColorAnim&&(ie.sc?yt=[ie.sc[0],ie.sc[1],ie.sc[2]]:yt=[0,0,0]),ie.fillColorAnim&&ie.fc&&(Ze=[ie.fc[0],ie.fc[1],ie.fc[2]]),Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.a.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Be.length?se.translate(-Ae.a.v[0]*Be[0],-Ae.a.v[1]*Be[1],Ae.a.v[2]*Be[2]):se.translate(-Ae.a.v[0]*Be,-Ae.a.v[1]*Be,Ae.a.v[2]*Be));for(Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.s.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Be.length?se.scale(1+(Ae.s.v[0]-1)*Be[0],1+(Ae.s.v[1]-1)*Be[1],1):se.scale(1+(Ae.s.v[0]-1)*Be,1+(Ae.s.v[1]-1)*Be,1));for(Te=0;Te<Ce;Te+=1){if(Ae=ne[Te].a,Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),Ae.sk.propType&&(Be.length?se.skewFromAxis(-Ae.sk.v*Be[0],Ae.sa.v*Be[1]):se.skewFromAxis(-Ae.sk.v*Be,Ae.sa.v*Be)),Ae.r.propType&&(Be.length?se.rotateZ(-Ae.r.v*Be[2]):se.rotateZ(-Ae.r.v*Be)),Ae.ry.propType&&(Be.length?se.rotateY(Ae.ry.v*Be[1]):se.rotateY(Ae.ry.v*Be)),Ae.rx.propType&&(Be.length?se.rotateX(Ae.rx.v*Be[0]):se.rotateX(Ae.rx.v*Be)),Ae.o.propType&&(Be.length?gt+=(Ae.o.v*Be[0]-gt)*Be[0]:gt+=(Ae.o.v*Be-gt)*Be),ie.strokeWidthAnim&&Ae.sw.propType&&(Be.length?Oe+=Ae.sw.v*Be[0]:Oe+=Ae.sw.v*Be),ie.strokeColorAnim&&Ae.sc.propType)for(qe=0;qe<3;qe+=1)Be.length?yt[qe]+=(Ae.sc.v[qe]-yt[qe])*Be[0]:yt[qe]+=(Ae.sc.v[qe]-yt[qe])*Be;if(ie.fillColorAnim&&ie.fc){if(Ae.fc.propType)for(qe=0;qe<3;qe+=1)Be.length?Ze[qe]+=(Ae.fc.v[qe]-Ze[qe])*Be[0]:Ze[qe]+=(Ae.fc.v[qe]-Ze[qe])*Be;Ae.fh.propType&&(Be.length?Ze=addHueToRGB(Ze,Ae.fh.v*Be[0]):Ze=addHueToRGB(Ze,Ae.fh.v*Be)),Ae.fs.propType&&(Be.length?Ze=addSaturationToRGB(Ze,Ae.fs.v*Be[0]):Ze=addSaturationToRGB(Ze,Ae.fs.v*Be)),Ae.fb.propType&&(Be.length?Ze=addBrightnessToRGB(Ze,Ae.fb.v*Be[0]):Ze=addBrightnessToRGB(Ze,Ae.fb.v*Be))}}for(Te=0;Te<Ce;Te+=1)Ae=ne[Te].a,Ae.p.propType&&(Fe=ne[Te].s,Be=Fe.getMult(ue[he].anIndexes[Te],re.a[Te].s.totalChars),this._hasMaskedPath?Be.length?se.translate(0,Ae.p.v[1]*Be[0],-Ae.p.v[2]*Be[1]):se.translate(0,Ae.p.v[1]*Be,-Ae.p.v[2]*Be):Be.length?se.translate(Ae.p.v[0]*Be[0],Ae.p.v[1]*Be[1],-Ae.p.v[2]*Be[2]):se.translate(Ae.p.v[0]*Be,Ae.p.v[1]*Be,-Ae.p.v[2]*Be));if(ie.strokeWidthAnim&&(ut=Oe<0?0:Oe),ie.strokeColorAnim&&(at="rgb("+Math.round(yt[0]*255)+","+Math.round(yt[1]*255)+","+Math.round(yt[2]*255)+")"),ie.fillColorAnim&&ie.fc&&(We="rgb("+Math.round(Ze[0]*255)+","+Math.round(Ze[1]*255)+","+Math.round(Ze[2]*255)+")"),this._hasMaskedPath){if(se.translate(0,-ie.ls),se.translate(0,te[1]*Ve*.01+ce,0),this._pathData.p.v){Me=(me.point[1]-xe.point[1])/(me.point[0]-xe.point[0]);var dt=Math.atan(Me)*180/Math.PI;me.point[0]<xe.point[0]&&(dt+=180),se.rotate(-dt*Math.PI/180)}se.translate(Ge,He,0),ge-=te[0]*ue[he].an*.005,ue[he+1]&&st!==ue[he+1].ind&&(ge+=ue[he].an/2,ge+=ie.tr*.001*ie.finalSize)}else{switch(se.translate(le,ce,0),ie.ps&&se.translate(ie.ps[0],ie.ps[1]+ie.ascent,0),ie.j){case 1:se.translate(ue[he].animatorJustifyOffset+ie.justifyOffset+(ie.boxWidth-ie.lineWidths[ue[he].line]),0,0);break;case 2:se.translate(ue[he].animatorJustifyOffset+ie.justifyOffset+(ie.boxWidth-ie.lineWidths[ue[he].line])/2,0,0);break}se.translate(0,-ie.ls),se.translate(Xe,0,0),se.translate(te[0]*ue[he].an*.005,te[1]*Ve*.01,0),le+=ue[he].l+ie.tr*.001*ie.finalSize}ae==="html"?ft=se.toCSS():ae==="svg"?ft=se.to2dCSS():St=[se.props[0],se.props[1],se.props[2],se.props[3],se.props[4],se.props[5],se.props[6],se.props[7],se.props[8],se.props[9],se.props[10],se.props[11],se.props[12],se.props[13],se.props[14],se.props[15]],$e=gt}oe<=he?(Le=new LetterProps($e,ut,at,We,ft,St),this.renderedLetters.push(Le),oe+=1,this.lettersChangedFlag=!0):(Le=this.renderedLetters[he],this.lettersChangedFlag=Le.update($e,ut,at,We,ft,St)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(ie,ee,te){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(ie,ee,te),this.textProperty=new TextProperty(this,ie.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(ie.t,this.renderType,this),this.initTransform(ie,ee,te),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(ie){this._mdf=!1,this.prepareRenderableFrame(ie),this.prepareProperties(ie,this.isInRange)},ITextElement.prototype.createPathShape=function(ie,ee){var te,ne=ee.length,re,se="";for(te=0;te<ne;te+=1)ee[te].ty==="sh"&&(re=ee[te].ks.k,se+=buildShapeString(re,re.i.length,!0,ie));return se},ITextElement.prototype.updateDocumentData=function(ie,ee){this.textProperty.updateDocumentData(ie,ee)},ITextElement.prototype.canResizeFont=function(ie){this.textProperty.canResizeFont(ie)},ITextElement.prototype.setMinimumFontSize=function(ie){this.textProperty.setMinimumFontSize(ie)},ITextElement.prototype.applyTextPropertiesToMatrix=function(ie,ee,te,ne,re){switch(ie.ps&&ee.translate(ie.ps[0],ie.ps[1]+ie.ascent,0),ee.translate(0,-ie.ls,0),ie.j){case 1:ee.translate(ie.justifyOffset+(ie.boxWidth-ie.lineWidths[te]),0,0);break;case 2:ee.translate(ie.justifyOffset+(ie.boxWidth-ie.lineWidths[te])/2,0,0);break}ee.translate(ne,re,0)},ITextElement.prototype.buildColor=function(ie){return"rgb("+Math.round(ie[0]*255)+","+Math.round(ie[1]*255)+","+Math.round(ie[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(ie,ee,te){this.textSpans=[],this.renderType="svg",this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(ie){for(var ee=0,te=ie.length,ne=[],re="";ee<te;)ie[ee]==="\r"||ie[ee]===""?(ne.push(re),re=""):re+=ie[ee],ee+=1;return ne.push(re),ne},SVGTextLottieElement.prototype.buildShapeData=function(ie,ee){if(ie.shapes&&ie.shapes.length){var te=ie.shapes[0];if(te.it){var ne=te.it[te.it.length-1];ne.s&&(ne.s.k[0]=ee,ne.s.k[1]=ee)}}return ie},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var ie,ee,te=this.textProperty.currentData;this.renderedLetters=createSizedArray(te?te.l.length:0),te.fc?this.layerElement.setAttribute("fill",this.buildColor(te.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),te.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(te.sc)),this.layerElement.setAttribute("stroke-width",te.sw)),this.layerElement.setAttribute("font-size",te.finalSize);var ne=this.globalData.fontManager.getFontByName(te.f);if(ne.fClass)this.layerElement.setAttribute("class",ne.fClass);else{this.layerElement.setAttribute("font-family",ne.fFamily);var re=te.fWeight,se=te.fStyle;this.layerElement.setAttribute("font-style",se),this.layerElement.setAttribute("font-weight",re)}this.layerElement.setAttribute("aria-label",te.t);var ae=te.l||[],oe=!!this.globalData.fontManager.chars;ee=ae.length;var le,ce=this.mHelper,he="",fe=this.data.singleShape,ue=0,de=0,ge=!0,me=te.tr*.001*te.finalSize;if(fe&&!oe&&!te.sz){var ve=this.textContainer,pe="start";switch(te.j){case 1:pe="end";break;case 2:pe="middle";break;default:pe="start";break}ve.setAttribute("text-anchor",pe),ve.setAttribute("letter-spacing",me);var ye=this.buildTextContents(te.finalText);for(ee=ye.length,de=te.ps?te.ps[1]+te.ascent:0,ie=0;ie<ee;ie+=1)le=this.textSpans[ie].span||createNS("tspan"),le.textContent=ye[ie],le.setAttribute("x",0),le.setAttribute("y",de),le.style.display="inherit",ve.appendChild(le),this.textSpans[ie]||(this.textSpans[ie]={span:null,glyph:null}),this.textSpans[ie].span=le,de+=te.finalLineHeight;this.layerElement.appendChild(ve)}else{var _e=this.textSpans.length,xe;for(ie=0;ie<ee;ie+=1){if(this.textSpans[ie]||(this.textSpans[ie]={span:null,childSpan:null,glyph:null}),!oe||!fe||ie===0){if(le=_e>ie?this.textSpans[ie].span:createNS(oe?"g":"text"),_e<=ie){if(le.setAttribute("stroke-linecap","butt"),le.setAttribute("stroke-linejoin","round"),le.setAttribute("stroke-miterlimit","4"),this.textSpans[ie].span=le,oe){var Se=createNS("g");le.appendChild(Se),this.textSpans[ie].childSpan=Se}this.textSpans[ie].span=le,this.layerElement.appendChild(le)}le.style.display="inherit"}if(ce.reset(),fe&&(ae[ie].n&&(ue=-me,de+=te.yOffset,de+=ge?1:0,ge=!1),this.applyTextPropertiesToMatrix(te,ce,ae[ie].line,ue,de),ue+=ae[ie].l||0,ue+=me),oe){xe=this.globalData.fontManager.getCharData(te.finalText[ie],ne.fStyle,this.globalData.fontManager.getFontByName(te.f).fFamily);var be;if(xe.t===1)be=new SVGCompElement(xe.data,this.globalData,this);else{var Ee=emptyShapeData;xe.data&&xe.data.shapes&&(Ee=this.buildShapeData(xe.data,te.finalSize)),be=new SVGShapeElement(Ee,this.globalData,this)}if(this.textSpans[ie].glyph){var Pe=this.textSpans[ie].glyph;this.textSpans[ie].childSpan.removeChild(Pe.layerElement),Pe.destroy()}this.textSpans[ie].glyph=be,be._debug=!0,be.prepareFrame(0),be.renderFrame(),this.textSpans[ie].childSpan.appendChild(be.layerElement),xe.t===1&&this.textSpans[ie].childSpan.setAttribute("transform","scale("+te.finalSize/100+","+te.finalSize/100+")")}else fe&&le.setAttribute("transform","translate("+ce.props[12]+","+ce.props[13]+")"),le.textContent=ae[ie].val,le.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}fe&&le&&le.setAttribute("d",he)}for(;ie<this.textSpans.length;)this.textSpans[ie].span.style.display="none",ie+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var ie=this.layerElement.getBBox();this.bbox={top:ie.y,left:ie.x,width:ie.width,height:ie.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var ie,ee=this.textSpans.length,te;for(this.renderedFrame=this.comp.renderedFrame,ie=0;ie<ee;ie+=1)te=this.textSpans[ie].glyph,te&&(te.prepareFrame(this.comp.renderedFrame-this.data.st),te._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var ie,ee,te=this.textAnimator.renderedLetters,ne=this.textProperty.currentData.l;ee=ne.length;var re,se,ae;for(ie=0;ie<ee;ie+=1)ne[ie].n||(re=te[ie],se=this.textSpans[ie].span,ae=this.textSpans[ie].glyph,ae&&ae.renderFrame(),re._mdf.m&&se.setAttribute("transform",re.m),re._mdf.o&&se.setAttribute("opacity",re.o),re._mdf.sw&&se.setAttribute("stroke-width",re.sw),re._mdf.sc&&se.setAttribute("stroke",re.sc),re._mdf.fc&&se.setAttribute("fill",re.fc))}};function ISolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var ie=createNS("rect");ie.setAttribute("width",this.data.sw),ie.setAttribute("height",this.data.sh),ie.setAttribute("fill",this.data.sc),this.layerElement.appendChild(ie)};function NullElement(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initFrame(),this.initTransform(ie,ee,te),this.initHierarchy()}NullElement.prototype.prepareFrame=function(ie){this.prepareProperties(ie,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(ie){return new NullElement(ie,this.globalData,this)},SVGRendererBase.prototype.createShape=function(ie){return new SVGShapeElement(ie,this.globalData,this)},SVGRendererBase.prototype.createText=function(ie){return new SVGTextLottieElement(ie,this.globalData,this)},SVGRendererBase.prototype.createImage=function(ie){return new IImageElement(ie,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(ie){return new ISolidElement(ie,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(ie){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+ie.w+" "+ie.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",ie.w),this.svgElement.setAttribute("height",ie.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var ee=this.globalData.defs;this.setupGlobalData(ie,ee),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=ie;var te=createNS("clipPath"),ne=createNS("rect");ne.setAttribute("width",ie.w),ne.setAttribute("height",ie.h),ne.setAttribute("x",0),ne.setAttribute("y",0);var re=createElementID();te.setAttribute("id",re),te.appendChild(ne),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+re+")"),ee.appendChild(te),this.layers=ie.layers,this.elements=createSizedArray(ie.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var ie,ee=this.layers?this.layers.length:0;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(ie){var ee=0,te=this.layers.length;for(ee=0;ee<te;ee+=1)if(this.layers[ee].ind===ie)return ee;return-1},SVGRendererBase.prototype.buildItem=function(ie){var ee=this.elements;if(!(ee[ie]||this.layers[ie].ty===99)){ee[ie]=!0;var te=this.createItem(this.layers[ie]);if(ee[ie]=te,getExpressionsPlugin()&&(this.layers[ie].ty===0&&this.globalData.projectInterface.registerComposition(te),te.initExpressions()),this.appendElementInPos(te,ie),this.layers[ie].tt){var ne="tp"in this.layers[ie]?this.findIndexByInd(this.layers[ie].tp):ie-1;if(ne===-1)return;if(!this.elements[ne]||this.elements[ne]===!0)this.buildItem(ne),this.addPendingElement(te);else{var re=ee[ne],se=re.getMatte(this.layers[ie].tt);te.setMatte(se)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();if(ie.checkParenting(),ie.data.tt)for(var ee=0,te=this.elements.length;ee<te;){if(this.elements[ee]===ie){var ne="tp"in ie.data?this.findIndexByInd(ie.data.tp):ee-1,re=this.elements[ne],se=re.getMatte(this.layers[ee].tt);ie.setMatte(se);break}ee+=1}}},SVGRendererBase.prototype.renderFrame=function(ie){if(!(this.renderedFrame===ie||this.destroyed)){ie===null?ie=this.renderedFrame:this.renderedFrame=ie,this.globalData.frameNum=ie,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=ie,this.globalData._mdf=!1;var ee,te=this.layers.length;for(this.completeLayers||this.checkLayers(ie),ee=te-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].prepareFrame(ie-this.layers[ee].st);if(this.globalData._mdf)for(ee=0;ee<te;ee+=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(ie,ee){var te=ie.getBaseElement();if(te){for(var ne=0,re;ne<ee;)this.elements[ne]&&this.elements[ne]!==!0&&this.elements[ne].getBaseElement()&&(re=this.elements[ne].getBaseElement()),ne+=1;re?this.layerElement.insertBefore(te,re):this.layerElement.appendChild(te)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initTransform(ie,ee,te),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!ee.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(ie){if(this._mdf=!1,this.prepareRenderableFrame(ie),this.prepareProperties(ie,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=ie/this.data.sr;else{var ee=this.tm.v;ee===this.data.op&&(ee=this.data.op-1),this.renderedFrame=ee}var te,ne=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),te=ne-1;te>=0;te-=1)(this.completeLayers||this.elements[te])&&(this.elements[te].prepareFrame(this.renderedFrame-this.layers[te].st),this.elements[te]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)(this.completeLayers||this.elements[ie])&&this.elements[ie].renderFrame()},ICompElement.prototype.setElements=function(ie){this.elements=ie},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(ie,ee,te){this.layers=ie.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(ie){return new SVGCompElement(ie,this.globalData,this)};function SVGRenderer(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var te="";if(ee&&ee.title){var ne=createNS("title"),re=createElementID();ne.setAttribute("id",re),ne.textContent=ee.title,this.svgElement.appendChild(ne),te+=re}if(ee&&ee.description){var se=createNS("desc"),ae=createElementID();se.setAttribute("id",ae),se.textContent=ee.description,this.svgElement.appendChild(se),te+=" "+ae}te&&this.svgElement.setAttribute("aria-labelledby",te);var oe=createNS("defs");this.svgElement.appendChild(oe);var le=createNS("g");this.svgElement.appendChild(le),this.layerElement=le,this.renderConfig={preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",progressiveLoad:ee&&ee.progressiveLoad||!1,hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),viewBoxOnly:ee&&ee.viewBoxOnly||!1,viewBoxSize:ee&&ee.viewBoxSize||!1,className:ee&&ee.className||"",id:ee&&ee.id||"",focusable:ee&&ee.focusable,filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"100%",height:ee&&ee.filterSize&&ee.filterSize.height||"100%",x:ee&&ee.filterSize&&ee.filterSize.x||"0%",y:ee&&ee.filterSize&&ee.filterSize.y||"0%"},width:ee&&ee.width,height:ee&&ee.height,runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:oe,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(ie){return new SVGCompElement(ie,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(ee){var te,ne=ee.length,re="_";for(te=0;te<ne;te+=1)re+=ee[te].transform.key+"_";var se=this.sequences[re];return se||(se={transforms:[].concat(ee),finalTransform:new Matrix,_mdf:!1},this.sequences[re]=se,this.sequenceList.push(se)),se},processSequence:function(ee,te){for(var ne=0,re=ee.transforms.length,se=te;ne<re&&!te;){if(ee.transforms[ne].transform.mProps._mdf){se=!0;break}ne+=1}if(se)for(ee.finalTransform.reset(),ne=re-1;ne>=0;ne-=1)ee.finalTransform.multiply(ee.transforms[ne].transform.mProps.v);ee._mdf=se},processSequences:function(ee){var te,ne=this.sequenceList.length;for(te=0;te<ne;te+=1)this.processSequence(this.sequenceList[te],ee)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var ee="__lottie_element_luma_buffer",te=null,ne=null,re=null;function se(){var le=createNS("svg"),ce=createNS("filter"),he=createNS("feColorMatrix");return ce.setAttribute("id",ee),he.setAttribute("type","matrix"),he.setAttribute("color-interpolation-filters","sRGB"),he.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),ce.appendChild(he),le.appendChild(ce),le.setAttribute("id",ee+"_svg"),featureSupport.svgLumaHidden&&(le.style.display="none"),le}function ae(){te||(re=se(),document.body.appendChild(re),te=createTag("canvas"),ne=te.getContext("2d"),ne.filter="url(#"+ee+")",ne.fillStyle="rgba(0,0,0,0)",ne.fillRect(0,0,1,1))}function oe(le){return te||ae(),te.width=le.width,te.height=le.height,ne.filter="url(#"+ee+")",te}return{load:ae,get:oe}};function createCanvas(ie,ee){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(ie,ee);var te=createTag("canvas");return te.width=ie,te.height=ee,te}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(ie){var ee,te=ie.data.ef?ie.data.ef.length:0;this.filters=[];var ne;for(ee=0;ee<te;ee+=1){ne=null;var re=ie.data.ef[ee].ty;if(registeredEffects[re]){var se=registeredEffects[re].effect;ne=new se(ie.effectsManager.effectElements[ee],ie)}ne&&this.filters.push(ne)}this.filters.length&&ie.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(ie){var ee,te=this.filters.length;for(ee=0;ee<te;ee+=1)this.filters[ee].renderFrame(ie)},CVEffects.prototype.getEffects=function(ie){var ee,te=this.filters.length,ne=[];for(ee=0;ee<te;ee+=1)this.filters[ee].type===ie&&ne.push(this.filters[ee]);return ne};function registerEffect(ie,ee){registeredEffects[ie]={effect:ee}}function CVMaskElement(ie,ee){this.data=ie,this.element=ee,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var te,ne=this.masksProperties.length,re=!1;for(te=0;te<ne;te+=1)this.masksProperties[te].mode!=="n"&&(re=!0),this.viewData[te]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[te],3);this.hasMasks=re,re&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var ie=this.element.finalTransform.mat,ee=this.element.canvasContext,te,ne=this.masksProperties.length,re,se,ae;for(ee.beginPath(),te=0;te<ne;te+=1)if(this.masksProperties[te].mode!=="n"){this.masksProperties[te].inv&&(ee.moveTo(0,0),ee.lineTo(this.element.globalData.compSize.w,0),ee.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),ee.lineTo(0,this.element.globalData.compSize.h),ee.lineTo(0,0)),ae=this.viewData[te].v,re=ie.applyToPointArray(ae.v[0][0],ae.v[0][1],0),ee.moveTo(re[0],re[1]);var oe,le=ae._length;for(oe=1;oe<le;oe+=1)se=ie.applyToTriplePoints(ae.o[oe-1],ae.i[oe],ae.v[oe]),ee.bezierCurveTo(se[0],se[1],se[2],se[3],se[4],se[5]);se=ie.applyToTriplePoints(ae.o[oe-1],ae.i[0],ae.v[0]),ee.bezierCurveTo(se[0],se[1],se[2],se[3],se[4],se[5])}this.element.globalData.renderer.save(!0),ee.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var ee=this.globalData.canvasContext,te=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(te);var ne=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(ne),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var ee=this.globalData;if(ee.blendMode!==this.data.bm){ee.blendMode=this.data.bm;var te=getBlendMode(this.data.bm);ee.canvasContext.globalCompositeOperation=te}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(ee){ee.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var ee=this.buffers[0],te=ee.getContext("2d");this.clearCanvas(te),te.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var ee=this.buffers[1],te=ee.getContext("2d");this.clearCanvas(te),te.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ne=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ne.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var re=assetLoader.getLumaCanvas(this.canvasContext.canvas),se=re.getContext("2d");se.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(re,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(ee,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(ee){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!ee)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var te=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(te),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(te),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(ie,ee,te,ne){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var re=4;ee.ty==="rc"?re=5:ee.ty==="el"?re=6:ee.ty==="sr"&&(re=7),this.sh=ShapePropertyFactory.getShapeProp(ie,ee,re,ie);var se,ae=te.length,oe;for(se=0;se<ae;se+=1)te[se].closed||(oe={transforms:ne.addTransformSequence(te[se].transforms),trNodes:[]},this.styledShapes.push(oe),te[se].elements.push(oe))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(ie,ee){var te={data:ie,type:ie.ty,preTransforms:this.transformsManager.addTransformSequence(ee),transforms:[],elements:[],closed:ie.hd===!0},ne={};if(ie.ty==="fl"||ie.ty==="st"?(ne.c=PropertyFactory.getProp(this,ie.c,1,255,this),ne.c.k||(te.co="rgb("+bmFloor(ne.c.v[0])+","+bmFloor(ne.c.v[1])+","+bmFloor(ne.c.v[2])+")")):(ie.ty==="gf"||ie.ty==="gs")&&(ne.s=PropertyFactory.getProp(this,ie.s,1,null,this),ne.e=PropertyFactory.getProp(this,ie.e,1,null,this),ne.h=PropertyFactory.getProp(this,ie.h||{k:0},0,.01,this),ne.a=PropertyFactory.getProp(this,ie.a||{k:0},0,degToRads,this),ne.g=new GradientProperty(this,ie.g,this)),ne.o=PropertyFactory.getProp(this,ie.o,0,.01,this),ie.ty==="st"||ie.ty==="gs"){if(te.lc=lineCapEnum[ie.lc||2],te.lj=lineJoinEnum[ie.lj||2],ie.lj==1&&(te.ml=ie.ml),ne.w=PropertyFactory.getProp(this,ie.w,0,null,this),ne.w.k||(te.wi=ne.w.v),ie.d){var re=new DashProperty(this,ie.d,"canvas",this);ne.d=re,ne.d.k||(te.da=ne.d.dashArray,te.do=ne.d.dashoffset[0])}}else te.r=ie.r===2?"evenodd":"nonzero";return this.stylesList.push(te),ne.style=te,ne},CVShapeElement.prototype.createGroupElement=function(){var ie={it:[],prevViewData:[]};return ie},CVShapeElement.prototype.createTransformElement=function(ie){var ee={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,ie.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,ie,this)}};return ee},CVShapeElement.prototype.createShapeElement=function(ie){var ee=new CVShapeData(this,ie,this.stylesList,this.transformsManager);return this.shapes.push(ee),this.addShapeToModifiers(ee),ee},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var ie,ee=this.itemsData.length;for(ie=0;ie<ee;ie+=1)this.prevViewData[ie]=this.itemsData[ie];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),ee=this.dynamicProperties.length,ie=0;ie<ee;ie+=1)this.dynamicProperties[ie].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(ie){var ee,te=this.stylesList.length;for(ee=0;ee<te;ee+=1)this.stylesList[ee].closed||this.stylesList[ee].transforms.push(ie)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var ie,ee=this.stylesList.length;for(ie=0;ie<ee;ie+=1)this.stylesList[ie].closed||this.stylesList[ie].transforms.pop()},CVShapeElement.prototype.closeStyles=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee].closed=!0},CVShapeElement.prototype.searchShapes=function(ie,ee,te,ne,re){var se,ae=ie.length-1,oe,le,ce=[],he=[],fe,ue,de,ge=[].concat(re);for(se=ae;se>=0;se-=1){if(fe=this.searchProcessedElement(ie[se]),fe?ee[se]=te[fe-1]:ie[se]._shouldRender=ne,ie[se].ty==="fl"||ie[se].ty==="st"||ie[se].ty==="gf"||ie[se].ty==="gs")fe?ee[se].style.closed=!1:ee[se]=this.createStyleElement(ie[se],ge),ce.push(ee[se].style);else if(ie[se].ty==="gr"){if(!fe)ee[se]=this.createGroupElement(ie[se]);else for(le=ee[se].it.length,oe=0;oe<le;oe+=1)ee[se].prevViewData[oe]=ee[se].it[oe];this.searchShapes(ie[se].it,ee[se].it,ee[se].prevViewData,ne,ge)}else ie[se].ty==="tr"?(fe||(de=this.createTransformElement(ie[se]),ee[se]=de),ge.push(ee[se]),this.addTransformToStyleList(ee[se])):ie[se].ty==="sh"||ie[se].ty==="rc"||ie[se].ty==="el"||ie[se].ty==="sr"?fe||(ee[se]=this.createShapeElement(ie[se])):ie[se].ty==="tm"||ie[se].ty==="rd"||ie[se].ty==="pb"||ie[se].ty==="zz"||ie[se].ty==="op"?(fe?(ue=ee[se],ue.closed=!1):(ue=ShapeModifiers.getModifier(ie[se].ty),ue.init(this,ie[se]),ee[se]=ue,this.shapeModifiers.push(ue)),he.push(ue)):ie[se].ty==="rp"&&(fe?(ue=ee[se],ue.closed=!0):(ue=ShapeModifiers.getModifier(ie[se].ty),ee[se]=ue,ue.init(this,ie,se,ee),this.shapeModifiers.push(ue),ne=!1),he.push(ue));this.addProcessedElement(ie[se],se+1)}for(this.removeTransformFromStyleList(),this.closeStyles(ce),ae=he.length,se=0;se<ae;se+=1)he[se].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(ie,ee){(ie._opMdf||ee.op._mdf||this._isFirstFrame)&&(ee.opacity=ie.opacity,ee.opacity*=ee.op.v,ee._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var ie,ee=this.stylesList.length,te,ne,re,se,ae,oe,le=this.globalData.renderer,ce=this.globalData.canvasContext,he,fe;for(ie=0;ie<ee;ie+=1)if(fe=this.stylesList[ie],he=fe.type,!((he==="st"||he==="gs")&&fe.wi===0||!fe.data._shouldRender||fe.coOp===0||this.globalData.currentGlobalAlpha===0)){for(le.save(),ae=fe.elements,he==="st"||he==="gs"?(le.ctxStrokeStyle(he==="st"?fe.co:fe.grd),le.ctxLineWidth(fe.wi),le.ctxLineCap(fe.lc),le.ctxLineJoin(fe.lj),le.ctxMiterLimit(fe.ml||0)):le.ctxFillStyle(he==="fl"?fe.co:fe.grd),le.ctxOpacity(fe.coOp),he!=="st"&&he!=="gs"&&ce.beginPath(),le.ctxTransform(fe.preTransforms.finalTransform.props),ne=ae.length,te=0;te<ne;te+=1){for((he==="st"||he==="gs")&&(ce.beginPath(),fe.da&&(ce.setLineDash(fe.da),ce.lineDashOffset=fe.do)),oe=ae[te].trNodes,se=oe.length,re=0;re<se;re+=1)oe[re].t==="m"?ce.moveTo(oe[re].p[0],oe[re].p[1]):oe[re].t==="c"?ce.bezierCurveTo(oe[re].pts[0],oe[re].pts[1],oe[re].pts[2],oe[re].pts[3],oe[re].pts[4],oe[re].pts[5]):ce.closePath();(he==="st"||he==="gs")&&(le.ctxStroke(),fe.da&&ce.setLineDash(this.dashResetter))}he!=="st"&&he!=="gs"&&this.globalData.renderer.ctxFill(fe.r),le.restore()}},CVShapeElement.prototype.renderShape=function(ie,ee,te,ne){var re,se=ee.length-1,ae;for(ae=ie,re=se;re>=0;re-=1)ee[re].ty==="tr"?(ae=te[re].transform,this.renderShapeTransform(ie,ae)):ee[re].ty==="sh"||ee[re].ty==="el"||ee[re].ty==="rc"||ee[re].ty==="sr"?this.renderPath(ee[re],te[re]):ee[re].ty==="fl"?this.renderFill(ee[re],te[re],ae):ee[re].ty==="st"?this.renderStroke(ee[re],te[re],ae):ee[re].ty==="gf"||ee[re].ty==="gs"?this.renderGradientFill(ee[re],te[re],ae):ee[re].ty==="gr"?this.renderShape(ae,ee[re].it,te[re].it):ee[re].ty;ne&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(ie,ee){if(this._isFirstFrame||ee._mdf||ie.transforms._mdf){var te=ie.trNodes,ne=ee.paths,re,se,ae,oe=ne._length;te.length=0;var le=ie.transforms.finalTransform;for(ae=0;ae<oe;ae+=1){var ce=ne.shapes[ae];if(ce&&ce.v){for(se=ce._length,re=1;re<se;re+=1)re===1&&te.push({t:"m",p:le.applyToPointArray(ce.v[0][0],ce.v[0][1],0)}),te.push({t:"c",pts:le.applyToTriplePoints(ce.o[re-1],ce.i[re],ce.v[re])});se===1&&te.push({t:"m",p:le.applyToPointArray(ce.v[0][0],ce.v[0][1],0)}),ce.c&&se&&(te.push({t:"c",pts:le.applyToTriplePoints(ce.o[re-1],ce.i[0],ce.v[0])}),te.push({t:"z"}))}}ie.trNodes=te}},CVShapeElement.prototype.renderPath=function(ie,ee){if(ie.hd!==!0&&ie._shouldRender){var te,ne=ee.styledShapes.length;for(te=0;te<ne;te+=1)this.renderStyledShape(ee.styledShapes[te],ee.sh)}},CVShapeElement.prototype.renderFill=function(ie,ee,te){var ne=ee.style;(ee.c._mdf||this._isFirstFrame)&&(ne.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||te._opMdf||this._isFirstFrame)&&(ne.coOp=ee.o.v*te.opacity)},CVShapeElement.prototype.renderGradientFill=function(ie,ee,te){var ne=ee.style,re;if(!ne.grd||ee.g._mdf||ee.s._mdf||ee.e._mdf||ie.t!==1&&(ee.h._mdf||ee.a._mdf)){var se=this.globalData.canvasContext,ae=ee.s.v,oe=ee.e.v;if(ie.t===1)re=se.createLinearGradient(ae[0],ae[1],oe[0],oe[1]);else{var le=Math.sqrt(Math.pow(ae[0]-oe[0],2)+Math.pow(ae[1]-oe[1],2)),ce=Math.atan2(oe[1]-ae[1],oe[0]-ae[0]),he=ee.h.v;he>=1?he=.99:he<=-1&&(he=-.99);var fe=le*he,ue=Math.cos(ce+ee.a.v)*fe+ae[0],de=Math.sin(ce+ee.a.v)*fe+ae[1];re=se.createRadialGradient(ue,de,0,ae[0],ae[1],le)}var ge,me=ie.g.p,ve=ee.g.c,pe=1;for(ge=0;ge<me;ge+=1)ee.g._hasOpacity&&ee.g._collapsable&&(pe=ee.g.o[ge*2+1]),re.addColorStop(ve[ge*4]/100,"rgba("+ve[ge*4+1]+","+ve[ge*4+2]+","+ve[ge*4+3]+","+pe+")");ne.grd=re}ne.coOp=ee.o.v*te.opacity},CVShapeElement.prototype.renderStroke=function(ie,ee,te){var ne=ee.style,re=ee.d;re&&(re._mdf||this._isFirstFrame)&&(ne.da=re.dashArray,ne.do=re.dashoffset[0]),(ee.c._mdf||this._isFirstFrame)&&(ne.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||te._opMdf||this._isFirstFrame)&&(ne.coOp=ee.o.v*te.opacity),(ee.w._mdf||this._isFirstFrame)&&(ne.wi=ee.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(ie,ee,te){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var ie=this.textProperty.currentData;this.renderedLetters=createSizedArray(ie.l?ie.l.length:0);var ee=!1;ie.fc?(ee=!0,this.values.fill=this.buildColor(ie.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=ee;var te=!1;ie.sc&&(te=!0,this.values.stroke=this.buildColor(ie.sc),this.values.sWidth=ie.sw);var ne=this.globalData.fontManager.getFontByName(ie.f),re,se,ae=ie.l,oe=this.mHelper;this.stroke=te,this.values.fValue=ie.finalSize+"px "+this.globalData.fontManager.getFontByName(ie.f).fFamily,se=ie.finalText.length;var le,ce,he,fe,ue,de,ge,me,ve,pe,ye=this.data.singleShape,_e=ie.tr*.001*ie.finalSize,xe=0,Se=0,be=!0,Ee=0;for(re=0;re<se;re+=1){le=this.globalData.fontManager.getCharData(ie.finalText[re],ne.fStyle,this.globalData.fontManager.getFontByName(ie.f).fFamily),ce=le&&le.data||{},oe.reset(),ye&&ae[re].n&&(xe=-_e,Se+=ie.yOffset,Se+=be?1:0,be=!1),ue=ce.shapes?ce.shapes[0].it:[],ge=ue.length,oe.scale(ie.finalSize/100,ie.finalSize/100),ye&&this.applyTextPropertiesToMatrix(ie,oe,ae[re].line,xe,Se),ve=createSizedArray(ge-1);var Pe=0;for(de=0;de<ge;de+=1)if(ue[de].ty==="sh"){for(fe=ue[de].ks.k.i.length,me=ue[de].ks.k,pe=[],he=1;he<fe;he+=1)he===1&&pe.push(oe.applyToX(me.v[0][0],me.v[0][1],0),oe.applyToY(me.v[0][0],me.v[0][1],0)),pe.push(oe.applyToX(me.o[he-1][0],me.o[he-1][1],0),oe.applyToY(me.o[he-1][0],me.o[he-1][1],0),oe.applyToX(me.i[he][0],me.i[he][1],0),oe.applyToY(me.i[he][0],me.i[he][1],0),oe.applyToX(me.v[he][0],me.v[he][1],0),oe.applyToY(me.v[he][0],me.v[he][1],0));pe.push(oe.applyToX(me.o[he-1][0],me.o[he-1][1],0),oe.applyToY(me.o[he-1][0],me.o[he-1][1],0),oe.applyToX(me.i[0][0],me.i[0][1],0),oe.applyToY(me.i[0][0],me.i[0][1],0),oe.applyToX(me.v[0][0],me.v[0][1],0),oe.applyToY(me.v[0][0],me.v[0][1],0)),ve[Pe]=pe,Pe+=1}ye&&(xe+=ae[re].l,xe+=_e),this.textSpans[Ee]?this.textSpans[Ee].elem=ve:this.textSpans[Ee]={elem:ve},Ee+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var ie=this.canvasContext;ie.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var ee,te,ne,re,se,ae,oe=this.textAnimator.renderedLetters,le=this.textProperty.currentData.l;te=le.length;var ce,he=null,fe=null,ue=null,de,ge,me=this.globalData.renderer;for(ee=0;ee<te;ee+=1)if(!le[ee].n){if(ce=oe[ee],ce&&(me.save(),me.ctxTransform(ce.p),me.ctxOpacity(ce.o)),this.fill){for(ce&&ce.fc?he!==ce.fc&&(me.ctxFillStyle(ce.fc),he=ce.fc):he!==this.values.fill&&(he=this.values.fill,me.ctxFillStyle(this.values.fill)),de=this.textSpans[ee].elem,re=de.length,this.globalData.canvasContext.beginPath(),ne=0;ne<re;ne+=1)for(ge=de[ne],ae=ge.length,this.globalData.canvasContext.moveTo(ge[0],ge[1]),se=2;se<ae;se+=6)this.globalData.canvasContext.bezierCurveTo(ge[se],ge[se+1],ge[se+2],ge[se+3],ge[se+4],ge[se+5]);this.globalData.canvasContext.closePath(),me.ctxFill()}if(this.stroke){for(ce&&ce.sw?ue!==ce.sw&&(ue=ce.sw,me.ctxLineWidth(ce.sw)):ue!==this.values.sWidth&&(ue=this.values.sWidth,me.ctxLineWidth(this.values.sWidth)),ce&&ce.sc?fe!==ce.sc&&(fe=ce.sc,me.ctxStrokeStyle(ce.sc)):fe!==this.values.stroke&&(fe=this.values.stroke,me.ctxStrokeStyle(this.values.stroke)),de=this.textSpans[ee].elem,re=de.length,this.globalData.canvasContext.beginPath(),ne=0;ne<re;ne+=1)for(ge=de[ne],ae=ge.length,this.globalData.canvasContext.moveTo(ge[0],ge[1]),se=2;se<ae;se+=6)this.globalData.canvasContext.bezierCurveTo(ge[se],ge[se+1],ge[se+2],ge[se+3],ge[se+4],ge[se+5]);this.globalData.canvasContext.closePath(),me.ctxStroke()}ce&&this.globalData.renderer.restore()}};function CVImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.img=ee.imageLoader.getAsset(this.assetData),this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var ie=createTag("canvas");ie.width=this.assetData.w,ie.height=this.assetData.h;var ee=ie.getContext("2d"),te=this.img.width,ne=this.img.height,re=te/ne,se=this.assetData.w/this.assetData.h,ae,oe,le=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;re>se&&le==="xMidYMid slice"||re<se&&le!=="xMidYMid slice"?(oe=ne,ae=oe*se):(ae=te,oe=ae/se),ee.drawImage(this.img,(te-ae)/2,(ne-oe)/2,ae,oe,0,0,this.assetData.w,this.assetData.h),this.img=ie}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(ie){return new CVShapeElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createText=function(ie){return new CVTextElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(ie){return new CVImageElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(ie){return new CVSolidElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(ie){ie[0]===1&&ie[1]===0&&ie[4]===0&&ie[5]===1&&ie[12]===0&&ie[13]===0||this.canvasContext.transform(ie[0],ie[1],ie[4],ie[5],ie[12],ie[13])},CanvasRendererBase.prototype.ctxOpacity=function(ie){this.canvasContext.globalAlpha*=ie<0?0:ie},CanvasRendererBase.prototype.ctxFillStyle=function(ie){this.canvasContext.fillStyle=ie},CanvasRendererBase.prototype.ctxStrokeStyle=function(ie){this.canvasContext.strokeStyle=ie},CanvasRendererBase.prototype.ctxLineWidth=function(ie){this.canvasContext.lineWidth=ie},CanvasRendererBase.prototype.ctxLineCap=function(ie){this.canvasContext.lineCap=ie},CanvasRendererBase.prototype.ctxLineJoin=function(ie){this.canvasContext.lineJoin=ie},CanvasRendererBase.prototype.ctxMiterLimit=function(ie){this.canvasContext.miterLimit=ie},CanvasRendererBase.prototype.ctxFill=function(ie){this.canvasContext.fill(ie)},CanvasRendererBase.prototype.ctxFillRect=function(ie,ee,te,ne){this.canvasContext.fillRect(ie,ee,te,ne)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(ie){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}ie&&(this.globalData.blendMode="source-over"),this.contextData.restore(ie)},CanvasRendererBase.prototype.configAnimation=function(ie){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var ee=this.animationItem.container.style;ee.width="100%",ee.height="100%";var te="0px 0px 0px";ee.transformOrigin=te,ee.mozTransformOrigin=te,ee.webkitTransformOrigin=te,ee["-webkit-transform"]=te,ee.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=ie,this.layers=ie.layers,this.transformCanvas={w:ie.w,h:ie.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(ie,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(ie.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(ie,ee){this.reset();var te,ne;ie?(te=ie,ne=ee,this.canvasContext.canvas.width=te,this.canvasContext.canvas.height=ne):(this.animationItem.wrapper&&this.animationItem.container?(te=this.animationItem.wrapper.offsetWidth,ne=this.animationItem.wrapper.offsetHeight):(te=this.canvasContext.canvas.width,ne=this.canvasContext.canvas.height),this.canvasContext.canvas.width=te*this.renderConfig.dpr,this.canvasContext.canvas.height=ne*this.renderConfig.dpr);var re,se;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var ae=this.renderConfig.preserveAspectRatio.split(" "),oe=ae[1]||"meet",le=ae[0]||"xMidYMid",ce=le.substr(0,4),he=le.substr(4);re=te/ne,se=this.transformCanvas.w/this.transformCanvas.h,se>re&&oe==="meet"||se<re&&oe==="slice"?(this.transformCanvas.sx=te/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=te/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ne/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ne/(this.transformCanvas.h/this.renderConfig.dpr)),ce==="xMid"&&(se<re&&oe==="meet"||se>re&&oe==="slice")?this.transformCanvas.tx=(te-this.transformCanvas.w*(ne/this.transformCanvas.h))/2*this.renderConfig.dpr:ce==="xMax"&&(se<re&&oe==="meet"||se>re&&oe==="slice")?this.transformCanvas.tx=(te-this.transformCanvas.w*(ne/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,he==="YMid"&&(se>re&&oe==="meet"||se<re&&oe==="slice")?this.transformCanvas.ty=(ne-this.transformCanvas.h*(te/this.transformCanvas.w))/2*this.renderConfig.dpr:he==="YMax"&&(se>re&&oe==="meet"||se<re&&oe==="slice")?this.transformCanvas.ty=(ne-this.transformCanvas.h*(te/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=te/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ne/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var ie,ee=this.layers?this.layers.length:0;for(ie=ee-1;ie>=0;ie-=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(ie,ee){if(!(this.renderedFrame===ie&&this.renderConfig.clearCanvas===!0&&!ee||this.destroyed||ie===-1)){this.renderedFrame=ie,this.globalData.frameNum=ie-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||ee,this.globalData.projectInterface.currentFrame=ie;var te,ne=this.layers.length;for(this.completeLayers||this.checkLayers(ie),te=ne-1;te>=0;te-=1)(this.completeLayers||this.elements[te])&&this.elements[te].prepareFrame(ie-this.layers[te].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),te=ne-1;te>=0;te-=1)(this.completeLayers||this.elements[te])&&this.elements[te].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(ie){var ee=this.elements;if(!(ee[ie]||this.layers[ie].ty===99)){var te=this.createItem(this.layers[ie],this,this.globalData);ee[ie]=te,te.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();ie.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var ie,ee=15;for(ie=0;ie<ee;ie+=1){var te=new CanvasContext;this.stack[ie]=te}this._length=ee,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var ie=this._length*2,ee=0;for(ee=this._length;ee<ie;ee+=1)this.stack[ee]=new CanvasContext;this._length=ie},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(ie){this.cArrPos-=1;var ee=this.stack[this.cArrPos],te=ee.transform,ne,re=this.cTr.props;for(ne=0;ne<16;ne+=1)re[ne]=te[ne];if(ie){this.nativeContext.restore();var se=this.stack[this.cArrPos+1];this.appliedFillStyle=se.fillStyle,this.appliedStrokeStyle=se.strokeStyle,this.appliedLineWidth=se.lineWidth,this.appliedLineCap=se.lineCap,this.appliedLineJoin=se.lineJoin,this.appliedMiterLimit=se.miterLimit}this.nativeContext.setTransform(te[0],te[1],te[4],te[5],te[12],te[13]),(ie||ee.opacity!==-1&&this.currentOpacity!==ee.opacity)&&(this.nativeContext.globalAlpha=ee.opacity,this.currentOpacity=ee.opacity),this.currentFillStyle=ee.fillStyle,this.currentStrokeStyle=ee.strokeStyle,this.currentLineWidth=ee.lineWidth,this.currentLineCap=ee.lineCap,this.currentLineJoin=ee.lineJoin,this.currentMiterLimit=ee.miterLimit},CVContextData.prototype.save=function(ie){ie&&this.nativeContext.save();var ee=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var te=this.stack[this.cArrPos],ne;for(ne=0;ne<16;ne+=1)te.transform[ne]=ee[ne];this.cArrPos+=1;var re=this.stack[this.cArrPos];re.opacity=te.opacity,re.fillStyle=te.fillStyle,re.strokeStyle=te.strokeStyle,re.lineWidth=te.lineWidth,re.lineCap=te.lineCap,re.lineJoin=te.lineJoin,re.miterLimit=te.miterLimit},CVContextData.prototype.setOpacity=function(ie){this.stack[this.cArrPos].opacity=ie},CVContextData.prototype.setContext=function(ie){this.nativeContext=ie},CVContextData.prototype.fillStyle=function(ie){this.stack[this.cArrPos].fillStyle!==ie&&(this.currentFillStyle=ie,this.stack[this.cArrPos].fillStyle=ie)},CVContextData.prototype.strokeStyle=function(ie){this.stack[this.cArrPos].strokeStyle!==ie&&(this.currentStrokeStyle=ie,this.stack[this.cArrPos].strokeStyle=ie)},CVContextData.prototype.lineWidth=function(ie){this.stack[this.cArrPos].lineWidth!==ie&&(this.currentLineWidth=ie,this.stack[this.cArrPos].lineWidth=ie)},CVContextData.prototype.lineCap=function(ie){this.stack[this.cArrPos].lineCap!==ie&&(this.currentLineCap=ie,this.stack[this.cArrPos].lineCap=ie)},CVContextData.prototype.lineJoin=function(ie){this.stack[this.cArrPos].lineJoin!==ie&&(this.currentLineJoin=ie,this.stack[this.cArrPos].lineJoin=ie)},CVContextData.prototype.miterLimit=function(ie){this.stack[this.cArrPos].miterLimit!==ie&&(this.currentMiterLimit=ie,this.stack[this.cArrPos].miterLimit=ie)},CVContextData.prototype.transform=function(ie){this.transformMat.cloneFromProps(ie);var ee=this.cTr;this.transformMat.multiply(ee),ee.cloneFromProps(this.transformMat.props);var te=ee.props;this.nativeContext.setTransform(te[0],te[1],te[4],te[5],te[12],te[13])},CVContextData.prototype.opacity=function(ie){var ee=this.stack[this.cArrPos].opacity;ee*=ie<0?0:ie,this.stack[this.cArrPos].opacity!==ee&&(this.currentOpacity!==ie&&(this.nativeContext.globalAlpha=ie,this.currentOpacity=ie),this.stack[this.cArrPos].opacity=ee)},CVContextData.prototype.fill=function(ie){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(ie)},CVContextData.prototype.fillRect=function(ie,ee,te,ne){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(ie,ee,te,ne)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(ie,ee,te){this.completeLayers=!1,this.layers=ie.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var ie=this.canvasContext;ie.beginPath(),ie.moveTo(0,0),ie.lineTo(this.data.w,0),ie.lineTo(this.data.w,this.data.h),ie.lineTo(0,this.data.h),ie.lineTo(0,0),ie.clip();var ee,te=this.layers.length;for(ee=te-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()},CVCompElement.prototype.destroy=function(){var ie,ee=this.layers.length;for(ie=ee-1;ie>=0;ie-=1)this.elements[ie]&&this.elements[ie].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(ie){return new CVCompElement(ie,this.globalData,this)};function CanvasRenderer(ie,ee){this.animationItem=ie,this.renderConfig={clearCanvas:ee&&ee.clearCanvas!==void 0?ee.clearCanvas:!0,context:ee&&ee.context||null,progressiveLoad:ee&&ee.progressiveLoad||!1,preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",className:ee&&ee.className||"",id:ee&&ee.id||"",runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.renderConfig.dpr=ee&&ee.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=ee&&ee.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(ie){return new CVCompElement(ie,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var ee=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var te=this.finalTransform.mat.toCSS();ee.transform=te,ee.webkitTransform=te}this.finalTransform._opMdf&&(ee.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var ie;this.data.hasMask?(ie=createNS("rect"),ie.setAttribute("width",this.data.sw),ie.setAttribute("height",this.data.sh),ie.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(ie=createTag("div"),ie.style.width=this.data.sw+"px",ie.style.height=this.data.sh+"px",ie.style.backgroundColor=this.data.sc),this.layerElement.appendChild(ie)};function HShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(ie,ee,te),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var ie;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),ie=this.svgElement;else{ie=createNS("svg");var ee=this.comp.data?this.comp.data:this.globalData.compSize;ie.setAttribute("width",ee.w),ie.setAttribute("height",ee.h),ie.appendChild(this.shapesContainer),this.layerElement.appendChild(ie)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=ie},HShapeElement.prototype.getTransformedPoint=function(ie,ee){var te,ne=ie.length;for(te=0;te<ne;te+=1)ee=ie[te].mProps.v.applyToPointArray(ee[0],ee[1],0);return ee},HShapeElement.prototype.calculateShapeBoundingBox=function(ie,ee){var te=ie.sh.v,ne=ie.transformers,re,se=te._length,ae,oe,le,ce;if(!(se<=1)){for(re=0;re<se-1;re+=1)ae=this.getTransformedPoint(ne,te.v[re]),oe=this.getTransformedPoint(ne,te.o[re]),le=this.getTransformedPoint(ne,te.i[re+1]),ce=this.getTransformedPoint(ne,te.v[re+1]),this.checkBounds(ae,oe,le,ce,ee);te.c&&(ae=this.getTransformedPoint(ne,te.v[re]),oe=this.getTransformedPoint(ne,te.o[re]),le=this.getTransformedPoint(ne,te.i[0]),ce=this.getTransformedPoint(ne,te.v[0]),this.checkBounds(ae,oe,le,ce,ee))}},HShapeElement.prototype.checkBounds=function(ie,ee,te,ne,re){this.getBoundsOfCurve(ie,ee,te,ne);var se=this.shapeBoundingBox;re.x=bmMin(se.left,re.x),re.xMax=bmMax(se.right,re.xMax),re.y=bmMin(se.top,re.y),re.yMax=bmMax(se.bottom,re.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(ie,ee,te,ne){for(var re=[[ie[0],ne[0]],[ie[1],ne[1]]],se,ae,oe,le,ce,he,fe,ue=0;ue<2;++ue)ae=6*ie[ue]-12*ee[ue]+6*te[ue],se=-3*ie[ue]+9*ee[ue]-9*te[ue]+3*ne[ue],oe=3*ee[ue]-3*ie[ue],ae|=0,se|=0,oe|=0,se===0&&ae===0||(se===0?(le=-oe/ae,le>0&&le<1&&re[ue].push(this.calculateF(le,ie,ee,te,ne,ue))):(ce=ae*ae-4*oe*se,ce>=0&&(he=(-ae+bmSqrt(ce))/(2*se),he>0&&he<1&&re[ue].push(this.calculateF(he,ie,ee,te,ne,ue)),fe=(-ae-bmSqrt(ce))/(2*se),fe>0&&fe<1&&re[ue].push(this.calculateF(fe,ie,ee,te,ne,ue)))));this.shapeBoundingBox.left=bmMin.apply(null,re[0]),this.shapeBoundingBox.top=bmMin.apply(null,re[1]),this.shapeBoundingBox.right=bmMax.apply(null,re[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,re[1])},HShapeElement.prototype.calculateF=function(ie,ee,te,ne,re,se){return bmPow(1-ie,3)*ee[se]+3*bmPow(1-ie,2)*ie*te[se]+3*(1-ie)*bmPow(ie,2)*ne[se]+bmPow(ie,3)*re[se]},HShapeElement.prototype.calculateBoundingBox=function(ie,ee){var te,ne=ie.length;for(te=0;te<ne;te+=1)ie[te]&&ie[te].sh?this.calculateShapeBoundingBox(ie[te],ee):ie[te]&&ie[te].it?this.calculateBoundingBox(ie[te].it,ee):ie[te]&&ie[te].style&&ie[te].w&&this.expandStrokeBoundingBox(ie[te].w,ee)},HShapeElement.prototype.expandStrokeBoundingBox=function(ie,ee){var te=0;if(ie.keyframes){for(var ne=0;ne<ie.keyframes.length;ne+=1){var re=ie.keyframes[ne].s;re>te&&(te=re)}te*=ie.mult}else te=ie.v*ie.mult;ee.x-=te,ee.xMax+=te,ee.y-=te,ee.yMax+=te},HShapeElement.prototype.currentBoxContains=function(ie){return this.currentBBox.x<=ie.x&&this.currentBBox.y<=ie.y&&this.currentBBox.width+this.currentBBox.x>=ie.x+ie.width&&this.currentBBox.height+this.currentBBox.y>=ie.y+ie.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var ie=this.tempBoundingBox,ee=999999;if(ie.x=ee,ie.xMax=-ee,ie.y=ee,ie.yMax=-ee,this.calculateBoundingBox(this.itemsData,ie),ie.width=ie.xMax<ie.x?0:ie.xMax-ie.x,ie.height=ie.yMax<ie.y?0:ie.yMax-ie.y,this.currentBoxContains(ie))return;var te=!1;if(this.currentBBox.w!==ie.width&&(this.currentBBox.w=ie.width,this.shapeCont.setAttribute("width",ie.width),te=!0),this.currentBBox.h!==ie.height&&(this.currentBBox.h=ie.height,this.shapeCont.setAttribute("height",ie.height),te=!0),te||this.currentBBox.x!==ie.x||this.currentBBox.y!==ie.y){this.currentBBox.w=ie.width,this.currentBBox.h=ie.height,this.currentBBox.x=ie.x,this.currentBBox.y=ie.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ne=this.shapeCont.style,re="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ne.transform=re,ne.webkitTransform=re}}};function HTextElement(ie,ee,te){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var ie=createNS("g");this.maskedElement.appendChild(ie),this.innerElem=ie}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var ie=this.textProperty.currentData;this.renderedLetters=createSizedArray(ie.l?ie.l.length:0);var ee=this.innerElem.style,te=ie.fc?this.buildColor(ie.fc):"rgba(0,0,0,0)";ee.fill=te,ee.color=te,ie.sc&&(ee.stroke=this.buildColor(ie.sc),ee.strokeWidth=ie.sw+"px");var ne=this.globalData.fontManager.getFontByName(ie.f);if(!this.globalData.fontManager.chars)if(ee.fontSize=ie.finalSize+"px",ee.lineHeight=ie.finalSize+"px",ne.fClass)this.innerElem.className=ne.fClass;else{ee.fontFamily=ne.fFamily;var re=ie.fWeight,se=ie.fStyle;ee.fontStyle=se,ee.fontWeight=re}var ae,oe,le=ie.l;oe=le.length;var ce,he,fe,ue=this.mHelper,de,ge="",me=0;for(ae=0;ae<oe;ae+=1){if(this.globalData.fontManager.chars?(this.textPaths[me]?ce=this.textPaths[me]:(ce=createNS("path"),ce.setAttribute("stroke-linecap",lineCapEnum[1]),ce.setAttribute("stroke-linejoin",lineJoinEnum[2]),ce.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[me]?(he=this.textSpans[me],fe=he.children[0]):(he=createTag("div"),he.style.lineHeight=0,fe=createNS("svg"),fe.appendChild(ce),styleDiv(he)))):this.isMasked?ce=this.textPaths[me]?this.textPaths[me]:createNS("text"):this.textSpans[me]?(he=this.textSpans[me],ce=this.textPaths[me]):(he=createTag("span"),styleDiv(he),ce=createTag("span"),styleDiv(ce),he.appendChild(ce)),this.globalData.fontManager.chars){var ve=this.globalData.fontManager.getCharData(ie.finalText[ae],ne.fStyle,this.globalData.fontManager.getFontByName(ie.f).fFamily),pe;if(ve?pe=ve.data:pe=null,ue.reset(),pe&&pe.shapes&&pe.shapes.length&&(de=pe.shapes[0].it,ue.scale(ie.finalSize/100,ie.finalSize/100),ge=this.createPathShape(ue,de),ce.setAttribute("d",ge)),this.isMasked)this.innerElem.appendChild(ce);else{if(this.innerElem.appendChild(he),pe&&pe.shapes){document.body.appendChild(fe);var ye=fe.getBBox();fe.setAttribute("width",ye.width+2),fe.setAttribute("height",ye.height+2),fe.setAttribute("viewBox",ye.x-1+" "+(ye.y-1)+" "+(ye.width+2)+" "+(ye.height+2));var _e=fe.style,xe="translate("+(ye.x-1)+"px,"+(ye.y-1)+"px)";_e.transform=xe,_e.webkitTransform=xe,le[ae].yOffset=ye.y-1}else fe.setAttribute("width",1),fe.setAttribute("height",1);he.appendChild(fe)}}else if(ce.textContent=le[ae].val,ce.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(ce);else{this.innerElem.appendChild(he);var Se=ce.style,be="translate3d(0,"+-ie.finalSize/1.2+"px,0)";Se.transform=be,Se.webkitTransform=be}this.isMasked?this.textSpans[me]=ce:this.textSpans[me]=he,this.textSpans[me].style.display="block",this.textPaths[me]=ce,me+=1}for(;me<this.textSpans.length;)this.textSpans[me].style.display="none",me+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var ie;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),ie=this.svgElement.style;var ee="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";ie.transform=ee,ie.webkitTransform=ee}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var te,ne,re=0,se=this.textAnimator.renderedLetters,ae=this.textProperty.currentData.l;ne=ae.length;var oe,le,ce;for(te=0;te<ne;te+=1)ae[te].n?re+=1:(le=this.textSpans[te],ce=this.textPaths[te],oe=se[re],re+=1,oe._mdf.m&&(this.isMasked?le.setAttribute("transform",oe.m):(le.style.webkitTransform=oe.m,le.style.transform=oe.m)),le.style.opacity=oe.o,oe.sw&&oe._mdf.sw&&ce.setAttribute("stroke-width",oe.sw),oe.sc&&oe._mdf.sc&&ce.setAttribute("stroke",oe.sc),oe.fc&&oe._mdf.fc&&(ce.setAttribute("fill",oe.fc),ce.style.color=oe.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var he=this.innerElem.getBBox();this.currentBBox.w!==he.width&&(this.currentBBox.w=he.width,this.svgElement.setAttribute("width",he.width)),this.currentBBox.h!==he.height&&(this.currentBBox.h=he.height,this.svgElement.setAttribute("height",he.height));var fe=1;if(this.currentBBox.w!==he.width+fe*2||this.currentBBox.h!==he.height+fe*2||this.currentBBox.x!==he.x-fe||this.currentBBox.y!==he.y-fe){this.currentBBox.w=he.width+fe*2,this.currentBBox.h=he.height+fe*2,this.currentBBox.x=he.x-fe,this.currentBBox.y=he.y-fe,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),ie=this.svgElement.style;var ue="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ie.transform=ue,ie.webkitTransform=ue}}}};function HCameraElement(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initHierarchy();var ne=PropertyFactory.getProp;if(this.pe=ne(this,ie.pe,0,0,this),ie.ks.p.s?(this.px=ne(this,ie.ks.p.x,1,0,this),this.py=ne(this,ie.ks.p.y,1,0,this),this.pz=ne(this,ie.ks.p.z,1,0,this)):this.p=ne(this,ie.ks.p,1,0,this),ie.ks.a&&(this.a=ne(this,ie.ks.a,1,0,this)),ie.ks.or.k.length&&ie.ks.or.k[0].to){var re,se=ie.ks.or.k.length;for(re=0;re<se;re+=1)ie.ks.or.k[re].to=null,ie.ks.or.k[re].ti=null}this.or=ne(this,ie.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ne(this,ie.ks.rx,0,degToRads,this),this.ry=ne(this,ie.ks.ry,0,degToRads,this),this.rz=ne(this,ie.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var ie,ee=this.comp.threeDElements.length,te,ne,re;for(ie=0;ie<ee;ie+=1)if(te=this.comp.threeDElements[ie],te.type==="3d"){ne=te.perspectiveElem.style,re=te.container.style;var se=this.pe.v+"px",ae="0px 0px 0px",oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ne.perspective=se,ne.webkitPerspective=se,re.transformOrigin=ae,re.mozTransformOrigin=ae,re.webkitTransformOrigin=ae,ne.transform=oe,ne.webkitTransform=oe}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var ie=this._isFirstFrame,ee,te;if(this.hierarchy)for(te=this.hierarchy.length,ee=0;ee<te;ee+=1)ie=this.hierarchy[ee].finalTransform.mProp._mdf||ie;if(ie||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(te=this.hierarchy.length-1,ee=te;ee>=0;ee-=1){var ne=this.hierarchy[ee].finalTransform.mProp;this.mat.translate(-ne.p.v[0],-ne.p.v[1],ne.p.v[2]),this.mat.rotateX(-ne.or.v[0]).rotateY(-ne.or.v[1]).rotateZ(ne.or.v[2]),this.mat.rotateX(-ne.rx.v).rotateY(-ne.ry.v).rotateZ(ne.rz.v),this.mat.scale(1/ne.s.v[0],1/ne.s.v[1],1/ne.s.v[2]),this.mat.translate(ne.a.v[0],ne.a.v[1],ne.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var re;this.p?re=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:re=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var se=Math.sqrt(Math.pow(re[0],2)+Math.pow(re[1],2)+Math.pow(re[2],2)),ae=[re[0]/se,re[1]/se,re[2]/se],oe=Math.sqrt(ae[2]*ae[2]+ae[0]*ae[0]),le=Math.atan2(ae[1],oe),ce=Math.atan2(ae[0],-ae[2]);this.mat.rotateY(ce).rotateX(-le)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var he=!this._prevMat.equals(this.mat);if((he||this.pe._mdf)&&this.comp.threeDElements){te=this.comp.threeDElements.length;var fe,ue,de;for(ee=0;ee<te;ee+=1)if(fe=this.comp.threeDElements[ee],fe.type==="3d"){if(he){var ge=this.mat.toCSS();de=fe.container.style,de.transform=ge,de.webkitTransform=ge}this.pe._mdf&&(ue=fe.perspectiveElem.style,ue.perspective=this.pe.v+"px",ue.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(ie){this.prepareProperties(ie,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var ie=this.globalData.getAssetsPath(this.assetData),ee=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",ie),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(ee),ee.crossOrigin="anonymous",ee.src=ie,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();ie.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(ie,ee){var te=ie.getBaseElement();if(te){var ne=this.layers[ee];if(!ne.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(te,ee);else{for(var re=0,se,ae,oe;re<ee;)this.elements[re]&&this.elements[re]!==!0&&this.elements[re].getBaseElement&&(ae=this.elements[re],oe=this.layers[re].ddd?this.getThreeDContainerByPos(re):ae.getBaseElement(),se=oe||se),re+=1;se?(!ne.ddd||!this.supports3d)&&this.layerElement.insertBefore(te,se):(!ne.ddd||!this.supports3d)&&this.layerElement.appendChild(te)}else this.addTo3dContainer(te,ee)}},HybridRendererBase.prototype.createShape=function(ie){return this.supports3d?new HShapeElement(ie,this.globalData,this):new SVGShapeElement(ie,this.globalData,this)},HybridRendererBase.prototype.createText=function(ie){return this.supports3d?new HTextElement(ie,this.globalData,this):new SVGTextLottieElement(ie,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(ie){return this.camera=new HCameraElement(ie,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(ie){return this.supports3d?new HImageElement(ie,this.globalData,this):new IImageElement(ie,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(ie){return this.supports3d?new HSolidElement(ie,this.globalData,this):new ISolidElement(ie,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(ie){for(var ee=0,te=this.threeDElements.length;ee<te;){if(this.threeDElements[ee].startPos<=ie&&this.threeDElements[ee].endPos>=ie)return this.threeDElements[ee].perspectiveElem;ee+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(ie,ee){var te=createTag("div"),ne,re;styleDiv(te);var se=createTag("div");if(styleDiv(se),ee==="3d"){ne=te.style,ne.width=this.globalData.compSize.w+"px",ne.height=this.globalData.compSize.h+"px";var ae="50% 50%";ne.webkitTransformOrigin=ae,ne.mozTransformOrigin=ae,ne.transformOrigin=ae,re=se.style;var oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";re.transform=oe,re.webkitTransform=oe}te.appendChild(se);var le={container:se,perspectiveElem:te,startPos:ie,endPos:ie,type:ee};return this.threeDElements.push(le),le},HybridRendererBase.prototype.build3dContainers=function(){var ie,ee=this.layers.length,te,ne="";for(ie=0;ie<ee;ie+=1)this.layers[ie].ddd&&this.layers[ie].ty!==3?(ne!=="3d"&&(ne="3d",te=this.createThreeDContainer(ie,"3d")),te.endPos=Math.max(te.endPos,ie)):(ne!=="2d"&&(ne="2d",te=this.createThreeDContainer(ie,"2d")),te.endPos=Math.max(te.endPos,ie));for(ee=this.threeDElements.length,ie=ee-1;ie>=0;ie-=1)this.resizerElem.appendChild(this.threeDElements[ie].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(ie,ee){for(var te=0,ne=this.threeDElements.length;te<ne;){if(ee<=this.threeDElements[te].endPos){for(var re=this.threeDElements[te].startPos,se;re<ee;)this.elements[re]&&this.elements[re].getBaseElement&&(se=this.elements[re].getBaseElement()),re+=1;se?this.threeDElements[te].container.insertBefore(ie,se):this.threeDElements[te].container.appendChild(ie);break}te+=1}},HybridRendererBase.prototype.configAnimation=function(ie){var ee=createTag("div"),te=this.animationItem.wrapper,ne=ee.style;ne.width=ie.w+"px",ne.height=ie.h+"px",this.resizerElem=ee,styleDiv(ee),ne.transformStyle="flat",ne.mozTransformStyle="flat",ne.webkitTransformStyle="flat",this.renderConfig.className&&ee.setAttribute("class",this.renderConfig.className),te.appendChild(ee),ne.overflow="hidden";var re=createNS("svg");re.setAttribute("width","1"),re.setAttribute("height","1"),styleDiv(re),this.resizerElem.appendChild(re);var se=createNS("defs");re.appendChild(se),this.data=ie,this.setupGlobalData(ie,re),this.globalData.defs=se,this.layers=ie.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var ie,ee=this.layers?this.layers.length:0;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var ie=this.animationItem.wrapper.offsetWidth,ee=this.animationItem.wrapper.offsetHeight,te=ie/ee,ne=this.globalData.compSize.w/this.globalData.compSize.h,re,se,ae,oe;ne>te?(re=ie/this.globalData.compSize.w,se=ie/this.globalData.compSize.w,ae=0,oe=(ee-this.globalData.compSize.h*(ie/this.globalData.compSize.w))/2):(re=ee/this.globalData.compSize.h,se=ee/this.globalData.compSize.h,ae=(ie-this.globalData.compSize.w*(ee/this.globalData.compSize.h))/2,oe=0);var le=this.resizerElem.style;le.webkitTransform="matrix3d("+re+",0,0,0,0,"+se+",0,0,0,0,1,0,"+ae+","+oe+",0,1)",le.transform=le.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var ie=this.globalData.compSize.w,ee=this.globalData.compSize.h,te,ne=this.threeDElements.length;for(te=0;te<ne;te+=1){var re=this.threeDElements[te].perspectiveElem.style;re.webkitPerspective=Math.sqrt(Math.pow(ie,2)+Math.pow(ee,2))+"px",re.perspective=re.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(ie){var ee,te=ie.length,ne=createTag("div");for(ee=0;ee<te;ee+=1)if(ie[ee].xt){var re=this.createComp(ie[ee],ne,this.globalData.comp,null);re.initExpressions(),this.globalData.projectInterface.registerComposition(re)}};function HCompElement(ie,ee,te){this.layers=ie.layers,this.supports3d=!ie.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(ie,ee){for(var te=0,ne;te<ee;)this.elements[te]&&this.elements[te].getBaseElement&&(ne=this.elements[te].getBaseElement()),te+=1;ne?this.layerElement.insertBefore(ie,ne):this.layerElement.appendChild(ie)},HCompElement.prototype.createComp=function(ie){return this.supports3d?new HCompElement(ie,this.globalData,this):new SVGCompElement(ie,this.globalData,this)};function HybridRenderer(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"},runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(ie){return this.supports3d?new HCompElement(ie,this.globalData,this):new SVGCompElement(ie,this.globalData,this)};var CompExpressionInterface=function(){return function(ie){function ee(te){for(var ne=0,re=ie.layers.length;ne<re;){if(ie.layers[ne].nm===te||ie.layers[ne].ind===te)return ie.elements[ne].layerInterface;ne+=1}return null}return Object.defineProperty(ee,"_name",{value:ie.data.nm}),ee.layer=ee,ee.pixelAspect=1,ee.height=ie.data.h||ie.globalData.compSize.h,ee.width=ie.data.w||ie.globalData.compSize.w,ee.pixelAspect=1,ee.frameDuration=1/ie.globalData.frameRate,ee.displayStartTime=0,ee.numLayers=ie.layers.length,ee}}();function _typeof$2(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(te){return typeof te}:_typeof$2=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$2(ie)}function seedRandom(ie,ee){var te=this,ne=256,re=6,se=52,ae="random",oe=ee.pow(ne,re),le=ee.pow(2,se),ce=le*2,he=ne-1,fe;function ue(_e,xe,Se){var be=[];xe=xe===!0?{entropy:!0}:xe||{};var Ee=ve(me(xe.entropy?[_e,ye(ie)]:_e===null?pe():_e,3),be),Pe=new de(be),we=function(){for(var De=Pe.g(re),ke=oe,ze=0;De<le;)De=(De+ze)*ne,ke*=ne,ze=Pe.g(1);for(;De>=ce;)De/=2,ke/=2,ze>>>=1;return(De+ze)/ke};return we.int32=function(){return Pe.g(4)|0},we.quick=function(){return Pe.g(4)/4294967296},we.double=we,ve(ye(Pe.S),ie),(xe.pass||Se||function(Me,De,ke,ze){return ze&&(ze.S&&ge(ze,Pe),Me.state=function(){return ge(Pe,{})}),ke?(ee[ae]=Me,De):Me})(we,Ee,"global"in xe?xe.global:this==ee,xe.state)}ee["seed"+ae]=ue;function de(_e){var xe,Se=_e.length,be=this,Ee=0,Pe=be.i=be.j=0,we=be.S=[];for(Se||(_e=[Se++]);Ee<ne;)we[Ee]=Ee++;for(Ee=0;Ee<ne;Ee++)we[Ee]=we[Pe=he&Pe+_e[Ee%Se]+(xe=we[Ee])],we[Pe]=xe;be.g=function(Me){for(var De,ke=0,ze=be.i,Ve=be.j,Ue=be.S;Me--;)De=Ue[ze=he&ze+1],ke=ke*ne+Ue[he&(Ue[ze]=Ue[Ve=he&Ve+De])+(Ue[Ve]=De)];return be.i=ze,be.j=Ve,ke}}function ge(_e,xe){return xe.i=_e.i,xe.j=_e.j,xe.S=_e.S.slice(),xe}function me(_e,xe){var Se=[],be=_typeof$2(_e),Ee;if(xe&&be=="object")for(Ee in _e)try{Se.push(me(_e[Ee],xe-1))}catch{}return Se.length?Se:be=="string"?_e:_e+"\0"}function ve(_e,xe){for(var Se=_e+"",be,Ee=0;Ee<Se.length;)xe[he&Ee]=he&(be^=xe[he&Ee]*19)+Se.charCodeAt(Ee++);return ye(xe)}function pe(){try{var _e=new Uint8Array(ne);return(te.crypto||te.msCrypto).getRandomValues(_e),ye(_e)}catch{var xe=te.navigator,Se=xe&&xe.plugins;return[+new Date,te,Se,te.screen,ye(ie)]}}function ye(_e){return String.fromCharCode.apply(0,_e)}ve(ee.random(),ie)}function initialize$2(ie){seedRandom([],ie)}var propTypes={SHAPE:"shape"};function _typeof$1(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(te){return typeof te}:_typeof$1=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$1(ie)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(ie){return ie.constructor===Array||ie.constructor===Float32Array}function isNumerable(ie,ee){return ie==="number"||ee instanceof Number||ie==="boolean"||ie==="string"}function $bm_neg(ie){var ee=_typeof$1(ie);if(ee==="number"||ie instanceof Number||ee==="boolean")return-ie;if($bm_isInstanceOfArray(ie)){var te,ne=ie.length,re=[];for(te=0;te<ne;te+=1)re[te]=-ie[te];return re}return ie.propType?ie.v:-ie}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(ie,ee){var te=_typeof$1(ie),ne=_typeof$1(ee);if(isNumerable(te,ie)&&isNumerable(ne,ee)||te==="string"||ne==="string")return ie+ee;if($bm_isInstanceOfArray(ie)&&isNumerable(ne,ee))return ie=ie.slice(0),ie[0]+=ee,ie;if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=ie+ee[0],ee;if($bm_isInstanceOfArray(ie)&&$bm_isInstanceOfArray(ee)){for(var re=0,se=ie.length,ae=ee.length,oe=[];re<se||re<ae;)(typeof ie[re]=="number"||ie[re]instanceof Number)&&(typeof ee[re]=="number"||ee[re]instanceof Number)?oe[re]=ie[re]+ee[re]:oe[re]=ee[re]===void 0?ie[re]:ie[re]||ee[re],re+=1;return oe}return 0}var add=sum;function sub(ie,ee){var te=_typeof$1(ie),ne=_typeof$1(ee);if(isNumerable(te,ie)&&isNumerable(ne,ee))return te==="string"&&(ie=parseInt(ie,10)),ne==="string"&&(ee=parseInt(ee,10)),ie-ee;if($bm_isInstanceOfArray(ie)&&isNumerable(ne,ee))return ie=ie.slice(0),ie[0]-=ee,ie;if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=ie-ee[0],ee;if($bm_isInstanceOfArray(ie)&&$bm_isInstanceOfArray(ee)){for(var re=0,se=ie.length,ae=ee.length,oe=[];re<se||re<ae;)(typeof ie[re]=="number"||ie[re]instanceof Number)&&(typeof ee[re]=="number"||ee[re]instanceof Number)?oe[re]=ie[re]-ee[re]:oe[re]=ee[re]===void 0?ie[re]:ie[re]||ee[re],re+=1;return oe}return 0}function mul(ie,ee){var te=_typeof$1(ie),ne=_typeof$1(ee),re;if(isNumerable(te,ie)&&isNumerable(ne,ee))return ie*ee;var se,ae;if($bm_isInstanceOfArray(ie)&&isNumerable(ne,ee)){for(ae=ie.length,re=createTypedArray("float32",ae),se=0;se<ae;se+=1)re[se]=ie[se]*ee;return re}if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee)){for(ae=ee.length,re=createTypedArray("float32",ae),se=0;se<ae;se+=1)re[se]=ie*ee[se];return re}return 0}function div(ie,ee){var te=_typeof$1(ie),ne=_typeof$1(ee),re;if(isNumerable(te,ie)&&isNumerable(ne,ee))return ie/ee;var se,ae;if($bm_isInstanceOfArray(ie)&&isNumerable(ne,ee)){for(ae=ie.length,re=createTypedArray("float32",ae),se=0;se<ae;se+=1)re[se]=ie[se]/ee;return re}if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee)){for(ae=ee.length,re=createTypedArray("float32",ae),se=0;se<ae;se+=1)re[se]=ie/ee[se];return re}return 0}function mod(ie,ee){return typeof ie=="string"&&(ie=parseInt(ie,10)),typeof ee=="string"&&(ee=parseInt(ee,10)),ie%ee}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(ie,ee,te){if(ee>te){var ne=te;te=ee,ee=ne}return Math.min(Math.max(ie,ee),te)}function radiansToDegrees(ie){return ie/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(ie){return ie*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(ie,ee){if(typeof ie=="number"||ie instanceof Number)return ee=ee||0,Math.abs(ie-ee);ee||(ee=helperLengthArray);var te,ne=Math.min(ie.length,ee.length),re=0;for(te=0;te<ne;te+=1)re+=Math.pow(ee[te]-ie[te],2);return Math.sqrt(re)}function normalize(ie){return div(ie,length(ie))}function rgbToHsl(ie){var ee=ie[0],te=ie[1],ne=ie[2],re=Math.max(ee,te,ne),se=Math.min(ee,te,ne),ae,oe,le=(re+se)/2;if(re===se)ae=0,oe=0;else{var ce=re-se;switch(oe=le>.5?ce/(2-re-se):ce/(re+se),re){case ee:ae=(te-ne)/ce+(te<ne?6:0);break;case te:ae=(ne-ee)/ce+2;break;case ne:ae=(ee-te)/ce+4;break}ae/=6}return[ae,oe,le,ie[3]]}function hue2rgb(ie,ee,te){return te<0&&(te+=1),te>1&&(te-=1),te<1/6?ie+(ee-ie)*6*te:te<1/2?ee:te<2/3?ie+(ee-ie)*(2/3-te)*6:ie}function hslToRgb(ie){var ee=ie[0],te=ie[1],ne=ie[2],re,se,ae;if(te===0)re=ne,ae=ne,se=ne;else{var oe=ne<.5?ne*(1+te):ne+te-ne*te,le=2*ne-oe;re=hue2rgb(le,oe,ee+1/3),se=hue2rgb(le,oe,ee),ae=hue2rgb(le,oe,ee-1/3)}return[re,se,ae,ie[3]]}function linear(ie,ee,te,ne,re){if((ne===void 0||re===void 0)&&(ne=ee,re=te,ee=0,te=1),te<ee){var se=te;te=ee,ee=se}if(ie<=ee)return ne;if(ie>=te)return re;var ae=te===ee?0:(ie-ee)/(te-ee);if(!ne.length)return ne+(re-ne)*ae;var oe,le=ne.length,ce=createTypedArray("float32",le);for(oe=0;oe<le;oe+=1)ce[oe]=ne[oe]+(re[oe]-ne[oe])*ae;return ce}function random(ie,ee){if(ee===void 0&&(ie===void 0?(ie=0,ee=1):(ee=ie,ie=void 0)),ee.length){var te,ne=ee.length;ie||(ie=createTypedArray("float32",ne));var re=createTypedArray("float32",ne),se=BMMath.random();for(te=0;te<ne;te+=1)re[te]=ie[te]+se*(ee[te]-ie[te]);return re}ie===void 0&&(ie=0);var ae=BMMath.random();return ie+ae*(ee-ie)}function createPath(ie,ee,te,ne){var re,se=ie.length,ae=shapePool.newElement();ae.setPathData(!!ne,se);var oe=[0,0],le,ce;for(re=0;re<se;re+=1)le=ee&&ee[re]?ee[re]:oe,ce=te&&te[re]?te[re]:oe,ae.setTripleAt(ie[re][0],ie[re][1],ce[0]+ie[re][0],ce[1]+ie[re][1],le[0]+ie[re][0],le[1]+ie[re][1],re,!0);return ae}function initiateExpression(elem,data,property){function noOp(ie){return ie}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function ie(ee,te){var ne,re,se=this.pv.length?this.pv.length:1,ae=createTypedArray("float32",se);ee=5;var oe=Math.floor(time*ee);for(ne=0,re=0;ne<oe;){for(re=0;re<se;re+=1)ae[re]+=-te+te*2*BMMath.random();ne+=1}var le=time*ee,ce=le-Math.floor(le),he=createTypedArray("float32",se);if(se>1){for(re=0;re<se;re+=1)he[re]=this.pv[re]+ae[re]+(-te+te*2*BMMath.random())*ce;return he}return this.pv+ae[0]+(-te+te*2*BMMath.random())*ce}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(ie,ee){return loopIn(ie,ee,!0)}function loopOutDuration(ie,ee){return loopOut(ie,ee,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(ie,ee){var te=[ee[0]-ie[0],ee[1]-ie[1],ee[2]-ie[2]],ne=Math.atan2(te[0],Math.sqrt(te[1]*te[1]+te[2]*te[2]))/degToRads,re=-Math.atan2(te[1],te[2])/degToRads;return[re,ne,0]}function easeOut(ie,ee,te,ne,re){return applyEase(easeOutBez,ie,ee,te,ne,re)}function easeIn(ie,ee,te,ne,re){return applyEase(easeInBez,ie,ee,te,ne,re)}function ease(ie,ee,te,ne,re){return applyEase(easeInOutBez,ie,ee,te,ne,re)}function applyEase(ie,ee,te,ne,re,se){re===void 0?(re=te,se=ne):ee=(ee-te)/(ne-te),ee>1?ee=1:ee<0&&(ee=0);var ae=ie(ee);if($bm_isInstanceOfArray(re)){var oe,le=re.length,ce=createTypedArray("float32",le);for(oe=0;oe<le;oe+=1)ce[oe]=(se[oe]-re[oe])*ae+re[oe];return ce}return(se-re)*ae+re}function nearestKey(ie){var ee,te=data.k.length,ne,re;if(!data.k.length||typeof data.k[0]=="number")ne=0,re=0;else if(ne=-1,ie*=elem.comp.globalData.frameRate,ie<data.k[0].t)ne=1,re=data.k[0].t;else{for(ee=0;ee<te-1;ee+=1)if(ie===data.k[ee].t){ne=ee+1,re=data.k[ee].t;break}else if(ie>data.k[ee].t&&ie<data.k[ee+1].t){ie-data.k[ee].t>data.k[ee+1].t-ie?(ne=ee+2,re=data.k[ee+1].t):(ne=ee+1,re=data.k[ee].t);break}ne===-1&&(ne=ee+1,re=data.k[ee].t)}var se={};return se.index=ne,se.time=re/elem.comp.globalData.frameRate,se}function key(ie){var ee,te,ne;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+ie);ie-=1,ee={time:data.k[ie].t/elem.comp.globalData.frameRate,value:[]};var re=Object.prototype.hasOwnProperty.call(data.k[ie],"s")?data.k[ie].s:data.k[ie-1].e;for(ne=re.length,te=0;te<ne;te+=1)ee[te]=re[te],ee.value[te]=re[te];return ee}function framesToTime(ie,ee){return ee||(ee=elem.comp.globalData.frameRate),ie/ee}function timeToFrames(ie,ee){return!ie&&ie!==0&&(ie=time),ee||(ee=elem.comp.globalData.frameRate),ie*ee}function seedRandom(ie){BMMath.seedrandom(randSeed+ie)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(ie,ee){return typeof value=="string"?ee===void 0?value.substring(ie):value.substring(ie,ee):""}function substr(ie,ee){return typeof value=="string"?ee===void 0?value.substr(ie):value.substr(ie,ee):""}function posterizeTime(ie){time=ie===0?0:Math.floor(time*ie)/ie,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(ie){return value=ie,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var ie={};ie.initExpressions=ee,ie.resetFrame=ExpressionManager.resetFrame;function ee(te){var ne=0,re=[];function se(){ne+=1}function ae(){ne-=1,ne===0&&le()}function oe(ce){re.indexOf(ce)===-1&&re.push(ce)}function le(){var ce,he=re.length;for(ce=0;ce<he;ce+=1)re[ce].release();re.length=0}te.renderer.compInterface=CompExpressionInterface(te.renderer),te.renderer.globalData.projectInterface.registerComposition(te.renderer),te.renderer.globalData.pushExpression=se,te.renderer.globalData.popExpression=ae,te.renderer.globalData.registerExpressionProperty=oe}return ie}(),MaskManagerInterface=function(){function ie(te,ne){this._mask=te,this._data=ne}Object.defineProperty(ie.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(ie.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var ee=function(ne){var re=createSizedArray(ne.viewData.length),se,ae=ne.viewData.length;for(se=0;se<ae;se+=1)re[se]=new ie(ne.viewData[se],ne.masksProperties[se]);var oe=function(ce){for(se=0;se<ae;){if(ne.masksProperties[se].nm===ce)return re[se];se+=1}return null};return oe};return ee}(),ExpressionPropertyInterface=function(){var ie={pv:0,v:0,mult:1},ee={pv:[0,0,0],v:[0,0,0],mult:1};function te(ae,oe,le){Object.defineProperty(ae,"velocity",{get:function(){return oe.getVelocityAtTime(oe.comp.currentFrame)}}),ae.numKeys=oe.keyframes?oe.keyframes.length:0,ae.key=function(ce){if(!ae.numKeys)return 0;var he="";"s"in oe.keyframes[ce-1]?he=oe.keyframes[ce-1].s:"e"in oe.keyframes[ce-2]?he=oe.keyframes[ce-2].e:he=oe.keyframes[ce-2].s;var fe=le==="unidimensional"?new Number(he):Object.assign({},he);return fe.time=oe.keyframes[ce-1].t/oe.elem.comp.globalData.frameRate,fe.value=le==="unidimensional"?he[0]:he,fe},ae.valueAtTime=oe.getValueAtTime,ae.speedAtTime=oe.getSpeedAtTime,ae.velocityAtTime=oe.getVelocityAtTime,ae.propertyGroup=oe.propertyGroup}function ne(ae){(!ae||!("pv"in ae))&&(ae=ie);var oe=1/ae.mult,le=ae.pv*oe,ce=new Number(le);return ce.value=le,te(ce,ae,"unidimensional"),function(){return ae.k&&ae.getValue(),le=ae.v*oe,ce.value!==le&&(ce=new Number(le),ce.value=le,te(ce,ae,"unidimensional")),ce}}function re(ae){(!ae||!("pv"in ae))&&(ae=ee);var oe=1/ae.mult,le=ae.data&&ae.data.l||ae.pv.length,ce=createTypedArray("float32",le),he=createTypedArray("float32",le);return ce.value=he,te(ce,ae,"multidimensional"),function(){ae.k&&ae.getValue();for(var fe=0;fe<le;fe+=1)he[fe]=ae.v[fe]*oe,ce[fe]=he[fe];return ce}}function se(){return ie}return function(ae){return ae?ae.propType==="unidimensional"?ne(ae):re(ae):se}}(),TransformExpressionInterface=function(){return function(ie){function ee(ae){switch(ae){case"scale":case"Scale":case"ADBE Scale":case 6:return ee.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return ee.rotation;case"ADBE Rotate X":return ee.xRotation;case"ADBE Rotate Y":return ee.yRotation;case"position":case"Position":case"ADBE Position":case 2:return ee.position;case"ADBE Position_0":return ee.xPosition;case"ADBE Position_1":return ee.yPosition;case"ADBE Position_2":return ee.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return ee.anchorPoint;case"opacity":case"Opacity":case 11:return ee.opacity;default:return null}}Object.defineProperty(ee,"rotation",{get:ExpressionPropertyInterface(ie.r||ie.rz)}),Object.defineProperty(ee,"zRotation",{get:ExpressionPropertyInterface(ie.rz||ie.r)}),Object.defineProperty(ee,"xRotation",{get:ExpressionPropertyInterface(ie.rx)}),Object.defineProperty(ee,"yRotation",{get:ExpressionPropertyInterface(ie.ry)}),Object.defineProperty(ee,"scale",{get:ExpressionPropertyInterface(ie.s)});var te,ne,re,se;return ie.p?se=ExpressionPropertyInterface(ie.p):(te=ExpressionPropertyInterface(ie.px),ne=ExpressionPropertyInterface(ie.py),ie.pz&&(re=ExpressionPropertyInterface(ie.pz))),Object.defineProperty(ee,"position",{get:function(){return ie.p?se():[te(),ne(),re?re():0]}}),Object.defineProperty(ee,"xPosition",{get:ExpressionPropertyInterface(ie.px)}),Object.defineProperty(ee,"yPosition",{get:ExpressionPropertyInterface(ie.py)}),Object.defineProperty(ee,"zPosition",{get:ExpressionPropertyInterface(ie.pz)}),Object.defineProperty(ee,"anchorPoint",{get:ExpressionPropertyInterface(ie.a)}),Object.defineProperty(ee,"opacity",{get:ExpressionPropertyInterface(ie.o)}),Object.defineProperty(ee,"skew",{get:ExpressionPropertyInterface(ie.sk)}),Object.defineProperty(ee,"skewAxis",{get:ExpressionPropertyInterface(ie.sa)}),Object.defineProperty(ee,"orientation",{get:ExpressionPropertyInterface(ie.or)}),ee}}(),LayerExpressionInterface=function(){function ie(ce){var he=new Matrix;if(ce!==void 0){var fe=this._elem.finalTransform.mProp.getValueAtTime(ce);fe.clone(he)}else{var ue=this._elem.finalTransform.mProp;ue.applyToMatrix(he)}return he}function ee(ce,he){var fe=this.getMatrix(he);return fe.props[12]=0,fe.props[13]=0,fe.props[14]=0,this.applyPoint(fe,ce)}function te(ce,he){var fe=this.getMatrix(he);return this.applyPoint(fe,ce)}function ne(ce,he){var fe=this.getMatrix(he);return fe.props[12]=0,fe.props[13]=0,fe.props[14]=0,this.invertPoint(fe,ce)}function re(ce,he){var fe=this.getMatrix(he);return this.invertPoint(fe,ce)}function se(ce,he){if(this._elem.hierarchy&&this._elem.hierarchy.length){var fe,ue=this._elem.hierarchy.length;for(fe=0;fe<ue;fe+=1)this._elem.hierarchy[fe].finalTransform.mProp.applyToMatrix(ce)}return ce.applyToPointArray(he[0],he[1],he[2]||0)}function ae(ce,he){if(this._elem.hierarchy&&this._elem.hierarchy.length){var fe,ue=this._elem.hierarchy.length;for(fe=0;fe<ue;fe+=1)this._elem.hierarchy[fe].finalTransform.mProp.applyToMatrix(ce)}return ce.inversePoint(he)}function oe(ce){var he=new Matrix;if(he.reset(),this._elem.finalTransform.mProp.applyToMatrix(he),this._elem.hierarchy&&this._elem.hierarchy.length){var fe,ue=this._elem.hierarchy.length;for(fe=0;fe<ue;fe+=1)this._elem.hierarchy[fe].finalTransform.mProp.applyToMatrix(he);return he.inversePoint(ce)}return he.inversePoint(ce)}function le(){return[1,1,1,1]}return function(ce){var he;function fe(me){de.mask=new MaskManagerInterface(me,ce)}function ue(me){de.effect=me}function de(me){switch(me){case"ADBE Root Vectors Group":case"Contents":case 2:return de.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return he;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return de.effect;case"ADBE Text Properties":return de.textInterface;default:return null}}de.getMatrix=ie,de.invertPoint=ae,de.applyPoint=se,de.toWorld=te,de.toWorldVec=ee,de.fromWorld=re,de.fromWorldVec=ne,de.toComp=te,de.fromComp=oe,de.sampleImage=le,de.sourceRectAtTime=ce.sourceRectAtTime.bind(ce),de._elem=ce,he=TransformExpressionInterface(ce.finalTransform.mProp);var ge=getDescriptor(he,"anchorPoint");return Object.defineProperties(de,{hasParent:{get:function(){return ce.hierarchy.length}},parent:{get:function(){return ce.hierarchy[0].layerInterface}},rotation:getDescriptor(he,"rotation"),scale:getDescriptor(he,"scale"),position:getDescriptor(he,"position"),opacity:getDescriptor(he,"opacity"),anchorPoint:ge,anchor_point:ge,transform:{get:function(){return he}},active:{get:function(){return ce.isInRange}}}),de.startTime=ce.data.st,de.index=ce.data.ind,de.source=ce.data.refId,de.height=ce.data.ty===0?ce.data.h:100,de.width=ce.data.ty===0?ce.data.w:100,de.inPoint=ce.data.ip/ce.comp.globalData.frameRate,de.outPoint=ce.data.op/ce.comp.globalData.frameRate,de._name=ce.data.nm,de.registerMaskInterface=fe,de.registerEffectsInterface=ue,de}}(),propertyGroupFactory=function(){return function(ie,ee){return function(te){return te=te===void 0?1:te,te<=0?ie:ee(te-1)}}}(),PropertyInterface=function(){return function(ie,ee){var te={_name:ie};function ne(re){return re=re===void 0?1:re,re<=0?te:ee(re-1)}return ne}}(),EffectsExpressionInterface=function(){var ie={createEffectsInterface:ee};function ee(re,se){if(re.effectsManager){var ae=[],oe=re.data.ef,le,ce=re.effectsManager.effectElements.length;for(le=0;le<ce;le+=1)ae.push(te(oe[le],re.effectsManager.effectElements[le],se,re));var he=re.data.ef||[],fe=function(de){for(le=0,ce=he.length;le<ce;){if(de===he[le].nm||de===he[le].mn||de===he[le].ix)return ae[le];le+=1}return null};return Object.defineProperty(fe,"numProperties",{get:function(){return he.length}}),fe}return null}function te(re,se,ae,oe){function le(de){for(var ge=re.ef,me=0,ve=ge.length;me<ve;){if(de===ge[me].nm||de===ge[me].mn||de===ge[me].ix)return ge[me].ty===5?he[me]:he[me]();me+=1}throw new Error}var ce=propertyGroupFactory(le,ae),he=[],fe,ue=re.ef.length;for(fe=0;fe<ue;fe+=1)re.ef[fe].ty===5?he.push(te(re.ef[fe],se.effectElements[fe],se.effectElements[fe].propertyGroup,oe)):he.push(ne(se.effectElements[fe],re.ef[fe].ty,oe,ce));return re.mn==="ADBE Color Control"&&Object.defineProperty(le,"color",{get:function(){return he[0]()}}),Object.defineProperties(le,{numProperties:{get:function(){return re.np}},_name:{value:re.nm},propertyGroup:{value:ce}}),le.enabled=re.en!==0,le.active=le.enabled,le}function ne(re,se,ae,oe){var le=ExpressionPropertyInterface(re.p);function ce(){return se===10?ae.comp.compInterface(re.p.v):le()}return re.p.setGroupProperty&&re.p.setGroupProperty(PropertyInterface("",oe)),ce}return ie}(),ShapePathInterface=function(){return function(ee,te,ne){var re=te.sh;function se(oe){return oe==="Shape"||oe==="shape"||oe==="Path"||oe==="path"||oe==="ADBE Vector Shape"||oe===2?se.path:null}var ae=propertyGroupFactory(se,ne);return re.setGroupProperty(PropertyInterface("Path",ae)),Object.defineProperties(se,{path:{get:function(){return re.k&&re.getValue(),re}},shape:{get:function(){return re.k&&re.getValue(),re}},_name:{value:ee.nm},ix:{value:ee.ix},propertyIndex:{value:ee.ix},mn:{value:ee.mn},propertyGroup:{value:ne}}),se}}(),ShapeExpressionInterface=function(){function ie(ge,me,ve){var pe=[],ye,_e=ge?ge.length:0;for(ye=0;ye<_e;ye+=1)ge[ye].ty==="gr"?pe.push(te(ge[ye],me[ye],ve)):ge[ye].ty==="fl"?pe.push(ne(ge[ye],me[ye],ve)):ge[ye].ty==="st"?pe.push(ae(ge[ye],me[ye],ve)):ge[ye].ty==="tm"?pe.push(oe(ge[ye],me[ye],ve)):ge[ye].ty==="tr"||(ge[ye].ty==="el"?pe.push(ce(ge[ye],me[ye],ve)):ge[ye].ty==="sr"?pe.push(he(ge[ye],me[ye],ve)):ge[ye].ty==="sh"?pe.push(ShapePathInterface(ge[ye],me[ye],ve)):ge[ye].ty==="rc"?pe.push(fe(ge[ye],me[ye],ve)):ge[ye].ty==="rd"?pe.push(ue(ge[ye],me[ye],ve)):ge[ye].ty==="rp"?pe.push(de(ge[ye],me[ye],ve)):ge[ye].ty==="gf"?pe.push(re(ge[ye],me[ye],ve)):pe.push(se(ge[ye],me[ye])));return pe}function ee(ge,me,ve){var pe,ye=function(Se){for(var be=0,Ee=pe.length;be<Ee;){if(pe[be]._name===Se||pe[be].mn===Se||pe[be].propertyIndex===Se||pe[be].ix===Se||pe[be].ind===Se)return pe[be];be+=1}return typeof Se=="number"?pe[Se-1]:null};ye.propertyGroup=propertyGroupFactory(ye,ve),pe=ie(ge.it,me.it,ye.propertyGroup),ye.numProperties=pe.length;var _e=le(ge.it[ge.it.length-1],me.it[me.it.length-1],ye.propertyGroup);return ye.transform=_e,ye.propertyIndex=ge.cix,ye._name=ge.nm,ye}function te(ge,me,ve){var pe=function(Se){switch(Se){case"ADBE Vectors Group":case"Contents":case 2:return pe.content;default:return pe.transform}};pe.propertyGroup=propertyGroupFactory(pe,ve);var ye=ee(ge,me,pe.propertyGroup),_e=le(ge.it[ge.it.length-1],me.it[me.it.length-1],pe.propertyGroup);return pe.content=ye,pe.transform=_e,Object.defineProperty(pe,"_name",{get:function(){return ge.nm}}),pe.numProperties=ge.np,pe.propertyIndex=ge.ix,pe.nm=ge.nm,pe.mn=ge.mn,pe}function ne(ge,me,ve){function pe(ye){return ye==="Color"||ye==="color"?pe.color:ye==="Opacity"||ye==="opacity"?pe.opacity:null}return Object.defineProperties(pe,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},_name:{value:ge.nm},mn:{value:ge.mn}}),me.c.setGroupProperty(PropertyInterface("Color",ve)),me.o.setGroupProperty(PropertyInterface("Opacity",ve)),pe}function re(ge,me,ve){function pe(ye){return ye==="Start Point"||ye==="start point"?pe.startPoint:ye==="End Point"||ye==="end point"?pe.endPoint:ye==="Opacity"||ye==="opacity"?pe.opacity:null}return Object.defineProperties(pe,{startPoint:{get:ExpressionPropertyInterface(me.s)},endPoint:{get:ExpressionPropertyInterface(me.e)},opacity:{get:ExpressionPropertyInterface(me.o)},type:{get:function(){return"a"}},_name:{value:ge.nm},mn:{value:ge.mn}}),me.s.setGroupProperty(PropertyInterface("Start Point",ve)),me.e.setGroupProperty(PropertyInterface("End Point",ve)),me.o.setGroupProperty(PropertyInterface("Opacity",ve)),pe}function se(){function ge(){return null}return ge}function ae(ge,me,ve){var pe=propertyGroupFactory(Ee,ve),ye=propertyGroupFactory(be,pe);function _e(Pe){Object.defineProperty(be,ge.d[Pe].nm,{get:ExpressionPropertyInterface(me.d.dataProps[Pe].p)})}var xe,Se=ge.d?ge.d.length:0,be={};for(xe=0;xe<Se;xe+=1)_e(xe),me.d.dataProps[xe].p.setGroupProperty(ye);function Ee(Pe){return Pe==="Color"||Pe==="color"?Ee.color:Pe==="Opacity"||Pe==="opacity"?Ee.opacity:Pe==="Stroke Width"||Pe==="stroke width"?Ee.strokeWidth:null}return Object.defineProperties(Ee,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},strokeWidth:{get:ExpressionPropertyInterface(me.w)},dash:{get:function(){return be}},_name:{value:ge.nm},mn:{value:ge.mn}}),me.c.setGroupProperty(PropertyInterface("Color",pe)),me.o.setGroupProperty(PropertyInterface("Opacity",pe)),me.w.setGroupProperty(PropertyInterface("Stroke Width",pe)),Ee}function oe(ge,me,ve){function pe(_e){return _e===ge.e.ix||_e==="End"||_e==="end"?pe.end:_e===ge.s.ix?pe.start:_e===ge.o.ix?pe.offset:null}var ye=propertyGroupFactory(pe,ve);return pe.propertyIndex=ge.ix,me.s.setGroupProperty(PropertyInterface("Start",ye)),me.e.setGroupProperty(PropertyInterface("End",ye)),me.o.setGroupProperty(PropertyInterface("Offset",ye)),pe.propertyIndex=ge.ix,pe.propertyGroup=ve,Object.defineProperties(pe,{start:{get:ExpressionPropertyInterface(me.s)},end:{get:ExpressionPropertyInterface(me.e)},offset:{get:ExpressionPropertyInterface(me.o)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}function le(ge,me,ve){function pe(_e){return ge.a.ix===_e||_e==="Anchor Point"?pe.anchorPoint:ge.o.ix===_e||_e==="Opacity"?pe.opacity:ge.p.ix===_e||_e==="Position"?pe.position:ge.r.ix===_e||_e==="Rotation"||_e==="ADBE Vector Rotation"?pe.rotation:ge.s.ix===_e||_e==="Scale"?pe.scale:ge.sk&&ge.sk.ix===_e||_e==="Skew"?pe.skew:ge.sa&&ge.sa.ix===_e||_e==="Skew Axis"?pe.skewAxis:null}var ye=propertyGroupFactory(pe,ve);return me.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ye)),me.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ye)),me.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ye)),me.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ye)),me.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ye)),me.transform.mProps.sk&&(me.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ye)),me.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ye))),me.transform.op.setGroupProperty(PropertyInterface("Opacity",ye)),Object.defineProperties(pe,{opacity:{get:ExpressionPropertyInterface(me.transform.mProps.o)},position:{get:ExpressionPropertyInterface(me.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(me.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(me.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(me.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(me.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(me.transform.mProps.sa)},_name:{value:ge.nm}}),pe.ty="tr",pe.mn=ge.mn,pe.propertyGroup=ve,pe}function ce(ge,me,ve){function pe(xe){return ge.p.ix===xe?pe.position:ge.s.ix===xe?pe.size:null}var ye=propertyGroupFactory(pe,ve);pe.propertyIndex=ge.ix;var _e=me.sh.ty==="tm"?me.sh.prop:me.sh;return _e.s.setGroupProperty(PropertyInterface("Size",ye)),_e.p.setGroupProperty(PropertyInterface("Position",ye)),Object.defineProperties(pe,{size:{get:ExpressionPropertyInterface(_e.s)},position:{get:ExpressionPropertyInterface(_e.p)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}function he(ge,me,ve){function pe(xe){return ge.p.ix===xe?pe.position:ge.r.ix===xe?pe.rotation:ge.pt.ix===xe?pe.points:ge.or.ix===xe||xe==="ADBE Vector Star Outer Radius"?pe.outerRadius:ge.os.ix===xe?pe.outerRoundness:ge.ir&&(ge.ir.ix===xe||xe==="ADBE Vector Star Inner Radius")?pe.innerRadius:ge.is&&ge.is.ix===xe?pe.innerRoundness:null}var ye=propertyGroupFactory(pe,ve),_e=me.sh.ty==="tm"?me.sh.prop:me.sh;return pe.propertyIndex=ge.ix,_e.or.setGroupProperty(PropertyInterface("Outer Radius",ye)),_e.os.setGroupProperty(PropertyInterface("Outer Roundness",ye)),_e.pt.setGroupProperty(PropertyInterface("Points",ye)),_e.p.setGroupProperty(PropertyInterface("Position",ye)),_e.r.setGroupProperty(PropertyInterface("Rotation",ye)),ge.ir&&(_e.ir.setGroupProperty(PropertyInterface("Inner Radius",ye)),_e.is.setGroupProperty(PropertyInterface("Inner Roundness",ye))),Object.defineProperties(pe,{position:{get:ExpressionPropertyInterface(_e.p)},rotation:{get:ExpressionPropertyInterface(_e.r)},points:{get:ExpressionPropertyInterface(_e.pt)},outerRadius:{get:ExpressionPropertyInterface(_e.or)},outerRoundness:{get:ExpressionPropertyInterface(_e.os)},innerRadius:{get:ExpressionPropertyInterface(_e.ir)},innerRoundness:{get:ExpressionPropertyInterface(_e.is)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}function fe(ge,me,ve){function pe(xe){return ge.p.ix===xe?pe.position:ge.r.ix===xe?pe.roundness:ge.s.ix===xe||xe==="Size"||xe==="ADBE Vector Rect Size"?pe.size:null}var ye=propertyGroupFactory(pe,ve),_e=me.sh.ty==="tm"?me.sh.prop:me.sh;return pe.propertyIndex=ge.ix,_e.p.setGroupProperty(PropertyInterface("Position",ye)),_e.s.setGroupProperty(PropertyInterface("Size",ye)),_e.r.setGroupProperty(PropertyInterface("Rotation",ye)),Object.defineProperties(pe,{position:{get:ExpressionPropertyInterface(_e.p)},roundness:{get:ExpressionPropertyInterface(_e.r)},size:{get:ExpressionPropertyInterface(_e.s)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}function ue(ge,me,ve){function pe(xe){return ge.r.ix===xe||xe==="Round Corners 1"?pe.radius:null}var ye=propertyGroupFactory(pe,ve),_e=me;return pe.propertyIndex=ge.ix,_e.rd.setGroupProperty(PropertyInterface("Radius",ye)),Object.defineProperties(pe,{radius:{get:ExpressionPropertyInterface(_e.rd)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}function de(ge,me,ve){function pe(xe){return ge.c.ix===xe||xe==="Copies"?pe.copies:ge.o.ix===xe||xe==="Offset"?pe.offset:null}var ye=propertyGroupFactory(pe,ve),_e=me;return pe.propertyIndex=ge.ix,_e.c.setGroupProperty(PropertyInterface("Copies",ye)),_e.o.setGroupProperty(PropertyInterface("Offset",ye)),Object.defineProperties(pe,{copies:{get:ExpressionPropertyInterface(_e.c)},offset:{get:ExpressionPropertyInterface(_e.o)},_name:{value:ge.nm}}),pe.mn=ge.mn,pe}return function(ge,me,ve){var pe;function ye(xe){if(typeof xe=="number")return xe=xe===void 0?1:xe,xe===0?ve:pe[xe-1];for(var Se=0,be=pe.length;Se<be;){if(pe[Se]._name===xe)return pe[Se];Se+=1}return null}function _e(){return ve}return ye.propertyGroup=propertyGroupFactory(ye,_e),pe=ie(ge,me,ye.propertyGroup),ye.numProperties=pe.length,ye._name="Contents",ye}}(),TextExpressionInterface=function(){return function(ie){var ee;function te(ne){switch(ne){case"ADBE Text Document":return te.sourceText;default:return null}}return Object.defineProperty(te,"sourceText",{get:function(){ie.textProperty.getValue();var re=ie.textProperty.currentData.t;return(!ee||re!==ee.value)&&(ee=new String(re),ee.value=re||new String(re),Object.defineProperty(ee,"style",{get:function(){return{fillColor:ie.textProperty.currentData.fc}}})),ee}}),te}}();function _typeof(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(te){return typeof te}:_typeof=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof(ie)}var FootageInterface=function(){var ie=function(ne){var re="",se=ne.getFootageData();function ae(){return re="",se=ne.getFootageData(),oe}function oe(le){if(se[le])return re=le,se=se[le],_typeof(se)==="object"?oe:se;var ce=le.indexOf(re);if(ce!==-1){var he=parseInt(le.substr(ce+re.length),10);return se=se[he],_typeof(se)==="object"?oe:se}return""}return ae},ee=function(ne){function re(se){return se==="Outline"?re.outlineInterface():null}return re._name="Outline",re.outlineInterface=ie(ne),re};return function(te){function ne(re){return re==="Data"?ne.dataInterface:null}return ne._name="Data",ne.dataInterface=ee(te),ne}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(ie){return interfaces[ie]||null}var expressionHelpers=function(){function ie(ae,oe,le){oe.x&&(le.k=!0,le.x=!0,le.initiateExpression=ExpressionManager.initiateExpression,le.effectsSequence.push(le.initiateExpression(ae,oe,le).bind(le)))}function ee(ae){return ae*=this.elem.globalData.frameRate,ae-=this.offsetTime,ae!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<ae?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(ae,this._cachingAtTime),this._cachingAtTime.lastFrame=ae),this._cachingAtTime.value}function te(ae){var oe=-.01,le=this.getValueAtTime(ae),ce=this.getValueAtTime(ae+oe),he=0;if(le.length){var fe;for(fe=0;fe<le.length;fe+=1)he+=Math.pow(ce[fe]-le[fe],2);he=Math.sqrt(he)*100}else he=0;return he}function ne(ae){if(this.vel!==void 0)return this.vel;var oe=-.001,le=this.getValueAtTime(ae),ce=this.getValueAtTime(ae+oe),he;if(le.length){he=createTypedArray("float32",le.length);var fe;for(fe=0;fe<le.length;fe+=1)he[fe]=(ce[fe]-le[fe])/oe}else he=(ce-le)/oe;return he}function re(){return this.pv}function se(ae){this.propertyGroup=ae}return{searchExpressions:ie,getSpeedAtTime:te,getVelocityAtTime:ne,getValueAtTime:ee,getStaticValueAtTime:re,setGroupProperty:se}}();function addPropertyDecorator(){function ie(ue,de,ge){if(!this.k||!this.keyframes)return this.pv;ue=ue?ue.toLowerCase():"";var me=this.comp.renderedFrame,ve=this.keyframes,pe=ve[ve.length-1].t;if(me<=pe)return this.pv;var ye,_e;ge?(de?ye=Math.abs(pe-this.elem.comp.globalData.frameRate*de):ye=Math.max(0,pe-this.elem.data.ip),_e=pe-ye):((!de||de>ve.length-1)&&(de=ve.length-1),_e=ve[ve.length-1-de].t,ye=pe-_e);var xe,Se,be;if(ue==="pingpong"){var Ee=Math.floor((me-_e)/ye);if(Ee%2!==0)return this.getValueAtTime((ye-(me-_e)%ye+_e)/this.comp.globalData.frameRate,0)}else if(ue==="offset"){var Pe=this.getValueAtTime(_e/this.comp.globalData.frameRate,0),we=this.getValueAtTime(pe/this.comp.globalData.frameRate,0),Me=this.getValueAtTime(((me-_e)%ye+_e)/this.comp.globalData.frameRate,0),De=Math.floor((me-_e)/ye);if(this.pv.length){for(be=new Array(Pe.length),Se=be.length,xe=0;xe<Se;xe+=1)be[xe]=(we[xe]-Pe[xe])*De+Me[xe];return be}return(we-Pe)*De+Me}else if(ue==="continue"){var ke=this.getValueAtTime(pe/this.comp.globalData.frameRate,0),ze=this.getValueAtTime((pe-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(be=new Array(ke.length),Se=be.length,xe=0;xe<Se;xe+=1)be[xe]=ke[xe]+(ke[xe]-ze[xe])*((me-pe)/this.comp.globalData.frameRate)/5e-4;return be}return ke+(ke-ze)*((me-pe)/.001)}return this.getValueAtTime(((me-_e)%ye+_e)/this.comp.globalData.frameRate,0)}function ee(ue,de,ge){if(!this.k)return this.pv;ue=ue?ue.toLowerCase():"";var me=this.comp.renderedFrame,ve=this.keyframes,pe=ve[0].t;if(me>=pe)return this.pv;var ye,_e;ge?(de?ye=Math.abs(this.elem.comp.globalData.frameRate*de):ye=Math.max(0,this.elem.data.op-pe),_e=pe+ye):((!de||de>ve.length-1)&&(de=ve.length-1),_e=ve[de].t,ye=_e-pe);var xe,Se,be;if(ue==="pingpong"){var Ee=Math.floor((pe-me)/ye);if(Ee%2===0)return this.getValueAtTime(((pe-me)%ye+pe)/this.comp.globalData.frameRate,0)}else if(ue==="offset"){var Pe=this.getValueAtTime(pe/this.comp.globalData.frameRate,0),we=this.getValueAtTime(_e/this.comp.globalData.frameRate,0),Me=this.getValueAtTime((ye-(pe-me)%ye+pe)/this.comp.globalData.frameRate,0),De=Math.floor((pe-me)/ye)+1;if(this.pv.length){for(be=new Array(Pe.length),Se=be.length,xe=0;xe<Se;xe+=1)be[xe]=Me[xe]-(we[xe]-Pe[xe])*De;return be}return Me-(we-Pe)*De}else if(ue==="continue"){var ke=this.getValueAtTime(pe/this.comp.globalData.frameRate,0),ze=this.getValueAtTime((pe+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(be=new Array(ke.length),Se=be.length,xe=0;xe<Se;xe+=1)be[xe]=ke[xe]+(ke[xe]-ze[xe])*(pe-me)/.001;return be}return ke+(ke-ze)*(pe-me)/.001}return this.getValueAtTime((ye-((pe-me)%ye+pe))/this.comp.globalData.frameRate,0)}function te(ue,de){if(!this.k)return this.pv;if(ue=(ue||.4)*.5,de=Math.floor(de||5),de<=1)return this.pv;var ge=this.comp.renderedFrame/this.comp.globalData.frameRate,me=ge-ue,ve=ge+ue,pe=de>1?(ve-me)/(de-1):1,ye=0,_e=0,xe;this.pv.length?xe=createTypedArray("float32",this.pv.length):xe=0;for(var Se;ye<de;){if(Se=this.getValueAtTime(me+ye*pe),this.pv.length)for(_e=0;_e<this.pv.length;_e+=1)xe[_e]+=Se[_e];else xe+=Se;ye+=1}if(this.pv.length)for(_e=0;_e<this.pv.length;_e+=1)xe[_e]/=de;else xe/=de;return xe}function ne(ue){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var de=this._transformCachingAtTime.v;if(de.cloneFromProps(this.pre.props),this.appliedTransformations<1){var ge=this.a.getValueAtTime(ue);de.translate(-ge[0]*this.a.mult,-ge[1]*this.a.mult,ge[2]*this.a.mult)}if(this.appliedTransformations<2){var me=this.s.getValueAtTime(ue);de.scale(me[0]*this.s.mult,me[1]*this.s.mult,me[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var ve=this.sk.getValueAtTime(ue),pe=this.sa.getValueAtTime(ue);de.skewFromAxis(-ve*this.sk.mult,pe*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ye=this.r.getValueAtTime(ue);de.rotate(-ye*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var _e=this.rz.getValueAtTime(ue),xe=this.ry.getValueAtTime(ue),Se=this.rx.getValueAtTime(ue),be=this.or.getValueAtTime(ue);de.rotateZ(-_e*this.rz.mult).rotateY(xe*this.ry.mult).rotateX(Se*this.rx.mult).rotateZ(-be[2]*this.or.mult).rotateY(be[1]*this.or.mult).rotateX(be[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Ee=this.px.getValueAtTime(ue),Pe=this.py.getValueAtTime(ue);if(this.data.p.z){var we=this.pz.getValueAtTime(ue);de.translate(Ee*this.px.mult,Pe*this.py.mult,-we*this.pz.mult)}else de.translate(Ee*this.px.mult,Pe*this.py.mult,0)}else{var Me=this.p.getValueAtTime(ue);de.translate(Me[0]*this.p.mult,Me[1]*this.p.mult,-Me[2]*this.p.mult)}return de}function re(){return this.v.clone(new Matrix)}var se=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(ue,de,ge){var me=se(ue,de,ge);return me.dynamicProperties.length?me.getValueAtTime=ne.bind(me):me.getValueAtTime=re.bind(me),me.setGroupProperty=expressionHelpers.setGroupProperty,me};var ae=PropertyFactory.getProp;PropertyFactory.getProp=function(ue,de,ge,me,ve){var pe=ae(ue,de,ge,me,ve);pe.kf?pe.getValueAtTime=expressionHelpers.getValueAtTime.bind(pe):pe.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(pe),pe.setGroupProperty=expressionHelpers.setGroupProperty,pe.loopOut=ie,pe.loopIn=ee,pe.smooth=te,pe.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(pe),pe.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(pe),pe.numKeys=de.a===1?de.k.length:0,pe.propertyIndex=de.ix;var ye=0;return ge!==0&&(ye=createTypedArray("float32",de.a===1?de.k[0].s.length:de.k.length)),pe._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ye},expressionHelpers.searchExpressions(ue,de,pe),pe.k&&ve.addDynamicProperty(pe),pe};function oe(ue){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),ue*=this.elem.globalData.frameRate,ue-=this.offsetTime,ue!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<ue?this._caching.lastIndex:0,this._cachingAtTime.lastTime=ue,this.interpolateShape(ue,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var le=ShapePropertyFactory.getConstructorFunction(),ce=ShapePropertyFactory.getKeyframedConstructorFunction();function he(){}he.prototype={vertices:function(de,ge){this.k&&this.getValue();var me=this.v;ge!==void 0&&(me=this.getValueAtTime(ge,0));var ve,pe=me._length,ye=me[de],_e=me.v,xe=createSizedArray(pe);for(ve=0;ve<pe;ve+=1)de==="i"||de==="o"?xe[ve]=[ye[ve][0]-_e[ve][0],ye[ve][1]-_e[ve][1]]:xe[ve]=[ye[ve][0],ye[ve][1]];return xe},points:function(de){return this.vertices("v",de)},inTangents:function(de){return this.vertices("i",de)},outTangents:function(de){return this.vertices("o",de)},isClosed:function(){return this.v.c},pointOnPath:function(de,ge){var me=this.v;ge!==void 0&&(me=this.getValueAtTime(ge,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(me));for(var ve=this._segmentsLength,pe=ve.lengths,ye=ve.totalLength*de,_e=0,xe=pe.length,Se=0,be;_e<xe;){if(Se+pe[_e].addedLength>ye){var Ee=_e,Pe=me.c&&_e===xe-1?0:_e+1,we=(ye-Se)/pe[_e].addedLength;be=bez.getPointInSegment(me.v[Ee],me.v[Pe],me.o[Ee],me.i[Pe],we,pe[_e]);break}else Se+=pe[_e].addedLength;_e+=1}return be||(be=me.c?[me.v[0][0],me.v[0][1]]:[me.v[me._length-1][0],me.v[me._length-1][1]]),be},vectorOnPath:function(de,ge,me){de==1?de=this.v.c:de==0&&(de=.999);var ve=this.pointOnPath(de,ge),pe=this.pointOnPath(de+.001,ge),ye=pe[0]-ve[0],_e=pe[1]-ve[1],xe=Math.sqrt(Math.pow(ye,2)+Math.pow(_e,2));if(xe===0)return[0,0];var Se=me==="tangent"?[ye/xe,_e/xe]:[-_e/xe,ye/xe];return Se},tangentOnPath:function(de,ge){return this.vectorOnPath(de,ge,"tangent")},normalOnPath:function(de,ge){return this.vectorOnPath(de,ge,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([he],le),extendPrototype([he],ce),ce.prototype.getValueAtTime=oe,ce.prototype.initiateExpression=ExpressionManager.initiateExpression;var fe=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(ue,de,ge,me,ve){var pe=fe(ue,de,ge,me,ve);return pe.propertyIndex=de.ix,pe.lock=!1,ge===3?expressionHelpers.searchExpressions(ue,de.pt,pe):ge===4&&expressionHelpers.searchExpressions(ue,de.ks,pe),pe.k&&ue.addDynamicProperty(pe),pe}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function ie(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(ee,te){var ne=this.calculateExpression(te);if(ee.t!==ne){var re={};return this.copyData(re,ee),re.t=ne.toString(),re.__complete=!1,re}return ee},TextProperty.prototype.searchProperty=function(){var ee=this.searchKeyframes(),te=this.searchExpressions();return this.kf=ee||te,this.kf},TextProperty.prototype.searchExpressions=ie}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function ie(ee,te){var ne=createNS("feMerge");ne.setAttribute("result",ee);var re,se;for(se=0;se<te.length;se+=1)re=createNS("feMergeNode"),re.setAttribute("in",te[se]),ne.appendChild(re),ne.appendChild(re);return ne}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(ie,ee,te,ne,re){this.filterManager=ee;var se=createNS("feColorMatrix");se.setAttribute("type","matrix"),se.setAttribute("color-interpolation-filters","linearRGB"),se.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=se,se.setAttribute("result",ne+"_tint_1"),ie.appendChild(se),se=createNS("feColorMatrix"),se.setAttribute("type","matrix"),se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),se.setAttribute("result",ne+"_tint_2"),ie.appendChild(se),this.matrixFilter=se;var ae=this.createMergeNode(ne,[re,ne+"_tint_1",ne+"_tint_2"]);ie.appendChild(ae)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,te=this.filterManager.effectElements[1].p.v,ne=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ne+" 0"),this.matrixFilter.setAttribute("values",te[0]-ee[0]+" 0 0 0 "+ee[0]+" "+(te[1]-ee[1])+" 0 0 0 "+ee[1]+" "+(te[2]-ee[2])+" 0 0 0 "+ee[2]+" 0 0 0 1 0")}};function SVGFillFilter(ie,ee,te,ne){this.filterManager=ee;var re=createNS("feColorMatrix");re.setAttribute("type","matrix"),re.setAttribute("color-interpolation-filters","sRGB"),re.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),re.setAttribute("result",ne),ie.appendChild(re),this.matrixFilter=re}SVGFillFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[2].p.v,te=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+ee[0]+" 0 0 0 0 "+ee[1]+" 0 0 0 0 "+ee[2]+" 0 0 0 "+te+" 0")}};function SVGStrokeEffect(ie,ee,te){this.initialized=!1,this.filterManager=ee,this.elem=te,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var ie=this.elem.layerElement.children||this.elem.layerElement.childNodes,ee,te,ne,re;for(this.filterManager.effectElements[1].p.v===1?(re=this.elem.maskManager.masksProperties.length,ne=0):(ne=this.filterManager.effectElements[0].p.v-1,re=ne+1),te=createNS("g"),te.setAttribute("fill","none"),te.setAttribute("stroke-linecap","round"),te.setAttribute("stroke-dashoffset",1),ne;ne<re;ne+=1)ee=createNS("path"),te.appendChild(ee),this.paths.push({p:ee,m:ne});if(this.filterManager.effectElements[10].p.v===3){var se=createNS("mask"),ae=createElementID();se.setAttribute("id",ae),se.setAttribute("mask-type","alpha"),se.appendChild(te),this.elem.globalData.defs.appendChild(se);var oe=createNS("g");for(oe.setAttribute("mask","url("+getLocationHref()+"#"+ae+")");ie[0];)oe.appendChild(ie[0]);this.elem.layerElement.appendChild(oe),this.masker=se,te.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(ie=this.elem.layerElement.children||this.elem.layerElement.childNodes;ie.length;)this.elem.layerElement.removeChild(ie[0]);this.elem.layerElement.appendChild(te),this.elem.layerElement.removeAttribute("mask"),te.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=te},SVGStrokeEffect.prototype.renderFrame=function(ie){this.initialized||this.initialize();var ee,te=this.paths.length,ne,re;for(ee=0;ee<te;ee+=1)if(this.paths[ee].m!==-1&&(ne=this.elem.maskManager.viewData[this.paths[ee].m],re=this.paths[ee].p,(ie||this.filterManager._mdf||ne.prop._mdf)&&re.setAttribute("d",ne.lastPath),ie||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ne.prop._mdf)){var se;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var ae=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,oe=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,le=re.getTotalLength();se="0 0 0 "+le*ae+" ";var ce=le*(oe-ae),he=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,fe=Math.floor(ce/he),ue;for(ue=0;ue<fe;ue+=1)se+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";se+="0 "+le*10+" 0 0"}else se="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;re.setAttribute("stroke-dasharray",se)}if((ie||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(ie||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(ie||this.filterManager.effectElements[3].p._mdf)){var de=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(de[0]*255)+","+bmFloor(de[1]*255)+","+bmFloor(de[2]*255)+")")}};function SVGTritoneFilter(ie,ee,te,ne){this.filterManager=ee;var re=createNS("feColorMatrix");re.setAttribute("type","matrix"),re.setAttribute("color-interpolation-filters","linearRGB"),re.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),ie.appendChild(re);var se=createNS("feComponentTransfer");se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("result",ne),this.matrixFilter=se;var ae=createNS("feFuncR");ae.setAttribute("type","table"),se.appendChild(ae),this.feFuncR=ae;var oe=createNS("feFuncG");oe.setAttribute("type","table"),se.appendChild(oe),this.feFuncG=oe;var le=createNS("feFuncB");le.setAttribute("type","table"),se.appendChild(le),this.feFuncB=le,ie.appendChild(se)}SVGTritoneFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,te=this.filterManager.effectElements[1].p.v,ne=this.filterManager.effectElements[2].p.v,re=ne[0]+" "+te[0]+" "+ee[0],se=ne[1]+" "+te[1]+" "+ee[1],ae=ne[2]+" "+te[2]+" "+ee[2];this.feFuncR.setAttribute("tableValues",re),this.feFuncG.setAttribute("tableValues",se),this.feFuncB.setAttribute("tableValues",ae)}};function SVGProLevelsFilter(ie,ee,te,ne){this.filterManager=ee;var re=this.filterManager.effectElements,se=createNS("feComponentTransfer");(re[10].p.k||re[10].p.v!==0||re[11].p.k||re[11].p.v!==1||re[12].p.k||re[12].p.v!==1||re[13].p.k||re[13].p.v!==0||re[14].p.k||re[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",se)),(re[17].p.k||re[17].p.v!==0||re[18].p.k||re[18].p.v!==1||re[19].p.k||re[19].p.v!==1||re[20].p.k||re[20].p.v!==0||re[21].p.k||re[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",se)),(re[24].p.k||re[24].p.v!==0||re[25].p.k||re[25].p.v!==1||re[26].p.k||re[26].p.v!==1||re[27].p.k||re[27].p.v!==0||re[28].p.k||re[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",se)),(re[31].p.k||re[31].p.v!==0||re[32].p.k||re[32].p.v!==1||re[33].p.k||re[33].p.v!==1||re[34].p.k||re[34].p.v!==0||re[35].p.k||re[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",se)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(se.setAttribute("color-interpolation-filters","sRGB"),ie.appendChild(se)),(re[3].p.k||re[3].p.v!==0||re[4].p.k||re[4].p.v!==1||re[5].p.k||re[5].p.v!==1||re[6].p.k||re[6].p.v!==0||re[7].p.k||re[7].p.v!==1)&&(se=createNS("feComponentTransfer"),se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("result",ne),ie.appendChild(se),this.feFuncRComposed=this.createFeFunc("feFuncR",se),this.feFuncGComposed=this.createFeFunc("feFuncG",se),this.feFuncBComposed=this.createFeFunc("feFuncB",se))}SVGProLevelsFilter.prototype.createFeFunc=function(ie,ee){var te=createNS(ie);return te.setAttribute("type","table"),ee.appendChild(te),te},SVGProLevelsFilter.prototype.getTableValue=function(ie,ee,te,ne,re){for(var se=0,ae=256,oe,le=Math.min(ie,ee),ce=Math.max(ie,ee),he=Array.call(null,{length:ae}),fe,ue=0,de=re-ne,ge=ee-ie;se<=256;)oe=se/256,oe<=le?fe=ge<0?re:ne:oe>=ce?fe=ge<0?ne:re:fe=ne+de*Math.pow((oe-ie)/ge,1/te),he[ue]=fe,ue+=1,se+=256/(ae-1);return he.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee,te=this.filterManager.effectElements;this.feFuncRComposed&&(ie||te[3].p._mdf||te[4].p._mdf||te[5].p._mdf||te[6].p._mdf||te[7].p._mdf)&&(ee=this.getTableValue(te[3].p.v,te[4].p.v,te[5].p.v,te[6].p.v,te[7].p.v),this.feFuncRComposed.setAttribute("tableValues",ee),this.feFuncGComposed.setAttribute("tableValues",ee),this.feFuncBComposed.setAttribute("tableValues",ee)),this.feFuncR&&(ie||te[10].p._mdf||te[11].p._mdf||te[12].p._mdf||te[13].p._mdf||te[14].p._mdf)&&(ee=this.getTableValue(te[10].p.v,te[11].p.v,te[12].p.v,te[13].p.v,te[14].p.v),this.feFuncR.setAttribute("tableValues",ee)),this.feFuncG&&(ie||te[17].p._mdf||te[18].p._mdf||te[19].p._mdf||te[20].p._mdf||te[21].p._mdf)&&(ee=this.getTableValue(te[17].p.v,te[18].p.v,te[19].p.v,te[20].p.v,te[21].p.v),this.feFuncG.setAttribute("tableValues",ee)),this.feFuncB&&(ie||te[24].p._mdf||te[25].p._mdf||te[26].p._mdf||te[27].p._mdf||te[28].p._mdf)&&(ee=this.getTableValue(te[24].p.v,te[25].p.v,te[26].p.v,te[27].p.v,te[28].p.v),this.feFuncB.setAttribute("tableValues",ee)),this.feFuncA&&(ie||te[31].p._mdf||te[32].p._mdf||te[33].p._mdf||te[34].p._mdf||te[35].p._mdf)&&(ee=this.getTableValue(te[31].p.v,te[32].p.v,te[33].p.v,te[34].p.v,te[35].p.v),this.feFuncA.setAttribute("tableValues",ee))}};function SVGDropShadowEffect(ie,ee,te,ne,re){var se=ee.container.globalData.renderConfig.filterSize,ae=ee.data.fs||se;ie.setAttribute("x",ae.x||se.x),ie.setAttribute("y",ae.y||se.y),ie.setAttribute("width",ae.width||se.width),ie.setAttribute("height",ae.height||se.height),this.filterManager=ee;var oe=createNS("feGaussianBlur");oe.setAttribute("in","SourceAlpha"),oe.setAttribute("result",ne+"_drop_shadow_1"),oe.setAttribute("stdDeviation","0"),this.feGaussianBlur=oe,ie.appendChild(oe);var le=createNS("feOffset");le.setAttribute("dx","25"),le.setAttribute("dy","0"),le.setAttribute("in",ne+"_drop_shadow_1"),le.setAttribute("result",ne+"_drop_shadow_2"),this.feOffset=le,ie.appendChild(le);var ce=createNS("feFlood");ce.setAttribute("flood-color","#00ff00"),ce.setAttribute("flood-opacity","1"),ce.setAttribute("result",ne+"_drop_shadow_3"),this.feFlood=ce,ie.appendChild(ce);var he=createNS("feComposite");he.setAttribute("in",ne+"_drop_shadow_3"),he.setAttribute("in2",ne+"_drop_shadow_2"),he.setAttribute("operator","in"),he.setAttribute("result",ne+"_drop_shadow_4"),ie.appendChild(he);var fe=this.createMergeNode(ne,[ne+"_drop_shadow_4",re]);ie.appendChild(fe)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){if((ie||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),ie||this.filterManager.effectElements[0].p._mdf){var ee=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(ee[0]*255),Math.round(ee[1]*255),Math.round(ee[2]*255)))}if((ie||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),ie||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var te=this.filterManager.effectElements[3].p.v,ne=(this.filterManager.effectElements[2].p.v-90)*degToRads,re=te*Math.cos(ne),se=te*Math.sin(ne);this.feOffset.setAttribute("dx",re),this.feOffset.setAttribute("dy",se)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(ie,ee,te){this.initialized=!1,this.filterManager=ee,this.filterElem=ie,this.elem=te,te.matteElement=createNS("g"),te.matteElement.appendChild(te.layerElement),te.matteElement.appendChild(te.transformedElement),te.baseElement=te.matteElement}SVGMatte3Effect.prototype.findSymbol=function(ie){for(var ee=0,te=_svgMatteSymbols.length;ee<te;){if(_svgMatteSymbols[ee]===ie)return _svgMatteSymbols[ee];ee+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(ie,ee){var te=ie.layerElement.parentNode;if(te){for(var ne=te.children,re=0,se=ne.length;re<se&&ne[re]!==ie.layerElement;)re+=1;var ae;re<=se-2&&(ae=ne[re+1]);var oe=createNS("use");oe.setAttribute("href","#"+ee),ae?te.insertBefore(oe,ae):te.appendChild(oe)}},SVGMatte3Effect.prototype.setElementAsMask=function(ie,ee){if(!this.findSymbol(ee)){var te=createElementID(),ne=createNS("mask");ne.setAttribute("id",ee.layerId),ne.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(ee);var re=ie.globalData.defs;re.appendChild(ne);var se=createNS("symbol");se.setAttribute("id",te),this.replaceInParent(ee,te),se.appendChild(ee.layerElement),re.appendChild(se);var ae=createNS("use");ae.setAttribute("href","#"+te),ne.appendChild(ae),ee.data.hd=!1,ee.show()}ie.setMatte(ee.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var ie=this.filterManager.effectElements[0].p.v,ee=this.elem.comp.elements,te=0,ne=ee.length;te<ne;)ee[te]&&ee[te].data.ind===ie&&this.setElementAsMask(this.elem,ee[te]),te+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(ie,ee,te,ne){ie.setAttribute("x","-100%"),ie.setAttribute("y","-100%"),ie.setAttribute("width","300%"),ie.setAttribute("height","300%"),this.filterManager=ee;var re=createNS("feGaussianBlur");re.setAttribute("result",ne),ie.appendChild(re),this.feGaussianBlur=re}SVGGaussianBlurEffect.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=.3,te=this.filterManager.effectElements[0].p.v*ee,ne=this.filterManager.effectElements[1].p.v,re=ne==3?0:te,se=ne==2?0:te;this.feGaussianBlur.setAttribute("stdDeviation",re+" "+se);var ae=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ae)}};function TransformEffect(){}TransformEffect.prototype.init=function(ie){this.effectsManager=ie,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(ie){if(this._opMdf=!1,this._mdf=!1,ie||this.effectsManager._mdf){var ee=this.effectsManager.effectElements,te=ee[0].p.v,ne=ee[1].p.v,re=ee[2].p.v===1,se=ee[3].p.v,ae=re?se:ee[4].p.v,oe=ee[5].p.v,le=ee[6].p.v,ce=ee[7].p.v;this.matrix.reset(),this.matrix.translate(-te[0],-te[1],te[2]),this.matrix.scale(ae*.01,se*.01,1),this.matrix.rotate(-ce*degToRads),this.matrix.skewFromAxis(-oe*degToRads,(le+90)*degToRads),this.matrix.translate(ne[0],ne[1],0),this._mdf=!0,this.opacity!==ee[8].p.v&&(this.opacity=ee[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(ie,ee){this.init(ee)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(ie){this.init(ie)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);class Home{constructor(ee){this.container=ee,this.player=null,this.core=null,this.windowWidth=window.innerWidth,this.raycaster=new Raycaster,this.mouse=new Vector2,this.currentName=null,this.header=this.container.querySelector(".header"),[...this.container.querySelectorAll(".w-condition-invisible")].forEach(ne=>{ne.remove()}),this.init()}init(){this.setupImages(),this.setupVideos(),this.setupEventListeners(),this.setupMouseHover(),lottie.loadAnimation({container:this.container.querySelector(".home-indicator-lottie-wrapper"),renderer:"svg",loop:!1,autoplay:!1,path:"https://uploads-ssl.webflow.com/66a50e6f73ed41b0d65cda81/66be088ed8cdf3532efe6a88_Ka8gov3JNr.json"}),lottie.loadAnimation({container:this.container.querySelector(".home-indicator-lottie-wrapper"),renderer:"svg",loop:!1,autoplay:!1,path:"https://uploads-ssl.webflow.com/66a50e6f73ed41b0d65cda81/66be28d1a741a57883a6587d_PBRH4Lxx8M.json"}),this.animations=lottie.getRegisteredAnimations(),this.animations[0].renderer.svgElement.classList.add("l-image"),this.animations[1].renderer.svgElement.classList.add("l-video"),gsapWithCSS.set(".l-video",{opacity:0}),gsapWithCSS.to(".home-lottie-wrapper",{opacity:1,duration:1,delay:.5})}setupImages(){[...this.container.querySelectorAll("img")].forEach(te=>{let ne=te.getAttribute("src");te.setAttribute("data-src",ne),te.setAttribute("crossorigin","anonymous")})}setupVideos(){[...this.container.querySelectorAll("video")].forEach(te=>{let ne=te.getAttribute("src");te.setAttribute("data-src",ne)})}setupMouseHover(){this.container.addEventListener("mousemove",this.onMouseHover.bind(this)),this.container.addEventListener("touchmove",this.onTouchHover.bind(this),{passive:!0})}onMouseHover(ee){this.mouse.x=ee.clientX/window.innerWidth*2-1,this.mouse.y=-(ee.clientY/window.innerHeight)*2+1,this.handleHover()}onTouchHover(ee){if(ee.touches.length>0){const te=ee.touches[0];this.mouse.x=te.clientX/window.innerWidth*2-1,this.mouse.y=-(te.clientY/window.innerHeight)*2+1,this.handleHover()}}handleHover(){this.raycaster.setFromCamera(this.mouse,this.core.camera);const ee=this.raycaster.intersectObjects(this.core.scene.children,!0);if(ee.length>0){const te=ee[0].object.parent;if(te instanceof Plane){if(this.currentName===te.userData.name)return;te.el.tagName==="VIDEO"?(gsapWithCSS.set(".home-indicator-lottie-wrapper svg:nth-child(2)",{opacity:1,overwrite:!0}),gsapWithCSS.set(".home-indicator-lottie-wrapper svg:nth-child(1)",{opacity:0,overwrite:!0})):(gsapWithCSS.set(".home-indicator-lottie-wrapper svg:nth-child(2)",{opacity:0,overwrite:!0}),gsapWithCSS.set(".home-indicator-lottie-wrapper svg:nth-child(1)",{opacity:1,overwrite:!0})),this.animations.forEach(ne=>{ne.setSpeed(3),ne.playSegments([0,100])}),gsapWithCSS.to(".home-indicator-name",{opacity:0,duration:.1,onComplete:()=>{document.querySelector(".home-indicator-name").textContent=te.userData.name}}),gsapWithCSS.to(".home-indicator-name",{opacity:1,duration:.1,delay:.1}),this.currentName=te.userData.name}}}setupEventListeners(){this.onWindowLoad(),window.addEventListener("resize",()=>this.onWindowResize())}onWindowLoad(){this.createCanvas()}onWindowResize(){this.core.resize()}createCanvas(){navigator.userAgent.indexOf("Firefox")>-1;const ee=navigator.appVersion.indexOf("Win")!==-1,te=.6,ne=20,re={mouse:ee?te*2:te,firefox:ee?ne*2:ne};this.core=new Core(re,this.container)}}class Core{constructor(ee,te){li(this,"tick",()=>{const ee=this.tx-this.cx,te=this.ty-this.cy;this.cx+=ee*.085,this.cx=Math.round(this.cx*100)/100,this.cy+=te*.085,this.cy=Math.round(this.cy*100)/100,this.diff=Math.max(Math.abs(te*1e-4),Math.abs(ee*1e-4)),this.planes.length&&this.planes.forEach(ne=>ne.update(this.cx,this.cy,this.max,this.diff)),this.renderer.render(this.scene,this.camera)});li(this,"onMouseMove",({clientX:ee,clientY:te})=>{this.isDragging&&(this.tx=this.on.x+ee*2.5,this.ty=this.on.y-te*2.5)});li(this,"onMouseDown",({clientX:ee,clientY:te})=>{this.isDragging||(this.isDragging=!0,this.on.x=this.tx-ee*2.5,this.on.y=this.ty+te*2.5)});li(this,"onMouseUp",()=>{this.isDragging&&(this.isDragging=!1)});li(this,"onTouchStart",({touches:ee})=>{if(this.isDragging)return;const te=ee[0];this.isDragging=!0,this.on.x=this.tx-te.clientX*2.5,this.on.y=this.ty+te.clientY*2.5});li(this,"onTouchMove",({touches:ee})=>{if(!this.isDragging)return;const te=ee[0];this.tx=this.on.x+te.clientX*2.5,this.ty=this.on.y-te.clientY*2.5});li(this,"onTouchEnd",()=>{this.isDragging&&(this.isDragging=!1)});li(this,"onWheel",ee=>{const{mouse:te,firefox:ne}=this.multipliers;this.wheel.x=ee.wheelDeltaX||ee.deltaX*-1,this.wheel.y=ee.wheelDeltaY||ee.deltaY*-1,this.isFirefox&&ee.deltaMode===1&&(this.wheel.x*=ne,this.wheel.y*=ne),this.wheel.y*=te,this.wheel.x*=te,this.tx+=this.wheel.x,this.ty-=this.wheel.y});li(this,"onClick",ee=>{this.mouse.x=ee.clientX/this.ww*2-1,this.mouse.y=-(ee.clientY/this.wh)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const te=this.raycaster.intersectObjects(this.scene.children,!0);if(te.length>0){let ne=te[0].object;for(;ne&&!(ne instanceof Plane);)ne=ne.parent;if(ne&&ne instanceof Plane){const re=ne.userData.index;this.itemLinks[re]&&this.itemLinks[re].click()}}});li(this,"moveHomeIndicator",ee=>{const{clientX:te,clientY:ne}=ee,{innerWidth:re,innerHeight:se}=window,ae=te/re*100,oe=ne/se*100;this.quickSetter||(this.quickSetter=gsapWithCSS.quickSetter(this.homeIndicator,"css")),this.quickSetter({x:`${ae-47}vw`,y:`${oe-47}vh`})});li(this,"resize",()=>{this.ww=window.innerWidth,this.wh=window.innerHeight,this.camera.left=this.ww/-2,this.camera.right=this.ww/2,this.camera.top=this.wh/2,this.camera.bottom=this.wh/-2,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.ww,this.wh);const{bottom:ee,right:te}=this.el.getBoundingClientRect();this.max.x=te,this.max.y=ee,this.planes.forEach(ne=>ne.resize())});this.multipliers=ee,this.container=te,this.items=[...this.container.querySelectorAll(".home-cc-item")],this.itemLinks=this.items.map(ne=>ne.querySelector("a")),this.itemNames=this.items.map(ne=>ne.querySelector(".h-name").textContent),this.tx=0,this.ty=0,this.cx=0,this.cy=0,this.ww=window.innerWidth,this.wh=window.innerHeight,this.isFirefox=navigator.userAgent.indexOf("Firefox")>-1,this.isWindows=navigator.appVersion.indexOf("Win")!==-1,this.diff=0,this.wheel={x:0,y:0},this.on={x:0,y:0},this.max={x:0,y:0},this.isDragging=!1,this.tl=gsapWithCSS.timeline({paused:!0}),this.el=document.querySelector(".grid"),this.scene=new Scene,this.camera=new OrthographicCamera(this.ww/-2,this.ww/2,this.wh/2,this.wh/-2,1,1e3),this.camera.lookAt(this.scene.position),this.camera.position.z=1,this.renderer=new WebGLRenderer({antialias:!0}),this.renderer.setSize(this.ww,this.wh),this.renderer.setPixelRatio(gsapWithCSS.utils.clamp(1,1.5,window.devicePixelRatio)),this.container.appendChild(this.renderer.domElement),this.homeIndicator=this.container.querySelector(".home-indicator"),this.raycaster=new Raycaster,this.mouse=new Vector2,this.addPlanes(),this.addEvents(),this.resize()}addEvents(){gsapWithCSS.ticker.add(this.tick),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mousemove",this.moveHomeIndicator),window.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("wheel",this.onWheel),window.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),this.renderer.domElement.addEventListener("click",this.onClick),this.container.querySelector(".header").addEventListener("mouseenter",()=>{gsapWithCSS.to(".home-indicator",{opacity:0,duration:.5,overwrite:!0})}),this.container.querySelector(".header").addEventListener("mouseleave",()=>{gsapWithCSS.to(".home-indicator",{opacity:1,duration:.5,overwrite:!0})})}addPlanes(){const ee=[...this.container.querySelectorAll(".js-plane")];this.planes=ee.map((te,ne)=>{const re=new Plane;return re.userData.name=this.itemNames[ne],re.userData.index=ne,re.init(te,ne),this.scene.add(re),te.tagName.toLowerCase()==="video"&&te.play().catch(se=>console.error("Error playing video:",se)),re})}}class Plane extends Object3D{constructor(){super(),this.loader=new TextureLoader,this.geometry=new PlaneGeometry(1,1,1,1),this.material=this.createMaterial()}init(ee,te){this.el=ee,this.x=0,this.y=0,this.my=1-te%5*.1,this.setupTexture(),this.mesh=new Mesh(this.geometry,this.material),this.add(this.mesh),this.resize()}createMaterial(){return new ShaderMaterial({vertexShader:`
                precision mediump float;
                uniform float u_diff;
                varying vec2 vUv;
                void main() {
                    vec3 pos = position;
                    pos.y *= 1. - u_diff;
                    pos.x *= 1. - u_diff;
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.);
                }
            `,fragmentShader:`
                precision mediump float;
                uniform vec2 u_res;
                uniform vec2 u_size;
                uniform sampler2D u_texture;
                vec2 cover(vec2 screenSize, vec2 imageSize, vec2 uv) {
                    float screenRatio = screenSize.x / screenSize.y;
                    float imageRatio = imageSize.x / imageSize.y;
                    vec2 newSize = screenRatio < imageRatio
                        ? vec2(imageSize.x * (screenSize.y / imageSize.y), screenSize.y)
                        : vec2(screenSize.x, imageSize.y * (screenSize.x / imageSize.x));
                    vec2 newOffset = (screenRatio < imageRatio
                        ? vec2((newSize.x - screenSize.x) / 2.0, 0.0)
                        : vec2(0.0, (newSize.y - screenSize.y) / 2.0)) / newSize;
                    return uv * screenSize / newSize + newOffset;
                }
                varying vec2 vUv;
                void main() {
                    vec2 uv = vUv;
                    vec2 uvCover = cover(u_res, u_size, uv);
                    vec4 texture = texture2D(u_texture, uvCover);
                    gl_FragColor = texture;
                }
            `,uniforms:{u_texture:{value:0},u_res:{value:new Vector2(1,1)},u_size:{value:new Vector2(1,1)},u_diff:{value:0}}})}setupTexture(){this.el.dataset.src&&(this.el.tagName==="VIDEO"?this.setupVideoTexture():this.setupImageTexture())}setupVideoTexture(){this.video=this.el,this.video.crossOrigin="anonymous",this.video.load(),this.video.muted=!0,this.video.loop=!0,this.texture=new VideoTexture(this.video),this.texture.minFilter=LinearFilter,this.texture.magFilter=LinearFilter,this.texture.format=RGBAFormat,this.texture.encoding=void 0;const{u_texture:ee,u_size:te}=this.material.uniforms;ee.value=this.texture,this.video.addEventListener("loadedmetadata",()=>{te.value.set(this.video.videoWidth,this.video.videoHeight),this.video.play()})}setupImageTexture(){this.texture=this.loader.load(this.el.dataset.src,ee=>{ee.minFilter=LinearFilter,ee.generateMipmaps=!1;const{naturalWidth:te,naturalHeight:ne}=ee.image,{u_size:re,u_texture:se}=this.material.uniforms;se.value=ee,re.value.x=te,re.value.y=ne})}update(ee,te,ne,re){const{right:se,bottom:ae}=this.rect,{u_diff:oe}=this.material.uniforms;this.y=gsapWithCSS.utils.wrap(-(ne.y-ae),ae,te*this.my)-this.yOffset,this.x=gsapWithCSS.utils.wrap(-(ne.x-se),se,ee)-this.xOffset,oe.value=re,this.position.x=this.x,this.position.y=this.y,this.texture&&this.texture.isVideoTexture&&this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.texture.needsUpdate=!0)}resize(){this.rect=this.el.getBoundingClientRect();const{left:ee,top:te,width:ne,height:re}=this.rect,{u_res:se}=this.material.uniforms;this.xOffset=ee+ne/2-window.innerWidth/2,this.yOffset=te+re/2-window.innerHeight/2,this.position.x=this.xOffset,this.position.y=this.yOffset,se.value.x=ne,se.value.y=re,this.mesh.scale.set(ne,re,1)}}class FontLoader extends Loader{constructor(ee){super(ee)}load(ee,te,ne,re){const se=this,ae=new FileLoader(this.manager);ae.setPath(this.path),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(ee,function(oe){const le=se.parse(JSON.parse(oe));te&&te(le)},ne,re)}parse(ee){return new Font(ee)}}class Font{constructor(ee){this.isFont=!0,this.type="Font",this.data=ee}generateShapes(ee,te=100){const ne=[],re=createPaths(ee,te,this.data);for(let se=0,ae=re.length;se<ae;se++)ne.push(...re[se].toShapes());return ne}}function createPaths(ie,ee,te){const ne=Array.from(ie),re=ee/te.resolution,se=(te.boundingBox.yMax-te.boundingBox.yMin+te.underlineThickness)*re,ae=[];let oe=0,le=0;for(let ce=0;ce<ne.length;ce++){const he=ne[ce];if(he===`
`)oe=0,le-=se;else{const fe=createPath(he,re,oe,le,te);oe+=fe.offsetX,ae.push(fe.path)}}return ae}function createPath(ie,ee,te,ne,re){const se=re.glyphs[ie]||re.glyphs["?"];if(!se){console.error('THREE.Font: character "'+ie+'" does not exists in font family '+re.familyName+".");return}const ae=new ShapePath;let oe,le,ce,he,fe,ue,de,ge;if(se.o){const me=se._cachedOutline||(se._cachedOutline=se.o.split(" "));for(let ve=0,pe=me.length;ve<pe;)switch(me[ve++]){case"m":oe=me[ve++]*ee+te,le=me[ve++]*ee+ne,ae.moveTo(oe,le);break;case"l":oe=me[ve++]*ee+te,le=me[ve++]*ee+ne,ae.lineTo(oe,le);break;case"q":ce=me[ve++]*ee+te,he=me[ve++]*ee+ne,fe=me[ve++]*ee+te,ue=me[ve++]*ee+ne,ae.quadraticCurveTo(fe,ue,ce,he);break;case"b":ce=me[ve++]*ee+te,he=me[ve++]*ee+ne,fe=me[ve++]*ee+te,ue=me[ve++]*ee+ne,de=me[ve++]*ee+te,ge=me[ve++]*ee+ne,ae.bezierCurveTo(fe,ue,de,ge,ce,he);break}}return{offsetX:se.ha*ee,path:ae}}class TextGeometry extends ExtrudeGeometry{constructor(ee,te={}){const ne=te.font;if(ne===void 0)super();else{const re=ne.generateShapes(ee,te.size);te.depth===void 0&&te.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),te.depth=te.depth!==void 0?te.depth:te.height!==void 0?te.height:50,te.bevelThickness===void 0&&(te.bevelThickness=10),te.bevelSize===void 0&&(te.bevelSize=8),te.bevelEnabled===void 0&&(te.bevelEnabled=!1),super(re,te)}this.type="TextGeometry"}}gsapWithCSS.registerPlugin(ScrollTrigger$1);class MotionListing{constructor(ee){this.container=ee,this.DEGREE_2_RADIAN=.017453292519943295,this.items=[...this.container.querySelectorAll(".motion-visual-item")],this.totalItems=this.items.length,this.minItems=10,this.mainContainer=this.container.querySelector(".motion-canvas"),this.repetitions=this.calculateRepetitions(this.totalItems,this.minItems),this.objects=[],this.videoTextures=[],this.o={currentPlaneIndex:0},this.prevProgress=0,this.totalRotations=0,this.raycaster=new Raycaster,this.mouse=new Vector2,this.hoveredMesh=null,this.addClickListener(),this.loadFont(),this.updateDimensions(),window.addEventListener("resize",this.onWindowResize.bind(this))}loadFont(){new FontLoader().load("https://cdn.shopify.com/s/files/1/0831/6996/8410/files/Kaneda_Gothic_Black_Regular.json?v=1713957257",te=>{this.font=te,this.initScene(),this.createObjects(),this.setupScrollTrigger(),this.render(),window.scrollTo(0,1),gsapWithCSS.to(".motion-visual-name-wrapper",{opacity:1,delay:1})})}updateDimensions(){this.RADIUS=window.innerWidth>767?window.innerWidth>1e3?450:window.innerWidth/2.5:275,this.planeWidth=window.innerWidth>767?window.innerWidth*.35:window.innerWidth*.8,this.planeHeight=this.planeWidth*(318/512),this.textSize=window.innerWidth*.025}onWindowResize(){this.updateDimensions(),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.updateObjectsSize()}updateObjectsSize(){this.objects.forEach(ee=>{ee.geometry.dispose(),ee.geometry=new PlaneGeometry(this.planeWidth,this.planeHeight);const te=ee.children.find(ne=>ne.userData.isTextMesh);te&&(te.geometry.dispose(),te.geometry=new TextGeometry("PLAY",{font:this.font,size:this.textSize,height:0,curveSegments:70,depth:5}),te.geometry.center())}),this.redraw()}calculateRepetitions(ee,te){return Math.ceil(te/ee)}initScene(){this.scene=new Scene,this.camera=new PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,3e3),this.camera.position.z=1500,this.renderer=new WebGLRenderer({antialiasing:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.outputColorSpace=SRGBColorSpace,this.mainContainer.appendChild(this.renderer.domElement)}createObjects(){const ee=[];for(let te=0;te<this.totalItems;te++){const ne=new PlaneGeometry(this.planeWidth,this.planeHeight),re=this.items[te].querySelector("video"),se=this.createVideoTexture(re),ae=new MeshBasicMaterial({map:se,side:DoubleSide,transparent:!1}),oe=new Mesh(ne,ae);oe.userData={slug:this.items[te].dataset.url};const le=new TextGeometry("PLAY",{font:this.font,size:this.textSize,height:0,curveSegments:70,depth:5});le.center();const ce=new MeshBasicMaterial({color:"#D9D9D9",transparent:!1}),he=new Mesh(le,ce);he.position.set(0,0,1),he.visible=!1,he.renderOrder=1,he.userData.isTextMesh=!0,oe.add(he),ee.push(oe),this.videoTextures.push(se)}for(let te=0;te<this.repetitions;te++)for(let ne=0;ne<this.totalItems;ne++){const re=ee[ne].clone();this.objects.push(re),this.scene.add(re)}this.mainContainer.addEventListener("mousemove",this.onMouseMove.bind(this)),this.mainContainer.addEventListener("mouseout",this.onMouseOut.bind(this))}createVideoTexture(ee){const te=new VideoTexture(ee);return te.minFilter=LinearFilter,te.magFilter=LinearFilter,te.format=RGBFormat,te.colorSpace=SRGBColorSpace,ee.loop=!0,ee.muted=!0,ee.play(),te}shiftToItem(ee){gsapWithCSS.to(this.o,{duration:.8,overwrite:!0,currentPlaneIndex:ee,ease:"power3.out",onUpdate:()=>this.redraw()})}redraw(){const{length:ee}=this.objects;let te=this.o.currentPlaneIndex%ee;te<0&&(te+=ee);for(let ne=0;ne<ee;ne++){const re=this.objects[ne],se=this.coverFlowStyleVectical(ne,te,ee);re.position.x=se.x,re.position.y=se.y,re.position.z=se.z,re.rotation.x=se.rotationX,re.visible=se.visible,re.material.opacity=se.alpha,re.index=ne}}coverFlowStyleVectical(ee,te,ne){const re={x:0,y:0,z:0,rotationX:0},se=this.getDistance(ee,te,ne),ae=Math.abs(se),oe=this.getFraction(ee,te,ne),le=Math.PI*2/ne,ce=se*le+-270*this.DEGREE_2_RADIAN,he=Math.cos(ce)*this.RADIUS,fe=Math.sin(ce)*this.RADIUS;return re.rotationX=ce,re.x=0,re.y=he,re.z=fe,re.alpha=1-Math.abs(oe),re.visible=ae<3,ae<1&&(re.rotationX+=(1-ae)*-90*this.DEGREE_2_RADIAN,re.z+=(1-ae)*-20),re}getFraction(ee,te,ne){let re=ee-te;for(re/=ne/2;re<-1;)re+=2;for(;re>1;)re-=2;return re}getDistance(ee,te,ne){let re=ee-te;return re>ne/2&&(re-=ne),re<-ne/2&&(re+=ne),re}setupScrollTrigger(){const ee=this.objects.length;ScrollTrigger$1.create({trigger:".scroll-dist",start:"top top",end:"bottom bottom",onUpdate:te=>{const ne=te.progress;this.prevProgress>.8&&ne<.2?this.totalRotations++:this.prevProgress<.2&&ne>.8&&this.totalRotations--,this.prevProgress=ne;const re=(this.totalRotations+ne)*ee;this.shiftToItem(re);const se=re%this.totalItems/this.totalItems;this.updateNamePositions(se,this.totalItems)}})}updateNamePositions(ee,te){const se=Math.floor(1.5);gsapWithCSS.to(".motion-visual-name-item",{y:ae=>{let oe=ee*te,le=(ae-oe+te)%te;return le>te/2&&(le-=te),-le*100},opacity:ae=>{let oe=ee*te,le=(ae-oe+te)%te;le>te/2&&(le-=te);let ce=Math.abs(le);return 1-Math.min(ce/se,1)},ease:"none",duration:.1})}onMouseMove(ee){const te=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(ee.clientX-te.left)/te.width*2-1,this.mouse.y=-((ee.clientY-te.top)/te.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const ne=this.raycaster.intersectObjects(this.objects,!0).filter(re=>!re.object.userData.isTextMesh);if(ne.length>0){const re=ne[0].object;document.body.style.cursor="pointer",this.hoveredMesh!==re&&(this.hoveredMesh&&this.hideTextMesh(this.hoveredMesh),this.hoveredMesh=re,this.showTextMesh(this.hoveredMesh))}else this.hoveredMesh&&(this.hideTextMesh(this.hoveredMesh),this.hoveredMesh=null,document.body.style.cursor="default")}onMouseOut(){this.hoveredMesh&&(this.hideTextMesh(this.hoveredMesh),this.hoveredMesh=null,document.body.style.cursor="default")}showTextMesh(ee){const te=ee.children.find(ne=>ne.userData.isTextMesh);te&&(te.visible=!0)}hideTextMesh(ee){const te=ee.children.find(ne=>ne.userData.isTextMesh);te&&(te.visible=!1)}addClickListener(){this.mainContainer.addEventListener("click",this.onCanvasClick.bind(this))}onCanvasClick(ee){const te=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(ee.clientX-te.left)/te.width*2-1,this.mouse.y=-((ee.clientY-te.top)/te.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const ne=this.raycaster.intersectObjects(this.objects,!0).filter(re=>!re.object.userData.isTextMesh);if(ne.length>0){const re=ne[0].object;this.triggerLinkClick(re)}}triggerLinkClick(ee){const te=ee.index%this.totalItems,re=this.items[te].querySelector("a");if(re){const se=window.innerWidth,ae=window.innerHeight,oe=ee.geometry.parameters.width,le=ee.geometry.parameters.height,ce=se/oe,he=ae/le,fe=Math.max(ce,he);ee.position.clone(),ee.scale.clone(),gsapWithCSS.to(".motion-listing-wrapper",{opacity:0,duration:.1}),this.hideTextMesh(ee),this.objects.forEach(ue=>{ue!==ee&&(gsapWithCSS.to(ue,{opacity:0,duration:.1,ease:"power2.inOut",onComplete:()=>{ue.visible=!1}}),gsapWithCSS.to(ue.scale,{x:0,y:0,z:0,duration:.1,ease:"power2.inOut"}))}),gsapWithCSS.to(ee.position,{x:0,y:0,z:this.camera.position.z-900,duration:1,ease:"power2.inOut"}),gsapWithCSS.to(ee.scale,{x:fe,y:fe,z:fe,rotate:0,duration:1,ease:"power2.inOut"}),gsapWithCSS.to(ee.rotation,{x:-3.14*2,duration:1.2,ease:"power2.inOut",onComplete:()=>{re.click()}})}else console.warn(`No link found for item at index ${te}`)}render(){requestAnimationFrame(()=>this.render()),this.videoTextures.forEach(ee=>{ee.image.readyState===ee.image.HAVE_ENOUGH_DATA&&(ee.needsUpdate=!0)}),this.renderer.render(this.scene,this.camera)}}gsapWithCSS.config({nullTargetWarn:!1});let lenis;function setupLenis(){lenis=new Lenis({duration:1.2,easing:ee=>Math.min(1,1.001-Math.pow(2,-10*ee)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,syncTouch:!1,infinite:!1});const ie=ee=>{lenis.raf(ee),requestAnimationFrame(ie)};requestAnimationFrame(ie)}function setupLenisInfinite(){lenis=new Lenis({duration:1.2,easing:ee=>Math.min(1,1.001-Math.pow(2,-10*ee)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,syncTouch:!1,infinite:!0});const ie=ee=>{lenis.raf(ee),requestAnimationFrame(ie)};requestAnimationFrame(ie)}function resetWebflow(ie){const te=new DOMParser().parseFromString(ie.next.html,"text/html"),ne=te.querySelector("html").getAttribute("data-wf-page"),re=te.querySelector("html").getAttribute("data-wf-site");document.querySelector("html").setAttribute("data-wf-page",ne),window.Webflow&&(window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("commerce").init({siteId:re}),window.Webflow.require("ix2").init())}Z.hooks.beforeLeave(ie=>{ScrollTrigger$1.killAll(),gsapWithCSS.getTweensOf(ie.current.container.querySelectorAll("*")).forEach(ee=>{ee.revert(),ee.kill()}),ScrollTrigger$1.clearScrollMemory()}),Z.hooks.enter(ie=>{gsapWithCSS.set([ie.next.container,ie.current.container],{position:"fixed",top:0,left:0,width:"100%",height:"100vh"})}),Z.hooks.after(ie=>{gsapWithCSS.set(ie.next.container,{position:"relative",height:"auto",clearProps:"all"}),resetWebflow(ie),ScrollTrigger$1.refresh()});let firstLoad=!0,stillListingInstance;Z.init({preventRunning:!0,views:[{namespace:"home",afterEnter(ie){new Home(ie.next.container),firstLoad&&!sessionStorage.getItem("firstLoad")&&(firstLoad=!1),new Nav(ie.next.container),setupLenis()}},{namespace:"motion",afterEnter(ie){new Motion(ie.next.container),new Nav(ie.next.container),setupLenis()}},{namespace:"stills",afterEnter(ie){new Nav(ie.next.container),new Still(ie.next.container),setupLenis()}},{namespace:"info",afterEnter(ie){new Nav(ie.next.container),new Info(ie.next.container),setupLenis()}},{namespace:"stills-listing",afterEnter(ie){new Nav(ie.next.container),stillListingInstance=new StillListing(ie.next.container),setupLenisInfinite()}},{namespace:"motion-listing",afterEnter(ie){new Nav(ie.next.container),new MotionListing(ie.next.container),setupLenisInfinite()}},{namespace:"diary",afterEnter(ie){new Nav(ie.next.container),new Diary(ie.next.container),setupLenis()}},{namespace:"404",afterEnter(ie){new NotFound(ie.next.container)}}],transitions:[{name:"still-listing-to-still",from:{namespace:["stills-listing"]},to:{namespace:["stills"]},async leave(ie){const ee=stillListingInstance.getClickedImageIndex();ie.clickedImageIndex=ee,await stillListingInstance.prepareForTransition(ee)},async enter(ie){const ee=ie.next.container.querySelector(".still-intro-image");if(gsapWithCSS.set(ie.next.container,{opacity:0}),!ee){console.error("still-intro-image not found in the new page");return}const te=ee.getBoundingClientRect();await stillListingInstance.transitionToStillsPage(ie.clickedImageIndex,te),gsapWithCSS.to(ie.next.container,{opacity:1,duration:1,onComplete:()=>{ie.current.container.remove(),stillListingInstance.cleanupAfterTransition()}})}},{sync:!0,enter(ie){const ee=ie.next.container;let te=gsapWithCSS.timeline({defaults:{ease:"expo.out",onComplete:()=>{ScrollTrigger$1.refresh()}}});return te.from(ee,{clipPath:"inset(100% 0 0 0)",duration:1},"<"),te}}]})});
